"use strict";(self.webpackChunkpm_portfolio=self.webpackChunkpm_portfolio||[]).push([[179],{280:()=>{function wn(i){return"function"==typeof i}function sf(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const dm=sf(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function af(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class Ur{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(wn(n))try{n()}catch(s){e=s instanceof dm?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{t1(s)}catch(o){e=e??[],o instanceof dm?e=[...e,...o.errors]:e.push(o)}}if(e)throw new dm(e)}}add(e){var t;if(e&&e!==this)if(this.closed)t1(e);else{if(e instanceof Ur){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&af(t,e)}remove(e){const{_finalizers:t}=this;t&&af(t,e),e instanceof Ur&&e._removeParent(this)}}Ur.EMPTY=(()=>{const i=new Ur;return i.closed=!0,i})();const QA=Ur.EMPTY;function e1(i){return i instanceof Ur||i&&"closed"in i&&wn(i.remove)&&wn(i.add)&&wn(i.unsubscribe)}function t1(i){wn(i)?i():i.unsubscribe()}const sc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},hm={setTimeout(i,e,...t){const{delegate:n}=hm;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=hm;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function n1(i){hm.setTimeout(()=>{const{onUnhandledError:e}=sc;if(!e)throw i;e(i)})}function i1(){}const aH=oM("C",void 0,void 0);function oM(i,e,t){return{kind:i,value:e,error:t}}let oc=null;function fm(i){if(sc.useDeprecatedSynchronousErrorHandling){const e=!oc;if(e&&(oc={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=oc;if(oc=null,t)throw n}}else i()}class aM extends Ur{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,e1(e)&&e.add(this)):this.destination=pH}static create(e,t,n){return new lf(e,t,n)}next(e){this.isStopped?cM(function cH(i){return oM("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?cM(function lH(i){return oM("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cM(aH,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dH=Function.prototype.bind;function lM(i,e){return dH.call(i,e)}class hH{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){pm(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){pm(n)}else pm(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pm(t)}}}class lf extends aM{constructor(e,t,n){let r;if(super(),wn(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&sc.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&lM(e.next,s),error:e.error&&lM(e.error,s),complete:e.complete&&lM(e.complete,s)}):r=e}this.destination=new hH(r)}}function pm(i){sc.useDeprecatedSynchronousErrorHandling?function uH(i){sc.useDeprecatedSynchronousErrorHandling&&oc&&(oc.errorThrown=!0,oc.error=i)}(i):n1(i)}function cM(i,e){const{onStoppedNotification:t}=sc;t&&hm.setTimeout(()=>t(i,e))}const pH={closed:!0,next:i1,error:function fH(i){throw i},complete:i1},uM="function"==typeof Symbol&&Symbol.observable||"@@observable";function ac(i){return i}function r1(i){return 0===i.length?ac:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}let Kn=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const s=function _H(i){return i&&i instanceof aM||function mH(i){return i&&wn(i.next)&&wn(i.error)&&wn(i.complete)}(i)&&e1(i)}(t)?t:new lf(t,n,r);return fm(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=s1(n))((r,s)=>{const o=new lf({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[uM](){return this}pipe(...t){return r1(t)(this)}toPromise(t){return new(t=s1(t))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=e=>new i(e),i})();function s1(i){var e;return null!==(e=i??sc.Promise)&&void 0!==e?e:Promise}const yH=sf(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ua=(()=>{class i extends Kn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new o1(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new yH}next(t){fm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){fm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){fm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:s}=this;return n||r?QA:(this.currentObservers=null,s.push(t),new Ur(()=>{this.currentObservers=null,af(s,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:s}=this;n?t.error(r):s&&t.complete()}asObservable(){const t=new Kn;return t.source=this,t}}return i.create=(e,t)=>new o1(e,t),i})();class o1 extends ua{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:QA}}function a1(i){return wn(i?.lift)}function Ri(i){return e=>{if(a1(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function yi(i,e,t,n,r){return new vH(i,e,t,n,r)}class vH extends aM{constructor(e,t,n,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function xt(i,e){return Ri((t,n)=>{let r=0;t.subscribe(yi(n,s=>{n.next(i.call(e,s,r++))}))})}function al(i){return this instanceof al?(this.v=i,this):new al(i)}function d1(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function pM(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const h1=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function f1(i){return wn(i?.then)}function p1(i){return wn(i[uM])}function g1(i){return Symbol.asyncIterator&&wn(i?.[Symbol.asyncIterator])}function m1(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _1=function $H(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function y1(i){return wn(i?.[_1])}function v1(i){return function u1(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(i,e||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(h){return function(p){return Promise.resolve(p).then(h,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,p){n[h]&&(r[h]=function(g){return new Promise(function(m,_){s.push([h,g,m,_])>1||l(h,g)})},p&&(r[h]=p(r[h])))}function l(h,p){try{!function c(h){h.value instanceof al?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}(n[h](p))}catch(g){f(s[0][3],g)}}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,p){h(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:r}=yield al(t.read());if(r)return yield al(void 0);yield yield al(n)}}finally{t.releaseLock()}})}function M1(i){return wn(i?.getReader)}function ao(i){if(i instanceof Kn)return i;if(null!=i){if(p1(i))return function XH(i){return new Kn(e=>{const t=i[uM]();if(wn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(h1(i))return function qH(i){return new Kn(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(f1(i))return function YH(i){return new Kn(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,n1)})}(i);if(g1(i))return b1(i);if(y1(i))return function KH(i){return new Kn(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(M1(i))return function ZH(i){return b1(v1(i))}(i)}throw m1(i)}function b1(i){return new Kn(e=>{(function JH(i,e){var t,n,r,s;return function l1(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=d1(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function da(i,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Hi(i,e,t=1/0){return wn(e)?Hi((n,r)=>xt((s,o)=>e(n,s,r,o))(ao(i(n,r))),t):("number"==typeof e&&(t=e),Ri((n,r)=>function QH(i,e,t,n,r,s,o,a){const l=[];let c=0,u=0,d=!1;const f=()=>{d&&!l.length&&!c&&e.complete()},h=g=>c<n?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let m=!1;ao(t(g,u++)).subscribe(yi(e,_=>{r?.(_),s?h(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<n;){const _=l.shift();o?da(e,o,()=>p(_)):p(_)}f()}catch(_){e.error(_)}}))};return i.subscribe(yi(e,h,()=>{d=!0,f()})),()=>{a?.()}}(n,r,i,t)))}function Iu(i=1/0){return Hi(ac,i)}const No=new Kn(i=>i.complete());function mM(i){return i[i.length-1]}function x1(i){return wn(mM(i))?i.pop():void 0}function cf(i){return function t5(i){return i&&wn(i.schedule)}(mM(i))?i.pop():void 0}function C1(i,e=0){return Ri((t,n)=>{t.subscribe(yi(n,r=>da(n,i,()=>n.next(r),e),()=>da(n,i,()=>n.complete(),e),r=>da(n,i,()=>n.error(r),e)))})}function w1(i,e=0){return Ri((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function S1(i,e){if(!i)throw new Error("Iterable cannot be null");return new Kn(t=>{da(t,e,()=>{const n=i[Symbol.asyncIterator]();da(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function oi(i,e){return e?function l5(i,e){if(null!=i){if(p1(i))return function i5(i,e){return ao(i).pipe(w1(e),C1(e))}(i,e);if(h1(i))return function s5(i,e){return new Kn(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(f1(i))return function r5(i,e){return ao(i).pipe(w1(e),C1(e))}(i,e);if(g1(i))return S1(i,e);if(y1(i))return function o5(i,e){return new Kn(t=>{let n;return da(t,e,()=>{n=i[_1](),da(t,e,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>wn(n?.return)&&n.return()})}(i,e);if(M1(i))return function a5(i,e){return S1(v1(i),e)}(i,e)}throw m1(i)}(i,e):ao(i)}function _M(i,e,...t){if(!0===e)return void i();if(!1===e)return;const n=new lf({next:()=>{n.unsubscribe(),i()}});return e(...t).subscribe(n)}function vn(i){for(let e in i)if(i[e]===vn)return e;throw Error("Could not find renamed property on target object.")}function yM(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function Sn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Sn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function vM(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const d5=vn({__forward_ref__:vn});function En(i){return i.__forward_ref__=En,i.toString=function(){return Sn(this())},i}function vt(i){return MM(i)?i():i}function MM(i){return"function"==typeof i&&i.hasOwnProperty(d5)&&i.__forward_ref__===En}function bM(i){return i&&!!i.\u0275providers}const E1="https://g.co/ng/security#xss";class ce extends Error{constructor(e,t){super(gm(e,t)),this.code=e}}function gm(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}function Tt(i){return"string"==typeof i?i:null==i?"":String(i)}function mm(i,e){throw new ce(-201,!1)}function Rs(i,e){null==i&&function hn(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function rt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ji(i){return{providers:i.providers||[],imports:i.imports||[]}}function _m(i){return T1(i,ym)||T1(i,P1)}function T1(i,e){return i.hasOwnProperty(e)?i[e]:null}function A1(i){return i&&(i.hasOwnProperty(xM)||i.hasOwnProperty(v5))?i[xM]:null}const ym=vn({\u0275prov:vn}),xM=vn({\u0275inj:vn}),P1=vn({ngInjectableDef:vn}),v5=vn({ngInjectorDef:vn});var Mt=(()=>((Mt=Mt||{})[Mt.Default=0]="Default",Mt[Mt.Host=1]="Host",Mt[Mt.Self=2]="Self",Mt[Mt.SkipSelf=4]="SkipSelf",Mt[Mt.Optional=8]="Optional",Mt))();let CM;function Ns(i){const e=CM;return CM=i,e}function D1(i,e,t){const n=_m(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&Mt.Optional?null:void 0!==e?e:void mm(Sn(i))}const On=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),uf={},wM="__NG_DI_FLAG__",vm="ngTempTokenPath",b5="ngTokenPath",x5=/\n/gm,C5="\u0275",O1="__source";let df;function Ru(i){const e=df;return df=i,e}function w5(i,e=Mt.Default){if(void 0===df)throw new ce(-203,!1);return null===df?D1(i,void 0,e):df.get(i,e&Mt.Optional?null:void 0,e)}function qe(i,e=Mt.Default){return(function M5(){return CM}()||w5)(vt(i),e)}function Bt(i,e=Mt.Default){return qe(i,Mm(e))}function Mm(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function SM(i){const e=[];for(let t=0;t<i.length;t++){const n=vt(i[t]);if(Array.isArray(n)){if(0===n.length)throw new ce(900,!1);let r,s=Mt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=S5(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(qe(r,s))}else e.push(qe(n))}return e}function hf(i,e){return i[wM]=e,i.prototype[wM]=e,i}function S5(i){return i[wM]}function ha(i){return{toString:i}.toString()}var Lo=(()=>((Lo=Lo||{})[Lo.OnPush=0]="OnPush",Lo[Lo.Default=1]="Default",Lo))(),lo=(()=>{return(i=lo||(lo={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",lo;var i})();const fa={},cn=[],bm=vn({\u0275cmp:vn}),EM=vn({\u0275dir:vn}),TM=vn({\u0275pipe:vn}),R1=vn({\u0275mod:vn}),pa=vn({\u0275fac:vn}),ff=vn({__NG_ELEMENT_ID__:vn});let A5=0;function Ls(i){return ha(()=>{const e=L1(i),t={...e,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Lo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||lo.Emulated,id:"c"+A5++,styles:i.styles||cn,_:null,schemas:i.schemas||null,tView:null};k1(t);const n=i.dependencies;return t.directiveDefs=xm(n,!1),t.pipeDefs=xm(n,!0),t})}function D5(i){return fn(i)||Qi(i)}function O5(i){return null!==i}function gr(i){return ha(()=>({type:i.type,bootstrap:i.bootstrap||cn,declarations:i.declarations||cn,imports:i.imports||cn,exports:i.exports||cn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function N1(i,e){if(null==i)return fa;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}function pt(i){return ha(()=>{const e=L1(i);return k1(e),e})}function mr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function fn(i){return i[bm]||null}function Qi(i){return i[EM]||null}function Br(i){return i[TM]||null}function ss(i,e){const t=i[R1]||null;if(!t&&!0===e)throw new Error(`Type ${Sn(i)} does not have '\u0275mod' property.`);return t}function L1(i){const e={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||cn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:N1(i.inputs,e),outputs:N1(i.outputs)}}function k1(i){i.features?.forEach(e=>e(i))}function xm(i,e){if(!i)return null;const t=e?Br:D5;return()=>("function"==typeof i?i():i).map(n=>t(n)).filter(O5)}const ga=0,Ye=1,kt=2,jn=3,co=4,lc=5,er=6,Lu=7,Zn=8,Cm=9,wm=10,Vt=11,AM=12,pf=13,F1=14,ku=15,tr=16,gf=17,Fu=18,ko=19,mf=20,U1=21,In=22,PM=1,B1=2,Sm=7,Em=8,Uu=9,_r=10;function os(i){return Array.isArray(i)&&"object"==typeof i[PM]}function uo(i){return Array.isArray(i)&&!0===i[PM]}function DM(i){return 0!=(4&i.flags)}function _f(i){return i.componentOffset>-1}function Tm(i){return 1==(1&i.flags)}function ho(i){return!!i.template}function R5(i){return 0!=(256&i[kt])}function cc(i,e){return i.hasOwnProperty(pa)?i[pa]:null}class k5{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ks(){return H1}function H1(i){return i.type.prototype.ngOnChanges&&(i.setInput=U5),F5}function F5(){const i=W1(this),e=i?.current;if(e){const t=i.previous;if(t===fa)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function U5(i,e,t,n){const r=this.declaredInputs[t],s=W1(i)||function B5(i,e){return i[G1]=e}(i,{previous:fa,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new k5(l&&l.currentValue,e,a===fa),i[n]=e}ks.ngInherit=!0;const G1="__ngSimpleChanges__";function W1(i){return i[G1]||null}const Fs=function(i,e,t){};function Gi(i){for(;Array.isArray(i);)i=i[ga];return i}function Am(i,e){return Gi(e[i])}function as(i,e){return Gi(e[i.index])}function X1(i,e){return i.data[e]}function Vr(i,e){const t=e[i];return os(t)?t:t[ga]}function Pm(i){return 64==(64&i[kt])}function cl(i,e){return null==e?null:i[e]}function q1(i){i[Fu]=0}function IM(i,e){i[lc]+=e;let t=i,n=i[jn];for(;null!==n&&(1===e&&1===t[lc]||-1===e&&0===t[lc]);)n[lc]+=e,t=n,n=n[jn]}const At={lFrame:rP(null),bindingsEnabled:!0};function K1(){return At.bindingsEnabled}function be(){return At.lFrame.lView}function on(){return At.lFrame.tView}function uc(i){return At.lFrame.contextLView=i,i[Zn]}function dc(i){return At.lFrame.contextLView=null,i}function Wi(){let i=Z1();for(;null!==i&&64===i.type;)i=i.parent;return i}function Z1(){return At.lFrame.currentTNode}function Fo(i,e){const t=At.lFrame;t.currentTNode=i,t.isParent=e}function RM(){return At.lFrame.isParent}function yr(){const i=At.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Vu(){return At.lFrame.bindingIndex++}function J5(i,e){const t=At.lFrame;t.bindingIndex=t.bindingRootIndex=i,LM(e)}function LM(i){At.lFrame.currentDirectiveIndex=i}function tP(){return At.lFrame.currentQueryIndex}function FM(i){At.lFrame.currentQueryIndex=i}function e4(i){const e=i[Ye];return 2===e.type?e.declTNode:1===e.type?i[er]:null}function nP(i,e,t){if(t&Mt.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&Mt.Host||(r=e4(s),null===r||(s=s[ku],10&r.type))););if(null===r)return!1;e=r,i=s}const n=At.lFrame=iP();return n.currentTNode=e,n.lView=i,!0}function UM(i){const e=iP(),t=i[Ye];At.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iP(){const i=At.lFrame,e=null===i?null:i.child;return null===e?rP(i):e}function rP(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function sP(){const i=At.lFrame;return At.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const oP=sP;function BM(){const i=sP();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vr(){return At.lFrame.selectedIndex}function hc(i){At.lFrame.selectedIndex=i}function Un(){const i=At.lFrame;return X1(i.tView,i.selectedIndex)}function Dm(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(i.contentHooks??(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks??(i.contentHooks=[])).push(t,a),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks??(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks??(i.viewHooks=[])).push(t,c),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(t,c)),null!=u&&(i.destroyHooks??(i.destroyHooks=[])).push(t,u)}}function Om(i,e,t){aP(i,e,3,t)}function Im(i,e,t,n){(3&i[kt])===t&&aP(i,e,t,n)}function VM(i,e){let t=i[kt];(3&t)===e&&(t&=2047,t+=1,i[kt]=t)}function aP(i,e,t,n){const s=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[Fu]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[Fu]+=65536),(a<s||-1==s)&&(c4(i,t,e,l),i[Fu]=(4294901760&i[Fu])+l+2),l++}function c4(i,e,t,n){const r=t[n]<0,s=t[n+1],a=i[r?-t[n]:t[n]];if(r){if(i[kt]>>11<i[Fu]>>16&&(3&i[kt])===e){i[kt]+=2048,Fs(4,a,s);try{s.call(a)}finally{Fs(5,a,s)}}}else{Fs(4,a,s);try{s.call(a)}finally{Fs(5,a,s)}}}const zu=-1;class vf{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function HM(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,s)}else{const s=r,o=t[++n];cP(s)?i.setProperty(e,s,o):i.setAttribute(e,s,o),n++}}return n}function lP(i){return 3===i||4===i||6===i}function cP(i){return 64===i.charCodeAt(0)}function Mf(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||uP(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function uP(i,e,t,n,r){let s=0,o=i.length;if(-1===e)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,e),s=o+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function dP(i){return i!==zu}function Rm(i){return 32767&i}function Nm(i,e){let t=function f4(i){return i>>16}(i),n=e;for(;t>0;)n=n[ku],t--;return n}let GM=!0;function Lm(i){const e=GM;return GM=i,e}const hP=255,fP=5;let p4=0;const Uo={};function km(i,e){const t=pP(i,e);if(-1!==t)return t;const n=e[Ye];n.firstCreatePass&&(i.injectorIndex=e.length,WM(n.data,i),WM(e,null),WM(n.blueprint,null));const r=jM(i,e),s=i.injectorIndex;if(dP(r)){const o=Rm(r),a=Nm(r,e),l=a[Ye].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function WM(i,e){i.push(0,0,0,0,0,0,0,0,e)}function pP(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function jM(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=bP(r),null===n)return zu;if(t++,r=r[ku],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return zu}function $M(i,e,t){!function g4(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(ff)&&(n=t[ff]),null==n&&(n=t[ff]=p4++);const r=n&hP;e.data[i+(r>>fP)]|=1<<r}(i,e,t)}function gP(i,e,t){if(t&Mt.Optional||void 0!==i)return i;mm()}function mP(i,e,t,n){if(t&Mt.Optional&&void 0===n&&(n=null),!(t&(Mt.Self|Mt.Host))){const r=i[Cm],s=Ns(void 0);try{return r?r.get(e,n,t&Mt.Optional):D1(e,n,t&Mt.Optional)}finally{Ns(s)}}return gP(n,0,t)}function _P(i,e,t,n=Mt.Default,r){if(null!==i){if(1024&e[kt]){const o=function M4(i,e,t,n,r){let s=i,o=e;for(;null!==s&&null!==o&&1024&o[kt]&&!(256&o[kt]);){const a=yP(s,o,t,n|Mt.Self,Uo);if(a!==Uo)return a;let l=s.parent;if(!l){const c=o[U1];if(c){const u=c.get(t,Uo,n);if(u!==Uo)return u}l=bP(o),o=o[ku]}s=l}return r}(i,e,t,n,Uo);if(o!==Uo)return o}const s=yP(i,e,t,n,Uo);if(s!==Uo)return s}return mP(e,t,n,r)}function yP(i,e,t,n,r){const s=function y4(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(ff)?i[ff]:void 0;return"number"==typeof e?e>=0?e&hP:v4:e}(t);if("function"==typeof s){if(!nP(e,i,n))return n&Mt.Host?gP(r,0,n):mP(e,t,n,r);try{const o=s(n);if(null!=o||n&Mt.Optional)return o;mm()}finally{oP()}}else if("number"==typeof s){let o=null,a=pP(i,e),l=zu,c=n&Mt.Host?e[tr][er]:null;for((-1===a||n&Mt.SkipSelf)&&(l=-1===a?jM(i,e):e[a+8],l!==zu&&MP(n,!1)?(o=e[Ye],a=Rm(l),e=Nm(l,e)):a=-1);-1!==a;){const u=e[Ye];if(vP(s,a,u.data)){const d=_4(a,e,t,o,n,c);if(d!==Uo)return d}l=e[a+8],l!==zu&&MP(n,e[Ye].data[a+8]===c)&&vP(s,a,e)?(o=u,a=Rm(l),e=Nm(l,e)):a=-1}}return r}function _4(i,e,t,n,r,s){const o=e[Ye],a=o.data[i+8],u=Fm(a,o,t,null==n?_f(a)&&GM:n!=o&&0!=(3&a.type),r&Mt.Host&&s===a);return null!==u?fc(e,o,u,a):Uo}function Fm(i,e,t,n,r){const s=i.providerIndexes,o=e.data,a=1048575&s,l=i.directiveStart,u=s>>20,f=r?a+u:i.directiveEnd;for(let h=n?a:a+u;h<f;h++){const p=o[h];if(h<l&&t===p||h>=l&&p.type===t)return h}if(r){const h=o[l];if(h&&ho(h)&&h.type===t)return l}return null}function fc(i,e,t,n){let r=i[t];const s=e.data;if(function u4(i){return i instanceof vf}(r)){const o=r;o.resolving&&function h5(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new ce(-200,`Circular dependency in DI detected for ${i}${t}`)}(function dn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Tt(i)}(s[t]));const a=Lm(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ns(o.injectImpl):null;nP(i,n,Mt.Default);try{r=i[t]=o.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function l4(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const o=H1(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(i,o)}r&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==l&&Ns(l),Lm(a),o.resolving=!1,oP()}}return r}function vP(i,e,t){return!!(t[e+(i>>fP)]&1<<i)}function MP(i,e){return!(i&Mt.Self||i&Mt.Host&&e)}class Hu{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return _P(this._tNode,this._lView,e,Mm(n),t)}}function v4(){return new Hu(Wi(),be())}function ji(i){return ha(()=>{const e=i.prototype.constructor,t=e[pa]||XM(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[pa]||XM(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function XM(i){return MM(i)?()=>{const e=XM(vt(i));return e&&e()}:cc(i)}function bP(i){const e=i[Ye],t=e.type;return 2===t?e.declTNode:1===t?i[er]:null}const Wu="__parameters__";function $u(i,e,t){return ha(()=>{const n=function qM(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Wu)?l[Wu]:Object.defineProperty(l,Wu,{value:[]})[Wu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class it{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=rt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pc(i,e){i.forEach(t=>Array.isArray(t)?pc(t,e):e(t))}function CP(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function Bm(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function ls(i,e,t){let n=Xu(i,e);return n>=0?i[1|n]=t:(n=~n,function w4(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function KM(i,e){const t=Xu(i,e);if(t>=0)return i[1|t]}function Xu(i,e){return function wP(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<t];if(e===o)return s<<t;o>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const wf=hf($u("Optional"),8),Sf=hf($u("SkipSelf"),4);var zr=(()=>((zr=zr||{})[zr.Important=1]="Important",zr[zr.DashCase=2]="DashCase",zr))();const nb=new Map;let $4=0;const rb="__ngContext__";function nr(i,e){os(e)?(i[rb]=e[mf],function q4(i){nb.set(i[mf],i)}(e)):i[rb]=e}let sb;function ob(i,e){return sb(i,e)}function Pf(i){const e=i[jn];return uo(e)?e[jn]:e}function ab(i){return WP(i[pf])}function lb(i){return WP(i[co])}function WP(i){for(;null!==i&&!uo(i);)i=i[co];return i}function Yu(i,e,t,n,r){if(null!=n){let s,o=!1;uo(n)?s=n:os(n)&&(o=!0,n=n[ga]);const a=Gi(n);0===i&&null!==t?null==r?KP(e,t,a):gc(e,t,a,r||null,!0):1===i&&null!==t?gc(e,t,a,r||null,!0):2===i?function gb(i,e,t){const n=Gm(i,e);n&&function pG(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=s&&function _G(i,e,t,n,r){const s=t[Sm];s!==Gi(t)&&Yu(e,i,n,s,r);for(let a=_r;a<t.length;a++){const l=t[a];Df(l[Ye],l,i,e,n,s)}}(e,i,s,t,r)}}function ub(i,e,t){return i.createElement(e,t)}function $P(i,e){const t=i[Uu],n=t.indexOf(e),r=e[jn];512&e[kt]&&(e[kt]&=-513,IM(r,-1)),t.splice(n,1)}function db(i,e){if(i.length<=_r)return;const t=_r+e,n=i[t];if(n){const r=n[gf];null!==r&&r!==i&&$P(r,n),e>0&&(i[t-1][co]=n[co]);const s=Bm(i,_r+e);!function oG(i,e){Df(i,e,e[Vt],2,null,null),e[ga]=null,e[er]=null}(n[Ye],n);const o=s[ko];null!==o&&o.detachView(s[Ye]),n[jn]=null,n[co]=null,n[kt]&=-65}return n}function XP(i,e){if(!(128&e[kt])){const t=e[Vt];t.destroyNode&&Df(i,e,t,3,null,null),function cG(i){let e=i[pf];if(!e)return hb(i[Ye],i);for(;e;){let t=null;if(os(e))t=e[pf];else{const n=e[_r];n&&(t=n)}if(!t){for(;e&&!e[co]&&e!==i;)os(e)&&hb(e[Ye],e),e=e[jn];null===e&&(e=i),os(e)&&hb(e[Ye],e),t=e&&e[co]}e=t}}(e)}}function hb(i,e){if(!(128&e[kt])){e[kt]&=-65,e[kt]|=128,function fG(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof vf)){const s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Fs(4,a,l);try{l.call(a)}finally{Fs(5,a,l)}}else{Fs(4,r,s);try{s.call(r)}finally{Fs(5,r,s)}}}}}(i,e),function hG(i,e){const t=i.cleanup,n=e[Lu];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?n[r=o]():n[r=-o].unsubscribe(),s+=2}else{const o=n[r=t[s+1]];t[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[Lu]=null}}(i,e),1===e[Ye].type&&e[Vt].destroy();const t=e[gf];if(null!==t&&uo(e[jn])){t!==e[jn]&&$P(t,e);const n=e[ko];null!==n&&n.detachView(i)}!function Y4(i){nb.delete(i[mf])}(e)}}function qP(i,e,t){return function YP(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[ga];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===lo.None||s===lo.Emulated)return null}return as(n,t)}}(i,e.parent,t)}function gc(i,e,t,n,r){i.insertBefore(e,t,n,r)}function KP(i,e,t){i.appendChild(e,t)}function ZP(i,e,t,n,r){null!==n?gc(i,e,t,n,r):KP(i,e,t)}function Gm(i,e){return i.parentNode(e)}let fb,yb,eD=function QP(i,e,t){return 40&i.type?as(i,t):null};function Wm(i,e,t,n){const r=qP(i,n,e),s=e[Vt],a=function JP(i,e,t){return eD(i,e,t)}(n.parent||e[er],n,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)ZP(s,r,t[l],a,!1);else ZP(s,r,t,a,!1);void 0!==fb&&fb(s,n,e,t,r)}function jm(i,e){if(null!==e){const t=e.type;if(3&t)return as(e,i);if(4&t)return pb(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return jm(i,n);{const r=i[e.index];return uo(r)?pb(-1,r):Gi(r)}}if(32&t)return ob(e,i)()||Gi(i[e.index]);{const n=nD(i,e);return null!==n?Array.isArray(n)?n[0]:jm(Pf(i[tr]),n):jm(i,e.next)}}return null}function nD(i,e){return null!==e?i[tr][er].projection[e.projection]:null}function pb(i,e){const t=_r+i+1;if(t<e.length){const n=e[t],r=n[Ye].firstChild;if(null!==r)return jm(n,r)}return e[Sm]}function mb(i,e,t,n,r,s,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&nr(Gi(a),n),t.flags|=2),32!=(32&t.flags))if(8&l)mb(i,e,t.child,n,r,s,!1),Yu(e,i,r,a,s);else if(32&l){const c=ob(t,n);let u;for(;u=c();)Yu(e,i,r,u,s);Yu(e,i,r,a,s)}else 16&l?iD(i,e,n,t,r,s):Yu(e,i,r,a,s);t=o?t.projectionNext:t.next}}function Df(i,e,t,n,r,s){mb(t,n,i.firstChild,e,r,s,!1)}function iD(i,e,t,n,r,s){const o=t[tr],l=o[er].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Yu(e,i,r,l[c],s);else mb(i,e,l,o[jn],r,s,!0)}function rD(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function sD(i,e,t){const{mergedAttrs:n,classes:r,styles:s}=t;null!==n&&HM(i,e,n),null!==r&&rD(i,e,r),null!==s&&function vG(i,e,t){i.setAttribute(e,"style",t)}(i,e,s)}class uD{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${E1})`}}function ul(i){return i instanceof uD?i.changingThisBreaksApplicationSecurity:i}const RG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ai=(()=>((ai=ai||{})[ai.NONE=0]="NONE",ai[ai.HTML=1]="HTML",ai[ai.STYLE=2]="STYLE",ai[ai.SCRIPT=3]="SCRIPT",ai[ai.URL=4]="URL",ai[ai.RESOURCE_URL=5]="RESOURCE_URL",ai))();function va(i){const e=function Rf(){const i=be();return i&&i[AM]}();return e?e.sanitize(ai.URL,i)||"":function Of(i,e){const t=function PG(i){return i instanceof uD&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${E1})`)}return t===e}(i,"URL")?ul(i):function Mb(i){return(i=String(i)).match(RG)?i:"unsafe:"+i}(Tt(i))}const Ym=new it("ENVIRONMENT_INITIALIZER"),vD=new it("INJECTOR",-1),MD=new it("INJECTOR_DEF_TYPES");class bD{get(e,t=uf){if(t===uf){const n=new Error(`NullInjectorError: No provider for ${Sn(e)}!`);throw n.name="NullInjectorError",n}return t}}function XG(...i){return{\u0275providers:xD(0,i),\u0275fromNgModule:!0}}function xD(i,...e){const t=[],n=new Set;let r;return pc(e,s=>{const o=s;wb(o,t,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&CD(r,t),t}function CD(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];Sb(r,s=>{e.push(s)})}}function wb(i,e,t,n){if(!(i=vt(i)))return!1;let r=null,s=A1(i);const o=!s&&fn(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=A1(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)wb(c,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{pc(s.imports,u=>{wb(u,e,t,n)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&CD(c,e)}if(!a){const c=cc(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:cn},{provide:MD,useValue:r,multi:!0},{provide:Ym,useValue:()=>qe(r),multi:!0})}const l=s.providers;null==l||a||Sb(l,u=>{e.push(u)})}}return r!==i&&void 0!==i.providers}function Sb(i,e){for(let t of i)bM(t)&&(t=t.\u0275providers),Array.isArray(t)?Sb(t,e):e(t)}const qG=vn({provide:String,useValue:vn});function Eb(i){return null!==i&&"object"==typeof i&&qG in i}function mc(i){return"function"==typeof i}const Tb=new it("Set Injector scope."),Km={},KG={};let Ab;function Zm(){return void 0===Ab&&(Ab=new bD),Ab}class Bo{}class ED extends Bo{get destroyed(){return this._destroyed}constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Db(e,o=>this.processProvider(o)),this.records.set(vD,Zu(void 0,this)),r.has("environment")&&this.records.set(Bo,Zu(void 0,this));const s=this.records.get(Tb);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(MD.multi,cn,Mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Ru(this),n=Ns(void 0);try{return e()}finally{Ru(t),Ns(n)}}get(e,t=uf,n=Mt.Default){this.assertNotDestroyed(),n=Mm(n);const r=Ru(this),s=Ns(void 0);try{if(!(n&Mt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function tW(i){return"function"==typeof i||"object"==typeof i&&i instanceof it}(e)&&_m(e);a=l&&this.injectableDefInScope(l)?Zu(Pb(e),Km):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&Mt.Self?Zm():this.parent).get(e,t=n&Mt.Optional&&t===uf?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[vm]=o[vm]||[]).unshift(Sn(e)),r)throw o;return function E5(i,e,t,n){const r=i[vm];throw e[O1]&&r.unshift(e[O1]),i.message=function T5(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==C5?i.slice(2):i;let r=Sn(e);if(Array.isArray(e))r=e.map(Sn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Sn(a)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(x5,"\n  ")}`}("\n"+i.message,r,t,n),i[b5]=r,i[vm]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{Ns(s),Ru(r)}}resolveInjectorInitializers(){const e=Ru(this),t=Ns(void 0);try{const n=this.get(Ym.multi,cn,Mt.Self);for(const r of n)r()}finally{Ru(e),Ns(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(Sn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(e){let t=mc(e=vt(e))?e:vt(e&&e.provide);const n=function JG(i){return Eb(i)?Zu(void 0,i.useValue):Zu(TD(i),Km)}(e);if(mc(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Zu(void 0,Km,!0),r.factory=()=>SM(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===Km&&(t.value=KG,t.value=t.factory()),"object"==typeof t.value&&t.value&&function eW(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=vt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Pb(i){const e=_m(i),t=null!==e?e.factory:cc(i);if(null!==t)return t;if(i instanceof it)throw new ce(204,!1);if(i instanceof Function)return function ZG(i){const e=i.length;if(e>0)throw function Cf(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}(e,"?"),new ce(204,!1);const t=function y5(i){return i&&(i[ym]||i[P1])||null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new ce(204,!1)}function TD(i,e,t){let n;if(mc(i)){const r=vt(i);return cc(r)||Pb(r)}if(Eb(i))n=()=>vt(i.useValue);else if(function SD(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...SM(i.deps||[]));else if(function wD(i){return!(!i||!i.useExisting)}(i))n=()=>qe(vt(i.useExisting));else{const r=vt(i&&(i.useClass||i.provide));if(!function QG(i){return!!i.deps}(i))return cc(r)||Pb(r);n=()=>new r(...SM(i.deps))}return n}function Zu(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function Db(i,e){for(const t of i)Array.isArray(t)?Db(t,e):t&&bM(t)?Db(t.\u0275providers,e):e(t)}class nW{}class AD{}class rW{resolveComponentFactory(e){throw function iW(i){const e=Error(`No component factory found for ${Sn(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let Nf=(()=>{class i{}return i.NULL=new rW,i})();function sW(){return Ju(Wi(),be())}function Ju(i,e){return new Ni(as(i,e))}let Ni=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=sW,i})();function oW(i){return i instanceof Ni?i.nativeElement:i}class Lf{}let cs=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function aW(){const i=be(),t=Vr(Wi().index,i);return(os(t)?t:i)[Vt]}(),i})(),lW=(()=>{class i{}return i.\u0275prov=rt({token:i,providedIn:"root",factory:()=>null}),i})();class kf{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const cW=new kf("15.2.10"),Ob={},Ib="ngOriginalError";function Rb(i){return i[Ib]}class Qu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Rb(e);for(;t&&Rb(t);)t=Rb(t);return t||null}}function Nb(i){return i.ownerDocument.defaultView}function Jm(i){return i.ownerDocument}function Ma(i){return i instanceof Function?i():i}function OD(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const ID="ng-template";function yW(i,e,t){let n=0,r=!0;for(;n<i.length;){let s=i[n++];if("string"==typeof s&&r){const o=i[n++];if(t&&"class"===s&&-1!==OD(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;n<i.length&&"string"==typeof(s=i[n++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function RD(i){return 4===i.type&&i.value!==ID}function vW(i,e,t){return e===(4!==i.type||t?i.value:ID)}function MW(i,e,t){let n=4;const r=i.attrs||[],s=function CW(i){for(let e=0;e<i.length;e++)if(lP(i[e]))return e;return i.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!vW(i,l,t)||""===l&&1===e.length){if(fo(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!yW(i.attrs,c,t)){if(fo(n))return!1;o=!0}continue}const d=bW(8&n?"class":l,r,RD(i),t);if(-1===d){if(fo(n))return!1;o=!0;continue}if(""!==c){let f;f=d>s?"":r[d+1].toLowerCase();const h=8&n?f:null;if(h&&-1!==OD(h,c,0)||2&n&&c!==f){if(fo(n))return!1;o=!0}}}}else{if(!o&&!fo(n)&&!fo(l))return!1;if(o&&fo(l))continue;o=!1,n=l|1&n}}return fo(n)||o}function fo(i){return 0==(1&i)}function bW(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function wW(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function ND(i,e,t=!1){for(let n=0;n<e.length;n++)if(MW(i,e[n],t))return!0;return!1}function LD(i,e){return i?":not("+e.trim()+")":e}function EW(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!fo(o)&&(e+=LD(s,r),r=""),n=o,s=s||!fo(n);t++}return""!==r&&(e+=LD(s,r)),e}const Pt={};function Le(i){kD(on(),be(),vr()+i,!1)}function kD(i,e,t,n){if(!n)if(3==(3&e[kt])){const s=i.preOrderCheckHooks;null!==s&&Om(e,s,t)}else{const s=i.preOrderHooks;null!==s&&Im(e,s,0,t)}hc(t)}function VD(i,e=null,t=null,n){const r=zD(i,e,t,n);return r.resolveInjectorInitializers(),r}function zD(i,e=null,t=null,n,r=new Set){const s=[t||cn,XG(i)];return n=n||("object"==typeof i?void 0:Sn(i)),new ED(s,e||Zm(),n||null,r)}let Vo=(()=>{class i{static create(t,n){if(Array.isArray(t))return VD({name:""},n,t,"");{const r=t.name??"";return VD({name:r},t.parent,t.providers,r)}}}return i.THROW_IF_NOT_FOUND=uf,i.NULL=new bD,i.\u0275prov=rt({token:i,providedIn:"any",factory:()=>qe(vD)}),i.__NG_ELEMENT_ID__=-1,i})();function pe(i,e=Mt.Default){const t=be();return null===t?qe(i,e):_P(Wi(),t,vt(i),e)}function YD(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const s=t[n+1];if(-1!==s){const o=i.data[s];FM(t[n]),o.contentQueries(2,e[s],s)}}}function e_(i,e,t,n,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[ga]=r,d[kt]=76|n,(null!==u||i&&1024&i[kt])&&(d[kt]|=1024),q1(d),d[jn]=d[ku]=i,d[Zn]=t,d[wm]=o||i&&i[wm],d[Vt]=a||i&&i[Vt],d[AM]=l||i&&i[AM]||null,d[Cm]=c||i&&i[Cm]||null,d[er]=s,d[mf]=function X4(){return $4++}(),d[U1]=u,d[tr]=2==e.type?i[tr]:d,d}function nd(i,e,t,n,r){let s=i.data[e];if(null===s)s=function Bb(i,e,t,n,r){const s=Z1(),o=RM(),l=i.data[e]=function JW(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(i,e,t,n,r),function Z5(){return At.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const o=function yf(){const i=At.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Fo(s,!0),s}function Ff(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function Vb(i,e,t){UM(e);try{const n=i.viewQuery;null!==n&&Yb(1,n,t);const r=i.template;null!==r&&KD(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&YD(i,e),i.staticViewQueries&&Yb(2,i.viewQuery,t);const s=i.components;null!==s&&function YW(i,e){for(let t=0;t<e.length;t++)y8(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[kt]&=-5,BM()}}function t_(i,e,t,n){const r=e[kt];if(128!=(128&r)){UM(e);try{q1(e),function Q1(i){return At.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&KD(i,e,t,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&Om(e,c,null)}else{const c=i.preOrderHooks;null!==c&&Im(e,c,0,null),VM(e,0)}if(function m8(i){for(let e=ab(i);null!==e;e=lb(e)){if(!e[B1])continue;const t=e[Uu];for(let n=0;n<t.length;n++){const r=t[n];512&r[kt]||IM(r[jn],1),r[kt]|=512}}}(e),function g8(i){for(let e=ab(i);null!==e;e=lb(e))for(let t=_r;t<e.length;t++){const n=e[t],r=n[Ye];Pm(n)&&t_(r,n,r.template,n[Zn])}}(e),null!==i.contentQueries&&YD(i,e),o){const c=i.contentCheckHooks;null!==c&&Om(e,c)}else{const c=i.contentHooks;null!==c&&Im(e,c,1),VM(e,1)}!function XW(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)hc(~r);else{const s=r,o=t[++n],a=t[++n];J5(o,s),a(2,e[s])}}}finally{hc(-1)}}(i,e);const a=i.components;null!==a&&function qW(i,e){for(let t=0;t<e.length;t++)_8(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&Yb(2,l,n),o){const c=i.viewCheckHooks;null!==c&&Om(e,c)}else{const c=i.viewHooks;null!==c&&Im(e,c,2),VM(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[kt]&=-41,512&e[kt]&&(e[kt]&=-513,IM(e[jn],-1))}finally{BM()}}}function KD(i,e,t,n,r){const s=vr(),o=2&n;try{hc(-1),o&&e.length>In&&kD(i,e,In,!1),Fs(o?2:0,r),t(n,r)}finally{hc(s),Fs(o?3:1,r)}}function zb(i,e,t){if(DM(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Hb(i,e,t){K1()&&(function s8(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;_f(t)&&function h8(i,e,t){const n=as(e,i),r=ZD(t),s=i[wm],o=n_(i,e_(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=o}(e,t,i.data[r+t.componentOffset]),i.firstCreatePass||km(t,e),nr(n,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=fc(e,i,a,t);nr(c,e),null!==o&&f8(0,a-r,c,l,0,o),ho(l)&&(Vr(t.index,e)[Zn]=fc(e,i,a,t))}}(i,e,t,as(t,e)),64==(64&t.flags)&&nO(i,e,t))}function Gb(i,e,t=as){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?t(e,i):i[o];i[r++]=a}}}function ZD(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=Wb(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function Wb(i,e,t,n,r,s,o,a,l,c){const u=In+n,d=u+r,f=function KW(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:Pt);return t}(u,d),h="function"==typeof c?c():c;return f[Ye]={type:i,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function JD(i,e,t,n){const r=rO(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&sO(i).push(n,r.length-1))}function QD(i,e,t,n){for(let r in i)if(i.hasOwnProperty(r)){t=null===t?{}:t;const s=i[r];null===n?eO(t,e,r,s):n.hasOwnProperty(r)&&eO(t,e,n[r],s)}return t}function eO(i,e,t,n){i.hasOwnProperty(t)?i[t].push(e,n):i[t]=[e,n]}function us(i,e,t,n,r,s,o,a){const l=as(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[n])?(Kb(i,t,u,n,r),_f(e)&&function t8(i,e){const t=Vr(e,i);16&t[kt]||(t[kt]|=32)}(t,e.index)):3&e.type&&(n=function e8(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,e.value||"",n):r,s.setProperty(l,n,r))}function jb(i,e,t,n){if(K1()){const r=null===n?null:{"":-1},s=function a8(i,e){const t=i.directiveRegistry;let n=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(ND(e,o.selectors,!1))if(n||(n=[]),ho(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),n.unshift(...a,o),$b(i,e,a.length)}else n.unshift(o),$b(i,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return null===n?null:[n,r]}(i,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&tO(i,e,t,o,r,a),r&&function l8(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ce(-301,!1);n.push(e[r],s)}}}(t,n,r)}t.mergedAttrs=Mf(t.mergedAttrs,t.attrs)}function tO(i,e,t,n,r,s){for(let c=0;c<n.length;c++)$M(km(t,e),i,n[c].type);!function u8(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}(t,i.data.length,n.length);for(let c=0;c<n.length;c++){const u=n[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Ff(i,e,n.length,null);for(let c=0;c<n.length;c++){const u=n[c];t.mergedAttrs=Mf(t.mergedAttrs,u.hostAttrs),d8(i,t,e,l,u),c8(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function QW(i,e,t){const r=e.directiveEnd,s=i.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],f=t?t.get(d):null,p=f?f.outputs:null;l=QD(d.inputs,u,l,f?f.inputs:null),c=QD(d.outputs,u,c,p);const g=null===l||null===o||RD(e)?null:p8(l,u,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(i,t,s)}function nO(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,o=function Q5(){return At.lFrame.currentDirectiveIndex}();try{hc(s);for(let a=n;a<r;a++){const l=i.data[a],c=e[a];LM(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&o8(l,c)}}finally{hc(-1),LM(o)}}function o8(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function $b(i,e,t){e.componentOffset=t,(i.components??(i.components=[])).push(e.index)}function c8(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;ho(e)&&(t[""]=i)}}function d8(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=cc(r.type)),o=new vf(s,ho(r),pe);i.blueprint[n]=o,t[n]=o,function i8(i,e,t,n,r){const s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;null===o&&(o=i.hostBindingOpCodes=[]);const a=~e.index;(function r8(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,n,s)}}(i,e,n,Ff(i,t,r.hostVars,Pt),r)}function zo(i,e,t,n,r,s){const o=as(i,e);!function Xb(i,e,t,n,r,s,o){if(null==s)i.removeAttribute(e,r,t);else{const a=null==o?Tt(s):o(s,n||"",r);i.setAttribute(e,r,a,t)}}(e[Vt],o,s,i.value,t,n,r)}function f8(i,e,t,n,r,s){const o=s[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?n.setInput(t,d,c,u):t[u]=d}}}function p8(i,e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const o=i[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){n.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function iO(i,e,t,n){return[i,!0,!1,e,null,0,n,t,null,null]}function _8(i,e){const t=Vr(e,i);if(Pm(t)){const n=t[Ye];48&t[kt]?t_(n,t,n.template,t[Zn]):t[lc]>0&&qb(t)}}function qb(i){for(let n=ab(i);null!==n;n=lb(n))for(let r=_r;r<n.length;r++){const s=n[r];if(Pm(s))if(512&s[kt]){const o=s[Ye];t_(o,s,o.template,s[Zn])}else s[lc]>0&&qb(s)}const t=i[Ye].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Vr(t[n],i);Pm(r)&&r[lc]>0&&qb(r)}}function y8(i,e){const t=Vr(e,i),n=t[Ye];(function v8(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),Vb(n,t,t[Zn])}function n_(i,e){return i[pf]?i[F1][co]=e:i[pf]=e,i[F1]=e,e}function i_(i){for(;i;){i[kt]|=32;const e=Pf(i);if(R5(i)&&!e)return i;i=e}return null}function r_(i,e,t,n=!0){const r=e[wm];r.begin&&r.begin();try{t_(i,e,i.template,t)}catch(o){throw n&&aO(e,o),o}finally{r.end&&r.end()}}function Yb(i,e,t){FM(0),e(i,t)}function rO(i){return i[Lu]||(i[Lu]=[])}function sO(i){return i.cleanup||(i.cleanup=[])}function aO(i,e){const t=i[Cm],n=t?t.get(Qu,null):null;n&&n.handleError(e)}function Kb(i,e,t,n,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function s_(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=vM(r,a):2==s&&(n=vM(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function o_(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(Gi(s)),uo(s))for(let a=_r;a<s.length;a++){const l=s[a],c=l[Ye].firstChild;null!==c&&o_(l[Ye],l,c,n)}const o=t.type;if(8&o)o_(i,e,t.child,n);else if(32&o){const a=ob(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=nD(e,t);if(Array.isArray(a))n.push(...a);else{const l=Pf(e[tr]);o_(l[Ye],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}class Uf{get rootNodes(){const e=this._lView,t=e[Ye];return o_(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(e){this._lView[Zn]=e}get destroyed(){return 128==(128&this._lView[kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[jn];if(uo(e)){const t=e[Em],n=t?t.indexOf(this):-1;n>-1&&(db(e,n),Bm(t,n))}this._attachedToViewContainer=!1}XP(this._lView[Ye],this._lView)}onDestroy(e){JD(this._lView[Ye],this._lView,null,e)}markForCheck(){i_(this._cdRefInjectingView||this._lView)}detach(){this._lView[kt]&=-65}reattach(){this._lView[kt]|=64}detectChanges(){r_(this._lView[Ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lG(i,e){Df(i,e,e[Vt],2,null,null)}(this._lView[Ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e}}class M8 extends Uf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;r_(e[Ye],e,e[Zn],!1)}checkNoChanges(){}get context(){return null}}class lO extends Nf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=fn(e);return new Bf(t,this.ngModule)}}function cO(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class x8{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){n=Mm(n);const r=this.injector.get(e,Ob,n);return r!==Ob||t===Ob?r:this.parentInjector.get(e,t,n)}}class Bf extends AD{get inputs(){return cO(this.componentDef.inputs)}get outputs(){return cO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function TW(i){return i.map(EW).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,n,r){let s=(r=r||this.ngModule)instanceof Bo?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new x8(e,s):e,a=o.get(Lf,null);if(null===a)throw new ce(407,!1);const l=o.get(lW,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=n?function ZW(i,e,t){return i.selectRootElement(e,t===lo.ShadowDom)}(c,n,this.componentDef.encapsulation):ub(c,u,function b8(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),f=this.componentDef.onPush?288:272,h=Wb(0,null,null,1,0,null,null,null,null,null),p=e_(null,h,null,f,null,null,a,c,l,o,null);let g,m;UM(p);try{const _=this.componentDef;let M,y=null;_.findHostDirectiveDefs?(M=[],y=new Map,_.findHostDirectiveDefs(_,M,y),M.push(_)):M=[_];const v=function w8(i,e){const t=i[Ye],n=In;return i[n]=e,nd(t,n,2,"#host",null)}(p,d),C=function S8(i,e,t,n,r,s,o,a){const l=r[Ye];!function E8(i,e,t,n){for(const r of i)e.mergedAttrs=Mf(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(s_(e,e.mergedAttrs,!0),null!==t&&sD(n,t,e))}(n,i,e,o);const c=s.createRenderer(e,t),u=e_(r,ZD(t),null,t.onPush?32:16,r[i.index],i,s,c,a||null,null,null);return l.firstCreatePass&&$b(l,i,n.length-1),n_(r,u),r[i.index]=u}(v,d,_,M,p,a,c);m=X1(h,In),d&&function A8(i,e,t,n){if(n)HM(i,t,["ng-version",cW.full]);else{const{attrs:r,classes:s}=function AW(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!fo(r))break;r=s}n++}return{attrs:e,classes:t}}(e.selectors[0]);r&&HM(i,t,r),s&&s.length>0&&rD(i,t,s.join(" "))}}(c,_,d,n),void 0!==t&&function P8(i,e,t){const n=i.projection=[];for(let r=0;r<e.length;r++){const s=t[r];n.push(null!=s?Array.from(s):null)}}(m,this.ngContentSelectors,t),g=function T8(i,e,t,n,r,s){const o=Wi(),a=r[Ye],l=as(o,r);tO(a,r,o,t,null,n);for(let u=0;u<t.length;u++)nr(fc(r,a,o.directiveStart+u,o),r);nO(a,r,o),l&&nr(l,r);const c=fc(r,a,o.directiveStart+o.componentOffset,o);if(i[Zn]=r[Zn]=c,null!==s)for(const u of s)u(c,e);return zb(a,o,i),c}(C,_,M,y,p,[D8]),Vb(h,p,null)}finally{BM()}return new C8(this.componentType,g,Ju(m,p),p,m)}}class C8 extends nW{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new M8(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;Kb(s[Ye],s,r,e,t),i_(Vr(this._tNode.index,s))}}get injector(){return new Hu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function D8(){const i=Wi();Dm(be()[Ye],i)}function mn(i){let e=function uO(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(ho(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const o=i;o.inputs=Zb(i.inputs),o.declaredInputs=Zb(i.declaredInputs),o.outputs=Zb(i.outputs);const a=r.hostBindings;a&&N8(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&I8(i,l),c&&R8(i,c),yM(i.inputs,r.inputs),yM(i.declaredInputs,r.declaredInputs),yM(i.outputs,r.outputs),ho(r)&&r.data.animation){const u=i.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===mn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function O8(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=Mf(r.hostAttrs,t=Mf(t,r.hostAttrs))}}(n)}function Zb(i){return i===fa?{}:i===cn?[]:i}function I8(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function R8(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function N8(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}function a_(i){return!!Jb(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Jb(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ho(i,e,t){return i[e]=t}function ir(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function _c(i,e,t,n){const r=ir(i,e,t);return ir(i,e+1,n)||r}function Gr(i,e,t,n){const r=be();return ir(r,Vu(),e)&&(on(),zo(Un(),r,i,e,t,n)),Gr}function rd(i,e,t,n){return ir(i,Vu(),t)?e+Tt(t)+n:Pt}function Bn(i,e,t,n,r,s,o,a){const l=be(),c=on(),u=i+In,d=c.firstCreatePass?function W8(i,e,t,n,r,s,o,a,l){const c=e.consts,u=nd(e,i,4,o||null,cl(c,a));jb(e,t,u,cl(c,l)),Dm(e,u);const d=u.tView=Wb(2,u,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,n,r,s,o):c.data[u];Fo(d,!1);const f=l[Vt].createComment("");Wm(c,l,f,d),nr(f,l),n_(l,l[u]=iO(f,l,f,d)),Tm(d)&&Hb(c,l,d),null!=o&&Gb(l,d,a)}function tt(i,e,t){const n=be();return ir(n,Vu(),e)&&us(on(),Un(),n,i,e,n[Vt],t,!1),tt}function Qb(i,e,t,n,r){const o=r?"class":"style";Kb(i,t,e.inputs[o],o,n)}function Y(i,e,t,n){const r=be(),s=on(),o=In+i,a=r[Vt],l=s.firstCreatePass?function X8(i,e,t,n,r,s){const o=e.consts,l=nd(e,i,2,n,cl(o,r));return jb(e,t,l,cl(o,s)),null!==l.attrs&&s_(l,l.attrs,!1),null!==l.mergedAttrs&&s_(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,n):s.data[o],c=r[o]=ub(a,e,function a4(){return At.lFrame.currentNamespace}()),u=Tm(l);return Fo(l,!0),sD(a,c,l),32!=(32&l.flags)&&Wm(s,r,c,l),0===function j5(){return At.lFrame.elementDepthCount}()&&nr(c,r),function $5(){At.lFrame.elementDepthCount++}(),u&&(Hb(s,r,l),zb(s,l,r)),null!==n&&Gb(r,l),Y}function te(){let i=Wi();RM()?function NM(){At.lFrame.isParent=!1}():(i=i.parent,Fo(i,!1));const e=i;!function X5(){At.lFrame.elementDepthCount--}();const t=on();return t.firstCreatePass&&(Dm(t,i),DM(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function d4(i){return 0!=(8&i.flags)}(e)&&Qb(t,e,be(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function h4(i){return 0!=(16&i.flags)}(e)&&Qb(t,e,be(),e.stylesWithoutHost,!1),te}function ct(i,e,t,n){return Y(i,e,t,n),te(),ct}function hd(){return be()}function zf(i){return!!i&&"function"==typeof i.then}const nx=function wO(i){return!!i&&"function"==typeof i.subscribe};function Ot(i,e,t,n){const r=be(),s=on(),o=Wi();return function EO(i,e,t,n,r,s,o){const a=Tm(n),c=i.firstCreatePass&&sO(i),u=e[Zn],d=rO(e);let f=!0;if(3&n.type||o){const g=as(n,e),m=o?o(g):g,_=d.length,M=o?v=>o(Gi(v[n.index])):n.index;let y=null;if(!o&&a&&(y=function Y8(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===n){const a=e[Lu],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,e,r,n.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,f=!1;else{s=AO(n,e,u,s,!1);const v=t.listen(m,r,s);d.push(s,v),c&&c.push(r,M,_,_+1)}}else s=AO(n,e,u,s,!1);const h=n.outputs;let p;if(f&&null!==h&&(p=h[r])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const C=e[p[m]][p[m+1]].subscribe(s),w=d.length;d.push(s,C),c&&c.push(r,n.index,w,-(w+1))}}}(s,r,r[Vt],o,i,e,n),Ot}function TO(i,e,t,n){try{return Fs(6,e,t),!1!==t(n)}catch(r){return aO(i,r),!1}finally{Fs(7,e,t)}}function AO(i,e,t,n,r){return function s(o){if(o===Function)return n;i_(i.componentOffset>-1?Vr(i.index,e):e);let l=TO(e,t,n,o),c=s.__ngNextListenerFn__;for(;c;)l=TO(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Mi(i=1){return function t4(i){return(At.lFrame.contextLView=function n4(i,e){for(;i>0;)e=e[ku],i--;return e}(i,At.lFrame.contextLView))[Zn]}(i)}function c_(i,e,t,n,r){const s=be(),o=rd(s,e,t,n);return o!==Pt&&us(on(),Un(),s,i,o,s[Vt],r,!1),c_}function u_(i,e){return i<<17|e<<2}function dl(i){return i>>17&32767}function ix(i){return 2|i}function yc(i){return(131068&i)>>2}function rx(i,e){return-131069&i|e<<2}function sx(i){return 1|i}function UO(i,e,t,n,r){const s=i[t+1],o=null===e;let a=n?dl(s):yc(s),l=!1;for(;0!==a&&(!1===l||o);){const u=i[a+1];rj(i[a],e)&&(l=!0,i[a+1]=n?sx(u):ix(u)),a=n?dl(u):yc(u)}l&&(i[t+1]=n?ix(s):sx(s))}function rj(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&Xu(i,e)>=0}function ox(i,e,t){return po(i,e,t,!1),ox}function ds(i,e){return po(i,e,null,!0),ds}function po(i,e,t,n){const r=be(),s=on(),o=function _a(i){const e=At.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}(2);s.firstUpdatePass&&function $O(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[vr()],o=function jO(i,e){return e>=i.expandoStartIndex}(i,t);(function KO(i,e){return 0!=(i.flags&(e?8:16))})(s,n)&&null===e&&!o&&(e=!1),e=function fj(i,e,t,n){const r=function kM(i){const e=At.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=Hf(t=ax(null,i,e,t,n),e.attrs,n),s=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==r)if(t=ax(r,i,e,t,n),null===s){let l=function pj(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==yc(n))return i[dl(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=ax(null,i,e,l[1],n),l=Hf(l,e.attrs,n),function gj(i,e,t,n){i[dl(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else s=function mj(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=Hf(n,i[s].hostAttrs,t);return Hf(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function nj(i,e,t,n,r,s){let o=s?e.classBindings:e.styleBindings,a=dl(o),l=yc(o);i[n]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||Xu(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const f=dl(i[a+1]);i[n+1]=u_(f,a),0!==f&&(i[f+1]=rx(i[f+1],n)),i[a+1]=function ej(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=u_(a,0),0!==a&&(i[a+1]=rx(i[a+1],n)),a=n;else i[n+1]=u_(l,0),0===a?a=n:i[l+1]=rx(i[l+1],n),l=n;c&&(i[n+1]=ix(i[n+1])),UO(i,u,n,!0),UO(i,u,n,!1),function ij(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&Xu(s,e)>=0&&(t[n+1]=sx(t[n+1]))}(e,u,i,n,s),o=u_(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,n)}}(s,i,o,n),e!==Pt&&ir(r,o,e)&&function qO(i,e,t,n,r,s,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1],u=function tj(i){return 1==(1&i)}(c)?YO(l,e,t,r,yc(c),o):void 0;d_(u)||(d_(s)||function Q8(i){return 2==(2&i)}(c)&&(s=YO(l,null,t,r,a,o)),function yG(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:zr.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=zr.Important),i.setStyle(t,n,r,s))}}(n,o,Am(vr(),t),r,s))}(s,s.data[vr()],r,r[Vt],i,r[o+1]=function Mj(i,e){return null==i||""===i||("string"==typeof e?i+=e:"object"==typeof i&&(i=Sn(ul(i)))),i}(e,t),n,o)}function ax(i,e,t,n,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],n=Hf(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function Hf(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ls(i,o,!!t||e[++s]))}return void 0===i?null:i}function YO(i,e,t,n,r,s){const o=null===e;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let f=t[r+1];f===Pt&&(f=d?cn:void 0);let h=d?KM(f,n):u===n?f:void 0;if(c&&!d_(h)&&(h=KM(l,n)),d_(h)&&(a=h,o))return a;const p=i[r+1];r=o?dl(p):yc(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=KM(l,n))}return a}function d_(i){return void 0!==i}function Te(i,e=""){const t=be(),n=on(),r=i+In,s=n.firstCreatePass?nd(n,r,1,e,null):n.data[r],o=t[r]=function cb(i,e){return i.createText(e)}(t[Vt],e);Wm(n,t,o,s),Fo(s,!1)}function Li(i){return vc("",i,""),Li}function vc(i,e,t){const n=be(),r=rd(n,i,e,t);return r!==Pt&&function ba(i,e,t){const n=Am(e,i);!function jP(i,e,t){i.setValue(e,t)}(i[Vt],n,t)}(n,vr(),r),vc}const gd="en-US";let yI=gd;function ux(i,e,t,n,r){if(i=vt(i),Array.isArray(i))for(let s=0;s<i.length;s++)ux(i[s],e,t,n,r);else{const s=on(),o=be();let a=mc(i)?i:vt(i.provide),l=TD(i);const c=Wi(),u=1048575&c.providerIndexes,d=c.directiveStart,f=c.providerIndexes>>20;if(mc(i)||!i.multi){const h=new vf(l,r,pe),p=hx(a,e,r?u:u+f,d);-1===p?($M(km(c,o),s,a),dx(s,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(h),o.push(h)):(t[p]=h,o[p]=h)}else{const h=hx(a,e,u+f,d),p=hx(a,e,u,u+f),m=p>=0&&t[p];if(r&&!m||!r&&!(h>=0&&t[h])){$M(km(c,o),s,a);const _=function U6(i,e,t,n,r){const s=new vf(i,t,pe);return s.multi=[],s.index=e,s.componentProviders=0,GI(s,r,n&&!t),s}(r?F6:k6,t.length,r,n,l);!r&&m&&(t[p].providerFactory=_),dx(s,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(_),o.push(_)}else dx(s,i,h>-1?h:p,GI(t[r?p:h],l,!r&&n));!r&&n&&m&&t[p].componentProviders++}}}function dx(i,e,t,n){const r=mc(e),s=function YG(i){return!!i.useClass}(e);if(r||s){const l=(s?vt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[n,l]):c[u+1].push(n,l)}else c.push(t,l)}}}function GI(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function hx(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function k6(i,e,t,n){return fx(this.multi,[])}function F6(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=fc(t,t[Ye],this.providerFactory.index,n);s=a.slice(0,o),fx(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],fx(r,s);return s}function fx(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function Nn(i,e=[]){return t=>{t.providersResolver=(n,r)=>function L6(i,e,t){const n=on();if(n.firstCreatePass){const r=ho(i);ux(t,n.data,n.blueprint,r,!0),ux(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class md{}class WI{}class jI extends md{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lO(this);const n=ss(e);this._bootstrapComponents=Ma(n.bootstrap),this._r3Injector=zD(e,t,[{provide:md,useValue:this},{provide:Nf,useValue:this.componentFactoryResolver}],Sn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class px extends WI{constructor(e){super(),this.moduleType=e}create(e){return new jI(this.moduleType,e)}}class V6 extends md{constructor(e,t,n){super(),this.componentFactoryResolver=new lO(this),this.instance=null;const r=new ED([...e,{provide:md,useValue:this},{provide:Nf,useValue:this.componentFactoryResolver}],t||Zm(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function m_(i,e,t=null){return new V6(i,e,t).injector}let z6=(()=>{class i{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const n=xD(0,t.type),r=n.length>0?m_([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=rt({token:i,providedIn:"environment",factory:()=>new i(qe(Bo))}),i})();function $I(i){i.getStandaloneInjector=e=>e.get(z6).getOrCreateStandaloneInjector(i)}function xi(i,e,t,n){return function tR(i,e,t,n,r,s){const o=e+t;return ir(i,o,r)?Ho(i,o+1,s?n.call(s,r):n(r)):qf(i,o+1)}(be(),yr(),i,e,t,n)}function eR(i,e,t,n,r){return function nR(i,e,t,n,r,s,o){const a=e+t;return _c(i,a,r,s)?Ho(i,a+2,o?n.call(o,r,s):n(r,s)):qf(i,a+2)}(be(),yr(),i,e,t,n,r)}function qf(i,e){const t=i[e];return t===Pt?void 0:t}function iR(i,e,t,n,r,s,o,a){const l=e+t;return function l_(i,e,t,n,r){const s=_c(i,e,t,n);return ir(i,e+2,r)||s}(i,l,r,s,o)?Ho(i,l+3,a?n.call(a,r,s,o):n(r,s,o)):qf(i,l+3)}function aR(i,e,t,n,r){const s=i+In,o=be(),a=function Bu(i,e){return i[e]}(o,s);return function Yf(i,e){return i[Ye].data[e].pure}(o,s)?iR(o,yr(),e,a.transform,t,n,r,a):a.transform(t,n,r)}function mx(i){return e=>{setTimeout(i,void 0,e)}}const Rn=class l$ extends ua{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),o=n;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=mx(s),r&&(r=mx(r)),o&&(o=mx(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Ur&&e.add(a),a}};function c$(){return this._results[Symbol.iterator]()}class _x{get changes(){return this._changes||(this._changes=new Rn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=_x.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=c$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=function Us(i){return i.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function x4(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xa=(()=>{class i{}return i.__NG_ELEMENT_ID__=h$,i})();const u$=xa,d$=class extends u${constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tView,r=e_(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[gf]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[ko];return null!==o&&(r[ko]=o.createEmbeddedView(n)),Vb(n,r,e),new Uf(r)}};function h$(){return __(Wi(),be())}function __(i,e){return 4&i.type?new d$(e,i,Ju(i,e)):null}let mo=(()=>{class i{}return i.__NG_ELEMENT_ID__=f$,i})();function f$(){return uR(Wi(),be())}const p$=mo,lR=class extends p${constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Ju(this._hostTNode,this._hostLView)}get injector(){return new Hu(this._hostTNode,this._hostLView)}get parentInjector(){const e=jM(this._hostTNode,this._hostLView);if(dP(e)){const t=Nm(e,this._hostLView),n=Rm(e);return new Hu(t[Ye].data[n+8],t)}return new Hu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=cR(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-_r}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,n,r,s){const o=e&&!function xf(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,n=d.injector,r=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new Bf(fn(e)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const f=(o?c:this.parentInjector).get(Bo,null);f&&(s=f)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const n=e._lView,r=n[Ye];if(function W5(i){return uo(i[jn])}(n)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=n[jn],f=new lR(d,d[er],d[jn]);f.detach(f.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function uG(i,e,t,n){const r=_r+n,s=t.length;n>0&&(t[r-1][co]=e),n<s-_r?(e[co]=t[r],CP(t,_r+n,e)):(t.push(e),e[co]=null),e[jn]=t;const o=e[gf];null!==o&&t!==o&&function dG(i,e){const t=i[Uu];e[tr]!==e[jn][jn][tr]&&(i[B1]=!0),null===t?i[Uu]=[e]:t.push(e)}(o,e);const a=e[ko];null!==a&&a.insertView(i),e[kt]|=64}(r,n,o,s);const a=pb(s,o),l=n[Vt],c=Gm(l,o[Sm]);return null!==c&&function aG(i,e,t,n,r,s){n[ga]=r,n[er]=e,Df(i,n,t,1,r,s)}(r,o[er],l,n,c,a),e.attachToViewContainerRef(),CP(yx(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=cR(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=db(this._lContainer,t);n&&(Bm(yx(this._lContainer),t),XP(n[Ye],n))}detach(e){const t=this._adjustIndex(e,-1),n=db(this._lContainer,t);return n&&null!=Bm(yx(this._lContainer),t)?new Uf(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function cR(i){return i[Em]}function yx(i){return i[Em]||(i[Em]=[])}function uR(i,e){let t;const n=e[i.index];if(uo(n))t=n;else{let r;if(8&i.type)r=Gi(n);else{const s=e[Vt];r=s.createComment("");const o=as(i,e);gc(s,Gm(s,o),r,function gG(i,e){return i.nextSibling(e)}(s,o),!1)}e[i.index]=t=iO(n,e,r,i),n_(e,t)}return new lR(t,i,e)}class vx{constructor(e){this.queryList=e,this.matches=null}clone(){return new vx(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mx{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Mx(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==mR(e,t).matches&&this.queries[t].setDirty()}}class dR{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class bx{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new bx(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class xx{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new xx(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,g$(t,s)),this.matchTNodeWithReadOption(e,t,Fm(t,e,s,!1,!1))}else n===xa?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Fm(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ni||r===mo||r===xa&&4&t.type)this.addMatch(t.index,-2);else{const s=Fm(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function g$(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function _$(i,e,t,n){return-1===t?function m$(i,e){return 11&i.type?Ju(i,e):4&i.type?__(i,e):null}(e,i):-2===t?function y$(i,e,t){return t===Ni?Ju(e,i):t===xa?__(e,i):t===mo?uR(e,i):void 0}(i,e,n):fc(i,i[Ye],t,e)}function hR(i,e,t,n){const r=e[ko].queries[n];if(null===r.matches){const s=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:_$(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function Cx(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const o=hR(i,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=_r;d<u.length;d++){const f=u[d];f[gf]===f[jn]&&Cx(f[Ye],f,c,n)}if(null!==u[Uu]){const d=u[Uu];for(let f=0;f<d.length;f++){const h=d[f];Cx(h[Ye],h,c,n)}}}}}return n}function Kf(i){const e=be(),t=on(),n=tP();FM(n+1);const r=mR(t,n);if(i.dirty&&function G5(i){return 4==(4&i[kt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?Cx(t,e,n,[]):hR(t,e,r,n);i.reset(s,oW),i.notifyOnChanges()}return!0}return!1}function y_(i,e,t){const n=on();n.firstCreatePass&&(function gR(i,e,t){null===i.queries&&(i.queries=new bx),i.queries.track(new xx(e,t))}(n,new dR(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),function pR(i,e,t){const n=new _x(4==(4&t));JD(i,e,n,n.destroy),null===e[ko]&&(e[ko]=new Mx),e[ko].queries.push(new vx(n))}(n,be(),e)}function Zf(){return function v$(i,e){return i[ko].queries[e].queryList}(be(),tP())}function mR(i,e){return i.queries.getByIndex(e)}function M_(...i){}const b_=new it("Application Initializer");let x_=(()=>{class i{constructor(t){this.appInits=t,this.resolve=M_,this.reject=M_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(zf(s))t.push(s);else if(nx(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(qe(b_,8))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Qf=new it("AppId",{providedIn:"root",factory:function NR(){return`${Px()}${Px()}${Px()}`}});function Px(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LR=new it("Platform Initializer"),Dx=new it("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kR=new it("AnimationModuleType");let z$=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ca=new it("LocaleId",{providedIn:"root",factory:()=>Bt(Ca,Mt.Optional|Mt.SkipSelf)||function H$(){return typeof $localize<"u"&&$localize.locale||gd}()});class W${constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let FR=(()=>{class i{compileModuleSync(t){return new px(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),s=Ma(ss(t).declarations).reduce((o,a)=>{const l=fn(a);return l&&o.push(new Bf(l)),o},[]);return new W$(n,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const X$=(()=>Promise.resolve(0))();function Ox(i){typeof Zone>"u"?X$.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Mn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rn(!1),this.onMicrotaskEmpty=new Rn(!1),this.onStable=new Rn(!1),this.onError=new Rn(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function q$(){let i=On.requestAnimationFrame,e=On.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Z$(i){const e=()=>{!function K$(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(On,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Rx(i),i.isCheckStableRunning=!0,Ix(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Rx(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,o,a)=>{try{return VR(i),t.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),zR(i)}},onInvoke:(t,n,r,s,o,a,l)=>{try{return VR(i),t.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),zR(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,Rx(i),Ix(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mn.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Mn.isInAngularZone())throw new ce(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Y$,M_,M_);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Y$={};function Ix(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Rx(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function VR(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function zR(i){i._nesting--,Ix(i)}class J${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rn,this.onMicrotaskEmpty=new Rn,this.onStable=new Rn,this.onError=new Rn}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const HR=new it(""),C_=new it("");let kx,Nx=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kx||(function Q$(i){kx=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mn.assertNotInAngularZone(),Ox(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ox(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)(qe(Mn),qe(Lx),qe(C_))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})(),Lx=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return kx?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const wa=!1;let hl=null;const GR=new it("AllowMultipleToken"),Fx=new it("PlatformDestroyListeners"),WR=new it("appBootstrapListener");class jR{constructor(e,t){this.name=e,this.token=t}}function XR(i,e,t=[]){const n=`Platform: ${e}`,r=new it(n);return(s=[])=>{let o=Ux();if(!o||o.injector.get(GR,!1)){const a=[...t,...s,{provide:r,useValue:!0}];i?i(a):function nX(i){if(hl&&!hl.get(GR,!1))throw new ce(400,!1);hl=i;const e=i.get(YR);(function $R(i){const e=i.get(LR,null);e&&e.forEach(t=>t())})(i)}(function qR(i=[],e){return Vo.create({name:e,providers:[{provide:Tb,useValue:"platform"},{provide:Fx,useValue:new Set([()=>hl=null])},...i]})}(a,n))}return function rX(i){const e=Ux();if(!e)throw new ce(401,!1);return e}()}}function Ux(){return hl?.get(YR)??null}let YR=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function ZR(i,e){let t;return t="noop"===i?new J$:("zone.js"===i?void 0:i)||new Mn(e),t}(n?.ngZone,function KR(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Mn,useValue:r}];return r.run(()=>{const o=Vo.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Qu,null);if(!l)throw new ce(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{w_(this._modules,a),c.unsubscribe()})}),function JR(i,e,t){try{const n=t();return zf(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(x_);return c.runInitializers(),c.donePromise.then(()=>(function vI(i){Rs(i,"Expected localeId to be defined"),"string"==typeof i&&(yI=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ca,gd)||gd),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const r=QR({},n);return function eX(i,e,t){const n=new px(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get(ep);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ce(-403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(Fx,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(qe(Vo))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function QR(i,e){return Array.isArray(e)?e.reduce(QR,i):{...i,...e}}let ep=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Kn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Kn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Mn.assertNotInAngularZone(),Ox(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function c5(...i){const e=cf(i),t=function n5(i,e){return"number"==typeof mM(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?ao(n[0]):Iu(t)(oi(n,e)):No}(s,o.pipe(function u5(i={}){const{connector:e=(()=>new ua),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),o=l=void 0,u=d=!1},p=()=>{const g=o;h(),g?.unsubscribe()};return Ri((g,m)=>{c++,!d&&!u&&f();const _=l=l??e();m.add(()=>{c--,0===c&&!d&&!u&&(a=_M(p,r))}),_.subscribe(m),!o&&c>0&&(o=new lf({next:M=>_.next(M),error:M=>{d=!0,f(),a=_M(h,t,M),_.error(M)},complete:()=>{u=!0,f(),a=_M(h,n),_.complete()}}),ao(g).subscribe(o))})(s)}}()))}bootstrap(t,n){const r=t instanceof AD;if(!this._injector.get(x_).done){!r&&function Nu(i){const e=fn(i)||Qi(i)||Br(i);return null!==e&&e.standalone}(t);throw new ce(405,wa)}let o;o=r?t:this._injector.get(Nf).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function tX(i){return i.isBoundToModule}(o)?void 0:this._injector.get(md),c=o.create(Vo.NULL,[],n||o.selector,a),u=c.location.nativeElement,d=c.injector.get(HR,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),w_(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;w_(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const n=this._injector.get(WR,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>w_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ce(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(qe(Mn),qe(Bo),qe(Qu))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function w_(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let S_=(()=>{class i{}return i.__NG_ELEMENT_ID__=oX,i})();function oX(i){return function aX(i,e,t){if(_f(i)&&!t){const n=Vr(i.index,e);return new Uf(n,n)}return 47&i.type?new Uf(e[tr],e):null}(Wi(),be(),16==(16&i))}class rN{constructor(){}supports(e){return a_(e)}create(e){return new fX(e)}}const hX=(i,e)=>e;class fX{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||hX}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<oN(n,r,s)?t:n,a=oN(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let f=0;f<c;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<c&&(s[f]=h+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!a_(e))throw new ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),n=!0),t=t._next}else r=0,function z8(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[Symbol.iterator]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new pX(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new sN),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class pX{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gX{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class sN{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new gX,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oN(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class aN{constructor(){}supports(e){return e instanceof Map||Jb(e)}create(){return new mX}}class mX{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Jb(e)))throw new ce(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new _X(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class _X{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lN(){return new A_([new rN])}let A_=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||lN()),deps:[[i,new Sf,new wf]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new ce(901,!1)}}return i.\u0275prov=rt({token:i,providedIn:"root",factory:lN}),i})();function cN(){return new tp([new aN])}let tp=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||cN()),deps:[[i,new Sf,new wf]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new ce(901,!1)}}return i.\u0275prov=rt({token:i,providedIn:"root",factory:cN}),i})();const MX=XR(null,"core",[]);let bX=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(qe(ep))},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({}),i})(),Gx=null;function Sa(){return Gx}class wX{}const $i=new it("DocumentToken");let Wx=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:function(){return function SX(){return qe(uN)}()},providedIn:"platform"}),i})();const EX=new it("Location Initialized");let uN=(()=>{class i extends Wx{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sa().getBaseHref(this._doc)}onPopState(t){const n=Sa().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=Sa().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,n,r){dN()?this._history.pushState(t,n,r):this._location.hash=r}replaceState(t,n,r){dN()?this._history.replaceState(t,n,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(qe($i))},i.\u0275prov=rt({token:i,factory:function(){return function TX(){return new uN(qe($i))}()},providedIn:"platform"}),i})();function dN(){return!!window.history.pushState}function jx(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function hN(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function Ea(i){return i&&"?"!==i[0]?"?"+i:i}let xc=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:function(){return Bt(pN)},providedIn:"root"}),i})();const fN=new it("appBaseHref");let pN=(()=>{class i extends xc{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Bt($i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jx(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+Ea(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const o=this.prepareExternalUrl(r+Ea(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){const o=this.prepareExternalUrl(r+Ea(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(qe(Wx),qe(fN,8))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),AX=(()=>{class i extends xc{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=jx(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,s){let o=this.prepareExternalUrl(r+Ea(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){let o=this.prepareExternalUrl(r+Ea(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(qe(Wx),qe(fN,8))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})(),$x=(()=>{class i{constructor(t){this._subject=new Rn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._basePath=function OX(i){if(new RegExp("^(https?:)?//").test(i)){const[,t]=i.split(/\/\/[^\/]+/);return t}return i}(hN(gN(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+Ea(n))}normalize(t){return i.stripTrailingSlash(function DX(i,e){if(!i||!e.startsWith(i))return e;const t=e.substring(i.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=Ea,i.joinWithSlash=jx,i.stripTrailingSlash=hN,i.\u0275fac=function(t){return new(t||i)(qe(xc))},i.\u0275prov=rt({token:i,factory:function(){return function PX(){return new $x(qe(xc))}()},providedIn:"root"}),i})();function gN(i){return i.replace(/\/index.html$/,"")}function wN(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const nC=/\s+/,SN=[];let iC=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this.initialClasses=SN,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(nC):SN}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(nC):t}ngDoCheck(){for(const n of this.initialClasses)this._updateState(n,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const n of t)this._updateState(n,!0);else if(null!=t)for(const n of Object.keys(t))this._updateState(n,Boolean(t[n]));this._applyStateDiff()}_updateState(t,n){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(t,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const n=t[0],r=t[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(t,n){(t=t.trim()).length>0&&t.split(nC).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(pe(A_),pe(tp),pe(Ni),pe(cs))},i.\u0275dir=pt({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class g9{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rp=(()=>{class i{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new g9(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),AN(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{AN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(pe(mo),pe(xa),pe(A_))},i.\u0275dir=pt({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function AN(i,e){i.context.$implicit=e.item}let sp=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new _9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){PN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){PN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(pe(mo),pe(xa))},i.\u0275dir=pt({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class _9{constructor(){this.$implicit=null,this.ngIf=null}}function PN(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${Sn(e)}'.`)}let lC=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({}),i})();let j9=(()=>{class i{}return i.\u0275prov=rt({token:i,providedIn:"root",factory:()=>new $9(qe($i),window)}),i})();class $9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function X9(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=RN(this.window.history)||RN(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function RN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class NN{}class Mq extends wX{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class dC extends Mq{static makeCurrent(){!function CX(i){Gx||(Gx=i)}(new dC)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bq(){return ap=ap||document.querySelector("base"),ap?ap.getAttribute("href"):null}();return null==t?null:function xq(i){V_=V_||document.createElement("a"),V_.setAttribute("href",i);const e=V_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ap=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wN(document.cookie,e)}}let V_,ap=null;const BN=new it("TRANSITION_ID"),wq=[{provide:b_,useFactory:function Cq(i,e,t){return()=>{t.get(x_).donePromise.then(()=>{const n=Sa(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[BN,$i,Vo],multi:!0}];let Eq=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();const z_=new it("EventManagerPlugins");let H_=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(qe(z_),qe(Mn))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();class VN{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Sa().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let zN=(()=>{class i{constructor(){this.usageCount=new Map}addStyles(t){for(const n of t)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(t){for(const n of t)0===this.changeUsageCount(n,-1)&&this.onStyleRemoved(n)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,n){const r=this.usageCount;let s=r.get(t)??0;return s+=n,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})(),lp=(()=>{class i extends zN{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){const n=this.styleRef;n.get(t)?.forEach(s=>s.remove()),n.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,n){const r=this.doc.createElement("style");r.textContent=n,t.appendChild(r);const s=this.styleRef.get(n);s?s.push(r):this.styleRef.set(n,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return i.\u0275fac=function(t){return new(t||i)(qe($i))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();const hC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fC=/%COMP%/g,WN=new it("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function jN(i,e){return e.flat(100).map(t=>t.replace(fC,i))}function $N(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let G_=(()=>{class i{constructor(t,n,r,s){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new pC(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,n);return r instanceof YN?r.applyToHost(t):r instanceof gC&&r.applyStyles(),r}getOrCreateRenderer(t,n){const r=this.rendererByCompId;let s=r.get(n.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(n.encapsulation){case lo.Emulated:s=new YN(o,a,n,this.appId,l);break;case lo.ShadowDom:return new Rq(o,a,t,n);default:s=new gC(o,a,n,l)}s.onDestroy=()=>r.delete(n.id),r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(qe(H_),qe(lp),qe(Qf),qe(WN))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();class pC{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(hC[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qN(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(qN(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=hC[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=hC[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(zr.DashCase|zr.Important)?e.style.setProperty(t,n,r&zr.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&zr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$N(n)):this.eventManager.addEventListener(e,t,$N(n))}}function qN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Rq extends pC{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=jN(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gC extends pC{constructor(e,t,n,r,s=n.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=jN(s,n.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class YN extends gC{constructor(e,t,n,r,s){const o=r+"-"+n.id;super(e,t,n,s,o),this.contentAttr=function Dq(i){return"_ngcontent-%COMP%".replace(fC,i)}(o),this.hostAttr=function Oq(i){return"_nghost-%COMP%".replace(fC,i)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}let Nq=(()=>{class i extends VN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)(qe($i))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();const KN=["alt","control","meta","shift"],Lq={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kq={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Fq=(()=>{class i extends VN{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sa().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),KN.forEach(c=>{const u=n.indexOf(c);u>-1&&(n.splice(u,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,n){let r=Lq[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),KN.forEach(o=>{o!==r&&(0,kq[o])(t)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(t,n,r){return s=>{i.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(qe($i))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();const JN=[{provide:Dx,useValue:"browser"},{provide:LR,useValue:function Uq(){dC.makeCurrent()},multi:!0},{provide:$i,useFactory:function Vq(){return function CG(i){yb=i}(document),document},deps:[]}],zq=XR(MX,"browser",JN),QN=new it(""),eL=[{provide:C_,useClass:class Sq{addToWindow(e){On.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},On.getAllAngularTestabilities=()=>e.getAllTestabilities(),On.getAllAngularRootElements=()=>e.getAllRootElements(),On.frameworkStabilizers||(On.frameworkStabilizers=[]),On.frameworkStabilizers.push(n=>{const r=On.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?Sa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:HR,useClass:Nx,deps:[Mn,Lx,C_]},{provide:Nx,useClass:Nx,deps:[Mn,Lx,C_]}],tL=[{provide:Tb,useValue:"root"},{provide:Qu,useFactory:function Bq(){return new Qu},deps:[]},{provide:z_,useClass:Nq,multi:!0,deps:[$i,Mn,Dx]},{provide:z_,useClass:Fq,multi:!0,deps:[$i]},{provide:G_,useClass:G_,deps:[H_,lp,Qf,WN]},{provide:Lf,useExisting:G_},{provide:zN,useExisting:lp},{provide:lp,useClass:lp,deps:[$i]},{provide:H_,useClass:H_,deps:[z_,Mn]},{provide:NN,useClass:Eq,deps:[]},[]];let nL=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:Qf,useValue:t.appId},{provide:BN,useExisting:Qf},wq]}}}return i.\u0275fac=function(t){return new(t||i)(qe(QN,12))},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({providers:[...tL,...eL],imports:[lC,bX]}),i})(),iL=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(qe($i))},i.\u0275prov=rt({token:i,factory:function(t){let n=null;return n=t?new t:function Gq(){return new iL(qe($i))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;class oL{}class Yq{}const Aa="*";function aL(i,e=null){return{type:2,steps:i,options:e}}function lL(i){return{type:6,styles:i,offset:null}}function cL(i){Promise.resolve().then(i)}class cp{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class uL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?cL(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}const yC="!";function dL(i){return new ce(3e3,!1)}function D7(){return typeof window<"u"&&typeof window.document<"u"}function vC(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function pl(i){switch(i.length){case 0:return new cp;case 1:return i[0];default:return new uL(i)}}function hL(i,e,t,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(u=>{const d=u.get("offset"),f=d==l,h=f&&c||new Map;u.forEach((p,g)=>{let m=g,_=p;if("offset"!==g)switch(m=e.normalizePropertyName(m,o),_){case yC:_=r.get(g);break;case Aa:_=s.get(g);break;default:_=e.normalizeStyleValue(g,m,_,o)}h.set(m,_)}),f||a.push(h),c=h,l=d}),o.length)throw function y7(i){return new ce(3502,!1)}();return a}function MC(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&bC(t,"start",i)));break;case"done":i.onDone(()=>n(t&&bC(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&bC(t,"destroy",i)))}}function bC(i,e,t){const s=xC(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(s._data=o),s}function xC(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function hs(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function fL(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let CC=(i,e)=>!1,pL=(i,e,t)=>[],gL=null;function wC(i){const e=i.parentNode||i.host;return e===gL?null:e}(vC()||typeof Element<"u")&&(D7()?(gL=(()=>document.documentElement)(),CC=(i,e)=>{for(;e;){if(e===i)return!0;e=wC(e)}return!1}):CC=(i,e)=>i.contains(e),pL=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let Cc=null,mL=!1;const _L=CC,yL=pL;let vL=(()=>{class i{validateStyleProperty(t){return function I7(i){Cc||(Cc=function R7(){return typeof document<"u"?document.body:null}()||{},mL=!!Cc.style&&"WebkitAppearance"in Cc.style);let e=!0;return Cc.style&&!function O7(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in Cc.style,!e&&mL&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Cc.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return _L(t,n)}getParentElement(t){return wC(t)}query(t,n,r){return yL(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new cp(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})(),SC=(()=>{class i{}return i.NOOP=new vL,i})();const N7=1e3,EC="ng-enter",W_="ng-leave",j_="ng-trigger",$_=".ng-trigger",bL="ng-animating",TC=".ng-animating";function Pa(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:AC(parseFloat(e[1]),e[2])}function AC(i,e){return"s"===e?i*N7:i}function X_(i,e,t){return i.hasOwnProperty("duration")?i:function k7(i,e,t){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(dL()),{duration:0,delay:0,easing:""};r=AC(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=AC(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Kq(){return new ce(3100,!1)}()),a=!0),s<0&&(e.push(function Zq(){return new ce(3101,!1)}()),a=!0),a&&e.splice(l,0,dL())}return{duration:r,delay:s,easing:o}}(i,e,t)}function up(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function xL(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function gl(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function wL(i,e,t){return t?e+":"+t+";":""}function SL(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=wL(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=wL(0,V7(t),i.style[t]));i.setAttribute("style",e)}function jo(i,e,t){i.style&&(e.forEach((n,r)=>{const s=DC(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),vC()&&SL(i))}function wc(i,e){i.style&&(e.forEach((t,n)=>{const r=DC(n);i.style[r]=""}),vC()&&SL(i))}function dp(i){return Array.isArray(i)?1==i.length?i[0]:aL(i):i}const PC=new RegExp("{{\\s*(.+?)\\s*}}","g");function EL(i){let e=[];if("string"==typeof i){let t;for(;t=PC.exec(i);)e.push(t[1]);PC.lastIndex=0}return e}function hp(i,e,t){const n=i.toString(),r=n.replace(PC,(s,o)=>{let a=e[o];return null==a&&(t.push(function Qq(i){return new ce(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function q_(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const B7=/-+([a-z0-9])/g;function DC(i){return i.replace(B7,(...e)=>e[1].toUpperCase())}function V7(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function fs(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function e7(i){return new ce(3004,!1)}()}}function TL(i,e){return window.getComputedStyle(i)[e]}const Z_="*";function $7(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function X7(i,e,t){if(":"==i[0]){const l=function q7(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function p7(i){return new ce(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function f7(i){return new ce(3015,!1)}()),e;const r=n[1],s=n[2],o=n[3];e.push(AL(r,o));"<"==s[0]&&!(r==Z_&&o==Z_)&&e.push(AL(o,r))}(n,t,e)):t.push(i),t}const J_=new Set(["true","1"]),Q_=new Set(["false","0"]);function AL(i,e){const t=J_.has(i)||Q_.has(i),n=J_.has(e)||Q_.has(e);return(r,s)=>{let o=i==Z_||i==r,a=e==Z_||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?J_.has(i):Q_.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?J_.has(e):Q_.has(e)),o&&a}}const Y7=new RegExp("s*:selfs*,?","g");function OC(i,e,t,n){return new K7(i).build(e,t,n)}class K7{constructor(e){this._driver=e}build(e,t,n){const r=new Q7(t);return this._resetContextStyleTimingState(r),fs(this,dp(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function n7(){return new ce(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function i7(){return new ce(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{EL(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(q_(s.values()),t.errors.push(function r7(i,e){return new ce(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=fs(this,dp(e.animation),t);return{type:1,matchers:$7(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Sc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>fs(this,n,t)),options:Sc(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=n;const a=fs(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Sc(e.options)}}visitAnimate(e,t){const n=function tY(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return IC(X_(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=IC(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=X_(t,e);return IC(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:lL({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=lL(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Aa?n.push(a):t.errors.push(new ce(3002,!1)):n.push(xL(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function o7(i,e,t,n,r){return new ce(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function U7(i,e,t){const n=e.params||{},r=EL(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function Jq(i){return new ce(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function a7(){return new ce(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const M=this._makeStyleAst(_,t);let y=null!=M.offset?M.offset:function eY(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(M.styles),v=0;return null!=y&&(s++,v=M.offset=y),l=l||v<0||v>1,a=a||v<c,c=v,o.push(v),M});l&&t.errors.push(function l7(){return new ce(3012,!1)}()),a&&t.errors.push(function c7(){return new ce(3200,!1)}());const d=e.steps.length;let f=0;s>0&&s<d?t.errors.push(function u7(){return new ce(3202,!1)}()):0==s&&(f=1/(d-1));const h=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((_,M)=>{const y=f>0?M==h?1:f*M:o[M],v=y*m;t.currentTime=p+g.delay+v,g.duration=v,this._validateStyleAst(_,t),_.offset=y,n.styles.push(_)}),n}visitReference(e,t){return{type:8,animation:fs(this,dp(e.animation),t),options:Sc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Sc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sc(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Z7(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(Y7,"")),i=i.replace(/@\*/g,$_).replace(/@\w+/g,t=>$_+"-"+t.slice(1)).replace(/:animating/g,TC),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,hs(t.collectedStyles,t.currentQuerySelector,new Map);const a=fs(this,dp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Sc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function d7(){return new ce(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:X_(e.timings,t.errors,!0);return{type:12,animation:fs(this,dp(e.animation),t),timings:n,options:null}}}class Q7{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Sc(i){return i?(i=up(i)).params&&(i.params=function J7(i){return i?up(i):null}(i.params)):i={},i}function IC(i,e,t){return{duration:i,delay:e,easing:t}}function RC(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class ey{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const rY=new RegExp(":enter","g"),oY=new RegExp(":leave","g");function NC(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return(new aY).buildKeyframes(i,e,t,n,r,s,o,a,l,c)}class aY{buildKeyframes(e,t,n,r,s,o,a,l,c,u=[]){c=c||new ey;const d=new LC(e,t,c,r,s,u,[]);d.options=l;const f=l.delay?Pa(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,l),fs(this,n,d);const h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){const m=h[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return h.length?h.map(p=>p.buildKeyframes()):[RC(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Pa(hp(s,r?.params??{},t.errors));n.delayNextStep(o)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const o=null!=n.duration?Pa(n.duration):null,a=null!=n.delay?Pa(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),fs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ty);const o=Pa(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>fs(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Pa(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),fs(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return X_(t.params?hp(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Pa(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ty);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),fs(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;fs(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-d+(r.startTime-n.currentTimeline.startTime)}}const ty={};class LC{constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ty,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new ny(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=Pa(n.duration)),null!=n.delay&&(r.delay=Pa(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=hp(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new LC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ty,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new lY(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(rY,"."+this._enterClassName)).replace(oY,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function h7(i){return new ce(3014,!1)}()),a}}class ny{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ny(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Aa),this._currentKeyframe.set(t,Aa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function cY(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,Aa)}else gl(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=hp(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Aa),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=gl(a,new Map,this._backFill);c.forEach((u,d)=>{u===yC?e.add(d):u===Aa&&t.add(d)}),n||c.set("offset",l/this.duration),r.push(c)});const s=e.size?q_(e.values()):[],o=t.size?q_(t.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return RC(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class lY extends ny{constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=n+t,a=t/o,l=gl(e[0]);l.set("offset",0),s.push(l);const c=gl(e[0]);c.set("offset",OL(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let f=gl(e[d]);const h=f.get("offset");f.set("offset",OL((t+h*n)/o)),s.push(f)}n=o,t=0,r="",e=s}return RC(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function OL(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class kC{}const uY=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class dY extends kC{normalizePropertyName(e,t){return DC(e)}normalizeStyleValue(e,t,n,r){let s="";const o=n.toString().trim();if(uY.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function t7(i,e){return new ce(3005,!1)}())}return o+s}}function IL(i,e,t,n,r,s,o,a,l,c,u,d,f){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}const FC={};class RL{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function hY(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,u){const d=[],f=this.ast.options&&this.ast.options.params||FC,p=this.buildStyles(n,a&&a.params||FC,d),g=l&&l.params||FC,m=this.buildStyles(r,g,d),_=new Set,M=new Map,y=new Map,v="void"===r,C={params:fY(g,f),delay:this.ast.options?.delay},w=u?[]:NC(e,t,this.ast.animation,s,o,p,m,C,c,d);let S=0;if(w.forEach(x=>{S=Math.max(x.duration+x.delay,S)}),d.length)return IL(t,this._triggerName,n,r,v,p,m,[],[],M,y,S,d);w.forEach(x=>{const b=x.element,P=hs(M,b,new Set);x.preStyleProps.forEach(L=>P.add(L));const k=hs(y,b,new Set);x.postStyleProps.forEach(L=>k.add(L)),b!==t&&_.add(b)});const E=q_(_.values());return IL(t,this._triggerName,n,r,v,p,m,w,E,M,y,S)}}function fY(i,e){const t=up(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class pY{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=up(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=hp(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(a,o)})}),n}}class mY{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new pY(r.style,r.options&&r.options.params||{},n))}),NL(this.states,"true","1"),NL(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new RL(e,r,this.states))}),this.fallbackTransition=function _Y(i,e,t){return new RL(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function NL(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const yY=new ey;class vY{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],r=[],s=OC(this._driver,t,n,r);if(n.length)throw function v7(i){return new ce(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=hL(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=NC(this._driver,t,s,EC,W_,new Map,new Map,n,yY,r),o.forEach(u=>{const d=hs(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(r.push(function M7(){return new ce(3300,!1)}()),o=[]),r.length)throw function b7(i){return new ce(3504,!1)}();a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Aa))})});const c=pl(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function x7(i){return new ce(3301,!1)}();return t}listen(e,t,n,r){const s=xC(t,"","","");return MC(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const LL="ng-animate-queued",UC="ng-animate-disabled",wY=[],kL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},SY={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Hs="__ng_removed";class BC{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function PY(i){return i??null}(n?e.value:e),n){const s=up(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const fp="void",VC=new BC(fp);class EY{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Gs(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function C7(i,e){return new ce(3302,!1)}();if(null==n||0==n.length)throw function w7(i){return new ce(3303,!1)}();if(!function DY(i){return"start"==i||"done"==i}(n))throw function S7(i,e){return new ce(3400,!1)}();const s=hs(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=hs(this._engine.statesByElement,e,new Map);return a.has(t)||(Gs(e,j_),Gs(e,j_+"-"+t),a.set(t,VC)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function E7(i){return new ce(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),o=new zC(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Gs(e,j_),Gs(e,j_+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new BC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=VC),c.value!==fp&&l.value===c.value){if(!function RY(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(l.params,c.params)){const g=[],m=s.matchStyles(l.value,l.params,g),_=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{wc(e,m),jo(e,_)})}return}const f=hs(this._engine.playersByElement,e,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let h=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!h){if(!r)return;h=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Gs(e,LL),o.onStart(()=>{Md(e,LL)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let _=m.indexOf(o);_>=0&&m.splice(_,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,$_,!0);n.forEach(r=>{if(r[Hs])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,fp,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&pl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||VC,u=new BC(fp),d=new zC(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Hs];(!s||s===kL)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Gs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=xC(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,MC(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class TY{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new EY(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(iy(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!iy(t))return;const s=t[Hs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Gs(e,UC)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Md(e,UC))}removeNode(e,t,n,r){if(iy(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[Hs]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return iy(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,$_,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,TC,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return pl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Hs];if(t&&t.setForRemoval){if(e[Hs]=kL,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(UC)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Gs(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?pl(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function T7(i){return new ce(3402,!1)}()}_flushAnimations(e,t){const n=new ey,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(N=>{u.add(N);const V=this.driver.query(N,".ng-animate-queued",!0);for(let B=0;B<V.length;B++)u.add(V[B])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=BL(f,this.collectedEnterElements),p=new Map;let g=0;h.forEach((N,V)=>{const B=EC+g++;p.set(V,B),N.forEach(ee=>Gs(ee,B))});const m=[],_=new Set,M=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const V=this.collectedLeaveElements[N],B=V[Hs];B&&B.setForRemoval&&(m.push(V),_.add(V),B.hasAnimation?this.driver.query(V,".ng-star-inserted",!0).forEach(ee=>_.add(ee)):M.add(V))}const y=new Map,v=BL(f,Array.from(_));v.forEach((N,V)=>{const B=W_+g++;y.set(V,B),N.forEach(ee=>Gs(ee,B))}),e.push(()=>{h.forEach((N,V)=>{const B=p.get(V);N.forEach(ee=>Md(ee,B))}),v.forEach((N,V)=>{const B=y.get(V);N.forEach(ee=>Md(ee,B))}),m.forEach(N=>{this.processLeaveNode(N)})});const C=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(B=>{const ee=B.player,R=B.element;if(C.push(ee),this.collectedEnterElements.length){const se=R[Hs];if(se&&se.setForMove){if(se.previousTriggersValues&&se.previousTriggersValues.has(B.triggerName)){const Se=se.previousTriggersValues.get(B.triggerName),Ue=this.statesByElement.get(B.element);if(Ue&&Ue.has(B.triggerName)){const Ge=Ue.get(B.triggerName);Ge.value=Se,Ue.set(B.triggerName,Ge)}}return void ee.destroy()}}const ae=!d||!this.driver.containsElement(d,R),Ee=y.get(R),He=p.get(R),$=this._buildInstruction(B,n,He,Ee,ae);if($.errors&&$.errors.length)return void w.push($);if(ae)return ee.onStart(()=>wc(R,$.fromStyles)),ee.onDestroy(()=>jo(R,$.toStyles)),void r.push(ee);if(B.isFallbackTransition)return ee.onStart(()=>wc(R,$.fromStyles)),ee.onDestroy(()=>jo(R,$.toStyles)),void r.push(ee);const ge=[];$.timelines.forEach(se=>{se.stretchStartingKeyframe=!0,this.disabledNodes.has(se.element)||ge.push(se)}),$.timelines=ge,n.append(R,$.timelines),o.push({instruction:$,player:ee,element:R}),$.queriedElements.forEach(se=>hs(a,se,[]).push(ee)),$.preStyleProps.forEach((se,Se)=>{if(se.size){let Ue=l.get(Se);Ue||l.set(Se,Ue=new Set),se.forEach((Ge,Je)=>Ue.add(Je))}}),$.postStyleProps.forEach((se,Se)=>{let Ue=c.get(Se);Ue||c.set(Se,Ue=new Set),se.forEach((Ge,Je)=>Ue.add(Je))})});if(w.length){const N=[];w.forEach(V=>{N.push(function A7(i,e){return new ce(3505,!1)}())}),C.forEach(V=>V.destroy()),this.reportError(N)}const S=new Map,E=new Map;o.forEach(N=>{const V=N.element;n.has(V)&&(E.set(V,V),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,S))}),r.forEach(N=>{const V=N.element;this._getPreviousPlayers(V,!1,N.namespaceId,N.triggerName,null).forEach(ee=>{hs(S,V,[]).push(ee),ee.destroy()})});const x=m.filter(N=>zL(N,l,c)),b=new Map;UL(b,this.driver,M,c,Aa).forEach(N=>{zL(N,l,c)&&x.push(N)});const k=new Map;h.forEach((N,V)=>{UL(k,this.driver,new Set(N),l,yC)}),x.forEach(N=>{const V=b.get(N),B=k.get(N);b.set(N,new Map([...Array.from(V?.entries()??[]),...Array.from(B?.entries()??[])]))});const L=[],W=[],q={};o.forEach(N=>{const{element:V,player:B,instruction:ee}=N;if(n.has(V)){if(u.has(V))return B.onDestroy(()=>jo(V,ee.toStyles)),B.disabled=!0,B.overrideTotalTime(ee.totalTime),void r.push(B);let R=q;if(E.size>1){let Ee=V;const He=[];for(;Ee=Ee.parentNode;){const $=E.get(Ee);if($){R=$;break}He.push(Ee)}He.forEach($=>E.set($,R))}const ae=this._buildAnimation(B.namespaceId,ee,S,s,k,b);if(B.setRealPlayer(ae),R===q)L.push(B);else{const Ee=this.playersByElement.get(R);Ee&&Ee.length&&(B.parentPlayer=pl(Ee)),r.push(B)}}else wc(V,ee.fromStyles),B.onDestroy(()=>jo(V,ee.toStyles)),W.push(B),u.has(V)&&r.push(B)}),W.forEach(N=>{const V=s.get(N.element);if(V&&V.length){const B=pl(V);N.setRealPlayer(B)}}),r.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<m.length;N++){const V=m[N],B=V[Hs];if(Md(V,W_),B&&B.hasAnimation)continue;let ee=[];if(a.size){let ae=a.get(V);ae&&ae.length&&ee.push(...ae);let Ee=this.driver.query(V,TC,!0);for(let He=0;He<Ee.length;He++){let $=a.get(Ee[He]);$&&$.length&&ee.push(...$)}}const R=ee.filter(ae=>!ae.destroyed);R.length?OY(this,V,R):this.processLeaveNode(V)}return m.length=0,L.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();const V=this.players.indexOf(N);this.players.splice(V,1)}),N.play()}),L}elementContainsData(e,t){let n=!1;const r=t[Hs];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==fp;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=hs(n,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(h=>{const p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}wc(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,f=t.timelines.map(p=>{const g=p.element;u.add(g);const m=g[Hs];if(m&&m.removedBeforeQueried)return new cp(p.duration,p.delay);const _=g!==l,M=function IY(i){const e=[];return VL(i,e),e}((n.get(g)||wY).map(S=>S.getRealPlayer())).filter(S=>!!S.element&&S.element===g),y=s.get(g),v=o.get(g),C=hL(0,this._normalizer,0,p.keyframes,y,v),w=this._buildPlayer(p,C,M);if(p.subTimeline&&r&&d.add(g),_){const S=new zC(e,a,g);S.setRealPlayer(w),c.push(S)}return w});c.forEach(p=>{hs(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function AY(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Gs(p,bL));const h=pl(f);return h.onDestroy(()=>{u.forEach(p=>Md(p,bL)),jo(l,t.toStyles)}),d.forEach(p=>{hs(r,p,[]).push(h)}),h}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new cp(e.duration,e.delay)}}class zC{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new cp,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>MC(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){hs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function iy(i){return i&&1===i.nodeType}function FL(i,e){const t=i.style.display;return i.style.display=e??"none",t}function UL(i,e,t,n,r){const s=[];t.forEach(l=>s.push(FL(l)));const o=[];n.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const f=e.computeStyle(c,d,r);u.set(d,f),(!f||0==f.length)&&(c[Hs]=SY,o.push(c))}),i.set(c,u)});let a=0;return t.forEach(l=>FL(l,s[a++])),o}function BL(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const n=1,r=new Set(e),s=new Map;function o(a){if(!a)return n;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?n:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);l!==n&&t.get(l).push(a)}),t}function Gs(i,e){i.classList?.add(e)}function Md(i,e){i.classList?.remove(e)}function OY(i,e,t){pl(t).onDone(()=>i.processLeaveNode(e))}function VL(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof uL?VL(n.players,e):e.push(n)}}function zL(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class ry{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new TY(e,t,n),this._timelineEngine=new vY(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=[],u=OC(this._driver,s,l,c);if(l.length)throw function _7(i,e){return new ce(3404,!1)}();a=function gY(i,e,t){return new mY(i,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,o]=fL(n);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[o,a]=fL(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let LY=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&jo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jo(this._element,this._initialStyles),this._endStyles&&(jo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(wc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wc(this._element,this._endStyles),this._endStyles=null),jo(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function HC(i){let e=null;return i.forEach((t,n)=>{(function kY(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class HL{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:TL(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class FY{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return _L(e,t)}getParentElement(e){return wC(e)}query(e,t,n){return yL(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(h=>h instanceof HL);(function z7(i,e){return 0===i||0===e})(n,r)&&u.forEach(h=>{h.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=function F7(i){return i.length?i[0]instanceof Map?i:i.map(e=>xL(e)):[]}(t).map(h=>gl(h));d=function H7(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,TL(i,a)))}}return e}(e,d,c);const f=function NY(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=HC(e[0]),e.length>1&&(n=HC(e[e.length-1]))):e instanceof Map&&(t=HC(e)),t||n?new LY(i,t,n):null}(e,d);return new HL(e,d,l,f)}}let UY=(()=>{class i extends oL{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:lo.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?aL(t):t;return GL(this._renderer,null,n,"register",[r]),new BY(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(qe(Lf),qe($i))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();class BY extends Yq{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new VY(this._id,e,t||{},this._renderer)}}class VY{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return GL(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function GL(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const WL="@.disabled";let zY=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let u=this._rendererCache.get(s);return u||(u=new jL("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return n.data.animation.forEach(l),new HY(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(qe(Lf),qe(ry),qe(Mn))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();class jL{constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==WL?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class HY extends jL{constructor(e,t,n,r,s){super(t,n,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==WL?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function GY(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function WY(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}let jY=(()=>{class i extends ry{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(qe($i),qe(SC),qe(kC),qe(ep))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();const $L=[{provide:oL,useClass:UY},{provide:kC,useFactory:function $Y(){return new dY}},{provide:ry,useClass:jY},{provide:Lf,useFactory:function XY(i,e,t){return new zY(i,e,t)},deps:[G_,ry,Mn]}],GC=[{provide:SC,useFactory:()=>new FY},{provide:kR,useValue:"BrowserAnimations"},...$L],XL=[{provide:SC,useClass:vL},{provide:kR,useValue:"NoopAnimations"},...$L];let qY=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?XL:GC}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({providers:GC,imports:[nL]}),i})();const{isArray:YY}=Array,{getPrototypeOf:KY,prototype:ZY,keys:JY}=Object;function qL(i){if(1===i.length){const e=i[0];if(YY(e))return{args:e,keys:null};if(function QY(i){return i&&"object"==typeof i&&KY(i)===ZY}(e)){const t=JY(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:eK}=Array;function YL(i){return xt(e=>function tK(i,e){return eK(e)?i(...e):i(e)}(i,e))}function KL(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function ZL(...i){const e=x1(i),{args:t,keys:n}=qL(i),r=new Kn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;ao(t[u]).subscribe(yi(s,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(n?KL(n,a):a),s.complete())}))}});return e?r.pipe(YL(e)):r}let JL=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(pe(cs),pe(Ni))},i.\u0275dir=pt({type:i}),i})(),Ec=(()=>{class i extends JL{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ji(i)))(n||i)}}(),i.\u0275dir=pt({type:i,features:[mn]}),i})();const $o=new it("NgValueAccessor"),iK={provide:$o,useExisting:En(()=>oy),multi:!0},sK=new it("CompositionEventMode");let oy=(()=>{class i extends JL{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rK(){const i=Sa()?Sa().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(pe(cs),pe(Ni),pe(sK,8))},i.\u0275dir=pt({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&Ot("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Nn([iK]),mn]}),i})();const oK=!1;function ml(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function ek(i){return null!=i&&"number"==typeof i.length}const rr=new it("NgValidators"),_l=new it("NgAsyncValidators"),aK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ay{static min(e){return function tk(i){return e=>{if(ml(e.value)||ml(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}(e)}static max(e){return function nk(i){return e=>{if(ml(e.value)||ml(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}(e)}static required(e){return function ik(i){return ml(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function rk(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function sk(i){return ml(i.value)||aK.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function ok(i){return e=>ml(e.value)||!ek(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ak(i){return e=>ek(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function lk(i){if(!i)return ly;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(ml(n.value))return null;const r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return pk(e)}static composeAsync(e){return gk(e)}}function ly(i){return null}function ck(i){return null!=i}function uk(i){const e=zf(i)?oi(i):i;if(oK&&!nx(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof i&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new ce(-1101,t)}return e}function dk(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function hk(i,e){return e.map(t=>t(i))}function fk(i){return i.map(e=>function lK(i){return!i.validate}(e)?e:t=>e.validate(t))}function pk(i){if(!i)return null;const e=i.filter(ck);return 0==e.length?null:function(t){return dk(hk(t,e))}}function WC(i){return null!=i?pk(fk(i)):null}function gk(i){if(!i)return null;const e=i.filter(ck);return 0==e.length?null:function(t){return ZL(hk(t,e).map(uk)).pipe(xt(dk))}}function jC(i){return null!=i?gk(fk(i)):null}function mk(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function _k(i){return i._rawValidators}function yk(i){return i._rawAsyncValidators}function $C(i){return i?Array.isArray(i)?i:[i]:[]}function cy(i,e){return Array.isArray(i)?i.includes(e):i===e}function vk(i,e){const t=$C(e);return $C(i).forEach(r=>{cy(t,r)||t.push(r)}),t}function Mk(i,e){return $C(e).filter(t=>!cy(i,t))}class bk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=WC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class xr extends bk{get formDirective(){return null}get path(){return null}}class yl extends bk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ck=(()=>{class i extends xk{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(pe(yl,2))},i.\u0275dir=pt({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&ds("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[mn]}),i})(),wk=(()=>{class i extends xk{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(pe(xr,10))},i.\u0275dir=pt({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,n){2&t&&ds("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[mn]}),i})();function Sk(i,e){return i?`with name: '${e}'`:`at index: ${e}`}const YC=!1,pp="VALID",dy="INVALID",bd="PENDING",gp="DISABLED";function KC(i){return(hy(i)?i.validators:i)||null}function ZC(i,e){return(hy(e)?e.asyncValidators:i)||null}function hy(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function Ek(i,e,t){const n=i.controls;if(!(e?Object.keys(n):n).length)throw new ce(1e3,YC?function hK(i){return`\n    There are no form controls registered with this ${i?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!n[t])throw new ce(1001,YC?function fK(i,e){return`Cannot find form control ${Sk(i,e)}`}(e,t):"")}function Tk(i,e,t){i._forEachChild((n,r)=>{if(void 0===t[r])throw new ce(1002,YC?function pK(i,e){return`Must supply a value for form control ${Sk(i,e)}`}(e,r):"")})}class fy{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pp}get invalid(){return this.status===dy}get pending(){return this.status==bd}get disabled(){return this.status===gp}get enabled(){return this.status!==gp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mk(e,this._rawAsyncValidators))}hasValidator(e){return cy(this._rawValidators,e)}hasAsyncValidator(e){return cy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gp,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pp,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pp||this.status===bd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gp:pp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bd,this._hasOwnPendingAsyncValidator=!0;const t=uk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Rn,this.statusChanges=new Rn}_calculateStatus(){return this._allControlsDisabled()?gp:this.errors?dy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bd)?bd:this._anyControlsHaveStatus(dy)?dy:pp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function gK(i){return Array.isArray(i)?WC(i):i||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function mK(i){return Array.isArray(i)?jC(i):i||null}(this._rawAsyncValidators)}}class mp extends fy{constructor(e,t,n){super(KC(t),ZC(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Tk(this,!0,e),Object.keys(e).forEach(n=>{Ek(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{const r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Ak extends mp{}const Tc=new it("CallSetDisabledState",{providedIn:"root",factory:()=>_p}),_p="always";function yp(i,e,t=_p){JC(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(i.disabled),function yK(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&Pk(i,e)})}(i,e),function MK(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function vK(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&Pk(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function _K(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function gy(i,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),_y(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function my(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JC(i,e){const t=_k(i);null!==e.validator?i.setValidators(mk(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=yk(i);null!==e.asyncValidator?i.setAsyncValidators(mk(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();my(e._rawValidators,r),my(e._rawAsyncValidators,r)}function _y(i,e){let t=!1;if(null!==i){if(null!==e.validator){const r=_k(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(null!==e.asyncValidator){const r=yk(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}const n=()=>{};return my(e._rawValidators,n),my(e._rawAsyncValidators,n),t}function Pk(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Ik(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function Rk(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const Mp=class extends fy{constructor(e=null,t,n){super(KC(t),ZC(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Rk(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ik(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ik(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Rk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Uk=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=pt({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),Vk=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({}),i})();const iw=new it("NgModelWithFormControlWarning"),NK={provide:xr,useExisting:En(()=>yy)};let yy=(()=>{class i extends xr{constructor(t,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Rn,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_y(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return yp(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){gy(t.control||null,t,!1),function wK(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,function Ok(i,e){i._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,r=this.form.get(t.path);n!==r&&(gy(n||null,t),(i=>i instanceof Mp)(r)&&(yp(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);(function Dk(i,e){JC(i,e)})(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function bK(i,e){return _y(i,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){JC(this.form,this),this._oldForm&&_y(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(pe(rr,10),pe(_l,10),pe(Tc,8))},i.\u0275dir=pt({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&Ot("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nn([NK]),mn,ks]}),i})();const FK={provide:yl,useExisting:En(()=>ow)};let ow=(()=>{class i extends yl{set isDisabled(t){}constructor(t,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new Rn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function tw(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===oy?t=s:function CK(i){return Object.getPrototypeOf(i.constructor)===Ec}(s)?n=s:r=s}),r||n||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function ew(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function py(i,e){return[...e.path,i]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(pe(xr,13),pe(rr,10),pe(_l,10),pe($o,10),pe(iw,8))},i.\u0275dir=pt({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Nn([FK]),mn,ks]}),i})(),nF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({imports:[Vk]}),i})();class iF extends fy{constructor(e,t,n){super(KC(t),ZC(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Tk(this,!1,e),e.forEach((n,r)=>{Ek(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>!!n._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function rF(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let JK=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new i;return t.useNonNullable=!0,t}group(t,n=null){const r=this._reduceControls(t);let s={};return rF(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new mp(r,s)}record(t,n=null){const r=this._reduceControls(t);return new Ak(r,n)}control(t,n,r){let s={};return this.useNonNullable?(rF(n)?s=n:(s.validators=n,s.asyncValidators=r),new Mp(t,{...s,nonNullable:!0})):new Mp(t,n,r)}array(t,n,r){const s=t.map(o=>this._createControl(o));return new iF(s,n,r)}_reduceControls(t){const n={};return Object.keys(t).forEach(r=>{n[r]=this._createControl(t[r])}),n}_createControl(t){return t instanceof Mp||t instanceof fy?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),QK=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Tc,useValue:t.callSetDisabledState??_p}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({imports:[nF]}),i})(),eZ=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:iw,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Tc,useValue:t.callSetDisabledState??_p}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({imports:[nF]}),i})();function ot(...i){return oi(i,cf(i))}function vl(i,e){return wn(e)?Hi(i,e,1):Hi(i,1)}function Xo(i,e){return Ri((t,n)=>{let r=0;t.subscribe(yi(n,s=>i.call(e,s,r++)&&n.next(s)))})}class vy{}class uw{}class Da{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,n])=>{let r;if(r="string"==typeof n?[n]:"number"==typeof n?[n.toString()]:n.map(s=>s.toString()),r.length>0){const s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Da?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Da;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Da?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class tZ{encodeKey(e){return sF(e)}encodeValue(e){return sF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iZ=/%(\d[a-f0-9])/gi,rZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sF(i){return encodeURIComponent(i).replace(iZ,(e,t)=>rZ[t]??e)}function My(i){return`${i}`}class Ml{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tZ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nZ(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(My):[My(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ml({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(My(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(My(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sZ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function oF(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function aF(i){return typeof Blob<"u"&&i instanceof Blob}function lF(i){return typeof FormData<"u"&&i instanceof FormData}class bp{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function oZ(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Da),this.context||(this.context=new sZ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ml,this.urlWithParams=t}serializeBody(){return null===this.body?null:oF(this.body)||aF(this.body)||lF(this.body)||function aZ(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ml?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lF(this.body)?null:aF(this.body)?this.body.type||null:oF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ml?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,f)=>d.set(f,e.setHeaders[f]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,f)=>d.set(f,e.setParams[f]),c)),new bp(t,n,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var ui=(()=>((ui=ui||{})[ui.Sent=0]="Sent",ui[ui.UploadProgress=1]="UploadProgress",ui[ui.ResponseHeader=2]="ResponseHeader",ui[ui.DownloadProgress=3]="DownloadProgress",ui[ui.Response=4]="Response",ui[ui.User=5]="User",ui))();class dw{constructor(e,t=200,n="OK"){this.headers=e.headers||new Da,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class hw extends dw{constructor(e={}){super(e),this.type=ui.ResponseHeader}clone(e={}){return new hw({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class by extends dw{constructor(e={}){super(e),this.type=ui.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new by({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cF extends dw{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fw(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let uF=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof bp)s=t;else{let l,c;l=r.headers instanceof Da?r.headers:new Da(r.headers),r.params&&(c=r.params instanceof Ml?r.params:new Ml({fromObject:r.params})),s=new bp(t,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ot(s).pipe(vl(l=>this.handler.handle(l)));if(t instanceof bp||"events"===r.observe)return o;const a=o.pipe(Xo(l=>l instanceof by));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(xt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(xt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(xt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(xt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Ml).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,fw(r,n))}post(t,n,r={}){return this.request("POST",t,fw(r,n))}put(t,n,r={}){return this.request("PUT",t,fw(r,n))}}return i.\u0275fac=function(t){return new(t||i)(qe(vy))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();function dF(i,e){return e(i)}function lZ(i,e){return(t,n)=>e.intercept(t,{handle:r=>i(r,n)})}const uZ=new it("HTTP_INTERCEPTORS"),xp=new it("HTTP_INTERCEPTOR_FNS");function dZ(){let i=null;return(e,t)=>(null===i&&(i=(Bt(uZ,{optional:!0})??[]).reduceRight(lZ,dF)),i(e,t))}let hF=(()=>{class i extends vy{constructor(t,n){super(),this.backend=t,this.injector=n,this.chain=null}handle(t){if(null===this.chain){const n=Array.from(new Set(this.injector.get(xp)));this.chain=n.reduceRight((r,s)=>function cZ(i,e,t){return(n,r)=>t.runInContext(()=>e(n,s=>i(s,r)))}(r,s,this.injector),dF)}return this.chain(t,n=>this.backend.handle(n))}}return i.\u0275fac=function(t){return new(t||i)(qe(uw),qe(Bo))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();const gZ=/^\)\]\}',?\n/;let pF=(()=>{class i{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Kn(n=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((h,p)=>r.setRequestHeader(h,p.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const h=t.detectContentTypeHeader();null!==h&&r.setRequestHeader("Content-Type",h)}if(t.responseType){const h=t.responseType.toLowerCase();r.responseType="json"!==h?h:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const h=r.statusText||"OK",p=new Da(r.getAllResponseHeaders()),g=function mZ(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new hw({headers:p,status:r.status,statusText:h,url:g}),o},l=()=>{let{headers:h,status:p,statusText:g,url:m}=a(),_=null;204!==p&&(_=typeof r.response>"u"?r.responseText:r.response),0===p&&(p=_?200:0);let M=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof _){const y=_;_=_.replace(gZ,"");try{_=""!==_?JSON.parse(_):null}catch(v){_=y,M&&(M=!1,_={error:v,text:_})}}M?(n.next(new by({body:_,headers:h,status:p,statusText:g,url:m||void 0})),n.complete()):n.error(new cF({error:_,headers:h,status:p,statusText:g,url:m||void 0}))},c=h=>{const{url:p}=a(),g=new cF({error:h,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});n.error(g)};let u=!1;const d=h=>{u||(n.next(a()),u=!0);let p={type:ui.DownloadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),"text"===t.responseType&&r.responseText&&(p.partialText=r.responseText),n.next(p)},f=h=>{let p={type:ui.UploadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),n.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",d),null!==s&&r.upload&&r.upload.addEventListener("progress",f)),r.send(s),n.next({type:ui.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==s&&r.upload&&r.upload.removeEventListener("progress",f)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(t){return new(t||i)(qe(NN))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();const pw=new it("XSRF_ENABLED"),gF=new it("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),mF=new it("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class _F{}let vZ=(()=>{class i{constructor(t,n,r){this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wN(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return i.\u0275fac=function(t){return new(t||i)(qe($i),qe(Dx),qe(gF))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();function MZ(i,e){const t=i.url.toLowerCase();if(!Bt(pw)||"GET"===i.method||"HEAD"===i.method||t.startsWith("http://")||t.startsWith("https://"))return e(i);const n=Bt(_F).getToken(),r=Bt(mF);return null!=n&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),e(i)}var ei=(()=>((ei=ei||{})[ei.Interceptors=0]="Interceptors",ei[ei.LegacyInterceptors=1]="LegacyInterceptors",ei[ei.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ei[ei.NoXsrfProtection=3]="NoXsrfProtection",ei[ei.JsonpSupport=4]="JsonpSupport",ei[ei.RequestsMadeViaParent=5]="RequestsMadeViaParent",ei))();function xd(i,e){return{\u0275kind:i,\u0275providers:e}}function bZ(...i){const e=[uF,pF,hF,{provide:vy,useExisting:hF},{provide:uw,useExisting:pF},{provide:xp,useValue:MZ,multi:!0},{provide:pw,useValue:!0},{provide:_F,useClass:vZ}];for(const t of i)e.push(...t.\u0275providers);return function $G(i){return{\u0275providers:i}}(e)}const yF=new it("LEGACY_INTERCEPTOR_FN");let CZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({providers:[bZ(xd(ei.LegacyInterceptors,[{provide:yF,useFactory:dZ},{provide:xp,useExisting:yF,multi:!0}]))]}),i})();class Ws extends ua{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const xy=sf(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function vF(...i){const e=cf(i),t=x1(i),{args:n,keys:r}=qL(i);if(0===n.length)return oi([],e);const s=new Kn(function wZ(i,e,t=ac){return n=>{MF(e,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)MF(e,()=>{const c=oi(i[l],e);let u=!1;c.subscribe(yi(n,d=>{s[l]=d,u||(u=!0,a--),a||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,r?o=>KL(r,o):ac));return t?s.pipe(YL(t)):s}function MF(i,e,t){i?da(t,i,e):e()}function gw(...i){return function SZ(){return Iu(1)}()(oi(i,cf(i)))}function bF(i){return new Kn(e=>{ao(i()).subscribe(e)})}function Cp(i,e){const t=wn(i)?i:()=>i,n=r=>r.error(t());return new Kn(e?r=>e.schedule(n,0,r):n)}function mw(){return Ri((i,e)=>{let t=null;i._refCount++;const n=yi(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const r=i._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class xF extends Kn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,a1(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ur;const t=this.getSubject();e.add(this.source.subscribe(yi(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ur.EMPTY)}return e}refCount(){return mw()(this)}}function Mo(i,e){return Ri((t,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();t.subscribe(yi(n,l=>{r?.unsubscribe();let c=0;const u=s++;ao(i(l,u)).subscribe(r=yi(n,d=>n.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Cd(i){return i<=0?()=>No:Ri((e,t)=>{let n=0;e.subscribe(yi(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function Cy(i){return Ri((e,t)=>{let n=!1;e.subscribe(yi(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function CF(i=TZ){return Ri((e,t)=>{let n=!1;e.subscribe(yi(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function TZ(){return new xy}function bl(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Xo((r,s)=>i(r,s,n)):ac,Cd(1),t?Cy(e):CF(()=>new xy))}function sr(i,e,t){const n=wn(i)||e||t?{next:i,error:e,complete:t}:i;return n?Ri((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(yi(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):ac}function ps(i){return Ri((e,t)=>{let s,n=null,r=!1;n=e.subscribe(yi(t,void 0,void 0,o=>{s=ao(i(o,ps(i)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(t))})}function wF(i,e){return Ri(function AZ(i,e,t,n,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(yi(o,u=>{const d=c++;l=a?i(l,u,d):(a=!0,u),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(i,e,arguments.length>=2,!0))}function _w(i){return i<=0?()=>No:Ri((e,t)=>{let n=[];e.subscribe(yi(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function SF(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Xo((r,s)=>i(r,s,n)):ac,_w(1),t?Cy(e):CF(()=>new xy))}function yw(i){return Ri((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const It="primary",wp=Symbol("RouteTitle");class OZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wd(i){return new OZ(i)}function IZ(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function qo(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!EF(i[r],e[r]))return!1;return!0}function EF(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}return i===e}function TF(i){return Array.prototype.concat.apply([],i)}function AF(i){return i.length>0?i[i.length-1]:null}function Xi(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function xl(i){return nx(i)?i:zf(i)?oi(Promise.resolve(i)):ot(i)}const wy=!1,NZ={exact:function OF(i,e,t){if(!Pc(i.segments,e.segments)||!Sy(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!OF(i.children[n],e.children[n],t))return!1;return!0},subset:IF},PF={exact:function LZ(i,e){return qo(i,e)},subset:function kZ(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>EF(i[t],e[t]))},ignored:()=>!0};function DF(i,e,t){return NZ[t.paths](i.root,e.root,t.matrixParams)&&PF[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function IF(i,e,t){return RF(i,e,e.segments,t)}function RF(i,e,t,n){if(i.segments.length>t.length){const r=i.segments.slice(0,t.length);return!(!Pc(r,t)||e.hasChildren()||!Sy(r,t,n))}if(i.segments.length===t.length){if(!Pc(i.segments,t)||!Sy(i.segments,t,n))return!1;for(const r in e.children)if(!i.children[r]||!IF(i.children[r],e.children[r],n))return!1;return!0}{const r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!!(Pc(i.segments,r)&&Sy(i.segments,r,n)&&i.children[It])&&RF(i.children[It],e,s,n)}}function Sy(i,e,t){return e.every((n,r)=>PF[t](i[r].parameters,n.parameters))}class Cl{constructor(e=new jt([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wd(this.queryParams)),this._queryParamMap}toString(){return BZ.serialize(this)}}class jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xi(t,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ey(this)}}class Sp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wd(this.parameters)),this._parameterMap}toString(){return kF(this)}}function Pc(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let Ep=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:function(){return new vw},providedIn:"root"}),i})();class vw{parse(e){const t=new qZ(e);return new Cl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Tp(e.root,!0)}`,n=function HZ(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(r=>`${Ty(t)}=${Ty(r)}`).join("&"):`${Ty(t)}=${Ty(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function VZ(i){return encodeURI(i)}(e.fragment)}`:""}`}}const BZ=new vw;function Ey(i){return i.segments.map(e=>kF(e)).join("/")}function Tp(i,e){if(!i.hasChildren())return Ey(i);if(e){const t=i.children[It]?Tp(i.children[It],!1):"",n=[];return Xi(i.children,(r,s)=>{s!==It&&n.push(`${s}:${Tp(r,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function UZ(i,e){let t=[];return Xi(i.children,(n,r)=>{r===It&&(t=t.concat(e(n,r)))}),Xi(i.children,(n,r)=>{r!==It&&(t=t.concat(e(n,r)))}),t}(i,(n,r)=>r===It?[Tp(i.children[It],!1)]:[`${r}:${Tp(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[It]?`${Ey(i)}/${t[0]}`:`${Ey(i)}/(${t.join("//")})`}}function NF(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ty(i){return NF(i).replace(/%3B/gi,";")}function Mw(i){return NF(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ay(i){return decodeURIComponent(i)}function LF(i){return Ay(i.replace(/\+/g,"%20"))}function kF(i){return`${Mw(i.path)}${function zZ(i){return Object.keys(i).map(e=>`;${Mw(e)}=${Mw(i[e])}`).join("")}(i.parameters)}`}const GZ=/^[^\/()?;=#]+/;function Py(i){const e=i.match(GZ);return e?e[0]:""}const WZ=/^[^=?&#]+/,$Z=/^[^&#]+/;class qZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[It]=new jt(e,t)),n}parseSegment(){const e=Py(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ce(4009,wy);return this.capture(e),new Sp(Ay(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Py(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const r=Py(this.remaining);r&&(n=r,this.capture(n))}e[Ay(t)]=Ay(n)}parseQueryParam(e){const t=function jZ(i){const e=i.match(WZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function XZ(i){const e=i.match($Z);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=LF(t),s=LF(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Py(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new ce(4010,wy);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=It);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[It]:new jt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ce(4011,wy)}}function bw(i){return i.segments.length>0?new jt([],{[It]:i}):i}function Dy(i){const e={};for(const n of Object.keys(i.children)){const s=Dy(i.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function YZ(i){if(1===i.numberOfChildren&&i.children[It]){const e=i.children[It];return new jt(i.segments.concat(e.segments),e.children)}return i}(new jt(i.segments,e))}function Dc(i){return i instanceof Cl}const xw=!1;function KZ(i,e,t,n,r){if(0===t.length)return Sd(e.root,e.root,e.root,n,r);const s=function zF(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new VF(!0,0,i);let e=0,t=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Xi(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new VF(t,e,n)}(t);return s.toRoot()?Sd(e.root,e.root,new jt([],{}),n,r):function o(l){const c=function JZ(i,e,t,n){if(i.isAbsolute)return new Ed(e.root,!0,0);if(-1===n)return new Ed(t,t===e.root,0);return function HF(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new ce(4005,xw&&"Invalid number of '../'");r=n.segments.length}return new Ed(n,!1,r-s)}(t,n+(Ap(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,e,i.snapshot?._urlSegment,l),u=c.processChildren?Td(c.segmentGroup,c.index,s.commands):Cw(c.segmentGroup,c.index,s.commands);return Sd(e.root,c.segmentGroup,u,n,r)}(i.snapshot?._lastPathIndex)}function Ap(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Pp(i){return"object"==typeof i&&null!=i&&i.outlets}function Sd(i,e,t,n,r){let o,s={};n&&Xi(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=i===e?t:BF(i,e,t);const a=bw(Dy(o));return new Cl(a,s,r)}function BF(i,e,t){const n={};return Xi(i.children,(r,s)=>{n[s]=r===e?t:BF(r,e,t)}),new jt(i.segments,n)}class VF{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Ap(n[0]))throw new ce(4003,xw&&"Root segment cannot have matrix parameters");const r=n.find(Pp);if(r&&r!==AF(n))throw new ce(4004,xw&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ed{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Cw(i,e,t){if(i||(i=new jt([],{})),0===i.segments.length&&i.hasChildren())return Td(i,e,t);const n=function eJ(i,e,t){let n=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;const o=i.segments[r],a=t[n];if(Pp(a))break;const l=`${a}`,c=n<t.length-1?t[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!WF(l,c,o))return s;n+=2}else{if(!WF(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new jt(i.segments.slice(0,n.pathIndex),{});return s.children[It]=new jt(i.segments.slice(n.pathIndex),i.children),Td(s,0,r)}return n.match&&0===r.length?new jt(i.segments,{}):n.match&&!i.hasChildren()?ww(i,e,t):n.match?Td(i,0,r):ww(i,e,t)}function Td(i,e,t){if(0===t.length)return new jt(i.segments,{});{const n=function QZ(i){return Pp(i[0])?i[0].outlets:{[It]:i}}(t),r={};if(!n[It]&&i.children[It]&&1===i.numberOfChildren&&0===i.children[It].segments.length){const s=Td(i.children[It],e,t);return new jt(i.segments,s.children)}return Xi(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Cw(i.children[o],e,s))}),Xi(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new jt(i.segments,r)}}function ww(i,e,t){const n=i.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Pp(s)){const l=tJ(s.outlets);return new jt(n,l)}if(0===r&&Ap(t[0])){n.push(new Sp(i.segments[e].path,GF(t[0]))),r++;continue}const o=Pp(s)?s.outlets[It]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Ap(a)?(n.push(new Sp(o,GF(a))),r+=2):(n.push(new Sp(o,{})),r++)}return new jt(n,{})}function tJ(i){const e={};return Xi(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ww(new jt([],{}),0,t))}),e}function GF(i){const e={};return Xi(i,(t,n)=>e[n]=`${t}`),e}function WF(i,e,t){return i==t.path&&qo(e,t.parameters)}const Dp="imperative";class Yo{constructor(e,t){this.id=e,this.url=t}}class Sw extends Yo{constructor(e,t,n="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wl extends Yo{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oy extends Yo{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Iy extends Yo{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=16}}class Ew extends Yo{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nJ extends Yo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iJ extends Yo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rJ extends Yo{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sJ extends Yo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oJ extends Yo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aJ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lJ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cJ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uJ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dJ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hJ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jF{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let gJ=(()=>{class i{createUrlTree(t,n,r,s,o,a){return KZ(t||n.root,r,s,o,a)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})(),_J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:function(e){return gJ.\u0275fac(e)},providedIn:"root"}),i})();class $F{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tw(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=Tw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Aw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Aw(e,this._root).map(t=>t.value)}}function Tw(i,e){if(i===e.value)return e;for(const t of e.children){const n=Tw(i,t);if(n)return n}return null}function Aw(i,e){if(i===e.value)return[e];for(const t of e.children){const n=Aw(i,t);if(n.length)return n.unshift(e),n}return[]}class Oa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ad(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class XF extends $F{constructor(e,t){super(e),this.snapshot=t,Pw(this,e)}toString(){return this.snapshot.toString()}}function qF(i,e){const t=function yJ(i,e){const o=new Ry([],{},{},"",{},It,e,null,i.root,-1,{});return new KF("",new Oa(o,[]))}(i,e),n=new Ws([new Sp("",{})]),r=new Ws({}),s=new Ws({}),o=new Ws({}),a=new Ws(""),l=new Oc(n,r,o,a,s,It,e,t.root);return l.snapshot=t.root,new XF(new Oa(l,[]),t)}class Oc{constructor(e,t,n,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(xt(c=>c[wp]))??ot(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xt(e=>wd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xt(e=>wd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function YF(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const r=t[n],s=t[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function vJ(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class Ry{get title(){return this.data?.[wp]}constructor(e,t,n,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KF extends $F{constructor(e,t){super(t),this.url=e,Pw(this,t)}toString(){return ZF(this._root)}}function Pw(i,e){e.value._routerState=i,e.children.forEach(t=>Pw(i,t))}function ZF(i){const e=i.children.length>0?` { ${i.children.map(ZF).join(", ")} } `:"";return`${i.value}${e}`}function Dw(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,qo(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),qo(e.params,t.params)||i.params.next(t.params),function RZ(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!qo(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),qo(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Ow(i,e){const t=qo(i.params,e.params)&&function FZ(i,e){return Pc(i,e)&&i.every((t,n)=>qo(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||Ow(i.parent,e.parent))}function Op(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const r=function bJ(i,e,t){return e.children.map(n=>{for(const r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Op(i,n,r);return Op(i,n)})}(i,e,t);return new Oa(n,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Op(i,a)),o}}const n=function xJ(i){return new Oc(new Ws(i.url),new Ws(i.params),new Ws(i.queryParams),new Ws(i.fragment),new Ws(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>Op(i,s));return new Oa(n,r)}}const Iw="ngNavigationCancelingError";function JF(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=Dc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=QF(!1,0,e);return r.url=t,r.navigationBehaviorOptions=n,r}function QF(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[Iw]=!0,n.cancellationCode=e,t&&(n.url=t),n}function e2(i){return t2(i)&&Dc(i.url)}function t2(i){return i&&i[Iw]}class CJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ip,this.attachRef=null}}let Ip=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new CJ,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ny=!1;let Rw=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=It,this.activateEvents=new Rn,this.deactivateEvents=new Rn,this.attachEvents=new Rn,this.detachEvents=new Rn,this.parentContexts=Bt(Ip),this.location=Bt(mo),this.changeDetector=Bt(S_),this.environmentInjector=Bt(Bo)}ngOnChanges(t){if(t.name){const{firstChange:n,previousValue:r}=t.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,Ny);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,Ny);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,Ny);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new ce(4013,Ny);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new wJ(t,a,r.injector);if(n&&function SJ(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=pt({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ks]}),i})();class wJ{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Oc?this.route:e===Ip?this.childContexts:this.parent.get(e,t)}}let Nw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ls({type:i,selectors:[["ng-component"]],standalone:!0,features:[$I],decls:1,vars:0,template:function(t,n){1&t&&ct(0,"router-outlet")},dependencies:[Rw],encapsulation:2}),i})();function n2(i,e){return i.providers&&!i._injector&&(i._injector=m_(i.providers,e,`Route: ${i.path}`)),i._injector??e}function kw(i){const e=i.children&&i.children.map(kw),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==It&&(t.component=Nw),t}function js(i){return i.outlet||It}function i2(i,e){const t=i.filter(n=>js(n)===e);return t.push(...i.filter(n=>js(n)!==e)),t}function Rp(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class DJ{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Dw(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Ad(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Xi(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=Ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=Ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Ad(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new hJ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uJ(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(Dw(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Dw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Rp(r.snapshot),l=a?.get(Nf)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class r2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ly{constructor(e,t){this.component=e,this.route=t}}function OJ(i,e,t){const n=i._root;return Np(n,e?e._root:null,t,[n.value])}function Pd(i,e){const t=Symbol(),n=e.get(i,t);return n===t?"function"!=typeof i||function _5(i){return null!==_m(i)}(i)?e.get(i):i:n}function Np(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ad(e);return i.children.forEach(o=>{(function RJ(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function NJ(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Pc(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Pc(i.url,e.url)||!qo(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ow(i,e)||!qo(i.queryParams,e.queryParams);default:return!Ow(i,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new r2(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Np(i,e,s.component?a?a.children:null:t,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ly(a.outlet.component,o))}else o&&Lp(e,a,r),r.canActivateChecks.push(new r2(n)),Np(i,null,s.component?a?a.children:null:t,n,r)})(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),Xi(s,(o,a)=>Lp(o,t.getContext(a),r)),r}function Lp(i,e,t){const n=Ad(i),r=i.value;Xi(n,(s,o)=>{Lp(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Ly(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function kp(i){return"function"==typeof i}function Fw(i){return i instanceof xy||"EmptyError"===i?.name}const ky=Symbol("INITIAL_VALUE");function Dd(){return Mo(i=>vF(i.map(e=>e.pipe(Cd(1),function EZ(...i){const e=cf(i);return Ri((t,n)=>{(e?gw(i,t,e):gw(i,t)).subscribe(n)})}(ky)))).pipe(xt(e=>{for(const t of e)if(!0!==t){if(t===ky)return ky;if(!1===t||t instanceof Cl)return t}return!0}),Xo(e=>e!==ky),Cd(1)))}function s2(i){return function gH(...i){return r1(i)}(sr(e=>{if(Dc(e))throw JF(0,e)}),xt(e=>!0===e))}const Uw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function o2(i,e,t,n,r){const s=Bw(i,e,t);return s.matched?function ZJ(i,e,t,n){const r=e.canMatch;return r&&0!==r.length?ot(r.map(o=>{const a=Pd(o,i);return xl(function VJ(i){return i&&kp(i.canMatch)}(a)?a.canMatch(e,t):i.runInContext(()=>a(e,t)))})).pipe(Dd(),s2()):ot(!0)}(n=n2(e,n),e,t).pipe(xt(o=>!0===o?s:{...Uw})):ot(s)}function Bw(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...Uw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||IZ)(t,i,e);if(!r)return{...Uw};const s={};Xi(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Fy(i,e,t,n){if(t.length>0&&function eQ(i,e,t){return t.some(n=>Uy(i,e,n)&&js(n)!==It)}(i,t,n)){const s=new jt(e,function QJ(i,e,t,n){const r={};r[It]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&js(s)!==It){const o=new jt([],{});o._sourceSegment=i,o._segmentIndexShift=e.length,r[js(s)]=o}return r}(i,e,n,new jt(t,i.children)));return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function tQ(i,e,t){return t.some(n=>Uy(i,e,n))}(i,t,n)){const s=new jt(i.segments,function JJ(i,e,t,n,r){const s={};for(const o of n)if(Uy(i,t,o)&&!r[js(o)]){const a=new jt([],{});a._sourceSegment=i,a._segmentIndexShift=e.length,s[js(o)]=a}return{...r,...s}}(i,e,t,n,i.children));return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new jt(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Uy(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function a2(i,e,t,n){return!!(js(i)===n||n!==It&&Uy(e,t,i))&&("**"===i.path||Bw(e,i,t).matched)}function l2(i,e,t){return 0===e.length&&!i.children[t]}const By=!1;class Vy{constructor(e){this.segmentGroup=e||null}}class c2{constructor(e){this.urlTree=e}}function Fp(i){return Cp(new Vy(i))}function u2(i){return Cp(new c2(i))}class sQ{constructor(e,t,n,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Fy(this.urlTree.root,[],[],this.config).segmentGroup,t=new jt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,It).pipe(xt(s=>this.createUrlTree(Dy(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ps(s=>{if(s instanceof c2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Vy?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,It).pipe(xt(r=>this.createUrlTree(Dy(r),e.queryParams,e.fragment))).pipe(ps(r=>{throw r instanceof Vy?this.noMatchError(r):r}))}noMatchError(e){return new ce(4002,By)}createUrlTree(e,t,n){const r=bw(e);return new Cl(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(xt(s=>new jt([],s))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return oi(r).pipe(vl(s=>{const o=n.children[s],a=i2(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(xt(l=>({segment:l,outlet:s})))}),wF((s,o)=>(s[o.outlet]=o.segment,s),{}),SF())}expandSegment(e,t,n,r,s,o){return oi(n).pipe(vl(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,s,o).pipe(ps(c=>{if(c instanceof Vy)return ot(null);throw c}))),bl(a=>!!a),ps((a,l)=>{if(Fw(a))return l2(t,r,s)?ot(new jt([],{})):Fp(t);throw a}))}expandSegmentAgainstRoute(e,t,n,r,s,o,a){return a2(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o):Fp(t):Fp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?u2(s):this.lineralizeSegments(n,s).pipe(Hi(o=>{const a=new jt(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Bw(t,r,s);if(!a)return Fp(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?u2(d):this.lineralizeSegments(r,d).pipe(Hi(f=>this.expandSegment(e,t,n,f.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){return"**"===n.path?(e=n2(n,e),n.loadChildren?(n._loadedRoutes?ot({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(xt(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new jt(r,{})))):ot(new jt(r,{}))):o2(t,n,r,e).pipe(Mo(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=n._injector??e,n,r).pipe(Hi(u=>{const d=u.injector??e,f=u.routes,{segmentGroup:h,slicedSegments:p}=Fy(t,a,l,f),g=new jt(h.segments,h.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,f,g).pipe(xt(y=>new jt(a,y)));if(0===f.length&&0===p.length)return ot(new jt(a,{}));const m=js(n)===s;return this.expandSegment(d,g,f,p,m?It:s,!0).pipe(xt(M=>new jt(a.concat(M.segments),M.children)))})):Fp(t)))}getChildConfig(e,t,n){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function KJ(i,e,t,n){const r=e.canLoad;return void 0===r||0===r.length?ot(!0):ot(r.map(o=>{const a=Pd(o,i);return xl(function kJ(i){return i&&kp(i.canLoad)}(a)?a.canLoad(e,t):i.runInContext(()=>a(e,t)))})).pipe(Dd(),s2())}(e,t,n).pipe(Hi(r=>r?this.configLoader.loadChildren(e,t).pipe(sr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function iQ(i){return Cp(QF(By,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ot(n);if(r.numberOfChildren>1||!r.children[It])return e.redirectTo,Cp(new ce(4e3,By));r=r.children[It]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Cl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Xi(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=t[a]}else n[s]=r}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let o={};return Xi(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,n,r)}),new jt(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new ce(4001,By);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}class aQ{}class uQ{constructor(e,t,n,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=Fy(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,It).pipe(xt(t=>{if(null===t)return null;const n=new Ry([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Oa(n,t),s=new KF(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,n=YF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,r)}processChildren(e,t,n){return oi(Object.keys(n.children)).pipe(vl(r=>{const s=n.children[r],o=i2(t,r);return this.processSegmentGroup(e,o,s,r)}),wF((r,s)=>r&&s?(r.push(...s),r):null),function PZ(i,e=!1){return Ri((t,n)=>{let r=0;t.subscribe(yi(n,s=>{const o=i(s,r++);(o||e)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),Cy(null),SF(),xt(r=>{if(null===r)return null;const s=h2(r);return function dQ(i){i.sort((e,t)=>e.value.outlet===It?-1:t.value.outlet===It?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,n,r,s){return oi(t).pipe(vl(o=>this.processSegmentAgainstRoute(o._injector??e,o,n,r,s)),bl(o=>!!o),ps(o=>{if(Fw(o))return l2(n,r,s)?ot([]):ot(null);throw o}))}processSegmentAgainstRoute(e,t,n,r,s){if(t.redirectTo||!a2(t,n,r,s))return ot(null);let o;if("**"===t.path){const a=r.length>0?AF(r).parameters:{},l=p2(n)+r.length;o=ot({snapshot:new Ry(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g2(t),js(t),t.component??t._loadedComponent??null,t,f2(n),l,m2(t)),consumedSegments:[],remainingSegments:[]})}else o=o2(n,t,r,e).pipe(xt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=p2(n)+l.length;return{snapshot:new Ry(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,g2(t),js(t),t.component??t._loadedComponent??null,t,f2(n),d,m2(t)),consumedSegments:l,remainingSegments:c}}));return o.pipe(Mo(a=>{if(null===a)return ot(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,f=function hQ(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:h,slicedSegments:p}=Fy(n,c,u,f.filter(m=>void 0===m.redirectTo));if(0===p.length&&h.hasChildren())return this.processChildren(d,f,h).pipe(xt(m=>null===m?null:[new Oa(l,m)]));if(0===f.length&&0===p.length)return ot([new Oa(l,[])]);const g=js(t)===s;return this.processSegment(d,f,h,p,g?It:s).pipe(xt(m=>null===m?null:[new Oa(l,m)]))}))}}function fQ(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function h2(i){const e=[],t=new Set;for(const n of i){if(!fQ(n)){e.push(n);continue}const r=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),t.add(r)):e.push(n)}for(const n of t){const r=h2(n.children);e.push(new Oa(n.value,r))}return e.filter(n=>!t.has(n))}function f2(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function p2(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function g2(i){return i.data||{}}function m2(i){return i.resolve||{}}function _2(i){return"string"==typeof i.title||null===i.title}function Vw(i){return Mo(e=>{const t=i(e);return t?oi(t).pipe(xt(()=>e)):ot(e)})}const Od=new it("ROUTES");let zw=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Bt(FR)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=xl(t.loadComponent()).pipe(xt(v2),sr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),yw(()=>{this.componentLoaders.delete(t)})),r=new xF(n,()=>new ua).pipe(mw());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ot({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(xt(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=TF(l.get(Od,[],Mt.Self|Mt.Optional)));return{routes:c.map(kw),injector:l}}),yw(()=>{this.childrenLoaders.delete(n)})),o=new xF(s,()=>new ua).pipe(mw());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(t){return xl(t()).pipe(xt(v2),Hi(n=>n instanceof WI||Array.isArray(n)?ot(n):oi(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function v2(i){return function bQ(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let Hy=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ua,this.configLoader=Bt(zw),this.environmentInjector=Bt(Bo),this.urlSerializer=Bt(Ep),this.rootContexts=Bt(Ip),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new lJ(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new aJ(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:n})}setupNavigations(t){return this.transitions=new Ws({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Dp,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xo(n=>0!==n.id),xt(n=>({...n,extractedUrl:t.urlHandlingStrategy.extract(n.rawUrl)})),Mo(n=>{let r=!1,s=!1;return ot(n).pipe(sr(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Mo(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new Iy(o.id,t.serializeUrl(n.rawUrl),u,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),No}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return M2(o.source)&&(t.browserUrlTree=o.extractedUrl),ot(o).pipe(Mo(u=>{const d=this.transitions?.getValue();return this.events.next(new Sw(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?No:Promise.resolve(u)}),function oQ(i,e,t,n){return Mo(r=>function rQ(i,e,t,n,r){return new sQ(i,e,t,n,r).apply()}(i,e,t,r.extractedUrl,n).pipe(xt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),sr(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},n.urlAfterRedirects=u.urlAfterRedirects}),function gQ(i,e,t,n,r){return Hi(s=>function cQ(i,e,t,n,r,s,o="emptyOnly"){return new uQ(i,e,t,n,r,o,s).recognize().pipe(Mo(a=>null===a?function lQ(i){return new Kn(e=>e.error(i))}(new aQ):ot(a)))}(i,e,t,s.urlAfterRedirects,n.serialize(s.urlAfterRedirects),n,r).pipe(xt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),sr(u=>{if(n.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const f=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(f,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new nJ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:d,source:f,restoredState:h,extras:p}=o,g=new Sw(u,this.urlSerializer.serialize(d),f,h);this.events.next(g);const m=qF(d,this.rootComponentType).snapshot;return ot(n={...o,targetSnapshot:m,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Iy(o.id,t.serializeUrl(n.extractedUrl),u,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),No}}),sr(o=>{const a=new iJ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),xt(o=>n={...o,guards:OJ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function HJ(i,e){return Hi(t=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ot({...t,guardsResult:!0}):function GJ(i,e,t,n){return oi(i).pipe(Hi(r=>function YJ(i,e,t,n,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return ot(!0);const o=s.map(a=>{const l=Rp(e)??r,c=Pd(a,l);return xl(function BJ(i){return i&&kp(i.canDeactivate)}(c)?c.canDeactivate(i,e,t,n):l.runInContext(()=>c(i,e,t,n))).pipe(bl())});return ot(o).pipe(Dd())}(r.component,r.route,t,e,n)),bl(r=>!0!==r,!0))}(o,n,r,i).pipe(Hi(a=>a&&function LJ(i){return"boolean"==typeof i}(a)?function WJ(i,e,t,n){return oi(e).pipe(vl(r=>gw(function $J(i,e){return null!==i&&e&&e(new cJ(i)),ot(!0)}(r.route.parent,n),function jJ(i,e){return null!==i&&e&&e(new dJ(i)),ot(!0)}(r.route,n),function qJ(i,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function IJ(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>bF(()=>ot(o.guards.map(l=>{const c=Rp(o.node)??t,u=Pd(l,c);return xl(function UJ(i){return i&&kp(i.canActivateChild)}(u)?u.canActivateChild(n,i):c.runInContext(()=>u(n,i))).pipe(bl())})).pipe(Dd())));return ot(s).pipe(Dd())}(i,r.path,t),function XJ(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return ot(!0);const r=n.map(s=>bF(()=>{const o=Rp(e)??t,a=Pd(s,o);return xl(function FJ(i){return i&&kp(i.canActivate)}(a)?a.canActivate(e,i):o.runInContext(()=>a(e,i))).pipe(bl())}));return ot(r).pipe(Dd())}(i,r.route,t))),bl(r=>!0!==r,!0))}(n,s,i,e):ot(a)),xt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),sr(o=>{if(n.guardsResult=o.guardsResult,Dc(o.guardsResult))throw JF(0,o.guardsResult);const a=new rJ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Xo(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),Vw(o=>{if(o.guards.canActivateChecks.length)return ot(o).pipe(sr(a=>{const l=new sJ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Mo(a=>{let l=!1;return ot(a).pipe(function mQ(i,e){return Hi(t=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return ot(t);let s=0;return oi(r).pipe(vl(o=>function _Q(i,e,t,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!_2(r)&&(s[wp]=r.title),function yQ(i,e,t,n){const r=function vQ(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return ot({});const s={};return oi(r).pipe(Hi(o=>function MQ(i,e,t,n){const r=Rp(e)??n,s=Pd(i,r);return xl(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(i[o],e,t,n).pipe(bl(),sr(a=>{s[o]=a}))),_w(1),function DZ(i){return xt(()=>i)}(s),ps(o=>Fw(o)?No:Cp(o)))}(s,i,e,n).pipe(xt(o=>(i._resolvedData=o,i.data=YF(i,t).resolve,r&&_2(r)&&(i.data[wp]=r.title),null)))}(o.route,n,i,e)),sr(()=>s++),_w(1),Hi(o=>s===r.length?ot(t):No))})}(t.paramsInheritanceStrategy,this.environmentInjector),sr({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),sr(a=>{const l=new oJ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Vw(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(sr(u=>{l.component=u}),xt(()=>{})));for(const u of l.children)c.push(...a(u));return c};return vF(a(o.targetSnapshot.root)).pipe(Cy(),Cd(1))}),Vw(()=>this.afterPreactivation()),xt(o=>{const a=function MJ(i,e,t){const n=Op(i,e._root,t?t._root:void 0);return new XF(n,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return n={...o,targetRouterState:a}}),sr(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((i,e,t)=>xt(n=>(new DJ(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Cd(1),sr({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new wl(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),yw(()=>{r||s||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),ps(o=>{if(s=!0,t2(o)){e2(o)||(t.navigated=!0,t.restoreHistory(n,!0));const a=new Oy(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),e2(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),c={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||M2(n.source)};t.scheduleNavigation(l,Dp,null,c,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{t.restoreHistory(n,!0);const a=new Ew(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);this.events.next(a);try{n.resolve(t.errorHandler(o))}catch(l){n.reject(l)}}return No}))}))}cancelNavigationTransition(t,n,r){const s=new Oy(t.id,this.urlSerializer.serialize(t.extractedUrl),n,r);this.events.next(s),t.resolve(!1)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function M2(i){return i!==Dp}let b2=(()=>{class i{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===It);return n}getResolvedTitleForRoute(t){return t.data[wp]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:function(){return Bt(xQ)},providedIn:"root"}),i})(),xQ=(()=>{class i extends b2{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(qe(iL))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),CQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:function(){return Bt(SQ)},providedIn:"root"}),i})();class wQ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let SQ=(()=>{class i extends wQ{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=ji(i)))(n||i)}}(),i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Gy=new it("",{providedIn:"root",factory:()=>({})});let TQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:function(){return Bt(AQ)},providedIn:"root"}),i})(),AQ=(()=>{class i{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function PQ(i){throw i}function DQ(i,e,t){return e.parse("/")}const OQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jr=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Bt(z$),this.isNgZoneEnabled=!1,this.options=Bt(Gy,{optional:!0})||{},this.errorHandler=this.options.errorHandler||PQ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||DQ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Bt(TQ),this.routeReuseStrategy=Bt(CQ),this.urlCreationStrategy=Bt(_J),this.titleStrategy=Bt(b2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=TF(Bt(Od,{optional:!0})??[]),this.navigationTransitions=Bt(Hy),this.urlSerializer=Bt(Ep),this.location=Bt($x),this.isNgZoneEnabled=Bt(Mn)instanceof Mn&&Mn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qF(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Dp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,n,t.state)},0)}))}navigateToSyncWithBrowser(t,n,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(kw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,n={skipLocationChange:!1}){const r=Dc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Dp,null,n)}navigate(t,n={skipLocationChange:!1}){return function RQ(i){for(let e=0;e<i.length;e++){const t=i[e];if(null==t)throw new ce(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return n}isActive(t,n){let r;if(r=!0===n?{...OQ}:!1===n?{...IQ}:n,Dc(t))return DF(this.currentUrlTree,t,r);const s=this.parseUrl(t);return DF(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((n,r)=>{const s=t[r];return null!=s&&(n[r]=s),n},{})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,f)=>{a=d,l=f}),u="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,n){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const o={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.go(r,"",s)}}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class x2{}let kQ=(()=>{class i{constructor(t,n,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xo(t=>t instanceof wl),vl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=m_(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return oi(r).pipe(Iu())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):ot(null);const s=r.pipe(Hi(o=>null===o?ot(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return n.loadComponent&&!n._loadedComponent?oi([s,this.loader.loadComponent(n)]).pipe(Iu()):s})}}return i.\u0275fac=function(t){return new(t||i)(qe(jr),qe(FR),qe(Bo),qe(x2),qe(zw))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ww=new it("");let C2=(()=>{class i{constructor(t,n,r,s,o={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof jF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(t){!function qD(){throw new Error("invalid")}()},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})();var gs=(()=>((gs=gs||{})[gs.COMPLETE=0]="COMPLETE",gs[gs.FAILED=1]="FAILED",gs[gs.REDIRECTING=2]="REDIRECTING",gs))();const Id=!1;function Sl(i,e){return{\u0275kind:i,\u0275providers:e}}const jw=new it("",{providedIn:"root",factory:()=>!1});function S2(){const i=Bt(Vo);return e=>{const t=i.get(ep);if(e!==t.components[0])return;const n=i.get(jr),r=i.get(E2);1===i.get($w)&&n.initialNavigation(),i.get(T2,null,Mt.Optional)?.setUpPreloading(),i.get(Ww,null,Mt.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const E2=new it(Id?"bootstrap done indicator":"",{factory:()=>new ua}),$w=new it(Id?"initial navigation":"",{providedIn:"root",factory:()=>1});function zQ(){let i=[];return i=Id?[{provide:Ym,multi:!0,useFactory:()=>{const e=Bt(jr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function fJ(i){if(!("type"in i))return`Unknown Router Event: ${i.constructor.name}`;switch(i.type){case 14:return`ActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state}, shouldActivate: ${i.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 2:return`NavigationCancel(id: ${i.id}, url: '${i.url}')`;case 16:return`NavigationSkipped(id: ${i.id}, url: '${i.url}')`;case 1:return`NavigationEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${i.id}, url: '${i.url}', error: ${i.error})`;case 0:return`NavigationStart(id: ${i.id}, url: '${i.url}')`;case 6:return`ResolveEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 5:return`ResolveStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 10:return`RouteConfigLoadEnd(path: ${i.route.path})`;case 9:return`RouteConfigLoadStart(path: ${i.route.path})`;case 4:return`RoutesRecognized(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 15:return`Scroll(anchor: '${i.anchor}', position: '${i.position?`${i.position[0]}, ${i.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Sl(1,i)}const T2=new it(Id?"router preloader":"");function HQ(i){return Sl(0,[{provide:T2,useExisting:kQ},{provide:x2,useExisting:i}])}const Up=!1,A2=new it(Up?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),GQ=[$x,{provide:Ep,useClass:vw},jr,Ip,{provide:Oc,useFactory:function w2(i){return i.routerState.root},deps:[jr]},zw,Up?{provide:jw,useValue:!0}:[]];function WQ(){return new jR("Router",jr)}let Xw=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[GQ,Up&&n?.enableTracing?zQ().\u0275providers:[],{provide:Od,multi:!0,useValue:t},{provide:A2,useFactory:qQ,deps:[[jr,new wf,new Sf]]},{provide:Gy,useValue:n||{}},n?.useHash?{provide:xc,useClass:AX}:{provide:xc,useClass:pN},{provide:Ww,useFactory:()=>{const i=Bt(j9),e=Bt(Mn),t=Bt(Gy),n=Bt(Hy),r=Bt(Ep);return t.scrollOffset&&i.setOffset(t.scrollOffset),new C2(r,n,i,e,t)}},n?.preloadingStrategy?HQ(n.preloadingStrategy).\u0275providers:[],{provide:jR,multi:!0,useFactory:WQ},n?.initialNavigation?YQ(n):[],[{provide:P2,useFactory:S2},{provide:WR,multi:!0,useExisting:P2}]]}}static forChild(t){return{ngModule:i,providers:[{provide:Od,multi:!0,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)(qe(A2,8))},i.\u0275mod=gr({type:i}),i.\u0275inj=Ji({imports:[Nw]}),i})();function qQ(i){if(Up&&i)throw new ce(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function YQ(i){return["disabled"===i.initialNavigation?Sl(3,[{provide:b_,multi:!0,useFactory:()=>{const e=Bt(jr);return()=>{e.setUpLocationChangeListener()}}},{provide:$w,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?Sl(2,[{provide:$w,useValue:0},{provide:b_,multi:!0,deps:[Vo],useFactory:e=>{const t=e.get(EX,Promise.resolve());return()=>t.then(()=>new Promise(n=>{const r=e.get(jr),s=e.get(E2);(function FQ(i,e){i.events.pipe(Xo(t=>t instanceof wl||t instanceof Oy||t instanceof Ew||t instanceof Iy),xt(t=>t instanceof wl||t instanceof Iy?gs.COMPLETE:t instanceof Oy&&(0===t.code||1===t.code)?gs.REDIRECTING:gs.FAILED),Xo(t=>t!==gs.REDIRECTING),Cd(1)).subscribe(()=>{e()})})(r,()=>{n(!0)}),e.get(Hy).afterPreactivation=()=>(n(!0),s.closed?ot(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const P2=new it(Up?"Router Initializer":""),Bp={_origin:"https://api.emailjs.com"};class O2{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const eee_send=(i,e,t,n)=>{const r=n||Bp._userID;return((i,e,t)=>{if(!i)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(r,i,e),((i,e,t={})=>new Promise((n,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new O2(o);200===a.status||"OK"===a.text?n(a):r(a)}),s.addEventListener("error",({target:o})=>{r(new O2(o))}),s.open("POST",Bp._origin+i,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:r,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"})},qw_emailjs_serviceId="service_j2c3259",qw_emailjs_templateId="template_69jli1u",qw_emailjs_publicKey="uEh8XgVFR-xVbrtg-";let R2=(()=>{const e=class{constructor(n){this.http=n,this.BASE_PATH="assets/icons/skills",this.categoryCache=null,this.skillsCache=new Map}getCategories(){if(this.categoryCache)return console.log("Using cached categories:",this.categoryCache),ot([...this.categoryCache,"All"]);const n=["frontend","backend","database","cloud","devops","tools"];return this.categoryCache=n,this.prefetchAllCategorySkills(n),ot([...n,"All"])}prefetchAllCategorySkills(n){console.log("Prefetching skills for all categories"),this.http.get("assets/icons/skills-manifest.json").subscribe(r=>{console.log("Successfully loaded skills manifest:",r),n.forEach(s=>{if(r&&r[s]&&Array.isArray(r[s])){console.log(`Prefetching ${r[s].length} skills for ${s}`);const o=r[s].map(a=>this.fileNameToSkillInfo(a,s));this.skillsCache.set(s,o)}else console.warn(`No skills found in manifest for ${s}`)})},r=>{console.error("Failed to load skills manifest for prefetching:",r),this.loadEmergencyFallbackSkills(n)})}loadEmergencyFallbackSkills(n){console.warn("Loading emergency fallback skills");const r={frontend:["angular.png","react.png","vuejs.png","html5.png","css3.png","javascript.png","typescript.png","sass.png","bootstrap.png","tailwindcss.png"],backend:["nodejs.png","express.png","django.png","flask.png","spring.png","php.png","laravel.png","dotnet.png","nestjs.png","ruby.png"],database:["mongodb.png","mysql.png","postgresql.png","redis.png","sqlite.png","firebase.png","cassandra.png","dynamodb.png","oracle.png","elasticsearch.png"],cloud:["aws.png","azure.png","gcp.png","heroku.png","digitalocean.png","cloudflare.png","netlify.png","vercel.png","kubernetes.png","docker.png"],devops:["git.png","jenkins.png","travis-ci.png","circleci.png","jira.png","ansible.png","terraform.png","grafana.png","prometheus.png","github-actions.png"],tools:["vscode.png","figma.png","photoshop.png","sketch.png","illustrator.png","postman.png","npm.png","webpack.png","gulp.png","bash.png"]};n.forEach(s=>{if(r[s]){console.log(`Loading ${r[s].length} fallback skills for ${s}`);const o=r[s].map(a=>this.fileNameToSkillInfo(a,s));this.skillsCache.set(s,o)}})}getAllSkills(){return this.getCategories().pipe(xt(n=>n.filter(r=>"All"!==r)),Mo(n=>{if(0===n.length)return console.warn("No categories found to fetch skills from"),ot([]);let r=[],s=!0;for(const a of n){if(!this.skillsCache.has(a)||!this.skillsCache.get(a)?.length){s=!1;break}r=r.concat(this.skillsCache.get(a))}return s&&r.length>0?(console.log(`Using ${r.length} cached skills from all categories`),ot(r)):(console.log("Fetching skills for categories:",n),ZL(n.map(a=>this.getSkillsForCategory(a))).pipe(xt(a=>{const l=[].concat(...a);return console.log(`Fetched a total of ${l.length} skills from all categories`),l})))}))}getSkillsForCategory(n){return this.skillsCache.has(n)?ot(this.skillsCache.get(n)):this.discoverSkillsInCategory(n)}discoverSkillsInCategory(n){return this.skillsCache.has(n)&&this.skillsCache.get(n)?.length?(console.log(`Using ${this.skillsCache.get(n)?.length} cached skills for ${n}`),ot(this.skillsCache.get(n))):(console.log(`No cached skills found for ${n}, discovering dynamically`),this.getDefaultIconListForCategory(n).pipe(xt(r=>{if(0===r.length){console.warn(`No files found for category ${n}, check the manifest file and paths`);const o={frontend:["angular.png","react.png","vuejs.png","html5.png","css3.png","javascript.png","typescript.png","sass.png","bootstrap.png","tailwindcss.png"],backend:["nodejs.png","express.png","django.png","flask.png","spring.png","php.png","laravel.png","dotnet.png","nestjs.png","ruby.png"],database:["mongodb.png","mysql.png","postgresql.png","redis.png","sqlite.png","firebase.png","cassandra.png","dynamodb.png","oracle.png","elasticsearch.png"],cloud:["aws.png","azure.png","gcp.png","heroku.png","digitalocean.png","cloudflare.png","netlify.png","vercel.png","kubernetes.png","docker.png"],devops:["git.png","jenkins.png","travis-ci.png","circleci.png","jira.png","ansible.png","terraform.png","grafana.png","prometheus.png","github-actions.png"],tools:["vscode.png","figma.png","photoshop.png","sketch.png","illustrator.png","postman.png","npm.png","webpack.png","gulp.png","bash.png"]};o[n]&&(console.log(`Using fallback list of ${o[n].length} icons for ${n}`),r=o[n])}else console.log(`Found ${r.length} files for category ${n}`);const s=r.map(o=>this.fileNameToSkillInfo(o,n));return this.skillsCache.set(n,s),s})))}formatSkillName(n){const r={nodejs:"Node.js",dotnet:".NET",vuejs:"Vue.js",npm:"npm",php:"PHP",css3:"CSS3",html5:"HTML5",aws:"AWS",gcp:"Google Cloud",vscode:"VS Code"};return r[n]?r[n]:n.includes("-")?n.split("-").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):n.charAt(0).toUpperCase()+n.slice(1)}fileNameToSkillInfo(n,r){const s=n.includes(".")?n.substring(0,n.lastIndexOf(".")):n;return{name:this.formatSkillName(s),icon:`${this.BASE_PATH}/${r}/${n}`,category:r}}getDefaultIconListForCategory(n){return this.http.get("assets/icons/skills-manifest.json").pipe(xt(r=>r&&r[n]&&Array.isArray(r[n])?(console.log(`Found ${r[n].length} icons for ${n} in manifest`),r[n]):[]),ps(r=>(console.error(`Error loading skills manifest: ${r}`),console.log(`Skills manifest not found for ${n}, using direct asset scanning`),this.scanAssetsDirectory(n))))}scanAssetsDirectory(n){return this.http.get(`${this.BASE_PATH}/${n}/`,{responseType:"text"}).pipe(xt(r=>this.extractImagesFromHtml(r,n)),ps(r=>(console.warn(`Could not scan directory ${n}, falling back to manual discovery`,r),this.manualAssetDiscovery(n))))}extractImagesFromHtml(n,r){const a=(new DOMParser).parseFromString(n,"text/html").querySelectorAll("a"),l=[];return a.forEach(c=>{const u=c.getAttribute("href");u&&u.endsWith(".png")&&l.push(u)}),l}manualAssetDiscovery(n){return this.http.get(`${this.BASE_PATH}/${n}/assets.json`).pipe(ps(()=>(console.warn(`No assets.json found for ${n}, using active discovery`),this.activeAssetDiscovery(n))))}activeAssetDiscovery(n){return this.http.get(`${this.BASE_PATH}/manifest/${n}.json`).pipe(ps(()=>(console.warn(`No manifest found for ${n}, falling back to direct file checking`),this.getExistingFiles(`${this.BASE_PATH}/${n}`,n))))}getExistingFiles(n,r){return this.http.get("assets/icons/skills-manifest.json").pipe(xt(s=>s&&s[r]&&Array.isArray(s[r])?(console.log(`Found ${s[r].length} icons for ${r} in manifest`),s[r]):(console.warn(`No manifest found for ${r}`),[])),ps(s=>(console.error(`Failed to load manifest: ${s}`,s),console.warn(`Falling back to starter set for ${r}`),ot({frontend:["angular.png","react.png","vuejs.png","html5.png","css3.png","javascript.png","typescript.png","sass.png","bootstrap.png","tailwindcss.png"],backend:["nodejs.png","express.png","django.png","flask.png","spring.png","php.png","laravel.png","dotnet.png","nestjs.png","ruby.png"],database:["mongodb.png","mysql.png","postgresql.png","redis.png","sqlite.png","firebase.png","cassandra.png","dynamodb.png","oracle.png","elasticsearch.png"],cloud:["aws.png","azure.png","gcp.png","heroku.png","digitalocean.png","cloudflare.png","netlify.png","vercel.png","kubernetes.png","docker.png"],devops:["git.png","jenkins.png","travis-ci.png","circleci.png","jira.png","ansible.png","terraform.png","grafana.png","prometheus.png","github-actions.png"],tools:["vscode.png","figma.png","photoshop.png","sketch.png","illustrator.png","postman.png","npm.png","webpack.png","gulp.png","bash.png"]}[r]||[]))))}};let i=e;return e.\u0275fac=function(r){return new(r||e)(qe(uF))},e.\u0275prov=rt({token:e,factory:e.\u0275fac,providedIn:"root"}),i})(),Yw=(()=>{const e=class{constructor(n){this.skillIconService=n,this.activeSection=new Ws("home"),this.activeSection$=this.activeSection.asObservable(),this.personalInfo={name:"Prathamesh Manjare",title:"Full Stack Developer",email:"prathamesh@example.com",phone:"+91 9876543210",location:"Mumbai, India",bio:"Passionate full-stack developer with 5+ years of experience crafting modern web and mobile applications. Specializing in Angular, React, and Node.js, I focus on creating scalable, efficient applications with exceptional user experiences. I thrive in collaborative environments and enjoy turning complex problems into elegant solutions.",tagline:"Building digital experiences that delight users",resume:"assets/resume.pdf",social:{github:"https://github.com/prathamesh",linkedin:"https://linkedin.com/in/prathamesh-manjare",twitter:"https://twitter.com/prathamesh_dev",dribbble:"https://dribbble.com/prathamesh"}},this.projects=[{id:1,title:"Global E-Commerce Platform",description:"A comprehensive e-commerce solution handling 100K+ monthly users with multi-currency support, dynamic product filtering, AI-powered recommendations, and seamless payment processing integrations.",technologies:["Angular","TypeScript","Node.js","Express","MongoDB","Redis","AWS","Stripe API"],imageUrl:"https://via.placeholder.com/600x400?text=E-Commerce+Platform",githubUrl:"https://github.com/prathamesh/ecommerce-platform",liveUrl:"https://shopsmart-demo.com",featured:!0},{id:2,title:"Analytics Dashboard",description:"Real-time analytics dashboard for businesses to monitor KPIs, visualize data trends, and generate comprehensive reports. Features customizable widgets, data export, and AI-driven insights.",technologies:["React","Redux","D3.js","Node.js","GraphQL","PostgreSQL","Docker"],imageUrl:"https://via.placeholder.com/600x400?text=Analytics+Dashboard",githubUrl:"https://github.com/prathamesh/analytics-dashboard",liveUrl:"https://analytics-showcase.com",featured:!0},{id:3,title:"TaskFlow - Project Management",description:"Collaborative project management system with Kanban boards, Gantt charts, time tracking, and team messaging. Integrates with popular tools like Slack, GitHub, and Google Workspace.",technologies:["Angular","TypeScript","NestJS","PostgreSQL","Socket.io","Docker","AWS"],imageUrl:"https://via.placeholder.com/600x400?text=TaskFlow+App",githubUrl:"https://github.com/prathamesh/taskflow",liveUrl:"https://taskflow-demo.com",featured:!0},{id:4,title:"WeatherSense App",description:"Advanced weather application offering hyperlocal forecasts, severe weather alerts, air quality monitoring, and climate trend analysis with beautiful animations and visualizations.",technologies:["React","JavaScript","OpenWeather API","Chart.js","PWA","Geolocation API"],imageUrl:"https://via.placeholder.com/600x400?text=WeatherSense+App",githubUrl:"https://github.com/prathamesh/weathersense",liveUrl:"https://weathersense-app.com",featured:!1},{id:5,title:"MediConnect - Healthcare Platform",description:"Telemedicine platform connecting patients with healthcare providers through secure video consultations, appointment scheduling, and electronic health records management.",technologies:["Angular","Firebase","WebRTC","Node.js","Express","MongoDB","OAuth"],imageUrl:"https://via.placeholder.com/600x400?text=MediConnect",githubUrl:"https://github.com/prathamesh/mediconnect",liveUrl:"https://mediconnect-health.com",featured:!0},{id:6,title:"CryptoPulse",description:"Cryptocurrency tracker and portfolio manager with real-time price updates, advanced charting tools, market news aggregation, and automated trading strategies.",technologies:["React","Redux","Node.js","WebSockets","D3.js","Cryptocurrency APIs"],imageUrl:"https://via.placeholder.com/600x400?text=CryptoPulse",githubUrl:"https://github.com/prathamesh/cryptopulse",liveUrl:"https://cryptopulse.io",featured:!1},{id:7,title:"EduVerse - Learning Platform",description:"Interactive e-learning platform with course creation tools, live sessions, quizzes, progress tracking, and certification management for educational institutions.",technologies:["Angular","TypeScript","Java","Spring Boot","MySQL","AWS","WebRTC"],imageUrl:"https://via.placeholder.com/600x400?text=EduVerse",githubUrl:"https://github.com/prathamesh/eduverse",liveUrl:"https://eduverse-learn.com",featured:!1},{id:8,title:"3D Portfolio Website",description:"Interactive portfolio website featuring Three.js animations, custom 3D models, parallax effects, and WebGL graphics showcasing my projects and skills.",technologies:["Angular","TypeScript","SCSS","Three.js","GSAP","Responsive Design"],imageUrl:"https://via.placeholder.com/600x400?text=3D+Portfolio",githubUrl:"https://github.com/prathamesh/portfolio-3d",liveUrl:"https://prathamesh-dev.com",featured:!1}],this.experiences=[{company:"Innovatech Solutions",role:"Lead Software Architect",period:"Jun 2022 - Present",description:"Leading architecture design and implementation of enterprise-scale applications. Spearheading a team of 15 engineers across frontend, backend, and DevOps. Implemented microservices architecture reducing system downtime by 45% and improving scalability. Established coding standards and mentored junior developers.",technologies:["Angular","Microservices","Azure","TypeScript","NestJS","CI/CD","Docker","Kubernetes"],logo:"https://via.placeholder.com/150?text=Innovatech"},{company:"DigitalEdge Systems",role:"Senior Full Stack Developer",period:"Mar 2019 - May 2022",description:"Architected and developed scalable web applications for clients in fintech and healthcare sectors. Led migration from legacy systems to modern tech stack, resulting in 60% performance improvement. Implemented real-time features using WebSockets and optimized database queries reducing response times by 35%.",technologies:["React","Node.js","Express","MongoDB","AWS","Redux","GraphQL","Docker"],logo:"https://via.placeholder.com/150?text=DigitalEdge"},{company:"GlobalTech Ventures",role:"Frontend Developer",period:"Aug 2017 - Feb 2019",description:"Developed responsive and accessible user interfaces for cross-platform web applications. Collaborated with UX designers to implement pixel-perfect designs. Reduced page load times by 40% through code optimization and lazy loading strategies.",technologies:["JavaScript","React","HTML5","CSS3","SASS","Webpack","Jest","Agile"],logo:"https://via.placeholder.com/150?text=GlobalTech"},{company:"CodeCraft Studios",role:"Web Developer Intern",period:"Jan 2017 - Jul 2017",description:"Assisted in developing and maintaining client websites and web applications. Participated in daily stand-ups and sprint planning. Implemented responsive designs and fixed front-end bugs.",technologies:["JavaScript","jQuery","HTML","CSS","PHP","WordPress","Git"],logo:"https://via.placeholder.com/150?text=CodeCraft"}],this.education=[{institution:"Indian Institute of Technology (IIT) Mumbai",degree:"Master of Technology in Computer Science",period:"2015 - 2017",description:'Specialized in Artificial Intelligence and Web Technologies. Graduated with distinction (9.2/10 CGPA). Research project on "Optimizing Neural Networks for Web Applications" received departmental recognition. Teaching assistant for Advanced Web Development course.',logo:"https://via.placeholder.com/150?text=IIT+Mumbai"},{institution:"Mumbai University",degree:"Bachelor of Engineering in Computer Science",period:"2011 - 2015",description:'First Class with Distinction (8.9/10 CGPA). Led the university web development team. Won first place in national-level hackathon. Published paper on "Efficient Algorithms for Web Data Processing" in undergraduate research symposium.',logo:"https://via.placeholder.com/150?text=Mumbai+Uni"},{institution:"Udacity",degree:"Nanodegree in Full Stack Web Development",period:"2018",description:"Completed intensive program covering modern web technologies, best practices, and deployment strategies. Capstone project featured on Udacity showcase.",logo:"https://via.placeholder.com/150?text=Udacity"},{institution:"AWS",degree:"AWS Certified Solutions Architect",period:"2020",description:"Professional certification demonstrating expertise in designing and deploying scalable systems on AWS. Specialized in serverless architecture and distributed systems.",logo:"https://via.placeholder.com/150?text=AWS+Cert"}]}getSkills(){return this.skillIconService.getAllSkills().pipe(xt(n=>n.map(r=>({name:r.name,level:Math.floor(20*Math.random())+75,icon:r.icon,category:r.category}))))}updateActiveSection(n){this.activeSection.next(n)}getSkillsByCategory(){return this.getSkills().pipe(xt(n=>{const r={};return n.forEach(s=>{const o=s.category.charAt(0).toUpperCase()+s.category.slice(1);r[o]||(r[o]=[]),r[o].push(s)}),r}))}getSkillCategories(){return this.skillIconService.getCategories().pipe(xt(n=>n.map(r=>"All"===r?"All":r.charAt(0).toUpperCase()+r.slice(1))))}getFeaturedProjects(){return this.projects.filter(n=>n.featured)}getAllProjects(){return this.projects}getProjectById(n){return this.projects.find(r=>r.id===n)}};let i=e;return e.\u0275fac=function(r){return new(r||e)(qe(R2))},e.\u0275prov=rt({token:e,factory:e.\u0275fac,providedIn:"root"}),i})();function N2(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}function Wy(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){N2(s,n,r,o,a,"next",l)}function a(l){N2(s,n,r,o,a,"throw",l)}o(void 0)})}}const Rd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Nd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tee=0,L2=1,nee=2,k2=1,iee=2,Ia=3,Ra=0,$r=1,Ko=2,El=0,Ld=1,F2=2,U2=3,B2=4,ree=5,Ic=100,see=101,oee=102,aee=103,lee=104,cee=200,uee=201,dee=202,hee=203,Zw=204,Jw=205,fee=206,pee=207,gee=208,mee=209,_ee=210,yee=211,vee=212,Mee=213,bee=214,Qw=0,eS=1,tS=2,kd=3,nS=4,iS=5,rS=6,sS=7,jy=0,xee=1,Cee=2,Tl=0,wee=1,See=2,Eee=3,Tee=4,Aee=5,Pee=6,Dee=7,V2="attached",Al=301,Rc=302,$y=303,Xy=304,Vp=306,Nc=1e3,$s=1001,zp=1002,ki=1003,aS=1004,Fd=1005,ti=1006,Hp=1007,bo=1008,Na=1009,z2=1010,H2=1011,Gp=1012,lS=1013,Pl=1014,ms=1015,Wp=1016,cS=1017,uS=1018,Ud=1020,G2=35902,W2=1021,j2=1022,Xr=1023,$2=1024,X2=1025,Bd=1026,Vd=1027,dS=1028,qy=1029,q2=1030,hS=1031,fS=1033,Yy=33776,Ky=33777,Zy=33778,Jy=33779,pS=35840,gS=35841,mS=35842,_S=35843,yS=36196,vS=37492,MS=37496,bS=37808,xS=37809,CS=37810,wS=37811,SS=37812,ES=37813,TS=37814,AS=37815,PS=37816,DS=37817,OS=37818,IS=37819,RS=37820,NS=37821,Qy=36492,LS=36494,kS=36495,Y2=36283,FS=36284,US=36285,BS=36286,jp=2300,$p=2301,zd=2400,Hd=2401,Lee=0,Z2=1,HS=2,Fee=3201,Lc=0,Uee=1,Dl="",Fi="srgb",Cr="srgb-linear",tv="linear",_n="srgb",Gd=7680,Bee=512,Vee=513,zee=514,Q2=515,Hee=516,Gee=517,Wee=518,jee=519,e3="300 es",La=2e3;class Ol{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let t3=1234567;const kc=Math.PI/180,Wd=180/Math.PI;function _s(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(or[255&i]+or[i>>8&255]+or[i>>16&255]+or[i>>24&255]+"-"+or[255&e]+or[e>>8&255]+"-"+or[e>>16&15|64]+or[e>>24&255]+"-"+or[63&t|128]+or[t>>8&255]+"-"+or[t>>16&255]+or[t>>24&255]+or[255&n]+or[n>>8&255]+or[n>>16&255]+or[n>>24&255]).toLowerCase()}function Dt(i,e,t){return Math.max(e,Math.min(t,i))}function GS(i,e){return(i%e+e)%e}function Xp(i,e,t){return(1-t)*i+t*e}function wr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Rt(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(4294967295*i);case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int32Array:return Math.round(2147483647*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const Sr={DEG2RAD:kc,RAD2DEG:Wd,generateUUID:_s,clamp:Dt,euclideanModulo:GS,mapLinear:function $ee(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)},inverseLerp:function Xee(i,e,t){return i!==e?(t-i)/(e-i):0},lerp:Xp,damp:function qee(i,e,t,n){return Xp(i,e,1-Math.exp(-t*n))},pingpong:function Yee(i,e=1){return e-Math.abs(GS(i,2*e)-e)},smoothstep:function Kee(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*(3-2*i)},smootherstep:function Zee(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*i*(i*(6*i-15)+10)},randInt:function Jee(i,e){return i+Math.floor(Math.random()*(e-i+1))},randFloat:function Qee(i,e){return i+Math.random()*(e-i)},randFloatSpread:function ete(i){return i*(.5-Math.random())},seededRandom:function tte(i){void 0!==i&&(t3=i);let e=t3+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function nte(i){return i*kc},radToDeg:function ite(i){return i*Wd},isPowerOfTwo:function rte(i){return 0==(i&i-1)&&0!==i},ceilPowerOfTwo:function ste(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},floorPowerOfTwo:function ote(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},setQuaternionFromProperEuler:function ate(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),u=o((e+n)/2),d=s((e-n)/2),f=o((e-n)/2),h=s((n-e)/2),p=o((n-e)/2);switch(r){case"XYX":i.set(a*u,l*d,l*f,a*c);break;case"YZY":i.set(l*f,a*u,l*d,a*c);break;case"ZXZ":i.set(l*d,l*f,a*u,a*c);break;case"XZX":i.set(a*u,l*p,l*h,a*c);break;case"YXY":i.set(l*h,a*u,l*p,a*c);break;case"ZYZ":i.set(l*p,l*h,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Rt,denormalize:wr};class he{constructor(e=0,t=0){he.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Dt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Dt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Nt{constructor(e,t,n,r,s,o,a,l,c){Nt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,s,o,a,l,c)}set(e,t,n,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],d=n[7],f=n[2],h=n[5],p=n[8],g=r[0],m=r[3],_=r[6],M=r[1],y=r[4],v=r[7],C=r[2],w=r[5],S=r[8];return s[0]=o*g+a*M+l*C,s[3]=o*m+a*y+l*w,s[6]=o*_+a*v+l*S,s[1]=c*g+u*M+d*C,s[4]=c*m+u*y+d*w,s[7]=c*_+u*v+d*S,s[2]=f*g+h*M+p*C,s[5]=f*m+h*y+p*w,s[8]=f*_+h*v+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,h=c*s-o*l,p=t*d+n*f+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(r*c-u*n)*g,e[2]=(a*n-r*o)*g,e[3]=f*g,e[4]=(u*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=h*g,e[7]=(n*l-c*t)*g,e[8]=(o*t-n*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(WS.makeScale(e,t)),this}rotate(e){return this.premultiply(WS.makeRotation(-e)),this}translate(e,t){return this.premultiply(WS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const WS=new Nt;function n3(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function qp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function cte(){const i=qp("canvas");return i.style.display="block",i}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const i3={};function $d(i){i in i3||(i3[i]=!0,console.warn(i))}const r3=(new Nt).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),s3=(new Nt).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function fte(){const i={enabled:!0,workingColorSpace:Cr,spaces:{},convert:function(r,s,o){return!1===this.enabled||s===o||!s||!o||(this.spaces[s].transfer===_n&&(r.r=ka(r.r),r.g=ka(r.g),r.b=ka(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===_n&&(r.r=Xd(r.r),r.g=Xd(r.g),r.b=Xd(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Dl?tv:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Cr]:{primaries:e,whitePoint:n,transfer:tv,toXYZ:r3,fromXYZ:s3,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Fi},outputColorSpaceConfig:{drawingBufferColorSpace:Fi}},[Fi]:{primaries:e,whitePoint:n,transfer:_n,toXYZ:r3,fromXYZ:s3,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Fi}}}),i}const tn=fte();function ka(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function Xd(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}let qd;class pte{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===qd&&(qd=qp("canvas")),qd.width=e.width,qd.height=e.height;const n=qd.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=qd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qp("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*ka(s[o]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*ka(t[n]/255)):ka(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let gte=0;class Yd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:gte++}),this.uuid=_s(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(jS(r[o].isDataTexture?r[o].image:r[o]))}else s=jS(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function jS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?pte.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mte=0,Xs=(()=>{class i extends Ol{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=$s,s=$s,o=ti,a=bo,l=Xr,c=Na,u=i.DEFAULT_ANISOTROPY,d=Dl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mte++}),this.uuid=_s(),this.name="",this.source=new Yd(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new he(0,0),this.repeat=new he(1,1),this.center=new he(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Nc:t.x=t.x-Math.floor(t.x);break;case $s:t.x=t.x<0?0:1;break;case zp:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Nc:t.y=t.y-Math.floor(t.y);break;case $s:t.y=t.y<0?0:1;break;case zp:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class an{constructor(e=0,t=0,n=0,r=1){an.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],g=l[2],m=l[6],_=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+g)<.1&&Math.abs(p+m)<.1&&Math.abs(c+h+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,v=(h+1)/2,C=(_+1)/2,w=(u+f)/4,S=(d+g)/4,E=(p+m)/4;return y>v&&y>C?y<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(y),r=w/n,s=S/n):v>C?v<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(v),n=w/r,s=E/r):C<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),n=S/s,r=E/s),this.set(n,r,s,t),this}let M=Math.sqrt((m-p)*(m-p)+(d-g)*(d-g)+(f-u)*(f-u));return Math.abs(M)<.001&&(M=1),this.x=(m-p)/M,this.y=(d-g)/M,this.z=(f-u)/M,this.w=Math.acos((c+h+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this.z=Dt(this.z,e.z,t.z),this.w=Dt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this.z=Dt(this.z,e,t),this.w=Dt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Dt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class _te extends Ol{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ti,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Xs(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Yd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fc extends _te{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class $S extends Xs{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ki,this.minFilter=ki,this.wrapR=$s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class o3 extends Xs{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ki,this.minFilter=ki,this.wrapR=$s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qi{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],d=n[r+3];const f=s[o+0],h=s[o+1],p=s[o+2],g=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=f,e[t+1]=h,e[t+2]=p,void(e[t+3]=g);if(d!==g||l!==f||c!==h||u!==p){let m=1-a;const _=l*f+c*h+u*p+d*g,M=_>=0?1:-1,y=1-_*_;if(y>Number.EPSILON){const C=Math.sqrt(y),w=Math.atan2(C,_*M);m=Math.sin(m*w)/C,a=Math.sin(a*w)/C}const v=a*M;if(l=l*m+f*v,c=c*m+h*v,u=u*m+p*v,d=d*m+g*v,m===1-a){const C=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=C,c*=C,u*=C,d*=C}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],d=s[o],f=s[o+1],h=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*h-c*f,e[t+1]=l*p+u*f+c*d-a*h,e[t+2]=c*p+u*h+a*f-l*d,e[t+3]=u*p-a*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),d=a(s/2),f=l(n/2),h=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=n+a+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(o-r)*h}else if(n>a&&n>d){const h=2*Math.sqrt(1+n-a-d);this._w=(u-l)/h,this._x=.25*h,this._y=(r+o)/h,this._z=(s+c)/h}else if(a>d){const h=2*Math.sqrt(1+a-n-d);this._w=(s-c)/h,this._x=(r+o)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-n-a);this._w=(o-r)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Dt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-t;return this._w=h*o+t*this._w,this._x=h*n+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=n*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class I{constructor(e=0,t=0,n=0){I.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(a3.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(a3.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*n),u=2*(a*t-s*r),d=2*(s*n-o*t);return this.x=t+l*c+o*d-a*u,this.y=n+l*u+a*c-s*d,this.z=r+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this.z=Dt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this.z=Dt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Dt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return XS.copy(this).projectOnVector(e),this.sub(XS)}reflect(e){return this.sub(XS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Dt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const XS=new I,a3=new qi;class Er{constructor(e=new I(1/0,1/0,1/0),t=new I(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(xo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(xo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=xo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const s=n.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,xo):xo.fromBufferAttribute(s,o),xo.applyMatrix4(e.matrixWorld),this.expandByPoint(xo);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),rv.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),rv.copy(n.boundingBox)),rv.applyMatrix4(e.matrixWorld),this.union(rv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,xo),xo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yp),sv.subVectors(this.max,Yp),Kd.subVectors(e.a,Yp),Zd.subVectors(e.b,Yp),Jd.subVectors(e.c,Yp),Il.subVectors(Zd,Kd),Rl.subVectors(Jd,Zd),Uc.subVectors(Kd,Jd);let t=[0,-Il.z,Il.y,0,-Rl.z,Rl.y,0,-Uc.z,Uc.y,Il.z,0,-Il.x,Rl.z,0,-Rl.x,Uc.z,0,-Uc.x,-Il.y,Il.x,0,-Rl.y,Rl.x,0,-Uc.y,Uc.x,0];return!(!qS(t,Kd,Zd,Jd,sv)||(t=[1,0,0,0,1,0,0,0,1],!qS(t,Kd,Zd,Jd,sv)))&&(ov.crossVectors(Il,Rl),t=[ov.x,ov.y,ov.z],qS(t,Kd,Zd,Jd,sv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(xo).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Fa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fa)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fa=[new I,new I,new I,new I,new I,new I,new I,new I],xo=new I,rv=new Er,Kd=new I,Zd=new I,Jd=new I,Il=new I,Rl=new I,Uc=new I,Yp=new I,sv=new I,ov=new I,Bc=new I;function qS(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Bc.fromArray(i,s);const a=r.x*Math.abs(Bc.x)+r.y*Math.abs(Bc.y)+r.z*Math.abs(Bc.z),l=e.dot(Bc),c=t.dot(Bc),u=n.dot(Bc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const yte=new Er,Kp=new I,YS=new I;class ar{constructor(e=new I,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):yte.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Kp.subVectors(e,this.center);const t=Kp.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(Kp,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(YS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Kp.copy(e.center).add(YS)),this.expandByPoint(Kp.copy(e.center).sub(YS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ua=new I,KS=new I,av=new I,Nl=new I,ZS=new I,lv=new I,JS=new I;class Qd{constructor(e=new I,t=new I(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ua)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ua.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ua.copy(this.origin).addScaledVector(this.direction,t),Ua.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){KS.copy(e).add(t).multiplyScalar(.5),av.copy(t).sub(e).normalize(),Nl.copy(this.origin).sub(KS);const s=.5*e.distanceTo(t),o=-this.direction.dot(av),a=Nl.dot(this.direction),l=-Nl.dot(av),c=Nl.lengthSq(),u=Math.abs(1-o*o);let d,f,h,p;if(u>0)if(d=o*l-a,f=o*a-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const g=1/u;d*=g,f*=g,h=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(KS).addScaledVector(av,f),h}intersectSphere(e,t){Ua.subVectors(e.center,this.origin);const n=Ua.dot(this.direction),r=Ua.dot(Ua)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(n=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(n=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Ua)}intersectTriangle(e,t,n,r,s){ZS.subVectors(t,e),lv.subVectors(n,e),JS.crossVectors(ZS,lv);let a,o=this.direction.dot(JS);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Nl.subVectors(this.origin,e);const l=a*this.direction.dot(lv.crossVectors(Nl,lv));if(l<0)return null;const c=a*this.direction.dot(ZS.cross(Nl));if(c<0||l+c>o)return null;const u=-a*Nl.dot(JS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ft{constructor(e,t,n,r,s,o,a,l,c,u,d,f,h,p,g,m){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,s,o,a,l,c,u,d,f,h,p,g,m)}set(e,t,n,r,s,o,a,l,c,u,d,f,h,p,g,m){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=f,_[3]=h,_[7]=p,_[11]=g,_[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ft).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/eh.setFromMatrixColumn(e,0).length(),s=1/eh.setFromMatrixColumn(e,1).length(),o=1/eh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const f=o*u,h=o*d,p=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=h+p*c,t[5]=f-g*c,t[9]=-a*l,t[2]=g-f*c,t[6]=p+h*c,t[10]=o*l}else if("YXZ"===e.order){const f=l*u,h=l*d,p=c*u,g=c*d;t[0]=f+g*a,t[4]=p*a-h,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=h*a-p,t[6]=g+f*a,t[10]=o*l}else if("ZXY"===e.order){const f=l*u,h=l*d,p=c*u,g=c*d;t[0]=f-g*a,t[4]=-o*d,t[8]=p+h*a,t[1]=h+p*a,t[5]=o*u,t[9]=g-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const f=o*u,h=o*d,p=a*u,g=a*d;t[0]=l*u,t[4]=p*c-h,t[8]=f*c+g,t[1]=l*d,t[5]=g*c+f,t[9]=h*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const f=o*l,h=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=g-f*d,t[8]=p*d+h,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=h*d+p,t[10]=f-g*d}else if("XZY"===e.order){const f=o*l,h=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+g,t[5]=o*u,t[9]=h*d-p,t[2]=p*d-h,t[6]=a*u,t[10]=g*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(vte,e,Mte)}lookAt(e,t,n){const r=this.elements;return ys.subVectors(e,t),0===ys.lengthSq()&&(ys.z=1),ys.normalize(),Ll.crossVectors(n,ys),0===Ll.lengthSq()&&(1===Math.abs(n.z)?ys.x+=1e-4:ys.z+=1e-4,ys.normalize(),Ll.crossVectors(n,ys)),Ll.normalize(),cv.crossVectors(ys,Ll),r[0]=Ll.x,r[4]=cv.x,r[8]=ys.x,r[1]=Ll.y,r[5]=cv.y,r[9]=ys.y,r[2]=Ll.z,r[6]=cv.z,r[10]=ys.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],d=n[5],f=n[9],h=n[13],p=n[2],g=n[6],m=n[10],_=n[14],M=n[3],y=n[7],v=n[11],C=n[15],w=r[0],S=r[4],E=r[8],x=r[12],b=r[1],P=r[5],k=r[9],L=r[13],W=r[2],q=r[6],N=r[10],V=r[14],B=r[3],ee=r[7],R=r[11],ae=r[15];return s[0]=o*w+a*b+l*W+c*B,s[4]=o*S+a*P+l*q+c*ee,s[8]=o*E+a*k+l*N+c*R,s[12]=o*x+a*L+l*V+c*ae,s[1]=u*w+d*b+f*W+h*B,s[5]=u*S+d*P+f*q+h*ee,s[9]=u*E+d*k+f*N+h*R,s[13]=u*x+d*L+f*V+h*ae,s[2]=p*w+g*b+m*W+_*B,s[6]=p*S+g*P+m*q+_*ee,s[10]=p*E+g*k+m*N+_*R,s[14]=p*x+g*L+m*V+_*ae,s[3]=M*w+y*b+v*W+C*B,s[7]=M*S+y*P+v*q+C*ee,s[11]=M*E+y*k+v*N+C*R,s[15]=M*x+y*L+v*V+C*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14];return e[3]*(+s*l*d-r*c*d-s*a*f+n*c*f+r*a*h-n*l*h)+e[7]*(+t*l*h-t*c*f+s*o*f-r*o*h+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*h-s*o*d+n*o*h+s*a*u-n*c*u)+e[15]*(-r*a*u-t*l*d+t*a*f+r*o*d-n*o*f+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],g=e[13],m=e[14],_=e[15],M=d*m*c-g*f*c+g*l*h-a*m*h-d*l*_+a*f*_,y=p*f*c-u*m*c-p*l*h+o*m*h+u*l*_-o*f*_,v=u*g*c-p*d*c+p*a*h-o*g*h-u*a*_+o*d*_,C=p*d*l-u*g*l-p*a*f+o*g*f+u*a*m-o*d*m,w=t*M+n*y+r*v+s*C;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/w;return e[0]=M*S,e[1]=(g*f*s-d*m*s-g*r*h+n*m*h+d*r*_-n*f*_)*S,e[2]=(a*m*s-g*l*s+g*r*c-n*m*c-a*r*_+n*l*_)*S,e[3]=(d*l*s-a*f*s-d*r*c+n*f*c+a*r*h-n*l*h)*S,e[4]=y*S,e[5]=(u*m*s-p*f*s+p*r*h-t*m*h-u*r*_+t*f*_)*S,e[6]=(p*l*s-o*m*s-p*r*c+t*m*c+o*r*_-t*l*_)*S,e[7]=(o*f*s-u*l*s+u*r*c-t*f*c-o*r*h+t*l*h)*S,e[8]=v*S,e[9]=(p*d*s-u*g*s-p*n*h+t*g*h+u*n*_-t*d*_)*S,e[10]=(o*g*s-p*a*s+p*n*c-t*g*c-o*n*_+t*a*_)*S,e[11]=(u*a*s-o*d*s-u*n*c+t*d*c+o*n*h-t*a*h)*S,e[12]=C*S,e[13]=(u*g*r-p*d*r+p*n*f-t*g*f-u*n*m+t*d*m)*S,e[14]=(p*a*r-o*g*r-p*n*l+t*g*l+o*n*m-t*a*m)*S,e[15]=(o*d*r-u*a*r+u*n*l-t*d*l-o*n*f+t*a*f)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,f=s*c,h=s*u,p=s*d,g=o*u,m=o*d,_=a*d,M=l*c,y=l*u,v=l*d,C=n.x,w=n.y,S=n.z;return r[0]=(1-(g+_))*C,r[1]=(h+v)*C,r[2]=(p-y)*C,r[3]=0,r[4]=(h-v)*w,r[5]=(1-(f+_))*w,r[6]=(m+M)*w,r[7]=0,r[8]=(p+y)*S,r[9]=(m-M)*S,r[10]=(1-(f+g))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=eh.set(r[0],r[1],r[2]).length();const o=eh.set(r[4],r[5],r[6]).length(),a=eh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Co.copy(this);const c=1/s,u=1/o,d=1/a;return Co.elements[0]*=c,Co.elements[1]*=c,Co.elements[2]*=c,Co.elements[4]*=u,Co.elements[5]*=u,Co.elements[6]*=u,Co.elements[8]*=d,Co.elements[9]*=d,Co.elements[10]*=d,t.setFromRotationMatrix(Co),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=La){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r);let h,p;if(a===La)h=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);h=-o/(o-s),p=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=La){const l=this.elements,c=1/(t-e),u=1/(n-r),d=1/(o-s),f=(t+e)*c,h=(n+r)*u;let p,g;if(a===La)p=(o+s)*d,g=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,g=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=g,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const eh=new I,Co=new ft,vte=new I(0,0,0),Mte=new I(1,1,1),Ll=new I,cv=new I,ys=new I,l3=new ft,c3=new qi;let Ba=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],f=s[2],h=s[6],p=s[10];switch(n){case"XYZ":this._y=Math.asin(Dt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Dt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Dt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Dt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Dt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Dt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return l3.makeRotationFromQuaternion(t),this.setFromRotationMatrix(l3,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return c3.setFromEuler(this),this.setFromQuaternion(c3,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class QS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let bte=0;const u3=new I,th=new qi,Va=new ft,uv=new I,Zp=new I,xte=new I,Cte=new qi,d3=new I(1,0,0),h3=new I(0,1,0),f3=new I(0,0,1),p3={type:"added"},wte={type:"removed"},nh={type:"childadded",child:null},eE={type:"childremoved",child:null};let di=(()=>{class i extends Ol{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:bte++}),this.uuid=_s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const t=new I,n=new Ba,r=new qi,s=new I(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ft},normalMatrix:{value:new Nt}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new QS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return th.setFromAxisAngle(t,n),this.quaternion.multiply(th),this}rotateOnWorldAxis(t,n){return th.setFromAxisAngle(t,n),this.quaternion.premultiply(th),this}rotateX(t){return this.rotateOnAxis(d3,t)}rotateY(t){return this.rotateOnAxis(h3,t)}rotateZ(t){return this.rotateOnAxis(f3,t)}translateOnAxis(t,n){return u3.copy(t).applyQuaternion(this.quaternion),this.position.add(u3.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(d3,t)}translateY(t){return this.translateOnAxis(h3,t)}translateZ(t){return this.translateOnAxis(f3,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Va.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?uv.copy(t):uv.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Zp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Va.lookAt(Zp,uv,this.up):Va.lookAt(uv,Zp,this.up),this.quaternion.setFromRotationMatrix(Va),s&&(Va.extractRotation(s.matrixWorld),th.setFromRotationMatrix(Va),this.quaternion.premultiply(th.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(p3),nh.child=t,this.dispatchEvent(nh),nh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(wte),eE.child=t,this.dispatchEvent(eE),eE.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Va.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Va.multiply(t.parent.matrixWorld)),t.applyMatrix4(Va),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(p3),nh.child=t,this.dispatchEvent(nh),nh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(void 0!==a)return a}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zp,t,xte),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zp,Cte,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].updateMatrixWorld(t)}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(n){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),f=a(t.shapes),h=a(t.skeletons),p=a(t.animations),g=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return i.DEFAULT_UP=new I(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const wo=new I,za=new I,tE=new I,Ha=new I,ih=new I,rh=new I,g3=new I,nE=new I,iE=new I,rE=new I,sE=new an,oE=new an,aE=new an;class vs{constructor(e=new I,t=new I,n=new I){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),wo.subVectors(e,t),r.cross(wo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){wo.subVectors(r,t),za.subVectors(n,t),tE.subVectors(e,t);const o=wo.dot(wo),a=wo.dot(za),l=wo.dot(tE),c=za.dot(za),u=za.dot(tE),d=o*c-a*a;if(0===d)return s.set(0,0,0),null;const f=1/d,h=(c*l-a*u)*f,p=(o*u-a*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Ha)&&Ha.x>=0&&Ha.y>=0&&Ha.x+Ha.y<=1}static getInterpolation(e,t,n,r,s,o,a,l){return null===this.getBarycoord(e,t,n,r,Ha)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ha.x),l.addScaledVector(o,Ha.y),l.addScaledVector(a,Ha.z),l)}static getInterpolatedAttribute(e,t,n,r,s,o){return sE.setScalar(0),oE.setScalar(0),aE.setScalar(0),sE.fromBufferAttribute(e,t),oE.fromBufferAttribute(e,n),aE.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(sE,s.x),o.addScaledVector(oE,s.y),o.addScaledVector(aE,s.z),o}static isFrontFacing(e,t,n,r){return wo.subVectors(n,t),za.subVectors(e,t),wo.cross(za).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wo.subVectors(this.c,this.b),za.subVectors(this.a,this.b),.5*wo.cross(za).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return vs.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return vs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;ih.subVectors(r,n),rh.subVectors(s,n),nE.subVectors(e,n);const l=ih.dot(nE),c=rh.dot(nE);if(l<=0&&c<=0)return t.copy(n);iE.subVectors(e,r);const u=ih.dot(iE),d=rh.dot(iE);if(u>=0&&d<=u)return t.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(n).addScaledVector(ih,o);rE.subVectors(e,s);const h=ih.dot(rE),p=rh.dot(rE);if(p>=0&&h<=p)return t.copy(s);const g=h*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(n).addScaledVector(rh,a);const m=u*p-h*d;if(m<=0&&d-u>=0&&h-p>=0)return g3.subVectors(s,r),a=(d-u)/(d-u+(h-p)),t.copy(r).addScaledVector(g3,a);const _=1/(m+g+f);return o=g*_,a=f*_,t.copy(n).addScaledVector(ih,o).addScaledVector(rh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const m3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kl={h:0,s:0,l:0},dv={h:0,s:0,l:0};function lE(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}class Fe{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Fi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,tn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=tn.workingColorSpace){return this.r=e,this.g=t,this.b=n,tn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=tn.workingColorSpace){if(e=GS(e,1),t=Dt(t,0,1),n=Dt(n,0,1),0===t)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=lE(o,s,e+1/3),this.g=lE(o,s,e),this.b=lE(o,s,e-1/3)}return tn.toWorkingColorSpace(this,r),this}setStyle(e,t=Fi){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Fi){const n=m3[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ka(e.r),this.g=ka(e.g),this.b=ka(e.b),this}copyLinearToSRGB(e){return this.r=Xd(e.r),this.g=Xd(e.g),this.b=Xd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fi){return tn.fromWorkingColorSpace(lr.copy(this),e),65536*Math.round(Dt(255*lr.r,0,255))+256*Math.round(Dt(255*lr.g,0,255))+Math.round(Dt(255*lr.b,0,255))}getHexString(e=Fi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=tn.workingColorSpace){tn.fromWorkingColorSpace(lr.copy(this),t);const n=lr.r,r=lr.g,s=lr.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case n:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-n)/d+2;break;case s:l=(n-r)/d+4}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=tn.workingColorSpace){return tn.fromWorkingColorSpace(lr.copy(this),t),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=Fi){tn.fromWorkingColorSpace(lr.copy(this),e);const t=lr.r,n=lr.g,r=lr.b;return e!==Fi?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(kl),this.setHSL(kl.h+e,kl.s+t,kl.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(kl),e.getHSL(dv);const n=Xp(kl.h,dv.h,t),r=Xp(kl.s,dv.s,t),s=Xp(kl.l,dv.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const lr=new Fe;Fe.NAMES=m3;let Ste=0;class So extends Ol{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ste++}),this.uuid=_s(),this.name="",this.type="Material",this.blending=Ld,this.side=Ra,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Zw,this.blendDst=Jw,this.blendEquation=Ic,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Fe(0,0,0),this.blendAlpha=0,this.depthFunc=kd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gd,this.stencilZFail=Gd,this.stencilZPass=Gd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ld&&(n.blending=this.blending),this.side!==Ra&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==Zw&&(n.blendSrc=this.blendSrc),this.blendDst!==Jw&&(n.blendDst=this.blendDst),this.blendEquation!==Ic&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==kd&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Gd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Gd&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class qs extends So{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ba,this.combine=jy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hi=new I,hv=new he;class An{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=ms,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)hv.fromBufferAttribute(this,t),hv.applyMatrix3(e),this.setXY(t,hv.x,hv.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix3(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix4(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)hi.fromBufferAttribute(this,t),hi.applyNormalMatrix(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)hi.fromBufferAttribute(this,t),hi.transformDirection(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=wr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Rt(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=wr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=wr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=wr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=wr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),n=Rt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),n=Rt(n,this.array),r=Rt(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),n=Rt(n,this.array),r=Rt(r,this.array),s=Rt(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class _3 extends An{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class y3 extends An{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class st extends An{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Tte=0;const Ys=new ft,cE=new di,sh=new I,Ms=new Er,Qp=new Er,Ui=new I;class Lt extends Ol{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Tte++}),this.uuid=_s(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(n3(e)?y3:_3)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Nt).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ys.makeRotationFromQuaternion(e),this.applyMatrix4(Ys),this}rotateX(e){return Ys.makeRotationX(e),this.applyMatrix4(Ys),this}rotateY(e){return Ys.makeRotationY(e),this.applyMatrix4(Ys),this}rotateZ(e){return Ys.makeRotationZ(e),this.applyMatrix4(Ys),this}translate(e,t,n){return Ys.makeTranslation(e,t,n),this.applyMatrix4(Ys),this}scale(e,t,n){return Ys.makeScale(e,t,n),this.applyMatrix4(Ys),this}lookAt(e){return cE.lookAt(e),cE.updateMatrix(),this.applyMatrix4(cE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sh).negate(),this.translate(sh.x,sh.y,sh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new st(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Er);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new I(-1/0,-1/0,-1/0),new I(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)Ms.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(Ui.addVectors(this.boundingBox.min,Ms.min),this.boundingBox.expandByPoint(Ui),Ui.addVectors(this.boundingBox.max,Ms.max),this.boundingBox.expandByPoint(Ui)):(this.boundingBox.expandByPoint(Ms.min),this.boundingBox.expandByPoint(Ms.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ar);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new I,1/0);if(e){const n=this.boundingSphere.center;if(Ms.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Qp.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Ui.addVectors(Ms.min,Qp.min),Ms.expandByPoint(Ui),Ui.addVectors(Ms.max,Qp.max),Ms.expandByPoint(Ui)):(Ms.expandByPoint(Qp.min),Ms.expandByPoint(Qp.max));Ms.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Ui.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Ui));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Ui.fromBufferAttribute(a,c),l&&(sh.fromBufferAttribute(e,c),Ui.add(sh)),r=Math.max(r,n.distanceToSquared(Ui))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new An(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let E=0;E<n.count;E++)a[E]=new I,l[E]=new I;const c=new I,u=new I,d=new I,f=new he,h=new he,p=new he,g=new I,m=new I;function _(E,x,b){c.fromBufferAttribute(n,E),u.fromBufferAttribute(n,x),d.fromBufferAttribute(n,b),f.fromBufferAttribute(s,E),h.fromBufferAttribute(s,x),p.fromBufferAttribute(s,b),u.sub(c),d.sub(c),h.sub(f),p.sub(f);const P=1/(h.x*p.y-p.x*h.y);isFinite(P)&&(g.copy(u).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(P),m.copy(d).multiplyScalar(h.x).addScaledVector(u,-p.x).multiplyScalar(P),a[E].add(g),a[x].add(g),a[b].add(g),l[E].add(m),l[x].add(m),l[b].add(m))}let M=this.groups;0===M.length&&(M=[{start:0,count:e.count}]);for(let E=0,x=M.length;E<x;++E){const b=M[E],P=b.start;for(let L=P,W=P+b.count;L<W;L+=3)_(e.getX(L+0),e.getX(L+1),e.getX(L+2))}const y=new I,v=new I,C=new I,w=new I;function S(E){C.fromBufferAttribute(r,E),w.copy(C);const x=a[E];y.copy(x),y.sub(C.multiplyScalar(C.dot(x))).normalize(),v.crossVectors(w,x);const P=v.dot(l[E])<0?-1:1;o.setXYZW(E,y.x,y.y,y.z,P)}for(let E=0,x=M.length;E<x;++E){const b=M[E],P=b.start;for(let L=P,W=P+b.count;L<W;L+=3)S(e.getX(L+0)),S(e.getX(L+1)),S(e.getX(L+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new An(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let f=0,h=n.count;f<h;f++)n.setXYZ(f,0,0,0);const r=new I,s=new I,o=new I,a=new I,l=new I,c=new I,u=new I,d=new I;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),g=e.getX(f+1),m=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,m),a.add(u),l.add(u),c.add(u),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),n.setXYZ(f+0,u.x,u.y,u.z),n.setXYZ(f+1,u.x,u.y,u.z),n.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ui.fromBufferAttribute(e,t),Ui.normalize(),e.setXYZ(t,Ui.x,Ui.y,Ui.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let g=0,m=l.length;g<m;g++){h=a.isInterleavedBufferAttribute?l[g]*a.data.stride+a.offset:l[g]*u;for(let _=0;_<u;_++)f[p++]=c[h++]}return new An(f,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Lt,n=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const h=e(c[u],n);l.push(h)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n)e.data.attributes[l]=n[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const v3=new ft,Vc=new Qd,fv=new ar,M3=new I,pv=new I,gv=new I,mv=new I,uE=new I,_v=new I,b3=new I,yv=new I;class fi extends di{constructor(e=new Lt,t=new qs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){_v.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l];0!==u&&(uE.fromBufferAttribute(s[l],e),_v.addScaledVector(o?uE:uE.sub(t),u))}t.add(_v)}return t}raycast(e,t){const n=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),fv.copy(n.boundingSphere),fv.applyMatrix4(s),Vc.copy(e.ray).recast(e.near),(!1!==fv.containsPoint(Vc.origin)||!(null===Vc.intersectSphere(fv,M3)||Vc.origin.distanceToSquared(M3)>(e.far-e.near)**2))&&(v3.copy(s).invert(),Vc.copy(e.ray).applyMatrix4(v3),(null===n.boundingBox||!1!==Vc.intersectsBox(n.boundingBox))&&this._computeIntersections(e,t,Vc)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,g=f.length;p<g;p++){const m=f[p],_=o[m.materialIndex];for(let v=Math.max(m.start,h.start),C=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));v<C;v+=3)r=vv(this,_,e,n,c,u,d,a.getX(v),a.getX(v+1),a.getX(v+2)),r&&(r.faceIndex=Math.floor(v/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,h.start),_=Math.min(a.count,h.start+h.count);m<_;m+=3)r=vv(this,o,e,n,c,u,d,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==l)if(Array.isArray(o))for(let p=0,g=f.length;p<g;p++){const m=f[p],_=o[m.materialIndex];for(let v=Math.max(m.start,h.start),C=Math.min(l.count,Math.min(m.start+m.count,h.start+h.count));v<C;v+=3)r=vv(this,_,e,n,c,u,d,v,v+1,v+2),r&&(r.faceIndex=Math.floor(v/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,h.start),_=Math.min(l.count,h.start+h.count);m<_;m+=3)r=vv(this,o,e,n,c,u,d,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}function vv(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,pv),i.getVertexPosition(l,gv),i.getVertexPosition(c,mv);const u=function Ate(i,e,t,n,r,s,o,a){let l;if(l=e.side===$r?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,e.side===Ra,a),null===l)return null;yv.copy(a),yv.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(yv);return c<t.near||c>t.far?null:{distance:c,point:yv.clone(),object:i}}(i,e,t,n,pv,gv,mv,b3);if(u){const d=new I;vs.getBarycoord(b3,pv,gv,mv,d),r&&(u.uv=vs.getInterpolatedAttribute(r,a,l,c,d,new he)),s&&(u.uv1=vs.getInterpolatedAttribute(s,a,l,c,d,new he)),o&&(u.normal=vs.getInterpolatedAttribute(o,a,l,c,d,new I),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new I,materialIndex:0};vs.getNormal(pv,gv,mv,f.normal),u.face=f,u.barycoord=d}return u}class oh extends Lt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,h=0;function p(g,m,_,M,y,v,C,w,S,E,x){const b=v/S,P=C/E,k=v/2,L=C/2,W=w/2,q=S+1,N=E+1;let V=0,B=0;const ee=new I;for(let R=0;R<N;R++){const ae=R*P-L;for(let Ee=0;Ee<q;Ee++)ee[g]=(Ee*b-k)*M,ee[m]=ae*y,ee[_]=W,c.push(ee.x,ee.y,ee.z),ee[g]=0,ee[m]=0,ee[_]=w>0?1:-1,u.push(ee.x,ee.y,ee.z),d.push(Ee/S),d.push(1-R/E),V+=1}for(let R=0;R<E;R++)for(let ae=0;ae<S;ae++){const He=f+ae+q*(R+1),$=f+(ae+1)+q*(R+1),ge=f+(ae+1)+q*R;l.push(f+ae+q*R,He,ge),l.push(He,$,ge),B+=6}a.addGroup(h,B,x),h+=B,f+=V}p("z","y","x",-1,-1,n,t,e,o,s,0),p("z","y","x",1,-1,n,t,-e,o,s,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,s,4),p("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new st(c,3)),this.setAttribute("normal",new st(u,3)),this.setAttribute("uv",new st(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ah(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():e[t][n]=Array.isArray(r)?r.slice():r}}return e}function Tr(i){const e={};for(let t=0;t<i.length;t++){const n=ah(i[t]);for(const r in n)e[r]=n[r]}return e}function x3(i){const e=i.getRenderTarget();return null===e?i.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:tn.workingColorSpace}const Dte={clone:ah,merge:Tr};class Wa extends So{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ah(e.uniforms),this.uniformsGroups=function Pte(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class dE extends di{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=La}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Fl=new I,C3=new he,w3=new he;class wi extends dE{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Wd*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*kc*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Wd*Math.atan(Math.tan(.5*kc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Fl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Fl.x,Fl.y).multiplyScalar(-e/Fl.z),Fl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Fl.x,Fl.y).multiplyScalar(-e/Fl.z)}getViewSize(e,t){return this.getViewBounds(e,C3,w3),t.subVectors(w3,C3)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*kc*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Rte extends di{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new wi(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new wi(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new wi(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new wi(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new wi(-90,1,e,t);l.layers=this.layers,this.add(l);const c=new wi(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===La)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=g,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Mv extends Xs{constructor(e,t,n,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:Al,n,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Nte extends Fc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new Mv([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ti}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new oh(5,5,5),s=new Wa({name:"CubemapFromEquirect",uniforms:ah(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:$r,blending:El});s.uniforms.tEquirect.value=t;const o=new fi(r,s),a=t.minFilter;return t.minFilter===bo&&(t.minFilter=ti),new Rte(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class pE extends di{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ba,this.environmentIntensity=1,this.environmentRotation=new Ba,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class gE{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=_s()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_s()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_s()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ar=new I;class zc{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ar.fromBufferAttribute(this,t),Ar.applyMatrix4(e),this.setXYZ(t,Ar.x,Ar.y,Ar.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ar.fromBufferAttribute(this,t),Ar.applyNormalMatrix(e),this.setXYZ(t,Ar.x,Ar.y,Ar.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ar.fromBufferAttribute(this,t),Ar.transformDirection(e),this.setXYZ(t,Ar.x,Ar.y,Ar.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=wr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Rt(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=wr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=wr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=wr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=wr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rt(t,this.array),n=Rt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rt(t,this.array),n=Rt(n,this.array),r=Rt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rt(t,this.array),n=Rt(n,this.array),r=Rt(r,this.array),s=Rt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new An(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const D3=new I,O3=new an,I3=new an,Fte=new I,R3=new ft,Sv=new I,_E=new ar,N3=new ft,yE=new Qd;class L3 extends fi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=V2,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Er),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Sv),this.boundingBox.expandByPoint(Sv)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new ar),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Sv),this.boundingSphere.expandByPoint(Sv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),_E.copy(this.boundingSphere),_E.applyMatrix4(r),!1!==e.ray.intersectsSphere(_E)&&(N3.copy(r).invert(),yE.copy(e.ray).applyMatrix4(N3),(null===this.boundingBox||!1!==yE.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,yE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===V2?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;O3.fromBufferAttribute(r.attributes.skinIndex,e),I3.fromBufferAttribute(r.attributes.skinWeight,e),D3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=I3.getComponent(s);if(0!==o){const a=O3.getComponent(s);R3.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(Fte.copy(D3).applyMatrix4(R3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class vE extends di{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ja extends Xs{constructor(e=null,t=1,n=1,r,s,o,a,l,c=ki,u=ki,d,f){super(null,o,a,l,c,u,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const k3=new ft,Ute=new ft;class Ev{constructor(e=[],t=[]){this.uuid=_s(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new ft;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)k3.multiplyMatrices(e[s]?e[s].matrixWorld:Ute,t[s]),k3.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Ev(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ja(t,e,e,Xr,ms);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new vE),this.bones.push(o),this.boneInverses.push((new ft).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}class ph extends An{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gh=new ft,F3=new ft,Tv=[],U3=new Er,Bte=new ft,ig=new fi,rg=new ar;class B3 extends fi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ph(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Bte)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Er),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,gh),U3.copy(e.boundingBox).applyMatrix4(gh),this.boundingBox.union(U3)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new ar),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,gh),rg.copy(e.boundingSphere).applyMatrix4(gh),this.boundingSphere.union(rg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=e*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ig.geometry=this.geometry,ig.material=this.material,void 0!==ig.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),rg.copy(this.boundingSphere),rg.applyMatrix4(n),!1!==e.ray.intersectsSphere(rg)))for(let s=0;s<r;s++){this.getMatrixAt(s,gh),F3.multiplyMatrices(n,gh),ig.matrixWorld=F3,ig.raycast(e,Tv);for(let o=0,a=Tv.length;o<a;o++){const l=Tv[o];l.instanceId=s,l.object=this,t.push(l)}Tv.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ph(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new ja(new Float32Array(r*this.count),r,this.count,dS,ms));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const l=r*e;s[l]=this.geometry.morphTargetsRelative?1:1-o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const ME=new I,Vte=new I,zte=new Nt;class Ul{constructor(e=new I(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=ME.subVectors(n,t).cross(Vte.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ME),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||zte.getNormalMatrix(e),r=this.coplanarPoint(ME).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Hc=new ar,Av=new I;class Pv{constructor(e=new Ul,t=new Ul,n=new Ul,r=new Ul,s=new Ul,o=new Ul){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=La){const n=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],f=r[7],h=r[8],p=r[9],g=r[10],m=r[11],_=r[12],M=r[13],y=r[14],v=r[15];if(n[0].setComponents(l-s,f-c,m-h,v-_).normalize(),n[1].setComponents(l+s,f+c,m+h,v+_).normalize(),n[2].setComponents(l+o,f+u,m+p,v+M).normalize(),n[3].setComponents(l-o,f-u,m-p,v-M).normalize(),n[4].setComponents(l-a,f-d,m-g,v-y).normalize(),t===La)n[5].setComponents(l+a,f+d,m+g,v+y).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,d,g,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Hc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Hc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hc)}intersectsSprite(e){return Hc.center.set(0,0,0),Hc.radius=.7071067811865476,Hc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hc)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Av.x=r.normal.x>0?e.max.x:e.min.x,Av.y=r.normal.y>0?e.max.y:e.min.y,Av.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Av)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Pr extends So{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Iv=new I,Rv=new I,z3=new ft,og=new Qd,Nv=new ar,wE=new I,H3=new I;class Zo extends di{constructor(e=new Lt,t=new Pr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Iv.fromBufferAttribute(t,r-1),Rv.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Iv.distanceTo(Rv);e.setAttribute("lineDistance",new st(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Nv.copy(n.boundingSphere),Nv.applyMatrix4(r),Nv.radius+=s,!1===e.ray.intersectsSphere(Nv))return;z3.copy(r).invert(),og.copy(e.ray).applyMatrix4(z3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=n.index,f=n.attributes.position;if(null!==u){const h=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=h,m=p-1;g<m;g+=c){const _=u.getX(g),M=u.getX(g+1),y=Lv(this,e,og,l,_,M);y&&t.push(y)}if(this.isLineLoop){const g=u.getX(p-1),m=u.getX(h),_=Lv(this,e,og,l,g,m);_&&t.push(_)}}else{const h=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let g=h,m=p-1;g<m;g+=c){const _=Lv(this,e,og,l,g,g+1);_&&t.push(_)}if(this.isLineLoop){const g=Lv(this,e,og,l,p-1,h);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Lv(i,e,t,n,r,s){const o=i.geometry.attributes.position;if(Iv.fromBufferAttribute(o,r),Rv.fromBufferAttribute(o,s),t.distanceSqToSegment(Iv,Rv,wE,H3)>n)return;wE.applyMatrix4(i.matrixWorld);const l=e.ray.origin.distanceTo(wE);return l<e.near||l>e.far?void 0:{distance:l,point:H3.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:i}}const G3=new I,W3=new I;class SE extends Zo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)G3.fromBufferAttribute(t,r),W3.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+G3.distanceTo(W3);e.setAttribute("lineDistance",new st(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class j3 extends Zo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class kv extends So{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Fe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $3=new ft,EE=new Qd,Fv=new ar,Uv=new I;class TE extends di{constructor(e=new Lt,t=new kv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Fv.copy(n.boundingSphere),Fv.applyMatrix4(r),Fv.radius+=s,!1===e.ray.intersectsSphere(Fv))return;$3.copy(r).invert(),EE.copy(e.ray).applyMatrix4($3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,d=n.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);p<g;p++){const m=c.getX(p);Uv.fromBufferAttribute(d,m),X3(Uv,m,l,r,e,t,this)}else for(let p=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);p<g;p++)Uv.fromBufferAttribute(d,p),X3(Uv,p,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function X3(i,e,t,n,r,s,o){const a=EE.distanceSqToPoint(i);if(a<t){const l=new I;EE.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class $a extends di{constructor(){super(),this.isGroup=!0,this.type="Group"}}class q3 extends Xs{constructor(e,t,n,r,s,o,a,l,c,u=Bd){if(u!==Bd&&u!==Vd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Bd&&(n=Pl),void 0===n&&u===Vd&&(n=Ud),super(null,r,s,o,a,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:ki,this.minFilter=void 0!==l?l:ki,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class fg extends Lt{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,u=l+1,d=e/a,f=t/l,h=[],p=[],g=[],m=[];for(let _=0;_<u;_++){const M=_*f-o;for(let y=0;y<c;y++)p.push(y*d-s,-M,0),g.push(0,0,1),m.push(y/a),m.push(1-_/l)}for(let _=0;_<l;_++)for(let M=0;M<a;M++){const v=M+c*(_+1),C=M+1+c*(_+1),w=M+1+c*_;h.push(M+c*_,v,w),h.push(v,C,w)}this.setIndex(h),this.setAttribute("position",new st(p,3)),this.setAttribute("normal",new st(g,3)),this.setAttribute("uv",new st(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fg(e.width,e.height,e.widthSegments,e.heightSegments)}}class pg extends Lt{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new I,f=new I,h=[],p=[],g=[],m=[];for(let _=0;_<=n;_++){const M=[],y=_/n;let v=0;0===_&&0===o?v=.5/t:_===n&&l===Math.PI&&(v=-.5/t);for(let C=0;C<=t;C++){const w=C/t;d.x=-e*Math.cos(r+w*s)*Math.sin(o+y*a),d.y=e*Math.cos(o+y*a),d.z=e*Math.sin(r+w*s)*Math.sin(o+y*a),p.push(d.x,d.y,d.z),f.copy(d).normalize(),g.push(f.x,f.y,f.z),m.push(w+v,1-y),M.push(c++)}u.push(M)}for(let _=0;_<n;_++)for(let M=0;M<t;M++){const v=u[_][M],C=u[_+1][M],w=u[_+1][M+1];(0!==_||o>0)&&h.push(u[_][M+1],v,w),(_!==n-1||l<Math.PI)&&h.push(v,C,w)}this.setIndex(h),this.setAttribute("position",new st(p,3)),this.setAttribute("normal",new st(g,3)),this.setAttribute("uv",new st(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class gg extends So{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Fe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lc,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ba,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Eo extends gg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new he(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Dt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Fe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Fe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cU extends So{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uU extends So{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Xc(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)}function hU(i){const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function e(r,s){return i[r]-i[s]}),n}function qE(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function YE(i,e,t,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(e.push(s.time),t.push(o)),s=i[r++]}while(void 0!==s)}class mg{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Vne extends mg{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:zd,endingEnd:zd}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Hd:s=e,a=2*t-n;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case Hd:o=e,l=2*n-t;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),g=p*p,m=g*p,_=-f*m+2*f*g-f*p,M=(1+f)*m+(-1.5-2*f)*g+(-.5+f)*p+1,y=(-1-h)*m+(1.5+h)*g+.5*p,v=h*m-h*g;for(let C=0;C!==a;++C)s[C]=_*o[u+C]+M*o[c+C]+y*o[l+C]+v*o[d+C];return s}}class fU extends mg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(n-t)/(r-t),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class zne extends mg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qo{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xc(t,this.TimeBufferType),this.values=Xc(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Xc(e.times,Array),values:Xc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new zne(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Vne(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case jp:t=this.InterpolantFactoryMethodDiscrete;break;case $p:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jp;case this.InterpolantFactoryMethodLinear:return $p;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&function dU(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*n,f=d-n,h=d+n;for(let p=0;p!==n;++p){const g=t[d+p];if(g!==t[f+p]||g!==t[h+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*n,f=o*n;for(let h=0;h!==n;++h)t[f+h]=t[d+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Qo.prototype.TimeBufferType=Float32Array,Qo.prototype.ValueBufferType=Float32Array,Qo.prototype.DefaultInterpolation=$p;class yh extends Qo{constructor(e,t,n){super(e,t,n)}}yh.prototype.ValueTypeName="bool",yh.prototype.ValueBufferType=Array,yh.prototype.DefaultInterpolation=jp,yh.prototype.InterpolantFactoryMethodLinear=void 0,yh.prototype.InterpolantFactoryMethodSmooth=void 0;class pU extends Qo{}pU.prototype.ValueTypeName="color";class vh extends Qo{}vh.prototype.ValueTypeName="number";class Hne extends mg{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)qi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Mh extends Qo{InterpolantFactoryMethodLinear(e){return new Hne(this.times,this.values,this.getValueSize(),e)}}Mh.prototype.ValueTypeName="quaternion",Mh.prototype.InterpolantFactoryMethodSmooth=void 0;class bh extends Qo{constructor(e,t,n){super(e,t,n)}}bh.prototype.ValueTypeName="string",bh.prototype.ValueBufferType=Array,bh.prototype.DefaultInterpolation=jp,bh.prototype.InterpolantFactoryMethodLinear=void 0,bh.prototype.InterpolantFactoryMethodSmooth=void 0;class xh extends Qo{}xh.prototype.ValueTypeName="vector";class _g{constructor(e="",t=-1,n=[],r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=_s(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Wne(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Qo.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=hU(l);l=qE(l,1,u),c=qE(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new vh(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=r[d];f||(r[d]=f=[]),f.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,f,h,p,g){if(0!==h.length){const m=[],_=[];YE(h,m,_,p),0!==m.length&&g.push(new d(f,m,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(f&&0!==f.length)if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let g=0;g<f[p].morphTargets.length;g++)h[f[p].morphTargets[g]]=-1;for(const g in h){const m=[],_=[];for(let M=0;M!==f[p].morphTargets.length;++M){const y=f[p];m.push(y.time),_.push(y.morphTarget===g?1:0)}r.push(new vh(".morphTargetInfluence["+g+"]",m,_))}l=h.length*o}else{const h=".bones["+t[d].name+"]";n(xh,h+".position",f,"pos",r),n(Mh,h+".quaternion",f,"rot",r),n(xh,h+".scale",f,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Wne(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Gne(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vh;case"vector":case"vector2":case"vector3":case"vector4":return xh;case"color":return pU;case"quaternion":return Mh;case"bool":case"boolean":return yh;case"string":return bh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const t=[],n=[];YE(i.keys,t,n,"value"),i.times=t,i.values=n}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Bl={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class gU{constructor(e,t,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const jne=new gU;let yg=(()=>{class i{constructor(t){this.manager=void 0!==t?t:jne,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const r=this;return new Promise(function(s,o){r.load(t,s,n,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return i.DEFAULT_MATERIAL_NAME="__DEFAULT",i})();const qa={};class $ne extends Error{constructor(e,t){super(e),this.response=t}}class ea extends yg{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Bl.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==qa[e])return void qa[e].push({onLoad:t,onProgress:n,onError:r});qa[e]=[],qa[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=qa[e],d=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),h=f?parseInt(f):0,p=0!==h;let g=0;const m=new ReadableStream({start(_){!function M(){d.read().then(({done:y,value:v})=>{if(y)_.close();else{g+=v.byteLength;const C=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:h});for(let w=0,S=u.length;w<S;w++){const E=u[w];E.onProgress&&E.onProgress(C)}_.enqueue(v),M()}},y=>{_.error(y)})}()}});return new Response(m)}throw new $ne(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{Bl.add(e,c);const u=qa[e];delete qa[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onLoad&&h.onLoad(c)}}).catch(c=>{const u=qa[e];if(void 0===u)throw this.manager.itemError(e),c;delete qa[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Kv extends yg{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Bl.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=qp("img");function l(){u(),Bl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Xne extends yg{constructor(e){super(e)}load(e,t,n,r){const s=new Xs,o=new Kv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class Zv extends di{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Fe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const KE=new ft,mU=new I,_U=new I;class ZE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new he(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Pv,this._frameExtents=new he(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;mU.setFromMatrixPosition(e.matrixWorld),t.position.copy(mU),_U.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_U),t.updateMatrixWorld(),KE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(KE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yne extends ZE{constructor(){super(new wi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Wd*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class yU extends Zv{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(di.DEFAULT_UP),this.updateMatrix(),this.target=new di,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Yne}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const vU=new ft,vg=new I,JE=new I;class Kne extends ZE{constructor(){super(new wi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new he(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new I(1,0,0),new I(-1,0,0),new I(0,0,1),new I(0,0,-1),new I(0,1,0),new I(0,-1,0)],this._cubeUps=[new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,0,1),new I(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),vg.setFromMatrixPosition(e.matrixWorld),n.position.copy(vg),JE.copy(n.position),JE.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(JE),n.updateMatrixWorld(),r.makeTranslation(-vg.x,-vg.y,-vg.z),vU.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vU)}}class Jv extends Zv{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Kne}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Qv extends dE{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Zne extends ZE{constructor(){super(new Qv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class qc extends Zv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(di.DEFAULT_UP),this.updateMatrix(),this.target=new di,this.shadow=new Zne}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class QE extends Zv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Yc{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class rie extends yg{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Bl.get(e);if(void 0!==o)return s.manager.itemStart(e),o.then?void o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)}):(setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Bl.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Bl.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Bl.add(e,l),s.manager.itemStart(e)}}class sie extends wi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class cie{constructor(e,t,n){let r,s,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else o+=t,this._mixBufferRegion(n,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(n,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const t=this.buffer,n=this.valueSize,r=n*this._origIndex;this.binding.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){qi.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;qi.multiplyQuaternionsFlat(e,o,e,t,e,n),qi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const tT="\\[\\]\\.:\\/",uie=new RegExp("["+tT+"]","g"),nT="[^"+tT+"]",die="[^"+tT.replace("\\.","")+"]",mie=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",nT)+/(WCOD+)?/.source.replace("WCOD",die)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nT)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nT)+"$"),_ie=["material","materials","bones","map"];class yie{constructor(e,t,n){const r=n||Pn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let Pn=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(uie,"")}static parseTrackName(t){const n=mie.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==_ie.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=yie,i})();Pn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Pn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Pn.prototype.GetterByBindingType=[Pn.prototype._getValue_direct,Pn.prototype._getValue_array,Pn.prototype._getValue_arrayElement,Pn.prototype._getValue_toArray],Pn.prototype.SetterByBindingTypeAndVersioning=[[Pn.prototype._setValue_direct,Pn.prototype._setValue_direct_setNeedsUpdate,Pn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Pn.prototype._setValue_array,Pn.prototype._setValue_array_setNeedsUpdate,Pn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Pn.prototype._setValue_arrayElement,Pn.prototype._setValue_arrayElement_setNeedsUpdate,Pn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Pn.prototype._setValue_fromArray,Pn.prototype._setValue_fromArray_setNeedsUpdate,Pn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vie{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:zd,endingEnd:zd};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*n;l<0||0===n?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===n;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===n){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Hd,r.endingEnd=Hd):(r.endingStart=e?this.zeroSlopeAtStart?Hd:zd:2402,r.endingEnd=t?this.zeroSlopeAtEnd?Hd:zd:2402)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const Mie=new Float32Array(1);class bie extends Ol{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=r[d],h=f.name;let p=u[h];if(void 0!==p)++p.referenceCount,o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}p=new cie(Pn.create(n,h,t&&t._propertyBindings[d].binding.parsedPath),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new fU(new Float32Array(2),new Float32Array(2),1,Mie),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o="string"==typeof e?_g.findByName(r,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===n)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new vie(this,o,t,n);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const n=t||this._root,r=n.uuid,s="string"==typeof e?_g.findByName(n,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)e[n].stop();return this}update(e){const t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}const PU=new ft;class Cie{constructor(e,t,n=0,r=1/0){this.ray=new Qd(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new QS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return PU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(PU),this}intersectObject(e,t=!0,n=[]){return iT(e,this,n,t),n.sort(DU),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)iT(e[r],this,n,t);return n.sort(DU),n}}function DU(i,e){return i.distance-e.distance}function iT(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&!1===i.raycast(e,t)&&(r=!1),!0===r&&!0===n){const s=i.children;for(let o=0,a=s.length;o<a;o++)iT(s[o],e,t,!0)}}class OU{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Dt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Dt(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Sie extends Ol{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function oT(i,e,t,n){const r=function Pie(i){switch(i){case Na:case z2:return{byteLength:1,components:1};case Gp:case H2:case Wp:return{byteLength:2,components:1};case cS:case uS:return{byteLength:2,components:4};case Pl:case lS:case ms:return{byteLength:4,components:1};case G2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}(n);switch(t){case W2:case $2:return i*e;case X2:return i*e*2;case dS:case qy:return i*e/r.components*r.byteLength;case q2:case hS:return i*e*2/r.components*r.byteLength;case j2:return i*e*3/r.components*r.byteLength;case Xr:case fS:return i*e*4/r.components*r.byteLength;case Yy:case Ky:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Zy:case Jy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case gS:case _S:return Math.max(i,16)*Math.max(e,8)/4;case pS:case mS:return Math.max(i,8)*Math.max(e,8)/2;case yS:case vS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case MS:case bS:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case xS:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case CS:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case wS:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case SS:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case ES:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case TS:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case AS:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case PS:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case DS:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case OS:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case IS:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case RS:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case NS:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Qy:case LS:case kS:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Y2:case FS:return Math.ceil(i/4)*Math.ceil(e/4)*8;case US:case BS:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function HU(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function Die(i){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(i.deleteBuffer(l.buffer),e.delete(a))},update:function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);return void((!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const c=e.get(a);if(void 0===c)e.set(a,function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=i.createBuffer();let h;if(i.bindBuffer(l,f),i.bufferData(l,c,u),a.onUploadCallback(),c instanceof Float32Array)h=i.FLOAT;else if(c instanceof Uint16Array)h=a.isFloat16BufferAttribute?i.HALF_FLOAT:i.UNSIGNED_SHORT;else if(c instanceof Int16Array)h=i.SHORT;else if(c instanceof Uint32Array)h=i.UNSIGNED_INT;else if(c instanceof Int32Array)h=i.INT;else if(c instanceof Int8Array)h=i.BYTE;else if(c instanceof Uint8Array)h=i.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);h=i.UNSIGNED_BYTE}return{buffer:f,type:h,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function n(a,l,c){const u=l.array,d=l.updateRanges;if(i.bindBuffer(c,a),0===d.length)i.bufferSubData(c,0,u);else{d.sort((h,p)=>h.start-p.start);let f=0;for(let h=1;h<d.length;h++){const p=d[f],g=d[h];g.start<=p.start+p.count+1?p.count=Math.max(p.count,g.start+g.count-p.start):(++f,d[f]=g)}d.length=f+1;for(let h=0,p=d.length;h<p;h++){const g=d[h];i.bufferSubData(c,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}l.clearUpdateRanges()}l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"171"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="171");const zt={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},je={common:{diffuse:{value:new Fe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nt},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nt}},envmap:{envMap:{value:null},envMapRotation:{value:new Nt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nt},normalScale:{value:new he(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0},uvTransform:{value:new Nt}},sprite:{diffuse:{value:new Fe(16777215)},opacity:{value:1},center:{value:new he(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nt},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0}}},ta={basic:{uniforms:Tr([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.fog]),vertexShader:zt.meshbasic_vert,fragmentShader:zt.meshbasic_frag},lambert:{uniforms:Tr([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.fog,je.lights,{emissive:{value:new Fe(0)}}]),vertexShader:zt.meshlambert_vert,fragmentShader:zt.meshlambert_frag},phong:{uniforms:Tr([je.common,je.specularmap,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.fog,je.lights,{emissive:{value:new Fe(0)},specular:{value:new Fe(1118481)},shininess:{value:30}}]),vertexShader:zt.meshphong_vert,fragmentShader:zt.meshphong_frag},standard:{uniforms:Tr([je.common,je.envmap,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.roughnessmap,je.metalnessmap,je.fog,je.lights,{emissive:{value:new Fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zt.meshphysical_vert,fragmentShader:zt.meshphysical_frag},toon:{uniforms:Tr([je.common,je.aomap,je.lightmap,je.emissivemap,je.bumpmap,je.normalmap,je.displacementmap,je.gradientmap,je.fog,je.lights,{emissive:{value:new Fe(0)}}]),vertexShader:zt.meshtoon_vert,fragmentShader:zt.meshtoon_frag},matcap:{uniforms:Tr([je.common,je.bumpmap,je.normalmap,je.displacementmap,je.fog,{matcap:{value:null}}]),vertexShader:zt.meshmatcap_vert,fragmentShader:zt.meshmatcap_frag},points:{uniforms:Tr([je.points,je.fog]),vertexShader:zt.points_vert,fragmentShader:zt.points_frag},dashed:{uniforms:Tr([je.common,je.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zt.linedashed_vert,fragmentShader:zt.linedashed_frag},depth:{uniforms:Tr([je.common,je.displacementmap]),vertexShader:zt.depth_vert,fragmentShader:zt.depth_frag},normal:{uniforms:Tr([je.common,je.bumpmap,je.normalmap,je.displacementmap,{opacity:{value:1}}]),vertexShader:zt.meshnormal_vert,fragmentShader:zt.meshnormal_frag},sprite:{uniforms:Tr([je.sprite,je.fog]),vertexShader:zt.sprite_vert,fragmentShader:zt.sprite_frag},background:{uniforms:{uvTransform:{value:new Nt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zt.background_vert,fragmentShader:zt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Nt}},vertexShader:zt.backgroundCube_vert,fragmentShader:zt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zt.cube_vert,fragmentShader:zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zt.equirect_vert,fragmentShader:zt.equirect_frag},distanceRGBA:{uniforms:Tr([je.common,je.displacementmap,{referencePosition:{value:new I},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zt.distanceRGBA_vert,fragmentShader:zt.distanceRGBA_frag},shadow:{uniforms:Tr([je.lights,je.fog,{color:{value:new Fe(0)},opacity:{value:1}}]),vertexShader:zt.shadow_vert,fragmentShader:zt.shadow_frag}};ta.physical={uniforms:Tr([ta.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nt},clearcoatNormalScale:{value:new he(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nt},sheen:{value:0},sheenColor:{value:new Fe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nt},transmissionSamplerSize:{value:new he},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nt},attenuationDistance:{value:0},attenuationColor:{value:new Fe(0)},specularColor:{value:new Fe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nt},anisotropyVector:{value:new he},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nt}}]),vertexShader:zt.meshphysical_vert,fragmentShader:zt.meshphysical_frag};const l0={r:0,b:0,g:0},tu=new Ba,Dse=new ft;function Ose(i,e,t,n,r,s,o){const a=new Fe(0);let c,u,l=!0===s?0:1,d=null,f=0,h=null;function p(y){let v=!0===y.isScene?y.background:null;return v&&v.isTexture&&(v=(y.backgroundBlurriness>0?t:e).get(v)),v}function _(y,v){y.getRGB(l0,x3(i)),n.buffers.color.setClear(l0.r,l0.g,l0.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(y,v=1){a.set(y),l=v,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,_(a,l)},render:function g(y){let v=!1;const C=p(y);null===C?_(a,l):C&&C.isColor&&(_(C,1),v=!0);const w=i.xr.getEnvironmentBlendMode();"additive"===w?n.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===w&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||v)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))},addToRenderList:function m(y,v){const C=p(v);C&&(C.isCubeTexture||C.mapping===Vp)?(void 0===u&&(u=new fi(new oh(1,1,1),new Wa({name:"BackgroundCubeMaterial",uniforms:ah(ta.backgroundCube.uniforms),vertexShader:ta.backgroundCube.vertexShader,fragmentShader:ta.backgroundCube.fragmentShader,side:$r,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,S,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),tu.copy(v.backgroundRotation),tu.x*=-1,tu.y*=-1,tu.z*=-1,C.isCubeTexture&&!1===C.isRenderTargetTexture&&(tu.y*=-1,tu.z*=-1),u.material.uniforms.envMap.value=C,u.material.uniforms.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Dse.makeRotationFromEuler(tu)),u.material.toneMapped=tn.getTransfer(C.colorSpace)!==_n,(d!==C||f!==C.version||h!==i.toneMapping)&&(u.material.needsUpdate=!0,d=C,f=C.version,h=i.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):C&&C.isTexture&&(void 0===c&&(c=new fi(new fg(2,2),new Wa({name:"BackgroundMaterial",uniforms:ah(ta.background.uniforms),vertexShader:ta.background.vertexShader,fragmentShader:ta.background.fragmentShader,side:Ra,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=C,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=tn.getTransfer(C.colorSpace)!==_n,!0===C.matrixAutoUpdate&&C.updateMatrix(),c.material.uniforms.uvTransform.value.copy(C.matrix),(d!==C||f!==C.version||h!==i.toneMapping)&&(c.material.needsUpdate=!0,d=C,f=C.version,h=i.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))},dispose:function M(){void 0!==u&&(u.geometry.dispose(),u.material.dispose()),void 0!==c&&(c.geometry.dispose(),c.material.dispose())}}}function Ise(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=f(null);let s=r,o=!1;function c(b){return i.bindVertexArray(b)}function u(b){return i.deleteVertexArray(b)}function f(b){const P=[],k=[],L=[];for(let W=0;W<t;W++)P[W]=0,k[W]=0,L[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:k,attributeDivisors:L,object:b,attributes:{},index:null}}function g(){const b=s.newAttributes;for(let P=0,k=b.length;P<k;P++)b[P]=0}function m(b){_(b,0)}function _(b,P){const L=s.enabledAttributes,W=s.attributeDivisors;s.newAttributes[b]=1,0===L[b]&&(i.enableVertexAttribArray(b),L[b]=1),W[b]!==P&&(i.vertexAttribDivisor(b,P),W[b]=P)}function M(){const b=s.newAttributes,P=s.enabledAttributes;for(let k=0,L=P.length;k<L;k++)P[k]!==b[k]&&(i.disableVertexAttribArray(k),P[k]=0)}function y(b,P,k,L,W,q,N){!0===N?i.vertexAttribIPointer(b,P,k,W,q):i.vertexAttribPointer(b,P,k,L,W,q)}function E(){x(),o=!0,s!==r&&(s=r,c(s.object))}function x(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(b,P,k,L,W){let q=!1;const N=function d(b,P,k){const L=!0===k.wireframe;let W=n[b.id];void 0===W&&(W={},n[b.id]=W);let q=W[P.id];void 0===q&&(q={},W[P.id]=q);let N=q[L];return void 0===N&&(N=f(function l(){return i.createVertexArray()}()),q[L]=N),N}(L,k,P);s!==N&&(s=N,c(s.object)),q=function h(b,P,k,L){const W=s.attributes,q=P.attributes;let N=0;const V=k.getAttributes();for(const B in V)if(V[B].location>=0){const R=W[B];let ae=q[B];if(void 0===ae&&("instanceMatrix"===B&&b.instanceMatrix&&(ae=b.instanceMatrix),"instanceColor"===B&&b.instanceColor&&(ae=b.instanceColor)),void 0===R||R.attribute!==ae||ae&&R.data!==ae.data)return!0;N++}return s.attributesNum!==N||s.index!==L}(b,L,k,W),q&&function p(b,P,k,L){const W={},q=P.attributes;let N=0;const V=k.getAttributes();for(const B in V)if(V[B].location>=0){let R=q[B];void 0===R&&("instanceMatrix"===B&&b.instanceMatrix&&(R=b.instanceMatrix),"instanceColor"===B&&b.instanceColor&&(R=b.instanceColor));const ae={};ae.attribute=R,R&&R.data&&(ae.data=R.data),W[B]=ae,N++}s.attributes=W,s.attributesNum=N,s.index=L}(b,L,k,W),null!==W&&e.update(W,i.ELEMENT_ARRAY_BUFFER),(q||o)&&(o=!1,function v(b,P,k,L){g();const W=L.attributes,q=k.getAttributes(),N=P.defaultAttributeValues;for(const V in q){const B=q[V];if(B.location>=0){let ee=W[V];if(void 0===ee&&("instanceMatrix"===V&&b.instanceMatrix&&(ee=b.instanceMatrix),"instanceColor"===V&&b.instanceColor&&(ee=b.instanceColor)),void 0!==ee){const R=ee.normalized,ae=ee.itemSize,Ee=e.get(ee);if(void 0===Ee)continue;const He=Ee.buffer,$=Ee.type,ge=Ee.bytesPerElement,xe=$===i.INT||$===i.UNSIGNED_INT||ee.gpuType===lS;if(ee.isInterleavedBufferAttribute){const se=ee.data,Se=se.stride,Ue=ee.offset;if(se.isInstancedInterleavedBuffer){for(let Ge=0;Ge<B.locationSize;Ge++)_(B.location+Ge,se.meshPerAttribute);!0!==b.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Ge=0;Ge<B.locationSize;Ge++)m(B.location+Ge);i.bindBuffer(i.ARRAY_BUFFER,He);for(let Ge=0;Ge<B.locationSize;Ge++)y(B.location+Ge,ae/B.locationSize,$,R,Se*ge,(Ue+ae/B.locationSize*Ge)*ge,xe)}else{if(ee.isInstancedBufferAttribute){for(let se=0;se<B.locationSize;se++)_(B.location+se,ee.meshPerAttribute);!0!==b.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let se=0;se<B.locationSize;se++)m(B.location+se);i.bindBuffer(i.ARRAY_BUFFER,He);for(let se=0;se<B.locationSize;se++)y(B.location+se,ae/B.locationSize,$,R,ae*ge,ae/B.locationSize*se*ge,xe)}}else if(void 0!==N){const R=N[V];if(void 0!==R)switch(R.length){case 2:i.vertexAttrib2fv(B.location,R);break;case 3:i.vertexAttrib3fv(B.location,R);break;case 4:i.vertexAttrib4fv(B.location,R);break;default:i.vertexAttrib1fv(B.location,R)}}}}M()}(b,P,k,L),null!==W&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))},reset:E,resetDefaultState:x,dispose:function C(){E();for(const b in n){const P=n[b];for(const k in P){const L=P[k];for(const W in L)u(L[W].object),delete L[W];delete P[k]}delete n[b]}},releaseStatesOfGeometry:function w(b){if(void 0===n[b.id])return;const P=n[b.id];for(const k in P){const L=P[k];for(const W in L)u(L[W].object),delete L[W];delete P[k]}delete n[b.id]},releaseStatesOfProgram:function S(b){for(const P in n){const k=n[P];if(void 0===k[b.id])continue;const L=k[b.id];for(const W in L)u(L[W].object),delete L[W];delete k[b.id]}},initAttributes:g,enableAttribute:m,disableUnusedAttributes:M}}function Rse(i,e,t){let n;function o(c,u,d){0!==d&&(i.drawArraysInstanced(n,c,u,d),t.update(u,n,d))}this.setMode=function r(c){n=c},this.render=function s(c,u){i.drawArrays(n,c,u),t.update(u,n,1)},this.renderInstances=o,this.renderMultiDraw=function a(c,u,d){if(0===d)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,u,0,d);let h=0;for(let p=0;p<d;p++)h+=u[p];t.update(h,n,1)},this.renderMultiDrawInstances=function l(c,u,d,f){if(0===d)return;const h=e.get("WEBGL_multi_draw");if(null===h)for(let p=0;p<c.length;p++)o(c[p],u[p],f[p]);else{h.multiDrawArraysInstancedWEBGL(n,c,0,u,0,f,0,d);let p=0;for(let g=0;g<d;g++)p+=u[g]*f[g];t.update(p,n,1)}}}function Nse(i,e,t,n){let r;function l(S){if("highp"===S){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return"mediump"===S&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==t.precision?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=!0===t.logarithmicDepthBuffer,f=!0===t.reverseDepthBuffer&&e.has("EXT_clip_control"),h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const S=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function o(S){return!(S!==Xr&&n.convert(S)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(S){const E=S===Wp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(S!==Na&&n.convert(S)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==ms&&!E)},precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:i.getParameter(i.MAX_TEXTURE_SIZE),maxCubemapSize:i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:i.getParameter(i.MAX_VERTEX_ATTRIBS),maxVertexUniforms:i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:i.getParameter(i.MAX_VARYING_VECTORS),maxFragmentUniforms:i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:p>0,maxSamples:i.getParameter(i.MAX_SAMPLES)}}function Lse(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Ul,a=new Nt,l={value:null,needsUpdate:!1};function u(d,f,h,p){const g=null!==d?d.length:0;let m=null;if(0!==g){if(m=l.value,!0!==p||null===m){const _=h+4*g,M=f.matrixWorldInverse;a.getNormalMatrix(M),(null===m||m.length<_)&&(m=new Float32Array(_));for(let y=0,v=h;y!==g;++y,v+=4)o.copy(d[y]).applyMatrix4(M,a),o.normal.toArray(m,v),m[v+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=0!==d.length||f||0!==n||r;return r=f,n=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,g=d.clipIntersection,m=d.clipShadows,_=i.get(d);if(!r||null===p||0===p.length||s&&!m)s?u(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const M=s?0:n,y=4*M;let v=_.clippingState||null;l.value=v,v=u(p,f,y,h);for(let C=0;C!==y;++C)v[C]=t[C];_.clippingState=v,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=M}}}function kse(i){let e=new WeakMap;function t(o,a){return a===$y?o.mapping=Al:a===Xy&&(o.mapping=Rc),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===$y||a===Xy){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new Nte(l.height);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}const GU=[.125,.215,.35,.446,.526,.582],aT=new Qv,WU=new Fe;let lT=null,cT=0,uT=0,dT=!1;const iu=(1+Math.sqrt(5))/2,wh=1/iu,jU=[new I(-iu,wh,0),new I(iu,wh,0),new I(-wh,0,iu),new I(wh,0,iu),new I(0,iu,-wh),new I(0,iu,wh),new I(-1,1,-1),new I(1,1,-1),new I(-1,1,1),new I(1,1,1)];class $U{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){lT=this._renderer.getRenderTarget(),cT=this._renderer.getActiveCubeFace(),uT=this._renderer.getActiveMipmapLevel(),dT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=YU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=qU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(lT,cT,uT),this._renderer.xr.enabled=dT,e.scissorTest=!1,c0(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Al||e.mapping===Rc?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),lT=this._renderer.getRenderTarget(),cT=this._renderer.getActiveCubeFace(),uT=this._renderer.getActiveMipmapLevel(),dT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ti,minFilter:ti,generateMipmaps:!1,type:Wp,format:Xr,colorSpace:Cr,depthBuffer:!1},r=XU(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=XU(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Fse(i){const e=[],t=[],n=[];let r=i;const s=i-4+1+GU.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-4?l=GU[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,g=3,m=2,_=1,M=new Float32Array(g*p*h),y=new Float32Array(m*p*h),v=new Float32Array(_*p*h);for(let w=0;w<h;w++){const S=w%3*2/3-1,E=w>2?0:-1;M.set([S,E,0,S+2/3,E,0,S+2/3,E+1,0,S,E,0,S+2/3,E+1,0,S,E+1,0],g*p*w),y.set(f,m*p*w),v.set([w,w,w,w,w,w],_*p*w)}const C=new Lt;C.setAttribute("position",new An(M,g)),C.setAttribute("uv",new An(y,m)),C.setAttribute("faceIndex",new An(v,_)),e.push(C),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(s)),this._blurMaterial=function Use(i,e,t){const n=new Float32Array(20),r=new I(0,1,0);return new Wa({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:El,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new fi(this._lodPlanes[0],e);this._renderer.compile(t,aT)}_sceneToCubeUV(e,t,n,r){const a=new wi(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(WU),u.toneMapping=Tl,u.autoClear=!1;const h=new qs({name:"PMREM.Background",side:$r,depthWrite:!1,depthTest:!1}),p=new fi(new oh,h);let g=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,g=!0):(h.color.copy(WU),g=!0);for(let _=0;_<6;_++){const M=_%3;0===M?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===M?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const y=this._cubeSize;c0(r,M*y,_>2?y:0,y,y),u.setRenderTarget(r),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Al||e.mapping===Rc;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=YU()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=qU());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new fi(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;c0(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,aT)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,o,jU[(r-s-1)%jU.length])}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new fi(this._lodPlanes[r],c),f=c.uniforms,h=this._sizeLods[n]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/39,g=s/p,m=isFinite(s)?1+Math.floor(3*g):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const _=[];let M=0;for(let S=0;S<20;++S){const E=S/g,x=Math.exp(-E*E/2);_.push(x),0===S?M+=x:S<m&&(M+=2*x)}for(let S=0;S<_.length;S++)_[S]=_[S]/M;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=_,f.latitudinal.value="latitudinal"===o,a&&(f.poleAxis.value=a);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-n;const v=this._sizeLods[r];c0(t,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),l.setRenderTarget(t),l.render(d,aT)}}function XU(i,e,t){const n=new Fc(i,e,t);return n.texture.mapping=Vp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function c0(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function qU(){return new Wa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:El,depthTest:!1,depthWrite:!1})}function YU(){return new Wa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:El,depthTest:!1,depthWrite:!1})}function Bse(i){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===$y||l===Xy,u=l===Al||l===Rc;if(c||u){let d=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==d?d.texture.pmremVersion:0))return null===t&&(t=new $U(i)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(void 0!==d)return d.texture;{const h=a.image;return c&&h&&h.height>0||u&&h&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(h)?(null===t&&(t=new $U(i)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Vse(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return null===r&&$d("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function zse(i,e,t,n){const r={},s=new WeakMap;function o(d){const f=d.target;null!==f.index&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",o),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),n.releaseStatesOfGeometry(f),!0===f.isInstancedBufferGeometry&&delete f._maxInstanceCount,t.memory.geometries--}function c(d){const f=[],h=d.index,p=d.attributes.position;let g=0;if(null!==h){const M=h.array;g=h.version;for(let y=0,v=M.length;y<v;y+=3){const C=M[y+0],w=M[y+1],S=M[y+2];f.push(C,w,w,S,S,C)}}else{if(void 0===p)return;g=p.version;for(let y=0,v=p.array.length/3-1;y<v;y+=3){const C=y+0,w=y+1,S=y+2;f.push(C,w,w,S,S,C)}}const m=new(n3(f)?y3:_3)(f,1);m.version=g;const _=s.get(d);_&&e.remove(_),s.set(d,m)}return{get:function a(d,f){return!0===r[f.id]||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f},update:function l(d){const f=d.attributes;for(const h in f)e.update(f[h],i.ARRAY_BUFFER)},getWireframeAttribute:function u(d){const f=s.get(d);if(f){const h=d.index;null!==h&&f.version<h.version&&c(d)}else c(d);return s.get(d)}}}function Hse(i,e,t){let n,s,o;function c(f,h,p){0!==p&&(i.drawElementsInstanced(n,h,s,f*o,p),t.update(h,n,p))}this.setMode=function r(f){n=f},this.setIndex=function a(f){s=f.type,o=f.bytesPerElement},this.render=function l(f,h){i.drawElements(n,h,s,f*o),t.update(h,n,1)},this.renderInstances=c,this.renderMultiDraw=function u(f,h,p){if(0===p)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,h,0,s,f,0,p);let m=0;for(let _=0;_<p;_++)m+=h[_];t.update(m,n,1)},this.renderMultiDrawInstances=function d(f,h,p,g){if(0===p)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let _=0;_<f.length;_++)c(f[_]/o,h[_],g[_]);else{m.multiDrawElementsInstancedWEBGL(n,h,0,s,f,0,g,0,p);let _=0;for(let M=0;M<p;M++)_+=h[M]*g[M];t.update(_,n,1)}}}function Gse(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Wse(i,e,t){const n=new WeakMap,r=new an;return{update:function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=void 0!==u?u.length:0;let f=n.get(a);if(void 0===f||f.count!==d){let x=function(){S.dispose(),n.delete(a),a.removeEventListener("dispose",x)};void 0!==f&&f.texture.dispose();const h=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,g=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let y=0;!0===h&&(y=1),!0===p&&(y=2),!0===g&&(y=3);let v=a.attributes.position.count*y,C=1;v>e.maxTextureSize&&(C=Math.ceil(v/e.maxTextureSize),v=e.maxTextureSize);const w=new Float32Array(v*C*4*d),S=new $S(w,v,C,d);S.type=ms,S.needsUpdate=!0;const E=4*y;for(let b=0;b<d;b++){const P=m[b],k=_[b],L=M[b],W=v*C*4*b;for(let q=0;q<P.count;q++){const N=q*E;!0===h&&(r.fromBufferAttribute(P,q),w[W+N+0]=r.x,w[W+N+1]=r.y,w[W+N+2]=r.z,w[W+N+3]=0),!0===p&&(r.fromBufferAttribute(k,q),w[W+N+4]=r.x,w[W+N+5]=r.y,w[W+N+6]=r.z,w[W+N+7]=0),!0===g&&(r.fromBufferAttribute(L,q),w[W+N+8]=r.x,w[W+N+9]=r.y,w[W+N+10]=r.z,w[W+N+11]=4===L.itemSize?r.w:1)}}f={count:d,texture:S,size:new he(v,C)},n.set(a,f),a.addEventListener("dispose",x)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let h=0;for(let g=0;g<c.length;g++)h+=c[g];const p=a.morphTargetsRelative?1:1-h;l.getUniforms().setValue(i,"morphTargetBaseInfluence",p),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",f.size)}}}function jse(i,e,t,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,d=e.get(l,l.geometry);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return d},dispose:function o(){r=new WeakMap}}}const KU=new Xs,ZU=new q3(1,1),JU=new $S,QU=new o3,eB=new Mv,tB=[],nB=[],iB=new Float32Array(16),rB=new Float32Array(9),sB=new Float32Array(4);function Sh(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=tB[r];if(void 0===s&&(s=new Float32Array(r),tB[r]=s),0!==e){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Si(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ei(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function u0(i,e){let t=nB[e];void 0===t&&(t=new Int32Array(e),nB[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function $se(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Xse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;i.uniform2fv(this.addr,e),Ei(t,e)}}function qse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Si(t,e))return;i.uniform3fv(this.addr,e),Ei(t,e)}}function Yse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;i.uniform4fv(this.addr,e),Ei(t,e)}}function Kse(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Si(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ei(t,e)}else{if(Si(t,n))return;sB.set(n),i.uniformMatrix2fv(this.addr,!1,sB),Ei(t,n)}}function Zse(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Si(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ei(t,e)}else{if(Si(t,n))return;rB.set(n),i.uniformMatrix3fv(this.addr,!1,rB),Ei(t,n)}}function Jse(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Si(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ei(t,e)}else{if(Si(t,n))return;iB.set(n),i.uniformMatrix4fv(this.addr,!1,iB),Ei(t,n)}}function Qse(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function eoe(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;i.uniform2iv(this.addr,e),Ei(t,e)}}function toe(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;i.uniform3iv(this.addr,e),Ei(t,e)}}function noe(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;i.uniform4iv(this.addr,e),Ei(t,e)}}function ioe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function roe(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;i.uniform2uiv(this.addr,e),Ei(t,e)}}function soe(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;i.uniform3uiv(this.addr,e),Ei(t,e)}}function ooe(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;i.uniform4uiv(this.addr,e),Ei(t,e)}}function aoe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();let s;n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),this.type===i.SAMPLER_2D_SHADOW?(ZU.compareFunction=Q2,s=ZU):s=KU,t.setTexture2D(e||s,r)}function loe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||QU,r)}function coe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||eB,r)}function uoe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||JU,r)}function hoe(i,e){i.uniform1fv(this.addr,e)}function foe(i,e){const t=Sh(e,this.size,2);i.uniform2fv(this.addr,t)}function poe(i,e){const t=Sh(e,this.size,3);i.uniform3fv(this.addr,t)}function goe(i,e){const t=Sh(e,this.size,4);i.uniform4fv(this.addr,t)}function moe(i,e){const t=Sh(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function _oe(i,e){const t=Sh(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function yoe(i,e){const t=Sh(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function voe(i,e){i.uniform1iv(this.addr,e)}function Moe(i,e){i.uniform2iv(this.addr,e)}function boe(i,e){i.uniform3iv(this.addr,e)}function xoe(i,e){i.uniform4iv(this.addr,e)}function Coe(i,e){i.uniform1uiv(this.addr,e)}function woe(i,e){i.uniform2uiv(this.addr,e)}function Soe(i,e){i.uniform3uiv(this.addr,e)}function Eoe(i,e){i.uniform4uiv(this.addr,e)}function Toe(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Si(n,s)||(i.uniform1iv(this.addr,s),Ei(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||KU,s[o])}function Aoe(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Si(n,s)||(i.uniform1iv(this.addr,s),Ei(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||QU,s[o])}function Poe(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Si(n,s)||(i.uniform1iv(this.addr,s),Ei(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||eB,s[o])}function Doe(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Si(n,s)||(i.uniform1iv(this.addr,s),Ei(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||JU,s[o])}class Ioe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function doe(i){switch(i){case 5126:return $se;case 35664:return Xse;case 35665:return qse;case 35666:return Yse;case 35674:return Kse;case 35675:return Zse;case 35676:return Jse;case 5124:case 35670:return Qse;case 35667:case 35671:return eoe;case 35668:case 35672:return toe;case 35669:case 35673:return noe;case 5125:return ioe;case 36294:return roe;case 36295:return soe;case 36296:return ooe;case 35678:case 36198:case 36298:case 36306:case 35682:return aoe;case 35679:case 36299:case 36307:return loe;case 35680:case 36300:case 36308:case 36293:return coe;case 36289:case 36303:case 36311:case 36292:return uoe}}(t.type)}}class Roe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function Ooe(i){switch(i){case 5126:return hoe;case 35664:return foe;case 35665:return poe;case 35666:return goe;case 35674:return moe;case 35675:return _oe;case 35676:return yoe;case 5124:case 35670:return voe;case 35667:case 35671:return Moe;case 35668:case 35672:return boe;case 35669:case 35673:return xoe;case 5125:return Coe;case 36294:return woe;case 36295:return Soe;case 36296:return Eoe;case 35678:case 36198:case 36298:case 36306:case 35682:return Toe;case 35679:case 36299:case 36307:return Aoe;case 35680:case 36300:case 36308:case 36293:return Poe;case 36289:case 36303:case 36311:case 36292:return Doe}}(t.type)}}class Noe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const fT=/(\w+)(\])?(\[|\.)?/g;function oB(i,e){i.seq.push(e),i.map[e.id]=e}function Loe(i,e,t){const n=i.name,r=n.length;for(fT.lastIndex=0;;){const s=fT.exec(n);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&fT.lastIndex+2===r){oB(t,void 0===c?new Ioe(a,i,e):new Roe(a,i,e));break}{let d=t.map[a];void 0===d&&(d=new Noe(a),oB(t,d)),t=d}}}class d0{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r);Loe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function aB(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const koe=37297;let Foe=0;const lB=new Nt;function cB(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Uoe(i,e){const t=i.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join("\n")}(i.getShaderSource(e),o)}return r}function Voe(i,e){const t=function Boe(i){tn._getMatrix(lB,tn.workingColorSpace,i);const e=`mat3( ${lB.elements.map(t=>t.toFixed(4))} )`;switch(tn.getTransfer(i)){case tv:return[e,"LinearTransferOETF"];case _n:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${i}( vec4 value ) {`,`\treturn ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join("\n")}function zoe(i,e){let t;switch(e){case wee:t="Linear";break;case See:t="Reinhard";break;case Eee:t="Cineon";break;case Tee:t="ACESFilmic";break;case Pee:t="AgX";break;case Dee:t="Neutral";break;case Aee:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const h0=new I;function Mg(i){return""!==i}function uB(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dB(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $oe=/^[ \t]*#include +<([\w\d./]+)>/gm;function pT(i){return i.replace($oe,qoe)}const Xoe=new Map;function qoe(i,e){let t=zt[e];if(void 0===t){const n=Xoe.get(e);if(void 0===n)throw new Error("Can not resolve #include <"+e+">");t=zt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n)}return pT(t)}const Yoe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hB(i){return i.replace(Yoe,Koe)}function Koe(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function fB(i){let e=`precision ${i.precision} float;\n\tprecision ${i.precision} int;\n\tprecision ${i.precision} sampler2D;\n\tprecision ${i.precision} samplerCube;\n\tprecision ${i.precision} sampler3D;\n\tprecision ${i.precision} sampler2DArray;\n\tprecision ${i.precision} sampler2DShadow;\n\tprecision ${i.precision} samplerCubeShadow;\n\tprecision ${i.precision} sampler2DArrayShadow;\n\tprecision ${i.precision} isampler2D;\n\tprecision ${i.precision} isampler3D;\n\tprecision ${i.precision} isamplerCube;\n\tprecision ${i.precision} isampler2DArray;\n\tprecision ${i.precision} usampler2D;\n\tprecision ${i.precision} usampler3D;\n\tprecision ${i.precision} usamplerCube;\n\tprecision ${i.precision} usampler2DArray;\n\t`;return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function nae(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function Zoe(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===k2?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===iee?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ia&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Joe(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Al:case Rc:e="ENVMAP_TYPE_CUBE";break;case Vp:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function Qoe(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===Rc&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function eae(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case jy:e="ENVMAP_BLENDING_MULTIPLY";break;case xee:e="ENVMAP_BLENDING_MIX";break;case Cee:e="ENVMAP_BLENDING_ADD"}return e}(t),f=function tae(i){const e=i.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),h=function Goe(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Mg).join("\n")}(t),p=function Woe(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),g=r.createProgram();let m,_,M=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Mg).join("\n"),m.length>0&&(m+="\n"),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Mg).join("\n"),_.length>0&&(_+="\n")):(m=[fB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Mg).join("\n"),_=[fB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Tl?"#define TONE_MAPPING":"",t.toneMapping!==Tl?zt.tonemapping_pars_fragment:"",t.toneMapping!==Tl?zoe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",zt.colorspace_pars_fragment,Voe("linearToOutputTexel",t.outputColorSpace),(tn.getLuminanceCoefficients(h0),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${h0.x.toFixed(4)}, ${h0.y.toFixed(4)}, ${h0.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Mg).join("\n")),o=pT(o),o=uB(o,t),o=dB(o,t),a=pT(a),a=uB(a,t),a=dB(a,t),o=hB(o),a=hB(a),!0!==t.isRawShaderMaterial&&(M="#version 300 es\n",m=[h,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["#define varying in",t.glslVersion===e3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===e3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const v=M+_+a,C=aB(r,r.VERTEX_SHADER,M+m+o),w=aB(r,r.FRAGMENT_SHADER,v);function S(P){if(i.debug.checkShaderErrors){const k=r.getProgramInfoLog(g).trim(),L=r.getShaderInfoLog(C).trim(),W=r.getShaderInfoLog(w).trim();let q=!0,N=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(q=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,g,C,w);else{const V=cB(r,C,"vertex"),B=cB(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+P.name+"\nMaterial Type: "+P.type+"\n\nProgram Info Log: "+k+"\n"+V+"\n"+B)}else""!==k?console.warn("THREE.WebGLProgram: Program Info Log:",k):(""===L||""===W)&&(N=!1);N&&(P.diagnostics={runnable:q,programLog:k,vertexShader:{log:L,prefix:m},fragmentShader:{log:W,prefix:_}})}r.deleteShader(C),r.deleteShader(w),E=new d0(r,g),x=function joe(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}(r,g)}let E,x;r.attachShader(g,C),r.attachShader(g,w),void 0!==t.index0AttributeName?r.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),this.getUniforms=function(){return void 0===E&&S(this),E},this.getAttributes=function(){return void 0===x&&S(this),x};let b=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===b&&(b=r.getProgramParameter(g,koe)),b},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Foe++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=C,this.fragmentShader=w,this}let iae=0;class rae{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new sae(e),t.set(e,n)),n}}class sae{constructor(e){this.id=iae++,this.code=e,this.usedTimes=0}}function oae(i,e,t,n,r,s,o){const a=new QS,l=new rae,c=new Set,u=[],d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(x){return c.add(x),0===x?"uv":`uv${x}`}return{getParameters:function m(x,b,P,k,L){const W=k.fog,q=L.geometry,V=(x.isMeshStandardMaterial?t:e).get(x.envMap||(x.isMeshStandardMaterial?k.environment:null)),B=V&&V.mapping===Vp?V.image.height:null,ee=p[x.type];null!==x.precision&&(h=r.getMaxPrecision(x.precision),h!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",h,"instead."));const R=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,ae=void 0!==R?R.length:0;let He,$,ge,xe,Ee=0;if(void 0!==q.morphAttributes.position&&(Ee=1),void 0!==q.morphAttributes.normal&&(Ee=2),void 0!==q.morphAttributes.color&&(Ee=3),ee){const H=ta[ee];He=H.vertexShader,$=H.fragmentShader}else He=x.vertexShader,$=x.fragmentShader,l.update(x),ge=l.getVertexShaderID(x),xe=l.getFragmentShaderID(x);const se=i.getRenderTarget(),Se=i.state.buffers.depth.getReversed(),Ue=!0===L.isInstancedMesh,Ge=!0===L.isBatchedMesh,Je=!!x.map,le=!!V,O=!!x.aoMap,we=!!x.lightMap,ve=!!x.bumpMap,z=!!x.normalMap,Me=!!x.displacementMap,nt=!!x.emissiveMap,Be=!!x.metalnessMap,D=!!x.roughnessMap,T=x.anisotropy>0,X=x.clearcoat>0,ue=x.iridescence>0,ie=x.sheen>0,Pe=x.transmission>0,De=T&&!!x.anisotropyMap,Ve=X&&!!x.clearcoatMap,bt=X&&!!x.clearcoatNormalMap,Ae=X&&!!x.clearcoatRoughnessMap,Oe=ue&&!!x.iridescenceMap,at=ue&&!!x.iridescenceThicknessMap,lt=ie&&!!x.sheenColorMap,$e=ie&&!!x.sheenRoughnessMap,St=!!x.specularMap,mt=!!x.specularColorMap,Ht=!!x.specularIntensityMap,F=Pe&&!!x.transmissionMap,Ie=Pe&&!!x.thicknessMap,de=!!x.alphaMap,Ce=!!x.extensions;let U=Tl;x.toneMapped&&(null===se||!0===se.isXRRenderTarget)&&(U=i.toneMapping);const fe={shaderID:ee,shaderType:x.type,shaderName:x.name,vertexShader:He,fragmentShader:$,defines:x.defines,customVertexShaderID:ge,customFragmentShaderID:xe,isRawShaderMaterial:!0===x.isRawShaderMaterial,glslVersion:x.glslVersion,precision:h,batching:Ge,batchingColor:Ge&&null!==L._colorsTexture,instancing:Ue,instancingColor:Ue&&null!==L.instanceColor,instancingMorph:Ue&&null!==L.morphTexture,supportsVertexTextures:f,outputColorSpace:null===se?i.outputColorSpace:!0===se.isXRRenderTarget?se.texture.colorSpace:Cr,alphaToCoverage:!!x.alphaToCoverage,map:Je,matcap:!!x.matcap,envMap:le,envMapMode:le&&V.mapping,envMapCubeUVHeight:B,aoMap:O,lightMap:we,bumpMap:ve,normalMap:z,displacementMap:f&&Me,emissiveMap:nt,normalMapObjectSpace:z&&x.normalMapType===Uee,normalMapTangentSpace:z&&x.normalMapType===Lc,metalnessMap:Be,roughnessMap:D,anisotropy:T,anisotropyMap:De,clearcoat:X,clearcoatMap:Ve,clearcoatNormalMap:bt,clearcoatRoughnessMap:Ae,dispersion:x.dispersion>0,iridescence:ue,iridescenceMap:Oe,iridescenceThicknessMap:at,sheen:ie,sheenColorMap:lt,sheenRoughnessMap:$e,specularMap:St,specularColorMap:mt,specularIntensityMap:Ht,transmission:Pe,transmissionMap:F,thicknessMap:Ie,gradientMap:!!x.gradientMap,opaque:!1===x.transparent&&x.blending===Ld&&!1===x.alphaToCoverage,alphaMap:de,alphaTest:x.alphaTest>0,alphaHash:!!x.alphaHash,combine:x.combine,mapUv:Je&&g(x.map.channel),aoMapUv:O&&g(x.aoMap.channel),lightMapUv:we&&g(x.lightMap.channel),bumpMapUv:ve&&g(x.bumpMap.channel),normalMapUv:z&&g(x.normalMap.channel),displacementMapUv:Me&&g(x.displacementMap.channel),emissiveMapUv:nt&&g(x.emissiveMap.channel),metalnessMapUv:Be&&g(x.metalnessMap.channel),roughnessMapUv:D&&g(x.roughnessMap.channel),anisotropyMapUv:De&&g(x.anisotropyMap.channel),clearcoatMapUv:Ve&&g(x.clearcoatMap.channel),clearcoatNormalMapUv:bt&&g(x.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ae&&g(x.clearcoatRoughnessMap.channel),iridescenceMapUv:Oe&&g(x.iridescenceMap.channel),iridescenceThicknessMapUv:at&&g(x.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&g(x.sheenColorMap.channel),sheenRoughnessMapUv:$e&&g(x.sheenRoughnessMap.channel),specularMapUv:St&&g(x.specularMap.channel),specularColorMapUv:mt&&g(x.specularColorMap.channel),specularIntensityMapUv:Ht&&g(x.specularIntensityMap.channel),transmissionMapUv:F&&g(x.transmissionMap.channel),thicknessMapUv:Ie&&g(x.thicknessMap.channel),alphaMapUv:de&&g(x.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(z||T),vertexColors:x.vertexColors,vertexAlphas:!0===x.vertexColors&&!!q.attributes.color&&4===q.attributes.color.itemSize,pointsUvs:!0===L.isPoints&&!!q.attributes.uv&&(Je||de),fog:!!W,useFog:!0===x.fog,fogExp2:!!W&&W.isFogExp2,flatShading:!0===x.flatShading,sizeAttenuation:!0===x.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:Se,skinning:!0===L.isSkinnedMesh,morphTargets:void 0!==q.morphAttributes.position,morphNormals:void 0!==q.morphAttributes.normal,morphColors:void 0!==q.morphAttributes.color,morphTargetsCount:ae,morphTextureStride:Ee,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:x.dithering,shadowMapEnabled:i.shadowMap.enabled&&P.length>0,shadowMapType:i.shadowMap.type,toneMapping:U,decodeVideoTexture:Je&&!0===x.map.isVideoTexture&&tn.getTransfer(x.map.colorSpace)===_n,decodeVideoTextureEmissive:nt&&!0===x.emissiveMap.isVideoTexture&&tn.getTransfer(x.emissiveMap.colorSpace)===_n,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===Ko,flipSided:x.side===$r,useDepthPacking:x.depthPacking>=0,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionClipCullDistance:Ce&&!0===x.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ce&&!0===x.extensions.multiDraw||Ge)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:x.customProgramCacheKey()};return fe.vertexUv1s=c.has(1),fe.vertexUv2s=c.has(2),fe.vertexUv3s=c.has(3),c.clear(),fe},getProgramCacheKey:function _(x){const b=[];if(x.shaderID?b.push(x.shaderID):(b.push(x.customVertexShaderID),b.push(x.customFragmentShaderID)),void 0!==x.defines)for(const P in x.defines)b.push(P),b.push(x.defines[P]);return!1===x.isRawShaderMaterial&&(function M(x,b){x.push(b.precision),x.push(b.outputColorSpace),x.push(b.envMapMode),x.push(b.envMapCubeUVHeight),x.push(b.mapUv),x.push(b.alphaMapUv),x.push(b.lightMapUv),x.push(b.aoMapUv),x.push(b.bumpMapUv),x.push(b.normalMapUv),x.push(b.displacementMapUv),x.push(b.emissiveMapUv),x.push(b.metalnessMapUv),x.push(b.roughnessMapUv),x.push(b.anisotropyMapUv),x.push(b.clearcoatMapUv),x.push(b.clearcoatNormalMapUv),x.push(b.clearcoatRoughnessMapUv),x.push(b.iridescenceMapUv),x.push(b.iridescenceThicknessMapUv),x.push(b.sheenColorMapUv),x.push(b.sheenRoughnessMapUv),x.push(b.specularMapUv),x.push(b.specularColorMapUv),x.push(b.specularIntensityMapUv),x.push(b.transmissionMapUv),x.push(b.thicknessMapUv),x.push(b.combine),x.push(b.fogExp2),x.push(b.sizeAttenuation),x.push(b.morphTargetsCount),x.push(b.morphAttributeCount),x.push(b.numDirLights),x.push(b.numPointLights),x.push(b.numSpotLights),x.push(b.numSpotLightMaps),x.push(b.numHemiLights),x.push(b.numRectAreaLights),x.push(b.numDirLightShadows),x.push(b.numPointLightShadows),x.push(b.numSpotLightShadows),x.push(b.numSpotLightShadowsWithMaps),x.push(b.numLightProbes),x.push(b.shadowMapType),x.push(b.toneMapping),x.push(b.numClippingPlanes),x.push(b.numClipIntersection),x.push(b.depthPacking)}(b,x),function y(x,b){a.disableAll(),b.supportsVertexTextures&&a.enable(0),b.instancing&&a.enable(1),b.instancingColor&&a.enable(2),b.instancingMorph&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUv1s&&a.enable(13),b.vertexUv2s&&a.enable(14),b.vertexUv3s&&a.enable(15),b.vertexTangents&&a.enable(16),b.anisotropy&&a.enable(17),b.alphaHash&&a.enable(18),b.batching&&a.enable(19),b.dispersion&&a.enable(20),b.batchingColor&&a.enable(21),x.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.reverseDepthBuffer&&a.enable(4),b.skinning&&a.enable(5),b.morphTargets&&a.enable(6),b.morphNormals&&a.enable(7),b.morphColors&&a.enable(8),b.premultipliedAlpha&&a.enable(9),b.shadowMapEnabled&&a.enable(10),b.doubleSided&&a.enable(11),b.flipSided&&a.enable(12),b.useDepthPacking&&a.enable(13),b.dithering&&a.enable(14),b.transmission&&a.enable(15),b.sheen&&a.enable(16),b.opaque&&a.enable(17),b.pointsUvs&&a.enable(18),b.decodeVideoTexture&&a.enable(19),b.decodeVideoTextureEmissive&&a.enable(20),b.alphaToCoverage&&a.enable(21),x.push(a.mask)}(b,x),b.push(i.outputColorSpace)),b.push(x.customProgramCacheKey),b.join()},getUniforms:function v(x){const b=p[x.type];let P;return P=b?Dte.clone(ta[b].uniforms):x.uniforms,P},acquireProgram:function C(x,b){let P;for(let k=0,L=u.length;k<L;k++){const W=u[k];if(W.cacheKey===b){P=W,++P.usedTimes;break}}return void 0===P&&(P=new nae(i,b,x,s),u.push(P)),P},releaseProgram:function w(x){if(0==--x.usedTimes){const b=u.indexOf(x);u[b]=u[u.length-1],u.pop(),x.destroy()}},releaseShaderCache:function S(x){l.remove(x)},programs:u,dispose:function E(){l.dispose()}}}function aae(){let i=new WeakMap;return{has:function e(o){return i.has(o)},get:function t(o){let a=i.get(o);return void 0===a&&(a={},i.set(o,a)),a},remove:function n(o){i.delete(o)},update:function r(o,a,l){i.get(o)[a]=l},dispose:function s(){i=new WeakMap}}}function lae(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function pB(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function gB(){const i=[];let e=0;const t=[],n=[],r=[];function o(d,f,h,p,g,m){let _=i[e];return void 0===_?(_={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:g,group:m},i[e]=_):(_.id=d.id,_.object=d,_.geometry=f,_.material=h,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=g,_.group=m),e++,_}return{opaque:t,transmissive:n,transparent:r,init:function s(){e=0,t.length=0,n.length=0,r.length=0},push:function a(d,f,h,p,g,m){const _=o(d,f,h,p,g,m);h.transmission>0?n.push(_):!0===h.transparent?r.push(_):t.push(_)},unshift:function l(d,f,h,p,g,m){const _=o(d,f,h,p,g,m);h.transmission>0?n.unshift(_):!0===h.transparent?r.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,f=i.length;d<f;d++){const h=i[d];if(null===h.id)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}},sort:function c(d,f){t.length>1&&t.sort(d||lae),n.length>1&&n.sort(f||pB),r.length>1&&r.sort(f||pB)}}}function cae(){let i=new WeakMap;return{get:function e(n,r){const s=i.get(n);let o;return void 0===s?(o=new gB,i.set(n,[o])):r>=s.length?(o=new gB,s.push(o)):o=s[r],o},dispose:function t(){i=new WeakMap}}}function uae(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new I,color:new Fe};break;case"SpotLight":t={position:new I,direction:new I,color:new Fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new I,color:new Fe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new I,skyColor:new Fe,groundColor:new Fe};break;case"RectAreaLight":t={color:new Fe,position:new I,halfWidth:new I,halfHeight:new I}}return i[e.id]=t,t}}}let hae=0;function fae(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function pae(i){const e=new uae,t=function dae(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new I);const r=new I,s=new ft,o=new ft;return{setup:function a(c){let u=0,d=0,f=0;for(let x=0;x<9;x++)n.probe[x].set(0,0,0);let h=0,p=0,g=0,m=0,_=0,M=0,y=0,v=0,C=0,w=0,S=0;c.sort(fae);for(let x=0,b=c.length;x<b;x++){const P=c[x],k=P.color,L=P.intensity,W=P.distance,q=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)u+=k.r*L,d+=k.g*L,f+=k.b*L;else if(P.isLightProbe){for(let N=0;N<9;N++)n.probe[N].addScaledVector(P.sh.coefficients[N],L);S++}else if(P.isDirectionalLight){const N=e.get(P);if(N.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const V=P.shadow,B=t.get(P);B.shadowIntensity=V.intensity,B.shadowBias=V.bias,B.shadowNormalBias=V.normalBias,B.shadowRadius=V.radius,B.shadowMapSize=V.mapSize,n.directionalShadow[h]=B,n.directionalShadowMap[h]=q,n.directionalShadowMatrix[h]=P.shadow.matrix,M++}n.directional[h]=N,h++}else if(P.isSpotLight){const N=e.get(P);N.position.setFromMatrixPosition(P.matrixWorld),N.color.copy(k).multiplyScalar(L),N.distance=W,N.coneCos=Math.cos(P.angle),N.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),N.decay=P.decay,n.spot[g]=N;const V=P.shadow;if(P.map&&(n.spotLightMap[C]=P.map,C++,V.updateMatrices(P),P.castShadow&&w++),n.spotLightMatrix[g]=V.matrix,P.castShadow){const B=t.get(P);B.shadowIntensity=V.intensity,B.shadowBias=V.bias,B.shadowNormalBias=V.normalBias,B.shadowRadius=V.radius,B.shadowMapSize=V.mapSize,n.spotShadow[g]=B,n.spotShadowMap[g]=q,v++}g++}else if(P.isRectAreaLight){const N=e.get(P);N.color.copy(k).multiplyScalar(L),N.halfWidth.set(.5*P.width,0,0),N.halfHeight.set(0,.5*P.height,0),n.rectArea[m]=N,m++}else if(P.isPointLight){const N=e.get(P);if(N.color.copy(P.color).multiplyScalar(P.intensity),N.distance=P.distance,N.decay=P.decay,P.castShadow){const V=P.shadow,B=t.get(P);B.shadowIntensity=V.intensity,B.shadowBias=V.bias,B.shadowNormalBias=V.normalBias,B.shadowRadius=V.radius,B.shadowMapSize=V.mapSize,B.shadowCameraNear=V.camera.near,B.shadowCameraFar=V.camera.far,n.pointShadow[p]=B,n.pointShadowMap[p]=q,n.pointShadowMatrix[p]=P.shadow.matrix,y++}n.point[p]=N,p++}else if(P.isHemisphereLight){const N=e.get(P);N.skyColor.copy(P.color).multiplyScalar(L),N.groundColor.copy(P.groundColor).multiplyScalar(L),n.hemi[_]=N,_++}}m>0&&(!0===i.has("OES_texture_float_linear")?(n.rectAreaLTC1=je.LTC_FLOAT_1,n.rectAreaLTC2=je.LTC_FLOAT_2):(n.rectAreaLTC1=je.LTC_HALF_1,n.rectAreaLTC2=je.LTC_HALF_2)),n.ambient[0]=u,n.ambient[1]=d,n.ambient[2]=f;const E=n.hash;(E.directionalLength!==h||E.pointLength!==p||E.spotLength!==g||E.rectAreaLength!==m||E.hemiLength!==_||E.numDirectionalShadows!==M||E.numPointShadows!==y||E.numSpotShadows!==v||E.numSpotMaps!==C||E.numLightProbes!==S)&&(n.directional.length=h,n.spot.length=g,n.rectArea.length=m,n.point.length=p,n.hemi.length=_,n.directionalShadow.length=M,n.directionalShadowMap.length=M,n.pointShadow.length=y,n.pointShadowMap.length=y,n.spotShadow.length=v,n.spotShadowMap.length=v,n.directionalShadowMatrix.length=M,n.pointShadowMatrix.length=y,n.spotLightMatrix.length=v+C-w,n.spotLightMap.length=C,n.numSpotLightShadowsWithMaps=w,n.numLightProbes=S,E.directionalLength=h,E.pointLength=p,E.spotLength=g,E.rectAreaLength=m,E.hemiLength=_,E.numDirectionalShadows=M,E.numPointShadows=y,E.numSpotShadows=v,E.numSpotMaps=C,E.numLightProbes=S,n.version=hae++)},setupView:function l(c,u){let d=0,f=0,h=0,p=0,g=0;const m=u.matrixWorldInverse;for(let _=0,M=c.length;_<M;_++){const y=c[_];if(y.isDirectionalLight){const v=n.directional[d];v.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(m),d++}else if(y.isSpotLight){const v=n.spot[h];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(m),v.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(m),h++}else if(y.isRectAreaLight){const v=n.rectArea[p];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(m),o.identity(),s.copy(y.matrixWorld),s.premultiply(m),o.extractRotation(s),v.halfWidth.set(.5*y.width,0,0),v.halfHeight.set(0,.5*y.height,0),v.halfWidth.applyMatrix4(o),v.halfHeight.applyMatrix4(o),p++}else if(y.isPointLight){const v=n.point[f];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(m),f++}else if(y.isHemisphereLight){const v=n.hemi[g];v.direction.setFromMatrixPosition(y.matrixWorld),v.direction.transformDirection(m),g++}}},state:n}}function mB(i){const e=new pae(i),t=[],n=[],c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(u){c.camera=u,t.length=0,n.length=0},state:c,setupLights:function a(){e.setup(t)},setupLightsView:function l(u){e.setupView(t,u)},pushLight:function s(u){t.push(u)},pushShadow:function o(u){n.push(u)}}}function gae(i){let e=new WeakMap;return{get:function t(r,s=0){const o=e.get(r);let a;return void 0===o?(a=new mB(i),e.set(r,[a])):s>=o.length?(a=new mB(i),o.push(a)):a=o[s],a},dispose:function n(){e=new WeakMap}}}const mae="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",_ae="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function yae(i,e,t){let n=new Pv;const r=new he,s=new he,o=new an,a=new cU({depthPacking:Fee}),l=new uU,c={},u=t.maxTextureSize,d={[Ra]:$r,[$r]:Ra,[Ko]:Ko},f=new Wa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new he},radius:{value:4}},vertexShader:mae,fragmentShader:_ae}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new Lt;p.setAttribute("position",new An(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new fi(p,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=k2;let _=this.type;function M(w,S){const E=e.update(g);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,h.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),null===w.mapPass&&(w.mapPass=new Fc(r.x,r.y)),f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,i.setRenderTarget(w.mapPass),i.clear(),i.renderBufferDirect(S,null,E,f,g,null),h.uniforms.shadow_pass.value=w.mapPass.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,i.setRenderTarget(w.map),i.clear(),i.renderBufferDirect(S,null,E,h,g,null)}function y(w,S,E,x){let b=null;const P=!0===E.isPointLight?w.customDistanceMaterial:w.customDepthMaterial;if(void 0!==P)b=P;else if(b=!0===E.isPointLight?l:a,i.localClippingEnabled&&!0===S.clipShadows&&Array.isArray(S.clippingPlanes)&&0!==S.clippingPlanes.length||S.displacementMap&&0!==S.displacementScale||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const k=b.uuid,L=S.uuid;let W=c[k];void 0===W&&(W={},c[k]=W);let q=W[L];void 0===q&&(q=b.clone(),W[L]=q,S.addEventListener("dispose",C)),b=q}return b.visible=S.visible,b.wireframe=S.wireframe,b.side=x===Ia?null!==S.shadowSide?S.shadowSide:S.side:null!==S.shadowSide?S.shadowSide:d[S.side],b.alphaMap=S.alphaMap,b.alphaTest=S.alphaTest,b.map=S.map,b.clipShadows=S.clipShadows,b.clippingPlanes=S.clippingPlanes,b.clipIntersection=S.clipIntersection,b.displacementMap=S.displacementMap,b.displacementScale=S.displacementScale,b.displacementBias=S.displacementBias,b.wireframeLinewidth=S.wireframeLinewidth,b.linewidth=S.linewidth,!0===E.isPointLight&&!0===b.isMeshDistanceMaterial&&(i.properties.get(b).light=E),b}function v(w,S,E,x,b){if(!1===w.visible)return;if(w.layers.test(S.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&b===Ia)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,w.matrixWorld);const L=e.update(w),W=w.material;if(Array.isArray(W)){const q=L.groups;for(let N=0,V=q.length;N<V;N++){const B=q[N],ee=W[B.materialIndex];if(ee&&ee.visible){const R=y(w,ee,x,b);w.onBeforeShadow(i,w,S,E,L,R,B),i.renderBufferDirect(E,null,L,R,w,B),w.onAfterShadow(i,w,S,E,L,R,B)}}}else if(W.visible){const q=y(w,W,x,b);w.onBeforeShadow(i,w,S,E,L,q,null),i.renderBufferDirect(E,null,L,q,w,null),w.onAfterShadow(i,w,S,E,L,q,null)}}const k=w.children;for(let L=0,W=k.length;L<W;L++)v(k[L],S,E,x,b)}function C(w){w.target.removeEventListener("dispose",C);for(const E in c){const x=c[E],b=w.target.uuid;b in x&&(x[b].dispose(),delete x[b])}}this.render=function(w,S,E){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===w.length)return;const x=i.getRenderTarget(),b=i.getActiveCubeFace(),P=i.getActiveMipmapLevel(),k=i.state;k.setBlending(El),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);const L=_!==Ia&&this.type===Ia,W=_===Ia&&this.type!==Ia;for(let q=0,N=w.length;q<N;q++){const V=w[q],B=V.shadow;if(void 0===B){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(!1===B.autoUpdate&&!1===B.needsUpdate)continue;r.copy(B.mapSize);const ee=B.getFrameExtents();if(r.multiply(ee),s.copy(B.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ee.x),r.x=s.x*ee.x,B.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ee.y),r.y=s.y*ee.y,B.mapSize.y=s.y)),null===B.map||!0===L||!0===W){const ae=this.type!==Ia?{minFilter:ki,magFilter:ki}:{};null!==B.map&&B.map.dispose(),B.map=new Fc(r.x,r.y,ae),B.map.texture.name=V.name+".shadowMap",B.camera.updateProjectionMatrix()}i.setRenderTarget(B.map),i.clear();const R=B.getViewportCount();for(let ae=0;ae<R;ae++){const Ee=B.getViewport(ae);o.set(s.x*Ee.x,s.y*Ee.y,s.x*Ee.z,s.y*Ee.w),k.viewport(o),B.updateMatrices(V,ae),n=B.getFrustum(),v(S,E,B.camera,V,this.type)}!0!==B.isPointLightShadow&&this.type===Ia&&M(B,E),B.needsUpdate=!1}_=this.type,m.needsUpdate=!1,i.setRenderTarget(x,b,P)}}const vae={[Qw]:eS,[tS]:rS,[nS]:sS,[kd]:iS,[eS]:Qw,[rS]:tS,[sS]:nS,[iS]:kd};function Mae(i,e){const s=new function t(){let F=!1;const Ie=new an;let J=null;const de=new an(0,0,0,0);return{setMask:function(ke){J!==ke&&!F&&(i.colorMask(ke,ke,ke,ke),J=ke)},setLocked:function(ke){F=ke},setClear:function(ke,ze,Ce,U,fe){!0===fe&&(ke*=U,ze*=U,Ce*=U),Ie.set(ke,ze,Ce,U),!1===de.equals(Ie)&&(i.clearColor(ke,ze,Ce,U),de.copy(Ie))},reset:function(){F=!1,J=null,de.set(-1,0,0,0)}}},o=new function n(){let F=!1,Ie=!1,J=null,de=null,ke=null;return{setReversed:function(ze){if(Ie!==ze){const Ce=e.get("EXT_clip_control");Ce.clipControlEXT(Ce.LOWER_LEFT_EXT,Ie?Ce.ZERO_TO_ONE_EXT:Ce.NEGATIVE_ONE_TO_ONE_EXT);const U=ke;ke=null,this.setClear(U)}Ie=ze},getReversed:function(){return Ie},setTest:function(ze){ze?se(i.DEPTH_TEST):Se(i.DEPTH_TEST)},setMask:function(ze){J!==ze&&!F&&(i.depthMask(ze),J=ze)},setFunc:function(ze){if(Ie&&(ze=vae[ze]),de!==ze){switch(ze){case Qw:i.depthFunc(i.NEVER);break;case eS:i.depthFunc(i.ALWAYS);break;case tS:i.depthFunc(i.LESS);break;case kd:i.depthFunc(i.LEQUAL);break;case nS:i.depthFunc(i.EQUAL);break;case iS:i.depthFunc(i.GEQUAL);break;case rS:i.depthFunc(i.GREATER);break;case sS:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}de=ze}},setLocked:function(ze){F=ze},setClear:function(ze){ke!==ze&&(Ie&&(ze=1-ze),i.clearDepth(ze),ke=ze)},reset:function(){F=!1,J=null,de=null,ke=null,Ie=!1}}},a=new function r(){let F=!1,Ie=null,J=null,de=null,ke=null,ze=null,Ce=null,U=null,fe=null;return{setTest:function(H){F||(H?se(i.STENCIL_TEST):Se(i.STENCIL_TEST))},setMask:function(H){Ie!==H&&!F&&(i.stencilMask(H),Ie=H)},setFunc:function(H,K,_e){(J!==H||de!==K||ke!==_e)&&(i.stencilFunc(H,K,_e),J=H,de=K,ke=_e)},setOp:function(H,K,_e){(ze!==H||Ce!==K||U!==_e)&&(i.stencilOp(H,K,_e),ze=H,Ce=K,U=_e)},setLocked:function(H){F=H},setClear:function(H){fe!==H&&(i.clearStencil(H),fe=H)},reset:function(){F=!1,Ie=null,J=null,de=null,ke=null,ze=null,Ce=null,U=null,fe=null}}},l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,h=[],p=null,g=!1,m=null,_=null,M=null,y=null,v=null,C=null,w=null,S=new Fe(0,0,0),E=0,x=!1,b=null,P=null,k=null,L=null,W=null;const q=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,V=0;const B=i.getParameter(i.VERSION);-1!==B.indexOf("WebGL")?(V=parseFloat(/^WebGL (\d)/.exec(B)[1]),N=V>=1):-1!==B.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),N=V>=2);let ee=null,R={};const ae=i.getParameter(i.SCISSOR_BOX),Ee=i.getParameter(i.VIEWPORT),He=(new an).fromArray(ae),$=(new an).fromArray(Ee);function ge(F,Ie,J,de){const ke=new Uint8Array(4),ze=i.createTexture();i.bindTexture(F,ze),i.texParameteri(F,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(F,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Ce=0;Ce<J;Ce++)F===i.TEXTURE_3D||F===i.TEXTURE_2D_ARRAY?i.texImage3D(Ie,0,i.RGBA,1,1,de,0,i.RGBA,i.UNSIGNED_BYTE,ke):i.texImage2D(Ie+Ce,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ke);return ze}const xe={};function se(F){!0!==u[F]&&(i.enable(F),u[F]=!0)}function Se(F){!1!==u[F]&&(i.disable(F),u[F]=!1)}xe[i.TEXTURE_2D]=ge(i.TEXTURE_2D,i.TEXTURE_2D,1),xe[i.TEXTURE_CUBE_MAP]=ge(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[i.TEXTURE_2D_ARRAY]=ge(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),xe[i.TEXTURE_3D]=ge(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),se(i.DEPTH_TEST),o.setFunc(kd),ve(!1),z(L2),se(i.CULL_FACE),O(El);const oe={[Ic]:i.FUNC_ADD,[see]:i.FUNC_SUBTRACT,[oee]:i.FUNC_REVERSE_SUBTRACT};oe[aee]=i.MIN,oe[lee]=i.MAX;const le={[cee]:i.ZERO,[uee]:i.ONE,[dee]:i.SRC_COLOR,[Zw]:i.SRC_ALPHA,[_ee]:i.SRC_ALPHA_SATURATE,[gee]:i.DST_COLOR,[fee]:i.DST_ALPHA,[hee]:i.ONE_MINUS_SRC_COLOR,[Jw]:i.ONE_MINUS_SRC_ALPHA,[mee]:i.ONE_MINUS_DST_COLOR,[pee]:i.ONE_MINUS_DST_ALPHA,[yee]:i.CONSTANT_COLOR,[vee]:i.ONE_MINUS_CONSTANT_COLOR,[Mee]:i.CONSTANT_ALPHA,[bee]:i.ONE_MINUS_CONSTANT_ALPHA};function O(F,Ie,J,de,ke,ze,Ce,U,fe,H){if(F!==El){if(!1===g&&(se(i.BLEND),g=!0),F===ree)ke=ke||Ie,ze=ze||J,Ce=Ce||de,(Ie!==_||ke!==v)&&(i.blendEquationSeparate(oe[Ie],oe[ke]),_=Ie,v=ke),(J!==M||de!==y||ze!==C||Ce!==w)&&(i.blendFuncSeparate(le[J],le[de],le[ze],le[Ce]),M=J,y=de,C=ze,w=Ce),(!1===U.equals(S)||fe!==E)&&(i.blendColor(U.r,U.g,U.b,fe),S.copy(U),E=fe),m=F,x=!1;else if(F!==m||H!==x){if((_!==Ic||v!==Ic)&&(i.blendEquation(i.FUNC_ADD),_=Ic,v=Ic),H)switch(F){case Ld:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case F2:i.blendFunc(i.ONE,i.ONE);break;case U2:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case B2:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",F)}else switch(F){case Ld:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case F2:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case U2:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case B2:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",F)}M=null,y=null,C=null,w=null,S.set(0,0,0),E=0,m=F,x=H}}else!0===g&&(Se(i.BLEND),g=!1)}function ve(F){b!==F&&(i.frontFace(F?i.CW:i.CCW),b=F)}function z(F){F!==tee?(se(i.CULL_FACE),F!==P&&i.cullFace(F===L2?i.BACK:F===nee?i.FRONT:i.FRONT_AND_BACK)):Se(i.CULL_FACE),P=F}function nt(F,Ie,J){F?(se(i.POLYGON_OFFSET_FILL),(L!==Ie||W!==J)&&(i.polygonOffset(Ie,J),L=Ie,W=J)):Se(i.POLYGON_OFFSET_FILL)}return{buffers:{color:s,depth:o,stencil:a},enable:se,disable:Se,bindFramebuffer:function Ue(F,Ie){return d[F]!==Ie&&(i.bindFramebuffer(F,Ie),d[F]=Ie,F===i.DRAW_FRAMEBUFFER&&(d[i.FRAMEBUFFER]=Ie),F===i.FRAMEBUFFER&&(d[i.DRAW_FRAMEBUFFER]=Ie),!0)},drawBuffers:function Ge(F,Ie){let J=h,de=!1;if(F){J=f.get(Ie),void 0===J&&(J=[],f.set(Ie,J));const ke=F.textures;if(J.length!==ke.length||J[0]!==i.COLOR_ATTACHMENT0){for(let ze=0,Ce=ke.length;ze<Ce;ze++)J[ze]=i.COLOR_ATTACHMENT0+ze;J.length=ke.length,de=!0}}else J[0]!==i.BACK&&(J[0]=i.BACK,de=!0);de&&i.drawBuffers(J)},useProgram:function Je(F){return p!==F&&(i.useProgram(F),p=F,!0)},setBlending:O,setMaterial:function we(F,Ie){F.side===Ko?Se(i.CULL_FACE):se(i.CULL_FACE);let J=F.side===$r;Ie&&(J=!J),ve(J),F.blending===Ld&&!1===F.transparent?O(El):O(F.blending,F.blendEquation,F.blendSrc,F.blendDst,F.blendEquationAlpha,F.blendSrcAlpha,F.blendDstAlpha,F.blendColor,F.blendAlpha,F.premultipliedAlpha),o.setFunc(F.depthFunc),o.setTest(F.depthTest),o.setMask(F.depthWrite),s.setMask(F.colorWrite);const de=F.stencilWrite;a.setTest(de),de&&(a.setMask(F.stencilWriteMask),a.setFunc(F.stencilFunc,F.stencilRef,F.stencilFuncMask),a.setOp(F.stencilFail,F.stencilZFail,F.stencilZPass)),nt(F.polygonOffset,F.polygonOffsetFactor,F.polygonOffsetUnits),!0===F.alphaToCoverage?se(i.SAMPLE_ALPHA_TO_COVERAGE):Se(i.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ve,setCullFace:z,setLineWidth:function Me(F){F!==k&&(N&&i.lineWidth(F),k=F)},setPolygonOffset:nt,setScissorTest:function Be(F){F?se(i.SCISSOR_TEST):Se(i.SCISSOR_TEST)},activeTexture:function D(F){void 0===F&&(F=i.TEXTURE0+q-1),ee!==F&&(i.activeTexture(F),ee=F)},bindTexture:function T(F,Ie,J){void 0===J&&(J=null===ee?i.TEXTURE0+q-1:ee);let de=R[J];void 0===de&&(de={type:void 0,texture:void 0},R[J]=de),(de.type!==F||de.texture!==Ie)&&(ee!==J&&(i.activeTexture(J),ee=J),i.bindTexture(F,Ie||xe[F]),de.type=F,de.texture=Ie)},unbindTexture:function X(){const F=R[ee];void 0!==F&&void 0!==F.type&&(i.bindTexture(F.type,null),F.type=void 0,F.texture=void 0)},compressedTexImage2D:function re(){try{i.compressedTexImage2D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},compressedTexImage3D:function ue(){try{i.compressedTexImage3D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texImage2D:function Oe(){try{i.texImage2D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texImage3D:function at(){try{i.texImage3D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},updateUBOMapping:function St(F,Ie){let J=c.get(Ie);void 0===J&&(J=new WeakMap,c.set(Ie,J));let de=J.get(F);void 0===de&&(de=i.getUniformBlockIndex(Ie,F.name),J.set(F,de))},uniformBlockBinding:function mt(F,Ie){const de=c.get(Ie).get(F);l.get(Ie)!==de&&(i.uniformBlockBinding(Ie,de,F.__bindingPointIndex),l.set(Ie,de))},texStorage2D:function bt(){try{i.texStorage2D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texStorage3D:function Ae(){try{i.texStorage3D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texSubImage2D:function ie(){try{i.texSubImage2D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texSubImage3D:function Pe(){try{i.texSubImage3D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},compressedTexSubImage2D:function De(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},compressedTexSubImage3D:function Ve(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},scissor:function lt(F){!1===He.equals(F)&&(i.scissor(F.x,F.y,F.z,F.w),He.copy(F))},viewport:function $e(F){!1===$.equals(F)&&(i.viewport(F.x,F.y,F.z,F.w),$.copy(F))},reset:function Ht(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},ee=null,R={},d={},f=new WeakMap,h=[],p=null,g=!1,m=null,_=null,M=null,y=null,v=null,C=null,w=null,S=new Fe(0,0,0),E=0,x=!1,b=null,P=null,k=null,L=null,W=null,He.set(0,0,i.canvas.width,i.canvas.height),$.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),a.reset()}}}function bae(i,e,t,n,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new he,u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function p(D,T){return h?new OffscreenCanvas(D,T):qp("canvas")}function g(D,T,X){let re=1;const ue=Be(D);if((ue.width>X||ue.height>X)&&(re=X/Math.max(ue.width,ue.height)),re<1){if(typeof HTMLImageElement<"u"&&D instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&D instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&D instanceof ImageBitmap||typeof VideoFrame<"u"&&D instanceof VideoFrame){const ie=Math.floor(re*ue.width),Pe=Math.floor(re*ue.height);void 0===d&&(d=p(ie,Pe));const De=T?p(ie,Pe):d;return De.width=ie,De.height=Pe,De.getContext("2d").drawImage(D,0,0,ie,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ue.width+"x"+ue.height+") to ("+ie+"x"+Pe+")."),De}return"data"in D&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ue.width+"x"+ue.height+")."),D}return D}function m(D){return D.generateMipmaps}function _(D){i.generateMipmap(D)}function M(D){return D.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:D.isWebGL3DRenderTarget?i.TEXTURE_3D:D.isWebGLArrayRenderTarget||D.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function y(D,T,X,re,ue=!1){if(null!==D){if(void 0!==i[D])return i[D];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+D+"'")}let ie=T;if(T===i.RED&&(X===i.FLOAT&&(ie=i.R32F),X===i.HALF_FLOAT&&(ie=i.R16F),X===i.UNSIGNED_BYTE&&(ie=i.R8)),T===i.RED_INTEGER&&(X===i.UNSIGNED_BYTE&&(ie=i.R8UI),X===i.UNSIGNED_SHORT&&(ie=i.R16UI),X===i.UNSIGNED_INT&&(ie=i.R32UI),X===i.BYTE&&(ie=i.R8I),X===i.SHORT&&(ie=i.R16I),X===i.INT&&(ie=i.R32I)),T===i.RG&&(X===i.FLOAT&&(ie=i.RG32F),X===i.HALF_FLOAT&&(ie=i.RG16F),X===i.UNSIGNED_BYTE&&(ie=i.RG8)),T===i.RG_INTEGER&&(X===i.UNSIGNED_BYTE&&(ie=i.RG8UI),X===i.UNSIGNED_SHORT&&(ie=i.RG16UI),X===i.UNSIGNED_INT&&(ie=i.RG32UI),X===i.BYTE&&(ie=i.RG8I),X===i.SHORT&&(ie=i.RG16I),X===i.INT&&(ie=i.RG32I)),T===i.RGB_INTEGER&&(X===i.UNSIGNED_BYTE&&(ie=i.RGB8UI),X===i.UNSIGNED_SHORT&&(ie=i.RGB16UI),X===i.UNSIGNED_INT&&(ie=i.RGB32UI),X===i.BYTE&&(ie=i.RGB8I),X===i.SHORT&&(ie=i.RGB16I),X===i.INT&&(ie=i.RGB32I)),T===i.RGBA_INTEGER&&(X===i.UNSIGNED_BYTE&&(ie=i.RGBA8UI),X===i.UNSIGNED_SHORT&&(ie=i.RGBA16UI),X===i.UNSIGNED_INT&&(ie=i.RGBA32UI),X===i.BYTE&&(ie=i.RGBA8I),X===i.SHORT&&(ie=i.RGBA16I),X===i.INT&&(ie=i.RGBA32I)),T===i.RGB&&X===i.UNSIGNED_INT_5_9_9_9_REV&&(ie=i.RGB9_E5),T===i.RGBA){const Pe=ue?tv:tn.getTransfer(re);X===i.FLOAT&&(ie=i.RGBA32F),X===i.HALF_FLOAT&&(ie=i.RGBA16F),X===i.UNSIGNED_BYTE&&(ie=Pe===_n?i.SRGB8_ALPHA8:i.RGBA8),X===i.UNSIGNED_SHORT_4_4_4_4&&(ie=i.RGBA4),X===i.UNSIGNED_SHORT_5_5_5_1&&(ie=i.RGB5_A1)}return(ie===i.R16F||ie===i.R32F||ie===i.RG16F||ie===i.RG32F||ie===i.RGBA16F||ie===i.RGBA32F)&&e.get("EXT_color_buffer_float"),ie}function v(D,T){let X;return D?null===T||T===Pl||T===Ud?X=i.DEPTH24_STENCIL8:T===ms?X=i.DEPTH32F_STENCIL8:T===Gp&&(X=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===T||T===Pl||T===Ud?X=i.DEPTH_COMPONENT24:T===ms?X=i.DEPTH_COMPONENT32F:T===Gp&&(X=i.DEPTH_COMPONENT16),X}function C(D,T){return!0===m(D)||D.isFramebufferTexture&&D.minFilter!==ki&&D.minFilter!==ti?Math.log2(Math.max(T.width,T.height))+1:void 0!==D.mipmaps&&D.mipmaps.length>0?D.mipmaps.length:D.isCompressedTexture&&Array.isArray(D.image)?T.mipmaps.length:1}function w(D){const T=D.target;T.removeEventListener("dispose",w),function E(D){const T=n.get(D);if(void 0===T.__webglInit)return;const X=D.source,re=f.get(X);if(re){const ue=re[T.__cacheKey];ue.usedTimes--,0===ue.usedTimes&&x(D),0===Object.keys(re).length&&f.delete(X)}n.remove(D)}(T),T.isVideoTexture&&u.delete(T)}function S(D){const T=D.target;T.removeEventListener("dispose",S),function b(D){const T=n.get(D);if(D.depthTexture&&(D.depthTexture.dispose(),n.remove(D.depthTexture)),D.isWebGLCubeRenderTarget)for(let re=0;re<6;re++){if(Array.isArray(T.__webglFramebuffer[re]))for(let ue=0;ue<T.__webglFramebuffer[re].length;ue++)i.deleteFramebuffer(T.__webglFramebuffer[re][ue]);else i.deleteFramebuffer(T.__webglFramebuffer[re]);T.__webglDepthbuffer&&i.deleteRenderbuffer(T.__webglDepthbuffer[re])}else{if(Array.isArray(T.__webglFramebuffer))for(let re=0;re<T.__webglFramebuffer.length;re++)i.deleteFramebuffer(T.__webglFramebuffer[re]);else i.deleteFramebuffer(T.__webglFramebuffer);if(T.__webglDepthbuffer&&i.deleteRenderbuffer(T.__webglDepthbuffer),T.__webglMultisampledFramebuffer&&i.deleteFramebuffer(T.__webglMultisampledFramebuffer),T.__webglColorRenderbuffer)for(let re=0;re<T.__webglColorRenderbuffer.length;re++)T.__webglColorRenderbuffer[re]&&i.deleteRenderbuffer(T.__webglColorRenderbuffer[re]);T.__webglDepthRenderbuffer&&i.deleteRenderbuffer(T.__webglDepthRenderbuffer)}const X=D.textures;for(let re=0,ue=X.length;re<ue;re++){const ie=n.get(X[re]);ie.__webglTexture&&(i.deleteTexture(ie.__webglTexture),o.memory.textures--),n.remove(X[re])}n.remove(D)}(T)}function x(D){const T=n.get(D);i.deleteTexture(T.__webglTexture),delete f.get(D.source)[T.__cacheKey],o.memory.textures--}let P=0;function q(D,T){const X=n.get(D);if(D.isVideoTexture&&function Me(D){const T=o.render.frame;u.get(D)!==T&&(u.set(D,T),D.update())}(D),!1===D.isRenderTargetTexture&&D.version>0&&X.__version!==D.version){const re=D.image;if(null===re)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==re.complete)return void $(X,D,T);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(i.TEXTURE_2D,X.__webglTexture,i.TEXTURE0+T)}const ee={[Nc]:i.REPEAT,[$s]:i.CLAMP_TO_EDGE,[zp]:i.MIRRORED_REPEAT},R={[ki]:i.NEAREST,[aS]:i.NEAREST_MIPMAP_NEAREST,[Fd]:i.NEAREST_MIPMAP_LINEAR,[ti]:i.LINEAR,[Hp]:i.LINEAR_MIPMAP_NEAREST,[bo]:i.LINEAR_MIPMAP_LINEAR},ae={[Bee]:i.NEVER,[jee]:i.ALWAYS,[Vee]:i.LESS,[Q2]:i.LEQUAL,[zee]:i.EQUAL,[Wee]:i.GEQUAL,[Hee]:i.GREATER,[Gee]:i.NOTEQUAL};function Ee(D,T){if(T.type===ms&&!1===e.has("OES_texture_float_linear")&&(T.magFilter===ti||T.magFilter===Hp||T.magFilter===Fd||T.magFilter===bo||T.minFilter===ti||T.minFilter===Hp||T.minFilter===Fd||T.minFilter===bo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(D,i.TEXTURE_WRAP_S,ee[T.wrapS]),i.texParameteri(D,i.TEXTURE_WRAP_T,ee[T.wrapT]),(D===i.TEXTURE_3D||D===i.TEXTURE_2D_ARRAY)&&i.texParameteri(D,i.TEXTURE_WRAP_R,ee[T.wrapR]),i.texParameteri(D,i.TEXTURE_MAG_FILTER,R[T.magFilter]),i.texParameteri(D,i.TEXTURE_MIN_FILTER,R[T.minFilter]),T.compareFunction&&(i.texParameteri(D,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(D,i.TEXTURE_COMPARE_FUNC,ae[T.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(T.magFilter===ki||T.minFilter!==Fd&&T.minFilter!==bo||T.type===ms&&!1===e.has("OES_texture_float_linear"))return;if(T.anisotropy>1||n.get(T).__currentAnisotropy){const X=e.get("EXT_texture_filter_anisotropic");i.texParameterf(D,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,r.getMaxAnisotropy())),n.get(T).__currentAnisotropy=T.anisotropy}}}function He(D,T){let X=!1;void 0===D.__webglInit&&(D.__webglInit=!0,T.addEventListener("dispose",w));const re=T.source;let ue=f.get(re);void 0===ue&&(ue={},f.set(re,ue));const ie=function W(D){const T=[];return T.push(D.wrapS),T.push(D.wrapT),T.push(D.wrapR||0),T.push(D.magFilter),T.push(D.minFilter),T.push(D.anisotropy),T.push(D.internalFormat),T.push(D.format),T.push(D.type),T.push(D.generateMipmaps),T.push(D.premultiplyAlpha),T.push(D.flipY),T.push(D.unpackAlignment),T.push(D.colorSpace),T.join()}(T);if(ie!==D.__cacheKey){void 0===ue[ie]&&(ue[ie]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,X=!0),ue[ie].usedTimes++;const Pe=ue[D.__cacheKey];void 0!==Pe&&(ue[D.__cacheKey].usedTimes--,0===Pe.usedTimes&&x(T)),D.__cacheKey=ie,D.__webglTexture=ue[ie].texture}return X}function $(D,T,X){let re=i.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(re=i.TEXTURE_2D_ARRAY),T.isData3DTexture&&(re=i.TEXTURE_3D);const ue=He(D,T),ie=T.source;t.bindTexture(re,D.__webglTexture,i.TEXTURE0+X);const Pe=n.get(ie);if(ie.version!==Pe.__version||!0===ue){t.activeTexture(i.TEXTURE0+X);const De=tn.getPrimaries(tn.workingColorSpace),Ve=T.colorSpace===Dl?null:tn.getPrimaries(T.colorSpace),bt=T.colorSpace===Dl||De===Ve?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,T.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,T.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);let Ae=g(T.image,!1,r.maxTextureSize);Ae=nt(T,Ae);const Oe=s.convert(T.format,T.colorSpace),at=s.convert(T.type);let $e,lt=y(T.internalFormat,Oe,at,T.colorSpace,T.isVideoTexture);Ee(re,T);const St=T.mipmaps,mt=!0!==T.isVideoTexture,Ht=void 0===Pe.__version||!0===ue,F=ie.dataReady,Ie=C(T,Ae);if(T.isDepthTexture)lt=v(T.format===Vd,T.type),Ht&&(mt?t.texStorage2D(i.TEXTURE_2D,1,lt,Ae.width,Ae.height):t.texImage2D(i.TEXTURE_2D,0,lt,Ae.width,Ae.height,0,Oe,at,null));else if(T.isDataTexture)if(St.length>0){mt&&Ht&&t.texStorage2D(i.TEXTURE_2D,Ie,lt,St[0].width,St[0].height);for(let J=0,de=St.length;J<de;J++)$e=St[J],mt?F&&t.texSubImage2D(i.TEXTURE_2D,J,0,0,$e.width,$e.height,Oe,at,$e.data):t.texImage2D(i.TEXTURE_2D,J,lt,$e.width,$e.height,0,Oe,at,$e.data);T.generateMipmaps=!1}else mt?(Ht&&t.texStorage2D(i.TEXTURE_2D,Ie,lt,Ae.width,Ae.height),F&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ae.width,Ae.height,Oe,at,Ae.data)):t.texImage2D(i.TEXTURE_2D,0,lt,Ae.width,Ae.height,0,Oe,at,Ae.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){mt&&Ht&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ie,lt,St[0].width,St[0].height,Ae.depth);for(let J=0,de=St.length;J<de;J++)if($e=St[J],T.format!==Xr)if(null!==Oe)if(mt){if(F)if(T.layerUpdates.size>0){const ke=oT($e.width,$e.height,T.format,T.type);for(const ze of T.layerUpdates){const Ce=$e.data.subarray(ze*ke/$e.data.BYTES_PER_ELEMENT,(ze+1)*ke/$e.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,J,0,0,ze,$e.width,$e.height,1,Oe,Ce)}T.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,J,0,0,0,$e.width,$e.height,Ae.depth,Oe,$e.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,J,lt,$e.width,$e.height,Ae.depth,0,$e.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else mt?F&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,J,0,0,0,$e.width,$e.height,Ae.depth,Oe,at,$e.data):t.texImage3D(i.TEXTURE_2D_ARRAY,J,lt,$e.width,$e.height,Ae.depth,0,Oe,at,$e.data)}else{mt&&Ht&&t.texStorage2D(i.TEXTURE_2D,Ie,lt,St[0].width,St[0].height);for(let J=0,de=St.length;J<de;J++)$e=St[J],T.format!==Xr?null!==Oe?mt?F&&t.compressedTexSubImage2D(i.TEXTURE_2D,J,0,0,$e.width,$e.height,Oe,$e.data):t.compressedTexImage2D(i.TEXTURE_2D,J,lt,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):mt?F&&t.texSubImage2D(i.TEXTURE_2D,J,0,0,$e.width,$e.height,Oe,at,$e.data):t.texImage2D(i.TEXTURE_2D,J,lt,$e.width,$e.height,0,Oe,at,$e.data)}else if(T.isDataArrayTexture)if(mt){if(Ht&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ie,lt,Ae.width,Ae.height,Ae.depth),F)if(T.layerUpdates.size>0){const J=oT(Ae.width,Ae.height,T.format,T.type);for(const de of T.layerUpdates){const ke=Ae.data.subarray(de*J/Ae.data.BYTES_PER_ELEMENT,(de+1)*J/Ae.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,de,Ae.width,Ae.height,1,Oe,at,ke)}T.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ae.width,Ae.height,Ae.depth,Oe,at,Ae.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,lt,Ae.width,Ae.height,Ae.depth,0,Oe,at,Ae.data);else if(T.isData3DTexture)mt?(Ht&&t.texStorage3D(i.TEXTURE_3D,Ie,lt,Ae.width,Ae.height,Ae.depth),F&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ae.width,Ae.height,Ae.depth,Oe,at,Ae.data)):t.texImage3D(i.TEXTURE_3D,0,lt,Ae.width,Ae.height,Ae.depth,0,Oe,at,Ae.data);else if(T.isFramebufferTexture){if(Ht)if(mt)t.texStorage2D(i.TEXTURE_2D,Ie,lt,Ae.width,Ae.height);else{let J=Ae.width,de=Ae.height;for(let ke=0;ke<Ie;ke++)t.texImage2D(i.TEXTURE_2D,ke,lt,J,de,0,Oe,at,null),J>>=1,de>>=1}}else if(St.length>0){if(mt&&Ht){const J=Be(St[0]);t.texStorage2D(i.TEXTURE_2D,Ie,lt,J.width,J.height)}for(let J=0,de=St.length;J<de;J++)$e=St[J],mt?F&&t.texSubImage2D(i.TEXTURE_2D,J,0,0,Oe,at,$e):t.texImage2D(i.TEXTURE_2D,J,lt,Oe,at,$e);T.generateMipmaps=!1}else if(mt){if(Ht){const J=Be(Ae);t.texStorage2D(i.TEXTURE_2D,Ie,lt,J.width,J.height)}F&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Oe,at,Ae)}else t.texImage2D(i.TEXTURE_2D,0,lt,Oe,at,Ae);m(T)&&_(re),Pe.__version=ie.version,T.onUpdate&&T.onUpdate(T)}D.__version=T.version}function xe(D,T,X,re,ue,ie){const Pe=s.convert(X.format,X.colorSpace),De=s.convert(X.type),Ve=y(X.internalFormat,Pe,De,X.colorSpace),bt=n.get(T),Ae=n.get(X);if(Ae.__renderTarget=T,!bt.__hasExternalTextures){const Oe=Math.max(1,T.width>>ie),at=Math.max(1,T.height>>ie);ue===i.TEXTURE_3D||ue===i.TEXTURE_2D_ARRAY?t.texImage3D(ue,ie,Ve,Oe,at,T.depth,0,Pe,De,null):t.texImage2D(ue,ie,Ve,Oe,at,0,Pe,De,null)}t.bindFramebuffer(i.FRAMEBUFFER,D),z(T)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,re,ue,Ae.__webglTexture,0,ve(T)):(ue===i.TEXTURE_2D||ue>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ue<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,re,ue,Ae.__webglTexture,ie),t.bindFramebuffer(i.FRAMEBUFFER,null)}function se(D,T,X){if(i.bindRenderbuffer(i.RENDERBUFFER,D),T.depthBuffer){const re=T.depthTexture,ie=v(T.stencilBuffer,re&&re.isDepthTexture?re.type:null),Pe=T.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,De=ve(T);z(T)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,De,ie,T.width,T.height):X?i.renderbufferStorageMultisample(i.RENDERBUFFER,De,ie,T.width,T.height):i.renderbufferStorage(i.RENDERBUFFER,ie,T.width,T.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Pe,i.RENDERBUFFER,D)}else{const re=T.textures;for(let ue=0;ue<re.length;ue++){const ie=re[ue],Pe=s.convert(ie.format,ie.colorSpace),De=s.convert(ie.type),Ve=y(ie.internalFormat,Pe,De,ie.colorSpace),bt=ve(T);X&&!1===z(T)?i.renderbufferStorageMultisample(i.RENDERBUFFER,bt,Ve,T.width,T.height):z(T)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,bt,Ve,T.width,T.height):i.renderbufferStorage(i.RENDERBUFFER,Ve,T.width,T.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Ue(D){const T=n.get(D),X=!0===D.isWebGLCubeRenderTarget;if(T.__boundDepthTexture!==D.depthTexture){const re=D.depthTexture;if(T.__depthDisposeCallback&&T.__depthDisposeCallback(),re){const ue=()=>{delete T.__boundDepthTexture,delete T.__depthDisposeCallback,re.removeEventListener("dispose",ue)};re.addEventListener("dispose",ue),T.__depthDisposeCallback=ue}T.__boundDepthTexture=re}if(D.depthTexture&&!T.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");!function Se(D,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,D),!T.depthTexture||!T.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const re=n.get(T.depthTexture);re.__renderTarget=T,(!re.__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),q(T.depthTexture,0);const ue=re.__webglTexture,ie=ve(T);if(T.depthTexture.format===Bd)z(T)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ue,0,ie):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ue,0);else{if(T.depthTexture.format!==Vd)throw new Error("Unknown depthTexture format");z(T)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ue,0,ie):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ue,0)}}(T.__webglFramebuffer,D)}else if(X){T.__webglDepthbuffer=[];for(let re=0;re<6;re++)if(t.bindFramebuffer(i.FRAMEBUFFER,T.__webglFramebuffer[re]),void 0===T.__webglDepthbuffer[re])T.__webglDepthbuffer[re]=i.createRenderbuffer(),se(T.__webglDepthbuffer[re],D,!1);else{const ue=D.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ie=T.__webglDepthbuffer[re];i.bindRenderbuffer(i.RENDERBUFFER,ie),i.framebufferRenderbuffer(i.FRAMEBUFFER,ue,i.RENDERBUFFER,ie)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,T.__webglFramebuffer),void 0===T.__webglDepthbuffer)T.__webglDepthbuffer=i.createRenderbuffer(),se(T.__webglDepthbuffer,D,!1);else{const re=D.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ue=T.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,ue),i.framebufferRenderbuffer(i.FRAMEBUFFER,re,i.RENDERBUFFER,ue)}t.bindFramebuffer(i.FRAMEBUFFER,null)}const le=[],O=[];function ve(D){return Math.min(r.maxSamples,D.samples)}function z(D){const T=n.get(D);return D.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==T.__useRenderToTexture}function nt(D,T){const X=D.colorSpace,re=D.format,ue=D.type;return!0===D.isCompressedTexture||!0===D.isVideoTexture||X!==Cr&&X!==Dl&&(tn.getTransfer(X)===_n?(re!==Xr||ue!==Na)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",X)),T}function Be(D){return typeof HTMLImageElement<"u"&&D instanceof HTMLImageElement?(c.width=D.naturalWidth||D.width,c.height=D.naturalHeight||D.height):typeof VideoFrame<"u"&&D instanceof VideoFrame?(c.width=D.displayWidth,c.height=D.displayHeight):(c.width=D.width,c.height=D.height),c}this.allocateTextureUnit=function L(){const D=P;return D>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+D+" texture units while this GPU supports only "+r.maxTextures),P+=1,D},this.resetTextureUnits=function k(){P=0},this.setTexture2D=q,this.setTexture2DArray=function N(D,T){const X=n.get(D);D.version>0&&X.__version!==D.version?$(X,D,T):t.bindTexture(i.TEXTURE_2D_ARRAY,X.__webglTexture,i.TEXTURE0+T)},this.setTexture3D=function V(D,T){const X=n.get(D);D.version>0&&X.__version!==D.version?$(X,D,T):t.bindTexture(i.TEXTURE_3D,X.__webglTexture,i.TEXTURE0+T)},this.setTextureCube=function B(D,T){const X=n.get(D);D.version>0&&X.__version!==D.version?function ge(D,T,X){if(6!==T.image.length)return;const re=He(D,T),ue=T.source;t.bindTexture(i.TEXTURE_CUBE_MAP,D.__webglTexture,i.TEXTURE0+X);const ie=n.get(ue);if(ue.version!==ie.__version||!0===re){t.activeTexture(i.TEXTURE0+X);const Pe=tn.getPrimaries(tn.workingColorSpace),De=T.colorSpace===Dl?null:tn.getPrimaries(T.colorSpace),Ve=T.colorSpace===Dl||Pe===De?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,T.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,T.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ve);const bt=T.isCompressedTexture||T.image[0].isCompressedTexture,Ae=T.image[0]&&T.image[0].isDataTexture,Oe=[];for(let de=0;de<6;de++)Oe[de]=bt||Ae?Ae?T.image[de].image:T.image[de]:g(T.image[de],!0,r.maxCubemapSize),Oe[de]=nt(T,Oe[de]);const at=Oe[0],lt=s.convert(T.format,T.colorSpace),$e=s.convert(T.type),St=y(T.internalFormat,lt,$e,T.colorSpace),mt=!0!==T.isVideoTexture,Ht=void 0===ie.__version||!0===re,F=ue.dataReady;let J,Ie=C(T,at);if(Ee(i.TEXTURE_CUBE_MAP,T),bt){mt&&Ht&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ie,St,at.width,at.height);for(let de=0;de<6;de++){J=Oe[de].mipmaps;for(let ke=0;ke<J.length;ke++){const ze=J[ke];T.format!==Xr?null!==lt?mt?F&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke,0,0,ze.width,ze.height,lt,ze.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke,St,ze.width,ze.height,0,ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):mt?F&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke,0,0,ze.width,ze.height,lt,$e,ze.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke,St,ze.width,ze.height,0,lt,$e,ze.data)}}}else{if(J=T.mipmaps,mt&&Ht){J.length>0&&Ie++;const de=Be(Oe[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Ie,St,de.width,de.height)}for(let de=0;de<6;de++)if(Ae){mt?F&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,Oe[de].width,Oe[de].height,lt,$e,Oe[de].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,St,Oe[de].width,Oe[de].height,0,lt,$e,Oe[de].data);for(let ke=0;ke<J.length;ke++){const Ce=J[ke].image[de].image;mt?F&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke+1,0,0,Ce.width,Ce.height,lt,$e,Ce.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke+1,St,Ce.width,Ce.height,0,lt,$e,Ce.data)}}else{mt?F&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,lt,$e,Oe[de]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,St,lt,$e,Oe[de]);for(let ke=0;ke<J.length;ke++){const ze=J[ke];mt?F&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke+1,0,0,lt,$e,ze.image[de]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+de,ke+1,St,lt,$e,ze.image[de])}}}m(T)&&_(i.TEXTURE_CUBE_MAP),ie.__version=ue.version,T.onUpdate&&T.onUpdate(T)}D.__version=T.version}(X,D,T):t.bindTexture(i.TEXTURE_CUBE_MAP,X.__webglTexture,i.TEXTURE0+T)},this.rebindTextures=function Ge(D,T,X){const re=n.get(D);void 0!==T&&xe(re.__webglFramebuffer,D,D.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),void 0!==X&&Ue(D)},this.setupRenderTarget=function Je(D){const T=D.texture,X=n.get(D),re=n.get(T);D.addEventListener("dispose",S);const ue=D.textures,ie=!0===D.isWebGLCubeRenderTarget,Pe=ue.length>1;if(Pe||(void 0===re.__webglTexture&&(re.__webglTexture=i.createTexture()),re.__version=T.version,o.memory.textures++),ie){X.__webglFramebuffer=[];for(let De=0;De<6;De++)if(T.mipmaps&&T.mipmaps.length>0){X.__webglFramebuffer[De]=[];for(let Ve=0;Ve<T.mipmaps.length;Ve++)X.__webglFramebuffer[De][Ve]=i.createFramebuffer()}else X.__webglFramebuffer[De]=i.createFramebuffer()}else{if(T.mipmaps&&T.mipmaps.length>0){X.__webglFramebuffer=[];for(let De=0;De<T.mipmaps.length;De++)X.__webglFramebuffer[De]=i.createFramebuffer()}else X.__webglFramebuffer=i.createFramebuffer();if(Pe)for(let De=0,Ve=ue.length;De<Ve;De++){const bt=n.get(ue[De]);void 0===bt.__webglTexture&&(bt.__webglTexture=i.createTexture(),o.memory.textures++)}if(D.samples>0&&!1===z(D)){X.__webglMultisampledFramebuffer=i.createFramebuffer(),X.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let De=0;De<ue.length;De++){const Ve=ue[De];X.__webglColorRenderbuffer[De]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,X.__webglColorRenderbuffer[De]);const bt=s.convert(Ve.format,Ve.colorSpace),Ae=s.convert(Ve.type),Oe=y(Ve.internalFormat,bt,Ae,Ve.colorSpace,!0===D.isXRRenderTarget),at=ve(D);i.renderbufferStorageMultisample(i.RENDERBUFFER,at,Oe,D.width,D.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+De,i.RENDERBUFFER,X.__webglColorRenderbuffer[De])}i.bindRenderbuffer(i.RENDERBUFFER,null),D.depthBuffer&&(X.__webglDepthRenderbuffer=i.createRenderbuffer(),se(X.__webglDepthRenderbuffer,D,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ie){t.bindTexture(i.TEXTURE_CUBE_MAP,re.__webglTexture),Ee(i.TEXTURE_CUBE_MAP,T);for(let De=0;De<6;De++)if(T.mipmaps&&T.mipmaps.length>0)for(let Ve=0;Ve<T.mipmaps.length;Ve++)xe(X.__webglFramebuffer[De][Ve],D,T,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ve);else xe(X.__webglFramebuffer[De],D,T,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+De,0);m(T)&&_(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Pe){for(let De=0,Ve=ue.length;De<Ve;De++){const bt=ue[De],Ae=n.get(bt);t.bindTexture(i.TEXTURE_2D,Ae.__webglTexture),Ee(i.TEXTURE_2D,bt),xe(X.__webglFramebuffer,D,bt,i.COLOR_ATTACHMENT0+De,i.TEXTURE_2D,0),m(bt)&&_(i.TEXTURE_2D)}t.unbindTexture()}else{let De=i.TEXTURE_2D;if((D.isWebGL3DRenderTarget||D.isWebGLArrayRenderTarget)&&(De=D.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(De,re.__webglTexture),Ee(De,T),T.mipmaps&&T.mipmaps.length>0)for(let Ve=0;Ve<T.mipmaps.length;Ve++)xe(X.__webglFramebuffer[Ve],D,T,i.COLOR_ATTACHMENT0,De,Ve);else xe(X.__webglFramebuffer,D,T,i.COLOR_ATTACHMENT0,De,0);m(T)&&_(De),t.unbindTexture()}D.depthBuffer&&Ue(D)},this.updateRenderTargetMipmap=function oe(D){const T=D.textures;for(let X=0,re=T.length;X<re;X++){const ue=T[X];if(m(ue)){const ie=M(D),Pe=n.get(ue).__webglTexture;t.bindTexture(ie,Pe),_(ie),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function we(D){if(D.samples>0)if(!1===z(D)){const T=D.textures,X=D.width,re=D.height;let ue=i.COLOR_BUFFER_BIT;const ie=D.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pe=n.get(D),De=T.length>1;if(De)for(let Ve=0;Ve<T.length;Ve++)t.bindFramebuffer(i.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ve,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Pe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ve,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Pe.__webglFramebuffer);for(let Ve=0;Ve<T.length;Ve++){if(D.resolveDepthBuffer&&(D.depthBuffer&&(ue|=i.DEPTH_BUFFER_BIT),D.stencilBuffer&&D.resolveStencilBuffer&&(ue|=i.STENCIL_BUFFER_BIT)),De){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Pe.__webglColorRenderbuffer[Ve]);const bt=n.get(T[Ve]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,bt,0)}i.blitFramebuffer(0,0,X,re,0,0,X,re,ue,i.NEAREST),!0===l&&(le.length=0,O.length=0,le.push(i.COLOR_ATTACHMENT0+Ve),D.depthBuffer&&!1===D.resolveDepthBuffer&&(le.push(ie),O.push(ie),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,O)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,le))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),De)for(let Ve=0;Ve<T.length;Ve++){t.bindFramebuffer(i.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ve,i.RENDERBUFFER,Pe.__webglColorRenderbuffer[Ve]);const bt=n.get(T[Ve]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Pe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ve,i.TEXTURE_2D,bt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Pe.__webglMultisampledFramebuffer)}else D.depthBuffer&&!1===D.resolveDepthBuffer&&l&&i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[D.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Ue,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=z}function xae(i,e){return{convert:function t(n,r=Dl){let s;const o=tn.getTransfer(r);if(n===Na)return i.UNSIGNED_BYTE;if(n===cS)return i.UNSIGNED_SHORT_4_4_4_4;if(n===uS)return i.UNSIGNED_SHORT_5_5_5_1;if(n===G2)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===z2)return i.BYTE;if(n===H2)return i.SHORT;if(n===Gp)return i.UNSIGNED_SHORT;if(n===lS)return i.INT;if(n===Pl)return i.UNSIGNED_INT;if(n===ms)return i.FLOAT;if(n===Wp)return i.HALF_FLOAT;if(n===W2)return i.ALPHA;if(n===j2)return i.RGB;if(n===Xr)return i.RGBA;if(n===$2)return i.LUMINANCE;if(n===X2)return i.LUMINANCE_ALPHA;if(n===Bd)return i.DEPTH_COMPONENT;if(n===Vd)return i.DEPTH_STENCIL;if(n===dS)return i.RED;if(n===qy)return i.RED_INTEGER;if(n===q2)return i.RG;if(n===hS)return i.RG_INTEGER;if(n===fS)return i.RGBA_INTEGER;if(n===Yy||n===Ky||n===Zy||n===Jy)if(o===_n){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===Yy)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ky)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Zy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Jy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===Yy)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ky)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Zy)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Jy)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===pS||n===gS||n===mS||n===_S){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===pS)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===gS)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===mS)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===_S)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===yS||n===vS||n===MS){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===yS||n===vS)return o===_n?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===MS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===bS||n===xS||n===CS||n===wS||n===SS||n===ES||n===TS||n===AS||n===PS||n===DS||n===OS||n===IS||n===RS||n===NS){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===bS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===xS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===CS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===wS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===SS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ES)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===TS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===AS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===PS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===DS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===OS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===IS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===RS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===NS)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Qy||n===LS||n===kS){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Qy)return o===_n?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===LS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===kS)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Y2||n===FS||n===US||n===BS){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===Qy)return s.COMPRESSED_RED_RGTC1_EXT;if(n===FS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===US)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===BS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ud?i.UNSIGNED_INT_24_8:void 0!==i[n]?i[n]:null}}}const Cae={type:"move"};class gT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new $a,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new $a,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new I,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new I),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new $a,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new I,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new I),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const m=t.getJointPose(g,n),_=this._getHandJoint(c,g);null!==m&&(_.matrix.fromArray(m.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=m.radius),_.visible=null!==m}const f=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Cae)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new $a;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Eae{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new Xs;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Wa({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new fi(new fg(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Tae extends Ol{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,h=null,p=null;const g=new Eae,m=t.getContextAttributes();let _=null,M=null;const y=[],v=[],C=new he;let w=null;const S=new wi;S.viewport=new an;const E=new wi;E.viewport=new an;const x=[S,E],b=new sie;let P=null,k=null;function L($){const ge=v.indexOf($.inputSource);if(-1===ge)return;const xe=y[ge];void 0!==xe&&(xe.update($.inputSource,$.frame,c||o),xe.dispatchEvent({type:$.type,data:$.inputSource}))}function W(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",q);for(let $=0;$<y.length;$++){const ge=v[$];null!==ge&&(v[$]=null,y[$].disconnect(ge))}P=null,k=null,g.reset(),e.setRenderTarget(_),h=null,f=null,d=null,r=null,M=null,He.stop(),n.isPresenting=!1,e.setPixelRatio(w),e.setSize(C.width,C.height,!1),n.dispatchEvent({type:"sessionend"})}function q($){for(let ge=0;ge<$.removed.length;ge++){const xe=$.removed[ge],se=v.indexOf(xe);se>=0&&(v[se]=null,y[se].disconnect(xe))}for(let ge=0;ge<$.added.length;ge++){const xe=$.added[ge];let se=v.indexOf(xe);if(-1===se){for(let Ue=0;Ue<y.length;Ue++){if(Ue>=v.length){v.push(xe),se=Ue;break}if(null===v[Ue]){v[Ue]=xe,se=Ue;break}}if(-1===se)break}const Se=y[se];Se&&Se.connect(xe)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let ge=y[$];return void 0===ge&&(ge=new gT,y[$]=ge),ge.getTargetRaySpace()},this.getControllerGrip=function($){let ge=y[$];return void 0===ge&&(ge=new gT,y[$]=ge),ge.getGripSpace()},this.getHand=function($){let ge=y[$];return void 0===ge&&(ge=new gT,y[$]=ge),ge.getHandSpace()},this.setFramebufferScaleFactor=function($){s=$,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){a=$,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function($){c=$},this.getBaseLayer=function(){return null!==f?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var $=Wy(function*(ge){if(r=ge,null!==r){if(_=e.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",W),r.addEventListener("inputsourceschange",q),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),w=e.getPixelRatio(),e.getSize(C),void 0===r.renderState.layers)h=new XRWebGLLayer(r,t,{antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),M=new Fc(h.framebufferWidth,h.framebufferHeight,{format:Xr,type:Na,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil});else{let xe=null,se=null,Se=null;m.depth&&(Se=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=m.stencil?Vd:Bd,se=m.stencil?Ud:Pl);const Ue={colorFormat:t.RGBA8,depthFormat:Se,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(Ue),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),M=new Fc(f.textureWidth,f.textureHeight,{format:Xr,type:Na,depthTexture:new q3(f.textureWidth,f.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===f.ignoreDepthValues})}M.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),He.setContext(r),He.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(ge){return $.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};const N=new I,V=new I;function ee($,ge){null===ge?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(ge.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(null===r)return;let ge=$.near,xe=$.far;null!==g.texture&&(g.depthNear>0&&(ge=g.depthNear),g.depthFar>0&&(xe=g.depthFar)),b.near=E.near=S.near=ge,b.far=E.far=S.far=xe,(P!==b.near||k!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),P=b.near,k=b.far),S.layers.mask=2|$.layers.mask,E.layers.mask=4|$.layers.mask,b.layers.mask=S.layers.mask|E.layers.mask;const se=$.parent,Se=b.cameras;ee(b,se);for(let Ue=0;Ue<Se.length;Ue++)ee(Se[Ue],se);2===Se.length?function B($,ge,xe){N.setFromMatrixPosition(ge.matrixWorld),V.setFromMatrixPosition(xe.matrixWorld);const se=N.distanceTo(V),Se=ge.projectionMatrix.elements,Ue=xe.projectionMatrix.elements,Ge=Se[14]/(Se[10]-1),Je=Se[14]/(Se[10]+1),oe=(Se[9]+1)/Se[5],le=(Se[9]-1)/Se[5],O=(Se[8]-1)/Se[0],we=(Ue[8]+1)/Ue[0],ve=Ge*O,z=Ge*we,Me=se/(-O+we),nt=Me*-O;if(ge.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(nt),$.translateZ(Me),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert(),-1===Se[10])$.projectionMatrix.copy(ge.projectionMatrix),$.projectionMatrixInverse.copy(ge.projectionMatrixInverse);else{const Be=Ge+Me,D=Je+Me;$.projectionMatrix.makePerspective(ve-nt,z+(se-nt),oe*Je/D*Be,le*Je/D*Be,Be,D),$.projectionMatrixInverse.copy($.projectionMatrix).invert()}}(b,S,E):b.projectionMatrix.copy(S.projectionMatrix),function R($,ge,xe){null===xe?$.matrix.copy(ge.matrixWorld):($.matrix.copy(xe.matrixWorld),$.matrix.invert(),$.matrix.multiply(ge.matrixWorld)),$.matrix.decompose($.position,$.quaternion,$.scale),$.updateMatrixWorld(!0),$.projectionMatrix.copy(ge.projectionMatrix),$.projectionMatrixInverse.copy(ge.projectionMatrixInverse),$.isPerspectiveCamera&&($.fov=2*Wd*Math.atan(1/$.projectionMatrix.elements[5]),$.zoom=1)}($,b,se)},this.getCamera=function(){return b},this.getFoveation=function(){if(null!==f||null!==h)return l},this.setFoveation=function($){l=$,null!==f&&(f.fixedFoveation=$),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=$)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(b)};let ae=null;const He=new HU;He.setAnimationLoop(function Ee($,ge){if(u=ge.getViewerPose(c||o),p=ge,null!==u){const xe=u.views;null!==h&&(e.setRenderTargetFramebuffer(M,h.framebuffer),e.setRenderTarget(M));let se=!1;xe.length!==b.cameras.length&&(b.cameras.length=0,se=!0);for(let Ue=0;Ue<xe.length;Ue++){const Ge=xe[Ue];let Je=null;if(null!==h)Je=h.getViewport(Ge);else{const le=d.getViewSubImage(f,Ge);Je=le.viewport,0===Ue&&(e.setRenderTargetTextures(M,le.colorTexture,f.ignoreDepthValues?void 0:le.depthStencilTexture),e.setRenderTarget(M))}let oe=x[Ue];void 0===oe&&(oe=new wi,oe.layers.enable(Ue),oe.viewport=new an,x[Ue]=oe),oe.matrix.fromArray(Ge.transform.matrix),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.projectionMatrix.fromArray(Ge.projectionMatrix),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert(),oe.viewport.set(Je.x,Je.y,Je.width,Je.height),0===Ue&&(b.matrix.copy(oe.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),!0===se&&b.cameras.push(oe)}const Se=r.enabledFeatures;if(Se&&Se.includes("depth-sensing")){const Ue=d.getDepthInformation(xe[0]);Ue&&Ue.isValid&&Ue.texture&&g.init(e,Ue,r.renderState)}}for(let xe=0;xe<y.length;xe++){const se=v[xe],Se=y[xe];null!==se&&void 0!==Se&&Se.update(se,ge,c||o)}ae&&ae($,ge),ge.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ge}),p=null}),this.setAnimationLoop=function($){ae=$},this.dispose=function(){}}}const ru=new Ba,Aae=new ft;function Pae(i,e){function t(m,_){!0===m.matrixAutoUpdate&&m.updateMatrix(),_.value.copy(m.matrix)}function s(m,_){m.opacity.value=_.opacity,_.color&&m.diffuse.value.copy(_.color),_.emissive&&m.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(m.map.value=_.map,t(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.bumpMap&&(m.bumpMap.value=_.bumpMap,t(_.bumpMap,m.bumpMapTransform),m.bumpScale.value=_.bumpScale,_.side===$r&&(m.bumpScale.value*=-1)),_.normalMap&&(m.normalMap.value=_.normalMap,t(_.normalMap,m.normalMapTransform),m.normalScale.value.copy(_.normalScale),_.side===$r&&m.normalScale.value.negate()),_.displacementMap&&(m.displacementMap.value=_.displacementMap,t(_.displacementMap,m.displacementMapTransform),m.displacementScale.value=_.displacementScale,m.displacementBias.value=_.displacementBias),_.emissiveMap&&(m.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,m.emissiveMapTransform)),_.specularMap&&(m.specularMap.value=_.specularMap,t(_.specularMap,m.specularMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest);const M=e.get(_),y=M.envMap,v=M.envMapRotation;y&&(m.envMap.value=y,ru.copy(v),ru.x*=-1,ru.y*=-1,ru.z*=-1,y.isCubeTexture&&!1===y.isRenderTargetTexture&&(ru.y*=-1,ru.z*=-1),m.envMapRotation.value.setFromMatrix4(Aae.makeRotationFromEuler(ru)),m.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,m.reflectivity.value=_.reflectivity,m.ior.value=_.ior,m.refractionRatio.value=_.refractionRatio),_.lightMap&&(m.lightMap.value=_.lightMap,m.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,m.lightMapTransform)),_.aoMap&&(m.aoMap.value=_.aoMap,m.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function n(m,_){_.color.getRGB(m.fogColor.value,x3(i)),_.isFog?(m.fogNear.value=_.near,m.fogFar.value=_.far):_.isFogExp2&&(m.fogDensity.value=_.density)},refreshMaterialUniforms:function r(m,_,M,y,v){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(m,_):_.isMeshToonMaterial?(s(m,_),function d(m,_){_.gradientMap&&(m.gradientMap.value=_.gradientMap)}(m,_)):_.isMeshPhongMaterial?(s(m,_),function u(m,_){m.specular.value.copy(_.specular),m.shininess.value=Math.max(_.shininess,1e-4)}(m,_)):_.isMeshStandardMaterial?(s(m,_),function f(m,_){m.metalness.value=_.metalness,_.metalnessMap&&(m.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,m.metalnessMapTransform)),m.roughness.value=_.roughness,_.roughnessMap&&(m.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,m.roughnessMapTransform)),_.envMap&&(m.envMapIntensity.value=_.envMapIntensity)}(m,_),_.isMeshPhysicalMaterial&&function h(m,_,M){m.ior.value=_.ior,_.sheen>0&&(m.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),m.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(m.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,m.sheenColorMapTransform)),_.sheenRoughnessMap&&(m.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,m.sheenRoughnessMapTransform))),_.clearcoat>0&&(m.clearcoat.value=_.clearcoat,m.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(m.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,m.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(m.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===$r&&m.clearcoatNormalScale.value.negate())),_.dispersion>0&&(m.dispersion.value=_.dispersion),_.iridescence>0&&(m.iridescence.value=_.iridescence,m.iridescenceIOR.value=_.iridescenceIOR,m.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(m.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,m.iridescenceMapTransform)),_.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),_.transmission>0&&(m.transmission.value=_.transmission,m.transmissionSamplerMap.value=M.texture,m.transmissionSamplerSize.value.set(M.width,M.height),_.transmissionMap&&(m.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,m.transmissionMapTransform)),m.thickness.value=_.thickness,_.thicknessMap&&(m.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=_.attenuationDistance,m.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(m.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(m.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=_.specularIntensity,m.specularColor.value.copy(_.specularColor),_.specularColorMap&&(m.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,m.specularColorMapTransform)),_.specularIntensityMap&&(m.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,m.specularIntensityMapTransform))}(m,_,v)):_.isMeshMatcapMaterial?(s(m,_),function p(m,_){_.matcap&&(m.matcap.value=_.matcap)}(m,_)):_.isMeshDepthMaterial?s(m,_):_.isMeshDistanceMaterial?(s(m,_),function g(m,_){const M=e.get(_).light;m.referencePosition.value.setFromMatrixPosition(M.matrixWorld),m.nearDistance.value=M.shadow.camera.near,m.farDistance.value=M.shadow.camera.far}(m,_)):_.isMeshNormalMaterial?s(m,_):_.isLineBasicMaterial?(function o(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,_.map&&(m.map.value=_.map,t(_.map,m.mapTransform))}(m,_),_.isLineDashedMaterial&&function a(m,_){m.dashSize.value=_.dashSize,m.totalSize.value=_.dashSize+_.gapSize,m.scale.value=_.scale}(m,_)):_.isPointsMaterial?function l(m,_,M,y){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.size.value=_.size*M,m.scale.value=.5*y,_.map&&(m.map.value=_.map,t(_.map,m.uvTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_,M,y):_.isSpriteMaterial?function c(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.rotation.value=_.rotation,_.map&&(m.map.value=_.map,t(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_):_.isShadowMaterial?(m.color.value.copy(_.color),m.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function Dae(i,e,t,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function h(M,y,v,C){const w=M.value,S=y+"_"+v;if(void 0===C[S])return C[S]="number"==typeof w||"boolean"==typeof w?w:w.clone(),!0;{const E=C[S];if("number"==typeof w||"boolean"==typeof w){if(E!==w)return C[S]=w,!0}else if(!1===E.equals(w))return E.copy(w),!0}return!1}function g(M){const y={boundary:0,storage:0};return"number"==typeof M||"boolean"==typeof M?(y.boundary=4,y.storage=4):M.isVector2?(y.boundary=8,y.storage=8):M.isVector3||M.isColor?(y.boundary=16,y.storage=12):M.isVector4?(y.boundary=16,y.storage=16):M.isMatrix3?(y.boundary=48,y.storage=48):M.isMatrix4?(y.boundary=64,y.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),y}function m(M){const y=M.target;y.removeEventListener("dispose",m);const v=o.indexOf(y.__bindingPointIndex);o.splice(v,1),i.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}return{bind:function l(M,y){n.uniformBlockBinding(M,y.program)},update:function c(M,y){let v=r[M.id];void 0===v&&(function p(M){const y=M.uniforms;let v=0;for(let S=0,E=y.length;S<E;S++){const x=Array.isArray(y[S])?y[S]:[y[S]];for(let b=0,P=x.length;b<P;b++){const k=x[b],L=Array.isArray(k.value)?k.value:[k.value];for(let W=0,q=L.length;W<q;W++){const V=g(L[W]),B=v%16,ee=B%V.boundary,R=B+ee;v+=ee,0!==R&&16-R<V.storage&&(v+=16-R),k.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=v,v+=V.storage}}}const w=v%16;w>0&&(v+=16-w),M.__size=v,M.__cache={}}(M),v=function u(M){const y=function d(){for(let M=0;M<a;M++)if(-1===o.indexOf(M))return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=y;const v=i.createBuffer(),C=M.__size,w=M.usage;return i.bindBuffer(i.UNIFORM_BUFFER,v),i.bufferData(i.UNIFORM_BUFFER,C,w),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,y,v),v}(M),r[M.id]=v,M.addEventListener("dispose",m)),n.updateUBOMapping(M,y.program);const w=e.render.frame;s[M.id]!==w&&(function f(M){const v=M.uniforms,C=M.__cache;i.bindBuffer(i.UNIFORM_BUFFER,r[M.id]);for(let w=0,S=v.length;w<S;w++){const E=Array.isArray(v[w])?v[w]:[v[w]];for(let x=0,b=E.length;x<b;x++){const P=E[x];if(!0===h(P,w,x,C)){const k=P.__offset,L=Array.isArray(P.value)?P.value:[P.value];let W=0;for(let q=0;q<L.length;q++){const N=L[q],V=g(N);"number"==typeof N||"boolean"==typeof N?(P.__data[0]=N,i.bufferSubData(i.UNIFORM_BUFFER,k+W,P.__data)):N.isMatrix3?(P.__data[0]=N.elements[0],P.__data[1]=N.elements[1],P.__data[2]=N.elements[2],P.__data[3]=0,P.__data[4]=N.elements[3],P.__data[5]=N.elements[4],P.__data[6]=N.elements[5],P.__data[7]=0,P.__data[8]=N.elements[6],P.__data[9]=N.elements[7],P.__data[10]=N.elements[8],P.__data[11]=0):(N.toArray(P.__data,W),W+=V.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,k,P.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}(M),s[M.id]=w)},dispose:function _(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}}}class _B{constructor(e={}){const{canvas:t=cte(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const p=new Uint32Array(4),g=new Int32Array(4);let m=null,_=null;const M=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Fi,this.toneMapping=Tl,this.toneMappingExposure=1;const v=this;let C=!1,w=0,S=0,E=null,x=-1,b=null;const P=new an,k=new an;let L=null;const W=new Fe(0);let q=0,N=t.width,V=t.height,B=1,ee=null,R=null;const ae=new an(0,0,N,V),Ee=new an(0,0,N,V);let He=!1;const $=new Pv;let ge=!1,xe=!1;const se=new ft,Se=new ft,Ue=new I,Ge=new an,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let oe=!1;function le(){return null===E?B:1}let ve,z,Me,nt,Be,D,T,X,re,ue,ie,Pe,De,Ve,bt,Ae,Oe,at,lt,$e,St,mt,Ht,F,O=n;function we(A,G){return t.getContext(A,G)}try{const A={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r171"),t.addEventListener("webglcontextlost",de,!1),t.addEventListener("webglcontextrestored",ke,!1),t.addEventListener("webglcontextcreationerror",ze,!1),null===O){const G="webgl2";if(O=we(G,A),null===O)throw we(G)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}function Ie(){ve=new Vse(O),ve.init(),mt=new xae(O,ve),z=new Nse(O,ve,e,mt),Me=new Mae(O,ve),z.reverseDepthBuffer&&f&&Me.buffers.depth.setReversed(!0),nt=new Gse(O),Be=new aae,D=new bae(O,ve,Me,Be,z,mt,nt),T=new kse(v),X=new Bse(v),re=new Die(O),Ht=new Ise(O,re),ue=new zse(O,re,nt,Ht),ie=new jse(O,ue,re,nt),lt=new Wse(O,z,D),Ae=new Lse(Be),Pe=new oae(v,T,X,ve,z,Ht,Ae),De=new Pae(v,Be),Ve=new cae,bt=new gae(ve),at=new Ose(v,T,X,Me,ie,h,l),Oe=new yae(v,ie,z),F=new Dae(O,nt,z,Me),$e=new Rse(O,ve,nt),St=new Hse(O,ve,nt),nt.programs=Pe.programs,v.capabilities=z,v.extensions=ve,v.properties=Be,v.renderLists=Ve,v.shadowMap=Oe,v.state=Me,v.info=nt}Ie();const J=new Tae(v,O);function de(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const A=nt.autoReset,G=Oe.enabled,Z=Oe.autoUpdate,Q=Oe.needsUpdate,j=Oe.type;Ie(),nt.autoReset=A,Oe.enabled=G,Oe.autoUpdate=Z,Oe.needsUpdate=Q,Oe.type=j}function ze(A){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",A.statusMessage)}function Ce(A){const G=A.target;G.removeEventListener("dispose",Ce),function U(A){(function fe(A){const G=Be.get(A).programs;void 0!==G&&(G.forEach(function(Z){Pe.releaseProgram(Z)}),A.isShaderMaterial&&Pe.releaseShaderCache(A))})(A),Be.remove(A)}(G)}function H(A,G,Z){!0===A.transparent&&A.side===Ko&&!1===A.forceSinglePass?(A.side=$r,A.needsUpdate=!0,Qt(A,G,Z),A.side=Ra,A.needsUpdate=!0,Qt(A,G,Z),A.side=Ko):Qt(A,G,Z)}this.xr=J,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){const A=ve.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){const A=ve.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(A){void 0!==A&&(B=A,this.setSize(N,V,!1))},this.getSize=function(A){return A.set(N,V)},this.setSize=function(A,G,Z=!0){J.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=A,V=G,t.width=Math.floor(A*B),t.height=Math.floor(G*B),!0===Z&&(t.style.width=A+"px",t.style.height=G+"px"),this.setViewport(0,0,A,G))},this.getDrawingBufferSize=function(A){return A.set(N*B,V*B).floor()},this.setDrawingBufferSize=function(A,G,Z){N=A,V=G,B=Z,t.width=Math.floor(A*Z),t.height=Math.floor(G*Z),this.setViewport(0,0,A,G)},this.getCurrentViewport=function(A){return A.copy(P)},this.getViewport=function(A){return A.copy(ae)},this.setViewport=function(A,G,Z,Q){A.isVector4?ae.set(A.x,A.y,A.z,A.w):ae.set(A,G,Z,Q),Me.viewport(P.copy(ae).multiplyScalar(B).round())},this.getScissor=function(A){return A.copy(Ee)},this.setScissor=function(A,G,Z,Q){A.isVector4?Ee.set(A.x,A.y,A.z,A.w):Ee.set(A,G,Z,Q),Me.scissor(k.copy(Ee).multiplyScalar(B).round())},this.getScissorTest=function(){return He},this.setScissorTest=function(A){Me.setScissorTest(He=A)},this.setOpaqueSort=function(A){ee=A},this.setTransparentSort=function(A){R=A},this.getClearColor=function(A){return A.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(A=!0,G=!0,Z=!0){let Q=0;if(A){let j=!1;if(null!==E){const ye=E.texture.format;j=ye===fS||ye===hS||ye===qy}if(j){const ye=E.texture.type,Ne=ye===Na||ye===Pl||ye===Gp||ye===Ud||ye===cS||ye===uS,Ke=at.getClearColor(),Qe=at.getClearAlpha(),_t=Ke.r,ht=Ke.g,ut=Ke.b;Ne?(p[0]=_t,p[1]=ht,p[2]=ut,p[3]=Qe,O.clearBufferuiv(O.COLOR,0,p)):(g[0]=_t,g[1]=ht,g[2]=ut,g[3]=Qe,O.clearBufferiv(O.COLOR,0,g))}else Q|=O.COLOR_BUFFER_BIT}G&&(Q|=O.DEPTH_BUFFER_BIT),Z&&(Q|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(Q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",de,!1),t.removeEventListener("webglcontextrestored",ke,!1),t.removeEventListener("webglcontextcreationerror",ze,!1),at.dispose(),Ve.dispose(),bt.dispose(),Be.dispose(),T.dispose(),X.dispose(),ie.dispose(),Ht.dispose(),F.dispose(),Pe.dispose(),J.dispose(),J.removeEventListener("sessionstart",ne),J.removeEventListener("sessionend",Re),me.stop()},this.renderBufferDirect=function(A,G,Z,Q,j,ye){null===G&&(G=Je);const Ne=j.isMesh&&j.matrixWorld.determinant()<0,Ke=function un(A,G,Z,Q,j){!0!==G.isScene&&(G=Je),D.resetTextureUnits();const ye=G.fog,Ke=null===E?v.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:Cr,Qe=(Q.isMeshStandardMaterial?X:T).get(Q.envMap||(Q.isMeshStandardMaterial?G.environment:null)),_t=!0===Q.vertexColors&&!!Z.attributes.color&&4===Z.attributes.color.itemSize,ht=!!Z.attributes.tangent&&(!!Q.normalMap||Q.anisotropy>0),ut=!!Z.morphAttributes.position,Wt=!!Z.morphAttributes.normal,sn=!!Z.morphAttributes.color;let Wn=Tl;Q.toneMapped&&(null===E||!0===E.isXRRenderTarget)&&(Wn=v.toneMapping);const Yn=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,ln=void 0!==Yn?Yn.length:0,yt=Be.get(Q),Zi=_.state.lights;!0!==ge||!0!==xe&&A===b||Ae.setState(Q,A,A===b&&Q.id===x);let gn=!1;Q.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==Zi.state.version||yt.outputColorSpace!==Ke||j.isBatchedMesh&&!1===yt.batching||!j.isBatchedMesh&&!0===yt.batching||j.isBatchedMesh&&!0===yt.batchingColor&&null===j.colorTexture||j.isBatchedMesh&&!1===yt.batchingColor&&null!==j.colorTexture||j.isInstancedMesh&&!1===yt.instancing||!j.isInstancedMesh&&!0===yt.instancing||j.isSkinnedMesh&&!1===yt.skinning||!j.isSkinnedMesh&&!0===yt.skinning||j.isInstancedMesh&&!0===yt.instancingColor&&null===j.instanceColor||j.isInstancedMesh&&!1===yt.instancingColor&&null!==j.instanceColor||j.isInstancedMesh&&!0===yt.instancingMorph&&null===j.morphTexture||j.isInstancedMesh&&!1===yt.instancingMorph&&null!==j.morphTexture||yt.envMap!==Qe||!0===Q.fog&&yt.fog!==ye||void 0!==yt.numClippingPlanes&&(yt.numClippingPlanes!==Ae.numPlanes||yt.numIntersection!==Ae.numIntersection)||yt.vertexAlphas!==_t||yt.vertexTangents!==ht||yt.morphTargets!==ut||yt.morphNormals!==Wt||yt.morphColors!==sn||yt.toneMapping!==Wn||yt.morphTargetsCount!==ln)&&(gn=!0):(gn=!0,yt.__version=Q.version);let Ro=yt.currentProgram;!0===gn&&(Ro=Qt(Q,G,j));let rf=!1,Is=!1,um=!1;const Fn=Ro.getUniforms(),so=yt.uniforms;if(Me.useProgram(Ro.program)&&(rf=!0,Is=!0,um=!0),Q.id!==x&&(x=Q.id,Is=!0),rf||b!==A){Me.buffers.depth.getReversed()?(se.copy(A.projectionMatrix),function dte(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(se),function hte(i){const e=i.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(se),Fn.setValue(O,"projectionMatrix",se)):Fn.setValue(O,"projectionMatrix",A.projectionMatrix),Fn.setValue(O,"viewMatrix",A.matrixWorldInverse);const is=Fn.map.cameraPosition;void 0!==is&&is.setValue(O,Ue.setFromMatrixPosition(A.matrixWorld)),z.logarithmicDepthBuffer&&Fn.setValue(O,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial)&&Fn.setValue(O,"isOrthographic",!0===A.isOrthographicCamera),b!==A&&(b=A,Is=!0,um=!0)}if(j.isSkinnedMesh){Fn.setOptional(O,j,"bindMatrix"),Fn.setOptional(O,j,"bindMatrixInverse");const Fr=j.skeleton;Fr&&(null===Fr.boneTexture&&Fr.computeBoneTexture(),Fn.setValue(O,"boneTexture",Fr.boneTexture,D))}j.isBatchedMesh&&(Fn.setOptional(O,j,"batchingTexture"),Fn.setValue(O,"batchingTexture",j._matricesTexture,D),Fn.setOptional(O,j,"batchingIdTexture"),Fn.setValue(O,"batchingIdTexture",j._indirectTexture,D),Fn.setOptional(O,j,"batchingColorTexture"),null!==j._colorsTexture&&Fn.setValue(O,"batchingColorTexture",j._colorsTexture,D));const oo=Z.morphAttributes;if((void 0!==oo.position||void 0!==oo.normal||void 0!==oo.color)&&lt.update(j,Z,Ro),(Is||yt.receiveShadow!==j.receiveShadow)&&(yt.receiveShadow=j.receiveShadow,Fn.setValue(O,"receiveShadow",j.receiveShadow)),Q.isMeshGouraudMaterial&&null!==Q.envMap&&(so.envMap.value=Qe,so.flipEnvMap.value=Qe.isCubeTexture&&!1===Qe.isRenderTargetTexture?-1:1),Q.isMeshStandardMaterial&&null===Q.envMap&&null!==G.environment&&(so.envMapIntensity.value=G.environmentIntensity),Is&&(Fn.setValue(O,"toneMappingExposure",v.toneMappingExposure),yt.needsLights&&function Et(A,G){A.ambientLightColor.needsUpdate=G,A.lightProbe.needsUpdate=G,A.directionalLights.needsUpdate=G,A.directionalLightShadows.needsUpdate=G,A.pointLights.needsUpdate=G,A.pointLightShadows.needsUpdate=G,A.spotLights.needsUpdate=G,A.spotLightShadows.needsUpdate=G,A.rectAreaLights.needsUpdate=G,A.hemisphereLights.needsUpdate=G}(so,um),ye&&!0===Q.fog&&De.refreshFogUniforms(so,ye),De.refreshMaterialUniforms(so,Q,B,V,_.state.transmissionRenderTarget[A.id]),d0.upload(O,Gt(yt),so,D)),Q.isShaderMaterial&&!0===Q.uniformsNeedUpdate&&(d0.upload(O,Gt(yt),so,D),Q.uniformsNeedUpdate=!1),Q.isSpriteMaterial&&Fn.setValue(O,"center",j.center),Fn.setValue(O,"modelViewMatrix",j.modelViewMatrix),Fn.setValue(O,"normalMatrix",j.normalMatrix),Fn.setValue(O,"modelMatrix",j.matrixWorld),Q.isShaderMaterial||Q.isRawShaderMaterial){const Fr=Q.uniformsGroups;for(let is=0,JA=Fr.length;is<JA;is++){const Ou=Fr[is];F.update(Ou,Ro),F.bind(Ou,Ro)}}return Ro}(A,G,Z,Q,j);Me.setMaterial(Q,Ne);let Qe=Z.index,_t=1;if(!0===Q.wireframe){if(Qe=ue.getWireframeAttribute(Z),void 0===Qe)return;_t=2}const ht=Z.drawRange,ut=Z.attributes.position;let Wt=ht.start*_t,sn=(ht.start+ht.count)*_t;null!==ye&&(Wt=Math.max(Wt,ye.start*_t),sn=Math.min(sn,(ye.start+ye.count)*_t)),null!==Qe?(Wt=Math.max(Wt,0),sn=Math.min(sn,Qe.count)):null!=ut&&(Wt=Math.max(Wt,0),sn=Math.min(sn,ut.count));const Wn=sn-Wt;if(Wn<0||Wn===1/0)return;Ht.setup(j,Q,Ke,Z,Qe);let Yn,ln=$e;if(null!==Qe&&(Yn=re.get(Qe),ln=St,ln.setIndex(Yn)),j.isMesh)!0===Q.wireframe?(Me.setLineWidth(Q.wireframeLinewidth*le()),ln.setMode(O.LINES)):ln.setMode(O.TRIANGLES);else if(j.isLine){let yt=Q.linewidth;void 0===yt&&(yt=1),Me.setLineWidth(yt*le()),ln.setMode(j.isLineSegments?O.LINES:j.isLineLoop?O.LINE_LOOP:O.LINE_STRIP)}else j.isPoints?ln.setMode(O.POINTS):j.isSprite&&ln.setMode(O.TRIANGLES);if(j.isBatchedMesh)if(null!==j._multiDrawInstances)ln.renderMultiDrawInstances(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount,j._multiDrawInstances);else if(ve.get("WEBGL_multi_draw"))ln.renderMultiDraw(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount);else{const yt=j._multiDrawStarts,Zi=j._multiDrawCounts,gn=j._multiDrawCount,Ro=Qe?re.get(Qe).bytesPerElement:1,rf=Be.get(Q).currentProgram.getUniforms();for(let Is=0;Is<gn;Is++)rf.setValue(O,"_gl_DrawID",Is),ln.render(yt[Is]/Ro,Zi[Is])}else if(j.isInstancedMesh)ln.renderInstances(Wt,Wn,j.count);else if(Z.isInstancedBufferGeometry){const Zi=Math.min(Z.instanceCount,void 0!==Z._maxInstanceCount?Z._maxInstanceCount:1/0);ln.renderInstances(Wt,Wn,Zi)}else ln.render(Wt,Wn)},this.compile=function(A,G,Z=null){null===Z&&(Z=A),_=bt.get(Z),_.init(G),y.push(_),Z.traverseVisible(function(j){j.isLight&&j.layers.test(G.layers)&&(_.pushLight(j),j.castShadow&&_.pushShadow(j))}),A!==Z&&A.traverseVisible(function(j){j.isLight&&j.layers.test(G.layers)&&(_.pushLight(j),j.castShadow&&_.pushShadow(j))}),_.setupLights();const Q=new Set;return A.traverse(function(j){if(!(j.isMesh||j.isPoints||j.isLine||j.isSprite))return;const ye=j.material;if(ye)if(Array.isArray(ye))for(let Ne=0;Ne<ye.length;Ne++){const Ke=ye[Ne];H(Ke,Z,j),Q.add(Ke)}else H(ye,Z,j),Q.add(ye)}),y.pop(),_=null,Q},this.compileAsync=function(A,G,Z=null){const Q=this.compile(A,G,Z);return new Promise(j=>{function ye(){Q.forEach(function(Ne){Be.get(Ne).currentProgram.isReady()&&Q.delete(Ne)}),0!==Q.size?setTimeout(ye,10):j(A)}null!==ve.get("KHR_parallel_shader_compile")?ye():setTimeout(ye,10)})};let K=null;function ne(){me.stop()}function Re(){me.start()}const me=new HU;function We(A,G,Z,Q){if(!1===A.visible)return;if(A.layers.test(G.layers))if(A.isGroup)Z=A.renderOrder;else if(A.isLOD)!0===A.autoUpdate&&A.update(G);else if(A.isLight)_.pushLight(A),A.castShadow&&_.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||$.intersectsSprite(A)){Q&&Ge.setFromMatrixPosition(A.matrixWorld).applyMatrix4(Se);const Ne=ie.update(A),Ke=A.material;Ke.visible&&m.push(A,Ne,Ke,Z,Ge.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(!A.frustumCulled||$.intersectsObject(A))){const Ne=ie.update(A),Ke=A.material;if(Q&&(void 0!==A.boundingSphere?(null===A.boundingSphere&&A.computeBoundingSphere(),Ge.copy(A.boundingSphere.center)):(null===Ne.boundingSphere&&Ne.computeBoundingSphere(),Ge.copy(Ne.boundingSphere.center)),Ge.applyMatrix4(A.matrixWorld).applyMatrix4(Se)),Array.isArray(Ke)){const Qe=Ne.groups;for(let _t=0,ht=Qe.length;_t<ht;_t++){const ut=Qe[_t],Wt=Ke[ut.materialIndex];Wt&&Wt.visible&&m.push(A,Ne,Wt,Z,Ge.z,ut)}}else Ke.visible&&m.push(A,Ne,Ke,Z,Ge.z,null)}const ye=A.children;for(let Ne=0,Ke=ye.length;Ne<Ke;Ne++)We(ye[Ne],G,Z,Q)}function dt(A,G,Z,Q){const j=A.opaque,ye=A.transmissive,Ne=A.transparent;_.setupLightsView(Z),!0===ge&&Ae.setGlobalState(v.clippingPlanes,Z),Q&&Me.viewport(P.copy(Q)),j.length>0&&wt(j,G,Z),ye.length>0&&wt(ye,G,Z),Ne.length>0&&wt(Ne,G,Z),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function Ze(A,G,Z,Q){if(null!==(!0===Z.isScene?Z.overrideMaterial:null))return;void 0===_.state.transmissionRenderTarget[Q.id]&&(_.state.transmissionRenderTarget[Q.id]=new Fc(1,1,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")||ve.has("EXT_color_buffer_float")?Wp:Na,minFilter:bo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:tn.workingColorSpace}));const ye=_.state.transmissionRenderTarget[Q.id],Ne=Q.viewport||P;ye.setSize(Ne.z,Ne.w);const Ke=v.getRenderTarget();v.setRenderTarget(ye),v.getClearColor(W),q=v.getClearAlpha(),q<1&&v.setClearColor(16777215,.5),v.clear(),oe&&at.render(Z);const Qe=v.toneMapping;v.toneMapping=Tl;const _t=Q.viewport;if(void 0!==Q.viewport&&(Q.viewport=void 0),_.setupLightsView(Q),!0===ge&&Ae.setGlobalState(v.clippingPlanes,Q),wt(A,Z,Q),D.updateMultisampleRenderTarget(ye),D.updateRenderTargetMipmap(ye),!1===ve.has("WEBGL_multisampled_render_to_texture")){let ht=!1;for(let ut=0,Wt=G.length;ut<Wt;ut++){const sn=G[ut],Wn=sn.object,Yn=sn.geometry,ln=sn.material,yt=sn.group;if(ln.side===Ko&&Wn.layers.test(Q.layers)){const Zi=ln.side;ln.side=$r,ln.needsUpdate=!0,en(Wn,Z,Q,Yn,ln,yt),ln.side=Zi,ln.needsUpdate=!0,ht=!0}}!0===ht&&(D.updateMultisampleRenderTarget(ye),D.updateRenderTargetMipmap(ye))}v.setRenderTarget(Ke),v.setClearColor(W,q),void 0!==_t&&(Q.viewport=_t),v.toneMapping=Qe}function wt(A,G,Z){const Q=!0===G.isScene?G.overrideMaterial:null;for(let j=0,ye=A.length;j<ye;j++){const Ne=A[j],Ke=Ne.object,Qe=Ne.geometry,_t=null===Q?Ne.material:Q,ht=Ne.group;Ke.layers.test(Z.layers)&&en(Ke,G,Z,Qe,_t,ht)}}function en(A,G,Z,Q,j,ye){A.onBeforeRender(v,G,Z,Q,j,ye),A.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),j.onBeforeRender(v,G,Z,Q,A,ye),!0===j.transparent&&j.side===Ko&&!1===j.forceSinglePass?(j.side=$r,j.needsUpdate=!0,v.renderBufferDirect(Z,G,Q,j,A,ye),j.side=Ra,j.needsUpdate=!0,v.renderBufferDirect(Z,G,Q,j,A,ye),j.side=Ko):v.renderBufferDirect(Z,G,Q,j,A,ye),A.onAfterRender(v,G,Z,Q,j,ye)}function Qt(A,G,Z){!0!==G.isScene&&(G=Je);const Q=Be.get(A),j=_.state.lights,Ne=j.state.version,Ke=Pe.getParameters(A,j.state,_.state.shadowsArray,G,Z),Qe=Pe.getProgramCacheKey(Ke);let _t=Q.programs;Q.environment=A.isMeshStandardMaterial?G.environment:null,Q.fog=G.fog,Q.envMap=(A.isMeshStandardMaterial?X:T).get(A.envMap||Q.environment),Q.envMapRotation=null!==Q.environment&&null===A.envMap?G.environmentRotation:A.envMapRotation,void 0===_t&&(A.addEventListener("dispose",Ce),_t=new Map,Q.programs=_t);let ht=_t.get(Qe);if(void 0!==ht){if(Q.currentProgram===ht&&Q.lightsStateVersion===Ne)return qt(A,Ke),ht}else Ke.uniforms=Pe.getUniforms(A),A.onBeforeCompile(Ke,v),ht=Pe.acquireProgram(Ke,Qe),_t.set(Qe,ht),Q.uniforms=Ke.uniforms;const ut=Q.uniforms;return(!A.isShaderMaterial&&!A.isRawShaderMaterial||!0===A.clipping)&&(ut.clippingPlanes=Ae.uniform),qt(A,Ke),Q.needsLights=function Oi(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&!0===A.lights}(A),Q.lightsStateVersion=Ne,Q.needsLights&&(ut.ambientLightColor.value=j.state.ambient,ut.lightProbe.value=j.state.probe,ut.directionalLights.value=j.state.directional,ut.directionalLightShadows.value=j.state.directionalShadow,ut.spotLights.value=j.state.spot,ut.spotLightShadows.value=j.state.spotShadow,ut.rectAreaLights.value=j.state.rectArea,ut.ltc_1.value=j.state.rectAreaLTC1,ut.ltc_2.value=j.state.rectAreaLTC2,ut.pointLights.value=j.state.point,ut.pointLightShadows.value=j.state.pointShadow,ut.hemisphereLights.value=j.state.hemi,ut.directionalShadowMap.value=j.state.directionalShadowMap,ut.directionalShadowMatrix.value=j.state.directionalShadowMatrix,ut.spotShadowMap.value=j.state.spotShadowMap,ut.spotLightMatrix.value=j.state.spotLightMatrix,ut.spotLightMap.value=j.state.spotLightMap,ut.pointShadowMap.value=j.state.pointShadowMap,ut.pointShadowMatrix.value=j.state.pointShadowMatrix),Q.currentProgram=ht,Q.uniformsList=null,ht}function Gt(A){if(null===A.uniformsList){const G=A.currentProgram.getUniforms();A.uniformsList=d0.seqWithValue(G.seq,A.uniforms)}return A.uniformsList}function qt(A,G){const Z=Be.get(A);Z.outputColorSpace=G.outputColorSpace,Z.batching=G.batching,Z.batchingColor=G.batchingColor,Z.instancing=G.instancing,Z.instancingColor=G.instancingColor,Z.instancingMorph=G.instancingMorph,Z.skinning=G.skinning,Z.morphTargets=G.morphTargets,Z.morphNormals=G.morphNormals,Z.morphColors=G.morphColors,Z.morphTargetsCount=G.morphTargetsCount,Z.numClippingPlanes=G.numClippingPlanes,Z.numIntersection=G.numClipIntersection,Z.vertexAlphas=G.vertexAlphas,Z.vertexTangents=G.vertexTangents,Z.toneMapping=G.toneMapping}me.setAnimationLoop(function _e(A){K&&K(A)}),typeof self<"u"&&me.setContext(self),this.setAnimationLoop=function(A){K=A,J.setAnimationLoop(A),null===A?me.stop():me.start()},J.addEventListener("sessionstart",ne),J.addEventListener("sessionend",Re),this.render=function(A,G){if(void 0!==G&&!0!==G.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===C)return;if(!0===A.matrixWorldAutoUpdate&&A.updateMatrixWorld(),null===G.parent&&!0===G.matrixWorldAutoUpdate&&G.updateMatrixWorld(),!0===J.enabled&&!0===J.isPresenting&&(!0===J.cameraAutoUpdate&&J.updateCamera(G),G=J.getCamera()),!0===A.isScene&&A.onBeforeRender(v,A,G,E),_=bt.get(A,y.length),_.init(G),y.push(_),Se.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),$.setFromProjectionMatrix(Se),xe=this.localClippingEnabled,ge=Ae.init(this.clippingPlanes,xe),m=Ve.get(A,M.length),m.init(),M.push(m),!0===J.enabled&&!0===J.isPresenting){const ye=v.xr.getDepthSensingMesh();null!==ye&&We(ye,G,-1/0,v.sortObjects)}We(A,G,0,v.sortObjects),m.finish(),!0===v.sortObjects&&m.sort(ee,R),oe=!1===J.enabled||!1===J.isPresenting||!1===J.hasDepthSensing(),oe&&at.addToRenderList(m,A),this.info.render.frame++,!0===ge&&Ae.beginShadows(),Oe.render(_.state.shadowsArray,A,G),!0===ge&&Ae.endShadows(),!0===this.info.autoReset&&this.info.reset();const Q=m.opaque,j=m.transmissive;if(_.setupLights(),G.isArrayCamera){const ye=G.cameras;if(j.length>0)for(let Ne=0,Ke=ye.length;Ne<Ke;Ne++)Ze(Q,j,A,ye[Ne]);oe&&at.render(A);for(let Ne=0,Ke=ye.length;Ne<Ke;Ne++){const Qe=ye[Ne];dt(m,A,Qe,Qe.viewport)}}else j.length>0&&Ze(Q,j,A,G),oe&&at.render(A),dt(m,A,G);null!==E&&(D.updateMultisampleRenderTarget(E),D.updateRenderTargetMipmap(E)),!0===A.isScene&&A.onAfterRender(v,A,G),Ht.resetDefaultState(),x=-1,b=null,y.pop(),y.length>0?(_=y[y.length-1],!0===ge&&Ae.setGlobalState(v.clippingPlanes,_.state.camera)):_=null,M.pop(),m=M.length>0?M[M.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(A,G,Z){Be.get(A.texture).__webglTexture=G,Be.get(A.depthTexture).__webglTexture=Z;const Q=Be.get(A);Q.__hasExternalTextures=!0,Q.__autoAllocateDepthBuffer=void 0===Z,Q.__autoAllocateDepthBuffer||!0===ve.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Q.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(A,G){const Z=Be.get(A);Z.__webglFramebuffer=G,Z.__useDefaultFramebuffer=void 0===G},this.setRenderTarget=function(A,G=0,Z=0){E=A,w=G,S=Z;let Q=!0,j=null,ye=!1,Ne=!1;if(A){const Qe=Be.get(A);if(void 0!==Qe.__useDefaultFramebuffer)Me.bindFramebuffer(O.FRAMEBUFFER,null),Q=!1;else if(void 0===Qe.__webglFramebuffer)D.setupRenderTarget(A);else if(Qe.__hasExternalTextures)D.rebindTextures(A,Be.get(A.texture).__webglTexture,Be.get(A.depthTexture).__webglTexture);else if(A.depthBuffer){const ut=A.depthTexture;if(Qe.__boundDepthTexture!==ut){if(null!==ut&&Be.has(ut)&&(A.width!==ut.image.width||A.height!==ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");D.setupDepthRenderbuffer(A)}}const _t=A.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(Ne=!0);const ht=Be.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(j=Array.isArray(ht[G])?ht[G][Z]:ht[G],ye=!0):j=A.samples>0&&!1===D.useMultisampledRTT(A)?Be.get(A).__webglMultisampledFramebuffer:Array.isArray(ht)?ht[Z]:ht,P.copy(A.viewport),k.copy(A.scissor),L=A.scissorTest}else P.copy(ae).multiplyScalar(B).floor(),k.copy(Ee).multiplyScalar(B).floor(),L=He;if(Me.bindFramebuffer(O.FRAMEBUFFER,j)&&Q&&Me.drawBuffers(A,j),Me.viewport(P),Me.scissor(k),Me.setScissorTest(L),ye){const Qe=Be.get(A.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+G,Qe.__webglTexture,Z)}else if(Ne){const Qe=Be.get(A.texture);O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,Qe.__webglTexture,Z||0,G||0)}x=-1},this.readRenderTargetPixels=function(A,G,Z,Q,j,ye,Ne){if(!A||!A.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ke=Be.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&void 0!==Ne&&(Ke=Ke[Ne]),Ke){Me.bindFramebuffer(O.FRAMEBUFFER,Ke);try{const Qe=A.texture,_t=Qe.format,ht=Qe.type;if(!z.textureFormatReadable(_t))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!z.textureTypeReadable(ht))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");G>=0&&G<=A.width-Q&&Z>=0&&Z<=A.height-j&&O.readPixels(G,Z,Q,j,mt.convert(_t),mt.convert(ht),ye)}finally{const Qe=null!==E?Be.get(E).__webglFramebuffer:null;Me.bindFramebuffer(O.FRAMEBUFFER,Qe)}}},this.readRenderTargetPixelsAsync=function(){var A=Wy(function*(G,Z,Q,j,ye,Ne,Ke){if(!G||!G.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Qe=Be.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&void 0!==Ke&&(Qe=Qe[Ke]),Qe){const _t=G.texture,ht=_t.format,ut=_t.type;if(!z.textureFormatReadable(ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!z.textureTypeReadable(ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Z>=0&&Z<=G.width-j&&Q>=0&&Q<=G.height-ye){Me.bindFramebuffer(O.FRAMEBUFFER,Qe);const Wt=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,Wt),O.bufferData(O.PIXEL_PACK_BUFFER,Ne.byteLength,O.STREAM_READ),O.readPixels(Z,Q,j,ye,mt.convert(ht),mt.convert(ut),0);const sn=null!==E?Be.get(E).__webglFramebuffer:null;Me.bindFramebuffer(O.FRAMEBUFFER,sn);const Wn=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);return O.flush(),yield function ute(i,e,t){return new Promise(function(n,r){setTimeout(function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}},t)})}(O,Wn,4),O.bindBuffer(O.PIXEL_PACK_BUFFER,Wt),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,Ne),O.deleteBuffer(Wt),O.deleteSync(Wn),Ne}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(G,Z,Q,j,ye,Ne,Ke){return A.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(A,G=null,Z=0){!0!==A.isTexture&&($d("WebGLRenderer: copyFramebufferToTexture function signature has changed."),G=arguments[0]||null,A=arguments[1]);const Q=Math.pow(2,-Z),j=Math.floor(A.image.width*Q),ye=Math.floor(A.image.height*Q),Ne=null!==G?G.x:0,Ke=null!==G?G.y:0;D.setTexture2D(A,0),O.copyTexSubImage2D(O.TEXTURE_2D,Z,0,0,Ne,Ke,j,ye),Me.unbindTexture()};const kn=O.createFramebuffer(),Ii=O.createFramebuffer();this.copyTextureToTexture=function(A,G,Z=null,Q=null,j=0,ye=null){let Ne,Ke,Qe,_t,ht,ut,Wt,sn,Wn;!0!==A.isTexture&&($d("WebGLRenderer: copyTextureToTexture function signature has changed."),Q=arguments[0]||null,A=arguments[1],G=arguments[2],ye=arguments[3]||0,Z=null),null===ye&&(0!==j?($d("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ye=j,j=0):ye=0);const Yn=A.isCompressedTexture?A.mipmaps[ye]:A.image;if(null!==Z)Ne=Z.max.x-Z.min.x,Ke=Z.max.y-Z.min.y,Qe=Z.isBox3?Z.max.z-Z.min.z:1,_t=Z.min.x,ht=Z.min.y,ut=Z.isBox3?Z.min.z:0;else{const oo=Math.pow(2,-j);Ne=Math.floor(Yn.width*oo),Ke=Math.floor(Yn.height*oo),Qe=A.isDataArrayTexture?Yn.depth:A.isData3DTexture?Math.floor(Yn.depth*oo):1,_t=0,ht=0,ut=0}null!==Q?(Wt=Q.x,sn=Q.y,Wn=Q.z):(Wt=0,sn=0,Wn=0);const ln=mt.convert(G.format),yt=mt.convert(G.type);let Zi;G.isData3DTexture?(D.setTexture3D(G,0),Zi=O.TEXTURE_3D):G.isDataArrayTexture||G.isCompressedArrayTexture?(D.setTexture2DArray(G,0),Zi=O.TEXTURE_2D_ARRAY):(D.setTexture2D(G,0),Zi=O.TEXTURE_2D),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,G.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,G.unpackAlignment);const gn=O.getParameter(O.UNPACK_ROW_LENGTH),Ro=O.getParameter(O.UNPACK_IMAGE_HEIGHT),rf=O.getParameter(O.UNPACK_SKIP_PIXELS),Is=O.getParameter(O.UNPACK_SKIP_ROWS),um=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,Yn.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Yn.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,_t),O.pixelStorei(O.UNPACK_SKIP_ROWS,ht),O.pixelStorei(O.UNPACK_SKIP_IMAGES,ut);const Fn=A.isDataArrayTexture||A.isData3DTexture,so=G.isDataArrayTexture||G.isData3DTexture;if(A.isDepthTexture){const oo=Be.get(A),Fr=Be.get(G),is=Be.get(oo.__renderTarget),JA=Be.get(Fr.__renderTarget);Me.bindFramebuffer(O.READ_FRAMEBUFFER,is.__webglFramebuffer),Me.bindFramebuffer(O.DRAW_FRAMEBUFFER,JA.__webglFramebuffer);for(let Ou=0;Ou<Qe;Ou++)Fn&&(O.framebufferTextureLayer(O.READ_FRAMEBUFFER,O.COLOR_ATTACHMENT0,Be.get(A).__webglTexture,j,ut+Ou),O.framebufferTextureLayer(O.DRAW_FRAMEBUFFER,O.COLOR_ATTACHMENT0,Be.get(G).__webglTexture,ye,Wn+Ou)),O.blitFramebuffer(_t,ht,Ne,Ke,Wt,sn,Ne,Ke,O.DEPTH_BUFFER_BIT,O.NEAREST);Me.bindFramebuffer(O.READ_FRAMEBUFFER,null),Me.bindFramebuffer(O.DRAW_FRAMEBUFFER,null)}else if(0!==j||A.isRenderTargetTexture||Be.has(A)){const oo=Be.get(A),Fr=Be.get(G);Me.bindFramebuffer(O.READ_FRAMEBUFFER,kn),Me.bindFramebuffer(O.DRAW_FRAMEBUFFER,Ii);for(let is=0;is<Qe;is++)Fn?O.framebufferTextureLayer(O.READ_FRAMEBUFFER,O.COLOR_ATTACHMENT0,oo.__webglTexture,j,ut+is):O.framebufferTexture2D(O.READ_FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,oo.__webglTexture,j),so?O.framebufferTextureLayer(O.DRAW_FRAMEBUFFER,O.COLOR_ATTACHMENT0,Fr.__webglTexture,ye,Wn+is):O.framebufferTexture2D(O.DRAW_FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,Fr.__webglTexture,ye),0!==j?O.blitFramebuffer(_t,ht,Ne,Ke,Wt,sn,Ne,Ke,O.COLOR_BUFFER_BIT,O.NEAREST):so?O.copyTexSubImage3D(Zi,ye,Wt,sn,Wn+is,_t,ht,Ne,Ke):O.copyTexSubImage2D(Zi,ye,Wt,sn,_t,ht,Ne,Ke);Me.bindFramebuffer(O.READ_FRAMEBUFFER,null),Me.bindFramebuffer(O.DRAW_FRAMEBUFFER,null)}else so?A.isDataTexture||A.isData3DTexture?O.texSubImage3D(Zi,ye,Wt,sn,Wn,Ne,Ke,Qe,ln,yt,Yn.data):G.isCompressedArrayTexture?O.compressedTexSubImage3D(Zi,ye,Wt,sn,Wn,Ne,Ke,Qe,ln,Yn.data):O.texSubImage3D(Zi,ye,Wt,sn,Wn,Ne,Ke,Qe,ln,yt,Yn):A.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,ye,Wt,sn,Ne,Ke,ln,yt,Yn.data):A.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,ye,Wt,sn,Yn.width,Yn.height,ln,Yn.data):O.texSubImage2D(O.TEXTURE_2D,ye,Wt,sn,Ne,Ke,ln,yt,Yn);O.pixelStorei(O.UNPACK_ROW_LENGTH,gn),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Ro),O.pixelStorei(O.UNPACK_SKIP_PIXELS,rf),O.pixelStorei(O.UNPACK_SKIP_ROWS,Is),O.pixelStorei(O.UNPACK_SKIP_IMAGES,um),0===ye&&G.generateMipmaps&&O.generateMipmap(Zi),Me.unbindTexture()},this.copyTextureToTexture3D=function(A,G,Z=null,Q=null,j=0){return!0!==A.isTexture&&($d("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Z=arguments[0]||null,Q=arguments[1]||null,A=arguments[2],G=arguments[3],j=arguments[4]||0),$d('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(A,G,Z,Q,j)},this.initRenderTarget=function(A){void 0===Be.get(A).__webglFramebuffer&&D.setupRenderTarget(A)},this.initTexture=function(A){A.isCubeTexture?D.setTextureCube(A,0):A.isData3DTexture?D.setTexture3D(A,0):A.isDataArrayTexture||A.isCompressedArrayTexture?D.setTexture2DArray(A,0):D.setTexture2D(A,0),Me.unbindTexture()},this.resetState=function(){w=0,S=0,E=null,Me.reset(),Ht.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return La}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=tn._getDrawingBufferColorSpace(e),t.unpackColorSpace=tn._getUnpackColorSpace()}}class Oae extends di{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new he(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&null!==t.element.parentNode&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Eh=new I,yB=new ft,vB=new ft,MB=new I,bB=new I;class Iae{constructor(e={}){const t=this;let n,r,s,o;const a={objects:new WeakMap},l=void 0!==e.element?e.element:document.createElement("div");function c(p){p.isCSS2DObject&&(p.element.style.display="none");for(let g=0,m=p.children.length;g<m;g++)c(p.children[g])}function u(p,g,m){if(!1!==p.visible){if(p.isCSS2DObject){Eh.setFromMatrixPosition(p.matrixWorld),Eh.applyMatrix4(vB);const _=Eh.z>=-1&&Eh.z<=1&&!0===p.layers.test(m.layers),M=p.element;M.style.display=!0===_?"":"none",!0===_&&(p.onBeforeRender(t,g,m),M.style.transform="translate("+-100*p.center.x+"%,"+-100*p.center.y+"%)translate("+(Eh.x*s+s)+"px,"+(-Eh.y*o+o)+"px)",M.parentNode!==l&&l.appendChild(M),p.onAfterRender(t,g,m));const y={distanceToCameraSquared:d(m,p)};a.objects.set(p,y)}for(let _=0,M=p.children.length;_<M;_++)u(p.children[_],g,m)}else c(p)}function d(p,g){return MB.setFromMatrixPosition(p.matrixWorld),bB.setFromMatrixPosition(g.matrixWorld),MB.distanceToSquared(bB)}l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:n,height:r}},this.render=function(p,g){!0===p.matrixWorldAutoUpdate&&p.updateMatrixWorld(),null===g.parent&&!0===g.matrixWorldAutoUpdate&&g.updateMatrixWorld(),yB.copy(g.matrixWorldInverse),vB.multiplyMatrices(g.projectionMatrix,yB),u(p,p,g),function h(p){const g=function f(p){const g=[];return p.traverseVisible(function(m){m.isCSS2DObject&&g.push(m)}),g}(p).sort(function(_,M){return _.renderOrder!==M.renderOrder?M.renderOrder-_.renderOrder:a.objects.get(_).distanceToCameraSquared-a.objects.get(M).distanceToCameraSquared}),m=g.length;for(let _=0,M=g.length;_<M;_++)g[_].element.style.zIndex=m-_}(p)},this.setSize=function(p,g){n=p,r=g,s=n/2,o=r/2,l.style.width=p+"px",l.style.height=g+"px"}}}const xB={type:"change"},mT={type:"start"},CB={type:"end"},f0=new Qd,wB=new Ul,Rae=Math.cos(70*Sr.DEG2RAD),Ti=new I,Kr=2*Math.PI,yn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},_T=1e-6;class Nae extends Sie{constructor(e,t=null){super(e,t),this.state=yn.NONE,this.enabled=!0,this.target=new I,this.cursor=new I,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Rd.ROTATE,MIDDLE:Rd.DOLLY,RIGHT:Rd.PAN},this.touches={ONE:Nd.ROTATE,TWO:Nd.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new I,this._lastQuaternion=new qi,this._lastTargetPosition=new I,this._quat=(new qi).setFromUnitVectors(e.up,new I(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new OU,this._sphericalDelta=new OU,this._scale=1,this._panOffset=new I,this._rotateStart=new he,this._rotateEnd=new he,this._rotateDelta=new he,this._panStart=new he,this._panEnd=new he,this._panDelta=new he,this._dollyStart=new he,this._dollyEnd=new he,this._dollyDelta=new he,this._dollyDirection=new I,this._mouse=new he,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=kae.bind(this),this._onPointerDown=Lae.bind(this),this._onPointerUp=Fae.bind(this),this._onContextMenu=Wae.bind(this),this._onMouseWheel=Vae.bind(this),this._onKeyDown=zae.bind(this),this._onTouchStart=Hae.bind(this),this._onTouchMove=Gae.bind(this),this._onMouseDown=Uae.bind(this),this._onMouseMove=Bae.bind(this),this._interceptControlDown=jae.bind(this),this._interceptControlUp=$ae.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(xB),this.update(),this.state=yn.NONE}update(e=null){const t=this.object.position;Ti.copy(t).sub(this.target),Ti.applyQuaternion(this._quat),this._spherical.setFromVector3(Ti),this.autoRotate&&this.state===yn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=Kr:n>Math.PI&&(n-=Kr),r<-Math.PI?r+=Kr:r>Math.PI&&(r-=Kr),this._spherical.theta=n<=r?Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Ti.setFromSpherical(this._spherical),Ti.applyQuaternion(this._quatInverse),t.copy(this.target).add(Ti),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=Ti.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const a=new I(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new I(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),o=Ti.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==o&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(f0.origin.copy(this.object.position),f0.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(f0.direction))<Rae?this.object.lookAt(this.target):(wB.setFromNormalAndCoplanarPoint(this.object.up,this.target),f0.intersectPlane(wB,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,!!(s||this._lastPosition.distanceToSquared(this.object.position)>_T||8*(1-this._lastQuaternion.dot(this.object.quaternion))>_T||this._lastTargetPosition.distanceToSquared(this.target)>_T)&&(this.dispatchEvent(xB),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(e){return null!==e?Kr/60*this.autoRotateSpeed*e:Kr/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Ti.setFromMatrixColumn(t,0),Ti.multiplyScalar(-e),this._panOffset.add(Ti)}_panUp(e,t){!0===this.screenSpacePanning?Ti.setFromMatrixColumn(t,1):(Ti.setFromMatrixColumn(t,0),Ti.crossVectors(this.object.up,Ti)),Ti.multiplyScalar(e),this._panOffset.add(Ti)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){Ti.copy(this.object.position).sub(this.target);let s=Ti.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),s=t-n.top,a=n.height;this._mouse.x=(e-n.left)/n.width*2-1,this._mouse.y=-s/a*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Kr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Kr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Kr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Kr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Kr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Kr*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(1===this._pointers.length)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._rotateStart.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}}_handleTouchStartPan(e){if(1===this._pointers.length)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._panStart.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(1==this._pointers.length)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e);this._rotateEnd.set(.5*(e.pageX+n.x),.5*(e.pageY+n.y))}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Kr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Kr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(1===this._pointers.length)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._panEnd.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd),this._updateZoomParameters(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return void this._pointers.splice(t,1)}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];void 0===t&&(t=new he,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){return this._pointerPositions[e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0]]}_customWheelEvent(e){const n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(e.deltaMode){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function Lae(i){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),"touch"===i.pointerType?this._onTouchStart(i):this._onMouseDown(i)))}function kae(i){!1!==this.enabled&&("touch"===i.pointerType?this._onTouchMove(i):this._onMouseMove(i))}function Fae(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(CB),this.state=yn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y})}}function Uae(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Rd.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(i),this.state=yn.DOLLY;break;case Rd.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(i),this.state=yn.PAN}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(i),this.state=yn.ROTATE}break;case Rd.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(i),this.state=yn.ROTATE}else{if(!1===this.enablePan)return;this._handleMouseDownPan(i),this.state=yn.PAN}break;default:this.state=yn.NONE}this.state!==yn.NONE&&this.dispatchEvent(mT)}function Bae(i){switch(this.state){case yn.ROTATE:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(i);break;case yn.DOLLY:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(i);break;case yn.PAN:if(!1===this.enablePan)return;this._handleMouseMovePan(i)}}function Vae(i){!1===this.enabled||!1===this.enableZoom||this.state!==yn.NONE||(i.preventDefault(),this.dispatchEvent(mT),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent(CB))}function zae(i){!1!==this.enabled&&this._handleKeyDown(i)}function Hae(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case Nd.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(i),this.state=yn.TOUCH_ROTATE;break;case Nd.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(i),this.state=yn.TOUCH_PAN;break;default:this.state=yn.NONE}break;case 2:switch(this.touches.TWO){case Nd.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(i),this.state=yn.TOUCH_DOLLY_PAN;break;case Nd.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(i),this.state=yn.TOUCH_DOLLY_ROTATE;break;default:this.state=yn.NONE}break;default:this.state=yn.NONE}this.state!==yn.NONE&&this.dispatchEvent(mT)}function Gae(i){switch(this._trackPointer(i),this.state){case yn.TOUCH_ROTATE:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(i),this.update();break;case yn.TOUCH_PAN:if(!1===this.enablePan)return;this._handleTouchMovePan(i),this.update();break;case yn.TOUCH_DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(i),this.update();break;case yn.TOUCH_DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=yn.NONE}}function Wae(i){!1!==this.enabled&&i.preventDefault()}function jae(i){"Control"===i.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function $ae(i){"Control"===i.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const Xae=["canvas"],qae=["overlay"];function Yae(i,e){if(1&i&&(Y(0,"div",5)(1,"h4"),Te(2),te()()),2&i){const t=Mi();ds("visible",null!==t.hoveredSkill),Le(2),Li(t.hoveredSkill.skill.name)}}let Kae=(()=>{const e=class{constructor(n,r){this.skillIconService=n,this.ngZone=r,this.skills=[],this.categoryChange=new Rn,this.raycaster=new Cie,this.mouse=new he,this.hoveredSkill=null,this.skillNodes=[],this.radius=3.2,this.animationFrame=null,this.defaultColor=new Fe(3447003),this.categoryColors=new Map,this.categories=[],this.activeCategory="All",this.handleResize=()=>{const s=this.canvasRef.nativeElement.clientWidth,o=this.canvasRef.nativeElement.clientHeight;this.camera.aspect=s/o,this.camera.updateProjectionMatrix(),this.renderer.setSize(s,o),this.labelRenderer.setSize(s,o)}}ngOnInit(){this.categoryColors.set("Frontend",new Fe(6413051)),this.categoryColors.set("Backend",new Fe(6856803)),this.categoryColors.set("Database",new Fe(14978560)),this.categoryColors.set("Cloud",new Fe(33023)),this.categoryColors.set("Devops",new Fe(16739179)),this.categoryColors.set("Tools",new Fe(16736758)),this.categoryColors.set("General",new Fe(11184810)),this.activeCategory="All",this.skillIconService.getCategories().subscribe(n=>{n.forEach(r=>{"All"!==r&&!this.categoryColors.has(r)&&this.categoryColors.set(r,this.defaultColor)})})}ngAfterViewInit(){var n=this;return Wy(function*(){n.initScene(),yield n.setupSkillNodes(),n.animate()})()}ngOnDestroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.renderer.dispose(),window.removeEventListener("resize",this.handleResize);const n=this.canvasRef?.nativeElement;n&&(n.removeEventListener("mousemove",this.handleMouseMove.bind(this)),n.removeEventListener("click",this.handleMouseClick.bind(this)))}initScene(){const n=this.canvasRef.nativeElement;this.centerPoint=new I(0,0,0),this.scene=new pE;const r=n.clientWidth,s=n.clientHeight;this.camera=new wi(60,r/s,.1,1e3),this.camera.position.z=7,this.renderer=new _B({canvas:n,antialias:!0,alpha:!0}),this.renderer.setSize(r,s),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.labelRenderer=new Iae,this.labelRenderer.setSize(r,s),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0",this.labelRenderer.domElement.style.pointerEvents="none",this.overlayRef.nativeElement.appendChild(this.labelRenderer.domElement),this.controls=new Nae(this.camera,n),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.rotateSpeed=.5,this.controls.enableZoom=!1;const o=new QE(16777215,.6);this.scene.add(o);const a=new qc(16777215,.8);a.position.set(5,5,5),this.scene.add(a);const l=new qc(16777215,.4);l.position.set(-5,-5,-5),this.scene.add(l),this.sphereGeometry=new pg(this.radius-.5,32,32),this.sphereMaterial=new gg({color:1118481,metalness:.2,roughness:.8,transparent:!0,opacity:.1}),this.sphereMesh=new fi(this.sphereGeometry,this.sphereMaterial),this.scene.add(this.sphereMesh);const c=new Lt,u=1e3,d=new Float32Array(3*u),f=new Float32Array(3*u);for(let g=0;g<3*u;g+=3){const m=10+10*Math.random(),_=Math.random()*Math.PI*2,M=Math.acos(2*Math.random()-1);d[g]=m*Math.sin(M)*Math.cos(_),d[g+1]=m*Math.sin(M)*Math.sin(_),d[g+2]=m*Math.cos(M),f[g]=.5+.5*Math.random(),f[g+1]=.5+.5*Math.random(),f[g+2]=.5+.5*Math.random()}c.setAttribute("position",new An(d,3)),c.setAttribute("color",new An(f,3));const h=new kv({size:.05,sizeAttenuation:!0,vertexColors:!0,transparent:!0,opacity:.3}),p=new TE(c,h);this.scene.add(p)}setupSkillNodes(){var n=this;return Wy(function*(){n.skillNodes=[];for(let s=0;s<n.skills.length;s++){const o=n.skills[s],a=1-s/(n.skills.length-1)*2,l=.1,c=Math.sqrt(1-a*a)*(Math.random()*l-l/2+1),u=2*((Math.sqrt(5)+1)/2-1)*Math.PI*s,d=c*Math.cos(u),f=c*Math.sin(u),h=new I(d*n.radius,a*n.radius,f*n.radius),p=document.createElement("div");p.className="skill-node",p.innerHTML=`\n        <div class="skill-icon-container">\n          <img src="${o.icon}" alt="${o.name}" class="skill-icon" style="width:50px !important; height:50px !important; max-width:50px !important; max-height:50px !important;" />\n        </div>\n      `;const g=n.categoryColors.get(o.category)||n.defaultColor;p.style.borderLeftColor=`#${g.getHexString()}`;const m=new $a;m.position.copy(h),m.position.copy(h);const _=m.scale.clone(),M={skill:o,position:h,element:p,object:m,category:o.category,visible:!0,color:g,originalScale:_,isHovered:!1};m.userData={skillNode:M},n.scene.add(m);const y=new Oae(p);y.position.copy(h),M.css2dObject=y,n.scene.add(y),n.skillNodes.push(M),setTimeout(()=>{p.classList.add("visible")},100*s)}const r=n.canvasRef.nativeElement;r.addEventListener("mousemove",n.handleMouseMove.bind(n)),r.addEventListener("click",n.handleMouseClick.bind(n)),n.connectRelatedNodes()})()}connectRelatedNodes(){const n=new Map;this.skillNodes.forEach(r=>{n.has(r.category)||n.set(r.category,[]),n.get(r.category)?.push(r)}),n.forEach((r,s)=>{const o=this.categoryColors.get(s)||this.defaultColor;for(let a=0;a<r.length;a++){const l=r[a].position;r.filter((u,d)=>d!==a).map((u,d)=>({node:u,distance:l.distanceTo(u.position),index:d})).sort((u,d)=>u.distance-d.distance).slice(0,2).forEach(u=>{const d=(new Lt).setFromPoints([l,u.node.position]),f=new Pr({color:o,transparent:!0,opacity:.3}),h=new Zo(d,f);h.userData={category:s,visible:!0},this.scene.add(h)})}})}filterByCategory(n="All"){this.activeCategory="All",this.categoryChange.emit(this.activeCategory),this.scene.traverse(r=>{if(r instanceof fi||r instanceof Zo)if(r.userData&&"skillNode"in r.userData){const s=r.userData.skillNode;r.visible=!0,s.css2dObject&&(s.css2dObject.visible=!0),s.element.classList.add("visible"),s.visible=!0}else r instanceof Zo&&r.userData&&(r.visible=!0)})}handleMouseMove(n){const r=this.canvasRef.nativeElement,s=r.getBoundingClientRect();this.mouse.x=(n.clientX-s.left)/r.clientWidth*2-1,this.mouse.y=-(n.clientY-s.top)/r.clientHeight*2+1,this.currentMouseX=n.clientX,this.currentMouseY=n.clientY,this.raycaster.setFromCamera(this.mouse,this.camera);const o=this.raycaster.intersectObjects(this.scene.children,!0);let a=!1,l=null;for(const c of o){const u=c.object;if(u.userData&&u.userData.skillNode){const d=u.userData.skillNode;if(d.visible){l=d,a=!0,d.isHovered||this.setSkillHoverState(d,!0),this.updateTooltipPosition(d);break}}}a&&(this.hoveredSkill&&this.hoveredSkill!==l&&this.setSkillHoverState(this.hoveredSkill,!1),this.hoveredSkill=l)}handleMouseClick(n){}updateTooltipPosition(n){const r=this.canvasRef.nativeElement,s=n.position.clone();s.project(this.camera);const o=(.5*s.x+.5)*r.clientWidth,a=(.5*-s.y+.5)*r.clientHeight,l=document.querySelector(".skill-tooltip");l&&(l.style.left=`${o+15}px`,l.style.top=a-15+"px")}setSkillHoverState(n,r){n.isHovered=r;const s=n.element.querySelector(".skill-text-label");r?(n.element.classList.add("hovered"),s&&s.setAttribute("style","display: block; opacity: 1;")):(n.element.classList.remove("hovered"),s&&s.setAttribute("style","display: none; opacity: 0;"))}checkLabelHover(){if(void 0===this.currentMouseX||void 0===this.currentMouseY)return;let n=!1,r=null;for(const s of this.skillNodes){if(!s.visible)continue;const o=s.element;if(!o)continue;const a=o.getBoundingClientRect();if(this.currentMouseX>=a.left&&this.currentMouseX<=a.right&&this.currentMouseY>=a.top&&this.currentMouseY<=a.bottom){r=s,n=!0,s.isHovered||this.setSkillHoverState(s,!0),this.updateTooltipPosition(s);break}}n?(this.hoveredSkill&&this.hoveredSkill!==r&&this.setSkillHoverState(this.hoveredSkill,!1),this.hoveredSkill=r):this.raycaster.intersectObjects(this.scene.children,!0).some(s=>s.object.userData&&s.object.userData.skillNode)||this.hoveredSkill&&(this.setSkillHoverState(this.hoveredSkill,!1),this.hoveredSkill=null)}animate(){this.animationFrame=requestAnimationFrame(()=>this.animate()),this.controls.update();const n=.001*performance.now();this.skillNodes.forEach(r=>{if(r.visible){const a=r.position.y,l=.03*Math.sin(.5*n+2*r.position.x);r.css2dObject&&(r.css2dObject.position.y=a+l)}}),this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera),this.checkLabelHover()}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(R2),pe(Mn))},e.\u0275cmp=Ls({type:e,selectors:[["app-skills-sphere"]],viewQuery:function(r,s){if(1&r&&(y_(Xae,5),y_(qae,5)),2&r){let o;Kf(o=Zf())&&(s.canvasRef=o.first),Kf(o=Zf())&&(s.overlayRef=o.first)}},hostBindings:function(r,s){1&r&&Ot("resize",function(){return s.handleResize()},0,Nb)},inputs:{skills:"skills"},outputs:{categoryChange:"categoryChange"},decls:6,vars:1,consts:[[1,"skills-sphere-container"],["canvas",""],[1,"skills-overlay"],["overlay",""],["class","skill-tooltip",3,"visible",4,"ngIf"],[1,"skill-tooltip"]],template:function(r,s){1&r&&(Y(0,"div",0),ct(1,"canvas",null,1)(3,"div",2,3),Bn(5,Yae,3,3,"div",4),te()),2&r&&(Le(5),tt("ngIf",s.hoveredSkill))},dependencies:[sp],styles:[".skills-sphere-container[_ngcontent-%COMP%]{position:relative;width:100%;height:600px;overflow:hidden;border-radius:10px;box-shadow:0 10px 30px #00000026;background-color:#1e1e1e08}canvas[_ngcontent-%COMP%]{width:100%;height:100%}.skills-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;pointer-events:none;width:100%;height:100%}.skill-node[_ngcontent-%COMP%]{background-color:#1e1e1ecc;color:#fff;padding:4px!important;border-radius:10px;pointer-events:auto;cursor:pointer;opacity:0;transform:scale(.7);transition:all .3s cubic-bezier(.175,.885,.32,1.275);font-size:14px;font-weight:500;white-space:nowrap;display:flex;align-items:center;justify-content:center;box-shadow:0 5px 15px #0003;border-left:3px solid transparent;box-sizing:content-box!important}.skill-icon-container[_ngcontent-%COMP%]{position:relative;width:50px!important;min-width:50px!important;max-width:50px!important;height:50px!important;max-height:50px!important;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;margin:0 auto;box-sizing:border-box!important;padding:0!important}.skill-icon[_ngcontent-%COMP%]{height:50px!important;width:50px!important;max-height:50px!important;max-width:50px!important;object-fit:contain;margin-bottom:4px;padding:0}.skill-text-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;text-align:center;color:#ffffffb3;padding:4px 8px;border-radius:4px;background-color:#0000004d;opacity:0;transform:translateY(10px);transition:opacity .3s ease,transform .3s ease;display:none}.skill-node.hovered[_ngcontent-%COMP%]   .skill-text-label[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);color:#fff;font-weight:700;background-color:#0009;box-shadow:0 0 8px #ffffff4d;display:block}.skill-node.visible[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.skill-node.hovered[_ngcontent-%COMP%]{transform:scale(1.15);z-index:20;box-shadow:0 8px 25px #00000040}.skill-node.hovered[_ngcontent-%COMP%]   .skill-text-label[_ngcontent-%COMP%]{color:#fff;font-weight:700;background-color:#0009;box-shadow:0 0 8px #ffffff4d}.skill-node[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.skill-node[_ngcontent-%COMP%]:hover{transform:scale(1.1);z-index:10}.skill-tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#282828f2;color:#fff;padding:10px 15px;border-radius:8px;font-size:14px;pointer-events:none;opacity:0;transform:translateY(10px);transition:all .3s ease;box-shadow:0 10px 30px #0003;z-index:100;border-left:4px solid var(--primary-color, #3498db);max-width:250px}.skill-tooltip.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.skill-tooltip[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px}@media (max-width: 768px){.skills-sphere-container[_ngcontent-%COMP%]{height:600px}.skill-node[_ngcontent-%COMP%]{font-size:12px}}"]}),i})();function Zae(i,e){if(1&i){const t=hd();Y(0,"button",3),Ot("click",function(){const s=uc(t).$implicit;return dc(Mi().filterByCategory(s))}),Te(1),te()}if(2&i){const t=e.$implicit;ds("active",Mi().activeCategory===t),Le(1),vc(" ",t," ")}}function Jae(i,e){if(1&i){const t=hd();Y(0,"div",6)(1,"div",7),Ot("mouseenter",function(r){const s=uc(t),o=s.$implicit,a=s.index;return dc(Mi().onCardHover(o,r,a))})("mouseleave",function(r){const s=uc(t),o=s.$implicit,a=s.index;return dc(Mi().onCardLeave(o,r,a))}),Y(2,"div",8)(3,"div",9)(4,"div",10),ct(5,"img",11),te(),ct(6,"div",12),te(),Y(7,"div",13)(8,"div",14),ct(9,"img",11),te(),Y(10,"div",15),Te(11),te(),Y(12,"div",16),Te(13),te(),ct(14,"div",17),te()()()()}if(2&i){const t=e.$implicit,n=e.index;ox("animation-delay",Mi().getDelay(t),"ms"),ds("fade-in",!0),Le(1),Gr("data-skill-id",n),Le(4),tt("src",t.icon,va)("alt",t.name),Le(4),tt("src",t.icon,va)("alt",t.name),Le(2),Li(t.name),Le(2),Li(t.category),Le(1),tt("id","particles-"+n)}}let Qae=(()=>{const e=class{constructor(n,r){this.ngZone=n,this.renderer=r,this.skills=[],this.categoryChange=new Rn,this.categories=[],this.activeCategory="All",this.filteredSkills=[],this.particleAnimations=new Map}ngOnInit(){this.categories=Array.from(new Set(this.skills.map(n=>n.category.charAt(0).toUpperCase()+n.category.slice(1)))),this.filterByCategory("All")}ngAfterViewInit(){}filterByCategory(n){this.activeCategory=n,this.filteredSkills="All"===n?[...this.skills]:this.skills.filter(r=>r.category.charAt(0).toUpperCase()+r.category.slice(1)===n),this.categoryChange.emit(n),this.particleAnimations.forEach(r=>{cancelAnimationFrame(r)}),this.particleAnimations.clear()}getDelay(n){return 50*this.filteredSkills.indexOf(n)}onCardHover(n,r,s){this.particleAnimations.has(s)&&cancelAnimationFrame(this.particleAnimations.get(s));const a=document.getElementById(`particles-${s}`);if(a){for(;a.firstChild;)a.removeChild(a.firstChild);this.createParticles(a,n,s)}}onCardLeave(n,r,s){setTimeout(()=>{this.particleAnimations.has(s)&&(cancelAnimationFrame(this.particleAnimations.get(s)),this.particleAnimations.delete(s))},500)}createParticles(n,r,s){const o=getComputedStyle(document.documentElement).getPropertyValue("--primary-color").trim(),a=getComputedStyle(document.documentElement).getPropertyValue("--secondary-color").trim(),l=getComputedStyle(document.documentElement).getPropertyValue("--accent-color").trim()||o,u=[o,a,l,document.body.classList.contains("light-theme")?"#555555":"#ffffff",this.adjustColorOpacity(o,.7),this.adjustColorOpacity(a,.7),this.adjustColorOpacity(l,.6)],f=[];for(let g=0;g<50;g++){const m=this.renderer.createElement("div");this.renderer.addClass(m,"custom-particle");const _=7*Math.random()+2,M=u[Math.floor(Math.random()*u.length)],y=100*Math.random(),v=100*Math.random(),C=Math.random()>.3?"50%":Math.random()>.5?"20%":"0%";this.renderer.setStyle(m,"position","absolute"),this.renderer.setStyle(m,"width",`${_}px`),this.renderer.setStyle(m,"height",`${_}px`),this.renderer.setStyle(m,"background-color",M),this.renderer.setStyle(m,"border-radius",C),this.renderer.setStyle(m,"left",`${y}%`),this.renderer.setStyle(m,"top",`${v}%`),this.renderer.setStyle(m,"box-shadow",`0 0 ${3*Math.random()}px ${M}`);const w=Math.random()>.6?.5*Math.random()+.3:0;this.renderer.setStyle(m,"opacity",w.toString()),this.renderer.appendChild(n,m),f.push({element:m,x:y,y:v,size:_,color:M,speedX:3*(Math.random()-.5),speedY:3*(Math.random()-.5)-.5,opacity:w,rotation:360*Math.random(),rotationSpeed:8*(Math.random()-.5),lifespan:.8*Math.random()+.7,pulseFrequency:.02*Math.random()+.01})}const h=()=>{let g=!1;if(f.forEach(m=>{if(m.opacity<=0&&Math.random()>.75)m.opacity=.7*Math.random()+.3,m.x=100*Math.random(),m.y=100*Math.random(),this.renderer.setStyle(m.element,"opacity",m.opacity.toString()),m.speedX=3*(Math.random()-.5),m.speedY=3*(Math.random()-.5)-.5,g=!0;else if(m.opacity>0){m.x+=m.speedX,m.y+=m.speedY,m.opacity-=.003*m.lifespan;const _=.1*Math.sin(Date.now()*m.pulseFrequency)+.9;m.rotation+=m.rotationSpeed;const M=Math.max(0,m.opacity)*_;this.renderer.setStyle(m.element,"opacity",M.toString()),this.renderer.setStyle(m.element,"left",`${m.x}%`),this.renderer.setStyle(m.element,"top",`${m.y}%`),this.renderer.setStyle(m.element,"transform",`rotate(${m.rotation}deg) scale(${_})`),(m.x<-10||m.x>110)&&(m.speedX*=-.8),(m.y<-10||m.y>110)&&(m.speedY*=-.8),g=!0}}),g=!0,g){const m=requestAnimationFrame(h);this.particleAnimations.set(s,m)}},p=requestAnimationFrame(h);this.particleAnimations.set(s,p)}adjustColorOpacity(n,r){if(n.startsWith("#")){let s=n.slice(1);return 3===s.length&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]),`rgba(${parseInt(s.substring(0,2),16)}, ${parseInt(s.substring(2,4),16)}, ${parseInt(s.substring(4,6),16)}, ${r})`}if(n.startsWith("rgb(")){const s=n.match(/\d+/g);if(s&&s.length>=3)return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${r})`}if(n.startsWith("rgba(")){const s=n.match(/\d+/g);if(s&&s.length>=3)return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${r})`}return n}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(Mn),pe(cs))},e.\u0275cmp=Ls({type:e,selectors:[["app-skills-grid"]],inputs:{skills:"skills"},outputs:{categoryChange:"categoryChange"},decls:7,vars:4,consts:[[1,"skills-container"],[1,"skills-filter"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],[1,"skills-grid"],["class","skill-card-container",3,"fade-in","animationDelay",4,"ngFor","ngForOf"],[1,"skill-card-container"],[1,"skill-item",3,"mouseenter","mouseleave"],[1,"card-inner"],[1,"card-front"],[1,"skill-icon","grayscale"],[1,"skill-icon-img",3,"src","alt"],[1,"morphing-border"],[1,"card-back"],[1,"skill-icon","colorized"],[1,"skill-name"],[1,"skill-category"],[1,"particles-container",3,"id"]],template:function(r,s){1&r&&(Y(0,"div",0)(1,"div",1),Bn(2,Zae,2,3,"button",2),Y(3,"button",3),Ot("click",function(){return s.filterByCategory("All")}),Te(4," All "),te()(),Y(5,"div",4),Bn(6,Jae,15,12,"div",5),te()()),2&r&&(Le(2),tt("ngForOf",s.categories),Le(1),ds("active","All"===s.activeCategory),Le(3),tt("ngForOf",s.filteredSkills))},dependencies:[rp],styles:[".skills-container[_ngcontent-%COMP%]{width:100%;margin-bottom:3rem}.skills-filter[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-bottom:2rem}.skills-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ffffff0d;border:none;border-radius:20px;padding:8px 15px;font-size:14px;cursor:pointer;transition:all .3s ease;color:var(--text-color)}.skills-filter[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.skills-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active){background-color:#ffffff1a}.skills-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:20px}.skill-card-container[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn .5s forwards}.skill-item[_ngcontent-%COMP%]{position:relative;width:100%;height:180px;perspective:1000px;cursor:pointer;border-radius:12px;z-index:1;transition:z-index 0s .8s}.skill-item[_ngcontent-%COMP%]:hover{z-index:10;transition-delay:0s}.skill-item[_ngcontent-%COMP%]:hover   .card-front[_ngcontent-%COMP%], .skill-item[_ngcontent-%COMP%]:hover   .card-back[_ngcontent-%COMP%]{border-color:rgba(var(--primary-rgb),.8);box-shadow:0 0 10px rgba(var(--primary-rgb),.4)}.card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform .8s cubic-bezier(.175,.885,.32,1.275);transform-style:preserve-3d;border-radius:12px}.skill-item[_ngcontent-%COMP%]:hover   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;backface-visibility:hidden;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 15px;overflow:hidden;border:1px solid rgba(var(--primary-rgb),.3);box-shadow:0 0 5px rgba(var(--primary-rgb),.1);transition:border-color .3s ease,box-shadow .3s ease}.card-front[_ngcontent-%COMP%]{background-color:#ffffff08;z-index:1}.card-back[_ngcontent-%COMP%]{background-color:#ffffff0d;transform:rotateY(180deg)}.grayscale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:grayscale(60%);transition:filter .5s ease}.colorized[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:grayscale(0%)}.skill-icon[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;margin-bottom:15px;transition:transform .3s}.skill-icon-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.skill-name[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;margin-bottom:5px}.skill-category[_ngcontent-%COMP%]{font-size:.85rem;opacity:.7}.morphing-border[_ngcontent-%COMP%]{position:absolute;inset:-3px;z-index:-1;border-radius:14px;background:linear-gradient(45deg,var(--primary-color),var(--secondary-color),var(--accent-color),var(--primary-light),var(--secondary-dark));background-size:300% 300%;opacity:0;transition:opacity .3s;will-change:opacity,background-position,transform}.skill-item[_ngcontent-%COMP%]:hover   .morphing-border[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_gradient 3s ease infinite,pulse 2s infinite;opacity:1}@keyframes _ngcontent-%COMP%_gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.particles-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s forwards}@media (max-width: 768px){.skills-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.skill-icon[_ngcontent-%COMP%]{font-size:1.7rem}.skill-name[_ngcontent-%COMP%]{font-size:.9rem}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{border-width:1px}}.light-theme[_nghost-%COMP%]   .card-front[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .card-front[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .card-back[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .card-back[_ngcontent-%COMP%]{border:1px solid rgba(30,30,30,.5);box-shadow:0 0 5px #1e1e1e33;background-color:#fafafa0d}.light-theme[_nghost-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover   .card-front[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover   .card-front[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover   .card-back[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skill-item[_ngcontent-%COMP%]:hover   .card-back[_ngcontent-%COMP%]{border-color:#1e1e1ee6;box-shadow:0 0 12px rgba(var(--primary-rgb),.6)}"]}),i})(),ele=(()=>{const e=class{constructor(n,r){this.elementRef=n,this.renderer=r,this.isDarkMode=!1,this.mediaQueryListener=null}ngOnInit(){const n=localStorage.getItem("theme");n?"dark"===n?this.enableDarkMode():this.enableLightMode():(this.enableDarkMode(),this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaQueryListener=r=>{r.matches?this.enableDarkMode():this.enableLightMode()},this.mediaQueryList.addEventListener("change",this.mediaQueryListener)),this.renderer.setAttribute(this.elementRef.nativeElement,"title",this.isDarkMode?"Switch to Light Mode":"Switch to Dark Mode"),this.renderer.addClass(this.elementRef.nativeElement,"theme-toggle-animation")}ngOnDestroy(){this.mediaQueryList&&this.mediaQueryListener&&this.mediaQueryList.removeEventListener("change",this.mediaQueryListener)}onClick(n){n.preventDefault(),this.renderer.addClass(this.elementRef.nativeElement,"theme-toggle-clicked"),setTimeout(()=>{this.renderer.removeClass(this.elementRef.nativeElement,"theme-toggle-clicked")},300),this.isDarkMode?this.enableLightMode():this.enableDarkMode()}enableDarkMode(){document.body.classList.add("dark-theme"),document.body.classList.remove("light-theme"),this.isDarkMode=!0,localStorage.setItem("theme","dark"),this.updateToggleIcon(),this.dispatchThemeChangeEvent("dark")}enableLightMode(){document.body.classList.add("light-theme"),document.body.classList.remove("dark-theme"),this.isDarkMode=!1,localStorage.setItem("theme","light"),this.updateToggleIcon(),this.dispatchThemeChangeEvent("light")}updateToggleIcon(){const n=this.elementRef.nativeElement.querySelector("i");n&&(this.isDarkMode?(this.renderer.removeClass(n,"fa-moon"),this.renderer.addClass(n,"fa-sun")):(this.renderer.removeClass(n,"fa-sun"),this.renderer.addClass(n,"fa-moon"))),this.renderer.setAttribute(this.elementRef.nativeElement,"title",this.isDarkMode?"Switch to Light Mode":"Switch to Dark Mode")}dispatchThemeChangeEvent(n){const r=new CustomEvent("themechange",{detail:{theme:n}});window.dispatchEvent(r)}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(Ni),pe(cs))},e.\u0275dir=pt({type:e,selectors:[["","appThemeToggle",""]],hostBindings:function(r,s){1&r&&Ot("click",function(a){return s.onClick(a)})}}),i})();const tle=function(i){return{scrolled:i}},To=function(i){return{active:i}},SB=function(i){return{open:i}};let nle=(()=>{const e=class{constructor(n,r){this.router=n,this.portfolioService=r,this.isNavOpen=!1,this.isScrolled=!1,this.activeSection="home",this.subscription=new Ur,this.scrollSections=["home","about","skills","projects","contact"]}ngOnInit(){this.subscription.add(this.portfolioService.activeSection$.subscribe(n=>{this.activeSection=n})),this.subscription.add(this.router.events.pipe(Xo(n=>n instanceof wl)).subscribe(()=>{const n=this.router.url.split("#")[1];n&&this.scrollSections.includes(n)&&(this.activeSection=n,this.portfolioService.updateActiveSection(n))})),this.checkScrollPosition()}ngOnDestroy(){this.subscription.unsubscribe()}toggleNav(){this.isNavOpen=!this.isNavOpen,this.isNavOpen?(document.body.style.overflow="hidden",document.querySelectorAll(".nav-links .nav-menu-items a.nav-link").forEach((r,s)=>{setTimeout(()=>{r.classList.add("visible")},100*s)})):(document.body.style.overflow="",document.querySelectorAll(".nav-links .nav-menu-items a.nav-link").forEach(n=>{n.classList.remove("visible")}))}closeNav(){this.isNavOpen&&(this.isNavOpen=!1,document.body.style.overflow="")}scrollTo(n,r){r?.preventDefault(),this.isNavOpen=!1;const s=document.getElementById(n);s&&(s.scrollIntoView({behavior:"smooth"}),this.activeSection=n,this.portfolioService.updateActiveSection(n)),window.location.hash&&history.replaceState(null,"",window.location.pathname)}checkScrollPosition(){if(this.isScrolled=window.pageYOffset>50,0!==window.pageYOffset)for(const n of this.scrollSections){const r=document.getElementById(n);if(r){const s=r.getBoundingClientRect();if(s.top<=100&&s.bottom>=100){this.activeSection=n,this.portfolioService.updateActiveSection(n);break}}}else this.portfolioService.updateActiveSection("home")}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(jr),pe(Yw))},e.\u0275cmp=Ls({type:e,selectors:[["app-navbar"]],hostBindings:function(r,s){1&r&&Ot("scroll",function(a){return s.checkScrollPosition(a)},0,Nb)},decls:40,vars:42,consts:[[1,"navbar",3,"ngClass"],[1,"container"],[1,"logo","animated","fadeIn"],["href","#",1,"text-gradient"],[1,"desktop-nav"],["href","#home",1,"nav-link",3,"ngClass","click"],["href","#about",1,"nav-link",3,"ngClass","click"],["href","#skills",1,"nav-link",3,"ngClass","click"],["href","#projects",1,"nav-link",3,"ngClass","click"],["href","#contact",1,"nav-link",3,"ngClass","click"],[1,"right-section"],["href","javascript:void(0)","appThemeToggle","",1,"theme-toggle","desktop-toggle","animated","fadeIn"],[1,"fas","fa-moon"],[1,"hamburger-menu","animated","fadeIn",3,"ngClass","click"],[1,"hamburger-icon"],[1,"nav-backdrop",3,"ngClass","click"],[1,"nav-links",3,"ngClass"],[1,"nav-menu-items"],["href","#home",1,"nav-link","animated","fadeInRight","delay-1",3,"ngClass","click"],["href","#about",1,"nav-link","animated","fadeInRight","delay-2",3,"ngClass","click"],["href","#skills",1,"nav-link","animated","fadeInRight","delay-3",3,"ngClass","click"],["href","#projects",1,"nav-link","animated","fadeInRight","delay-4",3,"ngClass","click"],["href","#contact",1,"nav-link","animated","fadeInRight","delay-5",3,"ngClass","click"],[1,"toggle-wrapper"],["href","javascript:void(0)","appThemeToggle","",1,"theme-toggle","mobile-toggle","animated","fadeInRight","delay-6",3,"click"]],template:function(r,s){1&r&&(Y(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),Te(4,"PM"),te()(),Y(5,"div",4)(6,"a",5),Ot("click",function(){return s.scrollTo("home")}),Te(7,"Home"),te(),Y(8,"a",6),Ot("click",function(){return s.scrollTo("about")}),Te(9,"About"),te(),Y(10,"a",7),Ot("click",function(){return s.scrollTo("skills")}),Te(11,"Skills"),te(),Y(12,"a",8),Ot("click",function(){return s.scrollTo("projects")}),Te(13,"Projects"),te(),Y(14,"a",9),Ot("click",function(){return s.scrollTo("contact")}),Te(15,"Contact"),te()(),Y(16,"div",10)(17,"a",11),ct(18,"i",12),te(),Y(19,"div",13),Ot("click",function(){return s.toggleNav()}),Y(20,"div",14),ct(21,"span")(22,"span")(23,"span"),te()()(),Y(24,"div",15),Ot("click",function(){return s.closeNav()}),te(),Y(25,"div",16)(26,"div",17)(27,"a",18),Ot("click",function(){return s.scrollTo("home")}),Te(28,"Home"),te(),Y(29,"a",19),Ot("click",function(){return s.scrollTo("about")}),Te(30,"About"),te(),Y(31,"a",20),Ot("click",function(){return s.scrollTo("skills")}),Te(32,"Skills"),te(),Y(33,"a",21),Ot("click",function(){return s.scrollTo("projects")}),Te(34,"Projects"),te(),Y(35,"a",22),Ot("click",function(){return s.scrollTo("contact")}),Te(36,"Contact"),te(),Y(37,"div",23)(38,"a",24),Ot("click",function(a){return a.preventDefault()}),ct(39,"i",12),te()()()()()()),2&r&&(tt("ngClass",xi(14,tle,s.isScrolled)),Le(6),tt("ngClass",xi(16,To,"home"===s.activeSection)),Le(2),tt("ngClass",xi(18,To,"about"===s.activeSection)),Le(2),tt("ngClass",xi(20,To,"skills"===s.activeSection)),Le(2),tt("ngClass",xi(22,To,"projects"===s.activeSection)),Le(2),tt("ngClass",xi(24,To,"contact"===s.activeSection)),Le(5),tt("ngClass",xi(26,To,s.isNavOpen)),Le(5),tt("ngClass",xi(28,SB,s.isNavOpen)),Le(1),tt("ngClass",xi(30,SB,s.isNavOpen)),Le(2),tt("ngClass",xi(32,To,"home"===s.activeSection)),Le(2),tt("ngClass",xi(34,To,"about"===s.activeSection)),Le(2),tt("ngClass",xi(36,To,"skills"===s.activeSection)),Le(2),tt("ngClass",xi(38,To,"projects"===s.activeSection)),Le(2),tt("ngClass",xi(40,To,"contact"===s.activeSection)))},dependencies:[iC,ele],styles:['.navbar[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;padding:1.2rem 0;z-index:100;background-color:rgba(var(--bg-color-rgb),.9);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);box-shadow:0 2px 10px #00000014;transition:all .3s var(--animation-timing)}.navbar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:100%;padding:0 2rem;margin:0 auto;position:relative;box-sizing:border-box}.navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:0 auto;flex:1}.navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{margin:0 1rem;color:var(--text-color);text-decoration:none;font-weight:500;font-size:1rem;position:relative;padding:.5rem 0;transition:color .3s ease}.navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:2px;background-color:var(--primary-color);transition:width .3s ease}.navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover:after, .navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]:after{width:100%}.navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600}@media (max-width: 992px){.navbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]{display:none}}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:0;padding:0}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;text-decoration:none;letter-spacing:-.5px;transition:transform .3s ease;display:inline-block}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.navbar[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding-right:0}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]{display:none;margin-left:1rem;cursor:pointer;transition:all .3s ease;z-index:20;width:48px;height:48px;align-items:center;justify-content:center;border-radius:50%;background:transparent;border:2px solid var(--primary-color);position:relative;overflow:hidden}@media (max-width: 992px){.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]{display:flex}}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]:hover{background:var(--primary-color)}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff}.navbar[_ngcontent-%COMP%]   .hamburger-menu.active[_ngcontent-%COMP%]{background:transparent}.navbar[_ngcontent-%COMP%]   .hamburger-menu.active[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:var(--primary-color)}.navbar[_ngcontent-%COMP%]   .hamburger-menu.active[_ngcontent-%COMP%]:hover{background:var(--primary-color)}.navbar[_ngcontent-%COMP%]   .hamburger-menu.active[_ngcontent-%COMP%]:hover   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]{width:24px;height:18px;position:relative}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;position:absolute;height:3px;width:100%;background:var(--primary-color);border-radius:3px;opacity:1;left:0;transform:rotate(0);transition:all .3s ease}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){top:0}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){top:8px}.navbar[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){top:16px}.navbar[_ngcontent-%COMP%]   .hamburger-menu.active[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){top:8px;transform:rotate(45deg)}.navbar[_ngcontent-%COMP%]   .hamburger-menu.active[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){opacity:0;width:0}.navbar[_ngcontent-%COMP%]   .hamburger-menu.active[_ngcontent-%COMP%]   .hamburger-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){top:8px;transform:rotate(-45deg)}.navbar[_ngcontent-%COMP%]   .nav-backdrop[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:5;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.navbar[_ngcontent-%COMP%]   .nav-backdrop.open[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 992px){.navbar[_ngcontent-%COMP%]   .nav-backdrop[_ngcontent-%COMP%]{display:block}}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:none;transition:transform .5s ease,opacity .5s ease}.navbar[_ngcontent-%COMP%]   .nav-links.open[_ngcontent-%COMP%]{display:flex}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]{display:flex;align-items:center}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{display:flex}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:2rem;color:var(--text-color);text-decoration:none;font-weight:500;font-size:1rem;position:relative;padding:.5rem 0;transition:color .3s ease}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:0;height:2px;background:var(--primary-color);transition:width .3s cubic-bezier(.68,-.55,.27,1.55)}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after, .navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:after{width:100%}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600}@media (max-width: 992px){.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{position:fixed;top:0;right:-320px;width:300px;height:100vh;flex-direction:column;align-items:stretch;justify-content:space-between;padding:4rem 2.5rem 2rem;background-color:var(--bg-color);box-shadow:-5px 0 25px #00000026;transition:right .4s cubic-bezier(.68,-.55,.27,1.55);z-index:10;overflow-y:auto;display:flex}.navbar[_ngcontent-%COMP%]   .nav-links.open[_ngcontent-%COMP%]{right:0}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin-bottom:2rem;align-items:center;padding:0 1.5rem}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{display:flex}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.3rem;opacity:0;transform:translate(20px);transition:opacity .3s ease,transform .3s ease;display:block;width:100%;color:var(--text-color);text-decoration:none;text-align:left}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:last-of-type{margin-bottom:1.5rem}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:after{bottom:-5px}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   a.nav-link.animated[_ngcontent-%COMP%]{opacity:0}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   a.nav-link.animated.fadeInRight[_ngcontent-%COMP%]{transform:translate(20px)}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:1.5rem}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto 1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.navbar[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .mobile-theme-wrapper[_ngcontent-%COMP%]{width:100%;margin-top:2rem}.navbar[_ngcontent-%COMP%]   .nav-links.open[_ngcontent-%COMP%]   .nav-menu-items[_ngcontent-%COMP%]   a.nav-link.animated[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}}.navbar[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;background:transparent;border-radius:50%;font-size:1.2rem;color:var(--primary-color);margin-left:1rem;border:2px solid var(--primary-color);transition:all .3s cubic-bezier(.68,-.55,.27,1.55)}.navbar[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:hover{transform:rotate(30deg) scale(1.1);background:var(--primary-color);color:#fff;box-shadow:0 5px 15px rgba(var(--primary-color-rgb),.4)}.navbar[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-3px);background:var(--primary-color);color:#fff;border-color:var(--primary-color);box-shadow:0 6px 15px rgba(var(--primary-color-rgb),.3)}.navbar[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}.navbar[_ngcontent-%COMP%]   .theme-toggle.theme-toggle-clicked[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .5s cubic-bezier(.68,-.55,.27,1.55)}.navbar[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:after{display:none}.navbar[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .3s ease}.navbar[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]{display:none}@media (max-width: 992px){.navbar[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]{display:flex;font-size:1.2rem;background:transparent;color:var(--primary-color);border:2px solid var(--primary-color);border-radius:50%;padding:0;align-items:center;justify-content:center;text-align:center;transition:all .4s cubic-bezier(.68,-.55,.27,1.55)}.navbar[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--primary-color);margin:0}.navbar[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}}.navbar[_ngcontent-%COMP%]   .theme-toggle.mobile-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block!important}@media (max-width: 992px){.navbar[_ngcontent-%COMP%]   .theme-toggle.desktop-toggle[_ngcontent-%COMP%]{display:none}}.navbar.scrolled[_ngcontent-%COMP%]{padding:.8rem 0;background-color:var(--bg-color);box-shadow:0 5px 15px #0000001a}.navbar.scrolled[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.8rem}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeInUpBounce{0%{opacity:0;transform:translateY(20px)}70%{opacity:1;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}']}),i})();function TB(i,e){if(e===Lee)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===HS||e===Z2){let t=i.getIndex();if(null===t){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}const n=t.count-2,r=[];if(e===HS)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class ile extends yg{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new lle(t)}),this.register(function(t){return new cle(t)}),this.register(function(t){return new yle(t)}),this.register(function(t){return new vle(t)}),this.register(function(t){return new Mle(t)}),this.register(function(t){return new dle(t)}),this.register(function(t){return new hle(t)}),this.register(function(t){return new fle(t)}),this.register(function(t){return new ple(t)}),this.register(function(t){return new ale(t)}),this.register(function(t){return new gle(t)}),this.register(function(t){return new ule(t)}),this.register(function(t){return new _le(t)}),this.register(function(t){return new mle(t)}),this.register(function(t){return new sle(t)}),this.register(function(t){return new ble(t)}),this.register(function(t){return new xle(t)})}load(e,t,n,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const c=Yc.extractUrlBase(e);o=Yc.resolveURL(c,this.path)}else o=Yc.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ea(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===AB){try{o[Jt.KHR_BINARY_GLTF]=new Cle(e)}catch(d){return void(r&&r(d))}s=JSON.parse(o[Jt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new kle(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(d){case Jt.KHR_MATERIALS_UNLIT:o[d]=new ole;break;case Jt.KHR_DRACO_MESH_COMPRESSION:o[d]=new wle(s,this.dracoLoader);break;case Jt.KHR_TEXTURE_TRANSFORM:o[d]=new Sle;break;case Jt.KHR_MESH_QUANTIZATION:o[d]=new Ele;break;default:f.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function rle(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Jt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class sle{constructor(e){this.parser=e,this.name=Jt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Fe(16777215);void 0!==l.color&&u.setRGB(l.color[0],l.color[1],l.color[2],Cr);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new qc(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Jv(u),c.distance=d;break;case"spot":c=new yU(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ya(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class ole{constructor(){this.name=Jt.KHR_MATERIALS_UNLIT}getMaterialType(){return qs}extendParams(e,t,n){const r=[];e.color=new Fe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Cr),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture,Fi))}return Promise.all(r)}}class ale{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class lle{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new he(a,a)}return Promise.all(s)}}class cle{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class ule{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class dle{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Fe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Cr)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Fi)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class hle{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class fle{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Fe).setRGB(a[0],a[1],a[2],Cr),Promise.all(s)}}class ple{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class gle{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new Fe).setRGB(a[0],a[1],a[2],Cr),void 0!==o.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Fi)),Promise.all(s)}}class mle{constructor(e){this.parser=e,this.name=Jt.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class _le{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Eo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class yle{constructor(e){this.parser=e,this.name=Jt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class vle{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Mle{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class ble{constructor(e){this.name=Jt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,f=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,f,r.mode,r.filter).then(function(h){return h.buffer}):o.ready.then(function(){const h=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(h),u,d,f,r.mode,r.filter),h})})}return null}}class xle{constructor(e){this.name=Jt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Ks.TRIANGLES&&c.mode!==Ks.TRIANGLE_STRIP&&c.mode!==Ks.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],f=c[0].count,h=[];for(const p of d){const g=new ft,m=new I,_=new qi,M=new I(1,1,1),y=new B3(p.geometry,p.material,f);for(let v=0;v<f;v++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,v),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,v),l.SCALE&&M.fromBufferAttribute(l.SCALE,v),y.setMatrixAt(v,g.compose(m,_,M));for(const v in l)if("_COLOR_0"===v){const C=l[v];y.instanceColor=new ph(C.array,C.itemSize,C.normalized)}else"TRANSLATION"!==v&&"ROTATION"!==v&&"SCALE"!==v&&p.geometry.setAttribute(v,l[v]);di.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),h.push(y)}return u.isGroup?(u.clear(),u.add(...h),u):h[0]}))}}const AB="glTF";class Cle{constructor(e){this.name=Jt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==AB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(e,12+o,a);this.content=n.decode(c)}else if(5130562===l){const c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class wle{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=MT[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=MT[u]||u.toLowerCase();if(void 0!==o[u]){const f=n.accessors[e.attributes[u]];c[d]=Th[f.componentType].name,l[d]=!0===f.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,f){r.decodeDracoFile(u,function(h){for(const p in h.attributes){const m=l[p];void 0!==m&&(h.attributes[p].normalized=m)}d(h)},a,c,Cr,f)})})}}class Sle{constructor(){this.name=Jt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Ele{constructor(){this.name=Jt.KHR_MESH_QUANTIZATION}}class DB extends mg{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-t,d=(n-t)/u,f=d*d,h=f*d,p=e*c,g=p-c,m=-2*h+3*f,_=h-f,M=1-m,y=_-f+d;for(let v=0;v!==a;v++)s[v]=M*o[g+v+a]+y*(o[g+v+l]*u)+m*o[p+v+a]+_*(o[p+v]*u);return s}}const Tle=new qi;class Ale extends DB{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Tle.fromArray(s).normalize().toArray(s),s}}const Ks={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Th={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},OB={9728:ki,9729:ti,9984:aS,9985:Hp,9986:Fd,9987:bo},IB={33071:$s,33648:zp,10497:Nc},vT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},MT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ple={CUBICSPLINE:void 0,LINEAR:$p,STEP:jp};function su(i,e,t){for(const n in t.extensions)void 0===i[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Ya(i,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Ile(i,e){if(i.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Rle(i){let e;const t=i.extensions&&i.extensions[Jt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+xT(t.attributes):i.indices+":"+xT(i.attributes)+":"+i.mode,void 0!==i.targets)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+xT(i.targets[n]);return e}function xT(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function CT(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Lle=new ft;class kle{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new rle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(a);const l=a.match(/Version\/(\d+)/);r=n&&l?parseInt(l[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||n&&r<17||s&&o<98?new Xne(this.options.manager):new rie(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ea(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return su(s,a,r),Ya(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Jt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Yc.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteOffset||0;return n.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=vT[r.type],l=!0===r.normalized,c=new(0,Th[r.componentType])(r.count*o);return Promise.resolve(new An(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=vT[r.type],c=Th[r.componentType],u=c.BYTES_PER_ELEMENT,f=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let g,m;if(h&&h!==u*l){const _=Math.floor(f/h),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let y=t.cache.get(M);y||(g=new c(a,_*h,r.count*h/u),y=new gE(g,h/u),t.cache.add(M,y)),m=new zc(y,l,f%h/u,p)}else g=null===a?new c(r.count*l):new c(a,f,r.count*l),m=new An(g,l,p);if(void 0!==r.sparse){const v=r.sparse.values.byteOffset||0,C=new(0,Th[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*vT.SCALAR),w=new c(o[2],v,r.sparse.count*l);null!==a&&(m=new An(m.array.slice(),m.itemSize,m.normalized)),m.normalized=!1;for(let S=0,E=C.length;S<E;S++){const x=C[S];if(m.setX(x,w[S*l]),l>=2&&m.setY(x,w[S*l+1]),l>=3&&m.setZ(x,w[S*l+2]),l>=4&&m.setW(x,w[S*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}m.normalized=p}return m})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const f=(s.samplers||{})[o.sampler]||{};return u.magFilter=OB[f.magFilter]||ti,u.minFilter=OB[f.minFilter]||bo,u.wrapS=IB[f.wrapS]||Nc,u.wrapT=IB[f.wrapT]||Nc,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==ki&&u.minFilter!==ti,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const f=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(f,h){let p=f;!0===t.isImageBitmapLoader&&(p=function(g){const m=new Xs(g);m.needsUpdate=!0,f(m)}),t.load(Yc.resolveURL(d,s.path),p,void 0,h)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),Ya(d,o),d.userData.mimeType=o.mimeType||function Nle(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":i.search(/\.ktx2($|\?)/i)>0||0===i.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),s.extensions[Jt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[Jt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Jt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new kv,So.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Pr,So.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return gg}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=[];if((s.extensions||{})[Jt.KHR_MATERIALS_UNLIT]){const d=r[Jt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Fe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],Cr),a.opacity=f[3]}void 0!==d.baseColorTexture&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Fi)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=Ko);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==qs&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new he(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(void 0!==s.occlusionTexture&&o!==qs&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==qs){const d=s.emissiveFactor;a.emissive=(new Fe).setRGB(d[0],d[1],d[2],Cr)}return void 0!==s.emissiveTexture&&o!==qs&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Fi)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Ya(d,s),t.associations.set(d,{materials:e}),s.extensions&&su(r,d,s),d})}createUniqueName(e){const t=Pn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[Jt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return RB(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Rle(c),d=r[u];if(d)o.push(d.promise);else{let f;f=c.extensions&&c.extensions[Jt.KHR_DRACO_MESH_COMPRESSION]?s(c):RB(new Lt,c,t),r[u]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new gg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ra})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(u)}var i;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let h=0,p=u.length;h<p;h++){const g=u[h],m=o[h];let _;const M=c[h];if(m.mode===Ks.TRIANGLES||m.mode===Ks.TRIANGLE_STRIP||m.mode===Ks.TRIANGLE_FAN||void 0===m.mode)_=!0===s.isSkinnedMesh?new L3(g,M):new fi(g,M),!0===_.isSkinnedMesh&&_.normalizeSkinWeights(),m.mode===Ks.TRIANGLE_STRIP?_.geometry=TB(_.geometry,Z2):m.mode===Ks.TRIANGLE_FAN&&(_.geometry=TB(_.geometry,HS));else if(m.mode===Ks.LINES)_=new SE(g,M);else if(m.mode===Ks.LINE_STRIP)_=new Zo(g,M);else if(m.mode===Ks.LINE_LOOP)_=new j3(g,M);else{if(m.mode!==Ks.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);_=new TE(g,M)}Object.keys(_.geometry.morphAttributes).length>0&&Ile(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),Ya(_,s),m.extensions&&su(r,_,m),t.assignFinalMaterial(_),d.push(_)}for(let h=0,p=d.length;h<p;h++)t.associations.set(d[h],{meshes:e,primitives:h});if(1===d.length)return s.extensions&&su(r,d[0],s),d[0];const f=new $a;s.extensions&&su(r,f,s),t.associations.set(f,{meshes:e});for(let h=0,p=d.length;h<p;h++)f.add(d[h]);return f})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new wi(Sr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Qv(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ya(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return n.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const f=new ft;null!==s&&f.fromArray(s.array,16*c),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Ev(a,l)})}loadAnimation(e){const n=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,f=r.channels.length;d<f;d++){const h=r.channels[d],p=r.samplers[h.sampler],g=h.target,_=void 0!==r.parameters?r.parameters[p.input]:p.input,M=void 0!==r.parameters?r.parameters[p.output]:p.output;void 0!==g.node&&(o.push(this.getDependency("node",g.node)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",M)),c.push(p),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const f=d[0],h=d[1],p=d[2],g=d[3],m=d[4],_=[];for(let M=0,y=f.length;M<y;M++){const v=f[M],C=h[M],w=p[M],S=g[M],E=m[M];if(void 0===v)continue;v.updateMatrix&&v.updateMatrix();const x=n._createAnimationTracks(v,C,w,S,E);if(x)for(let b=0;b<x.length;b++)_.push(x[b])}return new _g(s,void 0,_)})}createNodeMesh(e){const n=this,r=this.json.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this,r=this.json.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(n.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],f=c[2];null!==f&&u.traverse(function(h){h.isSkinnedMesh&&h.bind(f,Lle)});for(let h=0,p=d.length;h<p;h++)u.add(d[h]);return u})}_loadNodeShallow(e){const n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(u=!0===s.isBone?new vE:c.length>1?new $a:1===c.length?c[0]:new di,u!==c[0])for(let d=0,f=c.length;d<f;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),Ya(u,s),s.extensions&&su(n,u,s),void 0!==s.matrix){const d=new ft;d.fromArray(s.matrix),u.applyMatrix4(d)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new $a;n.name&&(s.name=r.createUniqueName(n.name)),Ya(s,n),n.extensions&&su(t,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);return r.associations=(u=>{const d=new Map;for(const[f,h]of r.associations)(f instanceof So||f instanceof Xs)&&d.set(f,h);return u.traverse(f=>{const h=r.associations.get(f);null!=h&&d.set(f,h)}),d})(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];let c;switch(zl[s.path]===zl.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a),zl[s.path]){case zl.weights:c=vh;break;case zl.rotation:c=Mh;break;case zl.position:case zl.scale:c=xh;break;default:c=1===n.itemSize?vh:xh}const u=void 0!==r.interpolation?Ple[r.interpolation]:$p,d=this._getArrayFromAccessor(n);for(let f=0,h=l.length;f<h;f++){const p=new c(l[f]+"."+zl[s.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=CT(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){return new(this instanceof Mh?Ale:DB)(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function RB(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=MT[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==e.indices&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return tn.workingColorSpace!==Cr&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${tn.workingColorSpace}" not supported.`),Ya(i,e),function Fle(i,e,t){const n=e.attributes,r=new Er;if(void 0===n.POSITION)return;{const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new I(l[0],l[1],l[2]),new I(c[0],c[1],c[2])),a.normalized){const u=CT(Th[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new I,l=new I;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const f=t.json.accessors[d.POSITION],h=f.min,p=f.max;if(void 0!==h&&void 0!==p){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const g=CT(Th[f.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new ar;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Ole(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(void 0!==d.POSITION&&(n=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(n){const f=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):i.attributes.position;o.push(f)}if(r){const f=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):i.attributes.normal;a.push(f)}if(s){const f=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):i.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],f=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=d),s&&(i.morphAttributes.color=f),i.morphTargetsRelative=!0,i})}(i,e.targets,t):i})}const Ule=["canvas"];let Ble=(()=>{const e=class{constructor(){this.mixer=null,this.animations=[],this.mouse=new he,this.scrollPosition=0,this.heroSectionHeight=0,this.footerPosition=0}ngOnInit(){this.scene=new pE,this.scene.background=null}ngAfterViewInit(){this.setupRenderer(),this.setupCamera(),this.setupLighting(),this.loadModel(),this.setupMouseTracking(),this.setupScrollTracking(),this.animate();const n=document.getElementById("home");n&&(this.heroSectionHeight=n.clientHeight),this.updateFooterPosition()}setupRenderer(){const r=window.innerWidth,s=window.innerHeight;this.renderer=new _B({canvas:this.canvasRef.nativeElement,antialias:!0,alpha:!0}),this.renderer.setSize(r,s),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor(0,0),window.addEventListener("resize",()=>this.handleResize())}setupCamera(){const n=window.innerWidth,r=window.innerHeight;this.camera=new wi(45,n/r,.1,1e3),this.camera.position.z=4,this.camera.position.y=1.9,this.camera.position.x=0}setupLighting(){const n=new QE(16777215,1.2);this.scene.add(n);const r=new qc(16777215,1.5);r.position.set(10,10,10),this.scene.add(r);const s=new qc(16777215,.8);s.position.set(-2,0,3),this.scene.add(s);const o=new qc(5081343,1);o.position.set(0,0,-10),this.scene.add(o);const a=new Jv(5081343,2,10);a.position.set(0,0,0),this.scene.add(a);const l=new Jv(16777215,1.5,5);l.position.set(0,0,0),this.scene.add(l)}loadModel(){console.log("Starting model load process..."),(new ile).load("assets/pm2.glb",r=>{this.avatar=r.scene,this.animations=r.animations,this.mixer=new bie(this.avatar);const s=this.animations.find(l=>l.name.toLowerCase().includes("idle")||l.name.toLowerCase().includes("standing"));s&&this.mixer.clipAction(s).play();const o=this.avatar.getObjectByName("LeftArm"),a=this.avatar.getObjectByName("RightArm");o&&(o.rotation.x=-30,o.rotation.y=0,o.rotation.z=.1),a&&(a.rotation.x=-30,a.rotation.y=0,a.rotation.z=.1),this.avatar.scale.set(2.9,2.9,2.9),this.avatar.position.set(0,-5,0),this.scene.add(this.avatar)},void 0,r=>console.error("Error loading model:",r))}animate(){requestAnimationFrame(()=>this.animate());const n=.001*Date.now(),r=window.location.pathname.toLowerCase().includes("contact"),s=this.footerPosition>0&&window.scrollY+window.innerHeight-150>=this.footerPosition;if(this.avatar){const o=.1*Math.sin(.5*n);this.avatar.position.y=-2.5+o;const a=window.scrollY,l=.1*Math.sin(.3*n);this.avatar.position.x=l;let c=0;r||s?c=0:window.innerWidth>=992&&(c=a<=.1*this.heroSectionHeight?0:a<=this.heroSectionHeight?.6*Math.min(1,(a-.1*this.heroSectionHeight)/(.9*this.heroSectionHeight)):.6);const u=r||s?0:.05*Math.sin(.5*n);this.avatar.rotation.y=Sr.lerp(this.avatar.rotation.y,c+u,.05)}this.renderer.render(this.scene,this.camera)}handleResize(){!this.camera||!this.renderer||(this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight))}updateFooterPosition(){const n=document.querySelector(".footer");n&&(this.footerPosition=n.getBoundingClientRect().top+window.scrollY,console.log("Footer position updated:",this.footerPosition))}setupScrollTracking(){const n=()=>{if(window.innerWidth<992)return;this.scrollPosition=window.scrollY;const r=this.canvasRef.nativeElement;if(window.location.pathname.toLowerCase().includes("contact"))return r.style.left="0",r.style.opacity="1",void(this.avatar&&(this.avatar.rotation.y=Sr.lerp(this.avatar.rotation.y,0,.05),this.camera.position.z=4.5,this.avatar.position.y=0));if(0===this.footerPosition&&this.updateFooterPosition(),this.scrollPosition<=.1*this.heroSectionHeight)r.style.left="0",this.avatar&&(this.avatar.rotation.y=Sr.lerp(this.avatar.rotation.y,0,.05),this.camera.position.z=4.5,this.avatar.position.y=0);else if(this.scrollPosition<=this.heroSectionHeight){const s=(this.scrollPosition-.1*this.heroSectionHeight)/(.4*this.heroSectionHeight),o=Math.min(1,s);r.style.left=-30*o+"%",this.avatar&&(this.avatar.rotation.y=Sr.lerp(this.avatar.rotation.y,.6*o,.05),this.camera.position.z=4.5,this.avatar.position.y=Sr.lerp(this.avatar.position.y,-1.5*s,.05))}else this.footerPosition>0&&this.scrollPosition+window.innerHeight-150>=this.footerPosition?(r.style.left="-30%",r.style.opacity="1",this.avatar&&(this.avatar.rotation.y=Sr.lerp(this.avatar.rotation.y,0,.05),this.camera.position.z=4.5,this.avatar.position.y=Sr.lerp(this.avatar.position.y,0,.05))):(r.style.left="-30%",r.style.opacity="1",this.avatar&&(this.avatar.rotation.y=Sr.lerp(this.avatar.rotation.y,.6,.05),this.camera.position.z=4.5))};window.addEventListener("load",n),window.addEventListener("scroll",n),window.addEventListener("resize",()=>{const r=document.getElementById("home");r&&(this.heroSectionHeight=r.clientHeight),this.updateFooterPosition(),window.innerWidth<992?(this.canvasRef.nativeElement.style.left="0",this.avatar&&(this.avatar.rotation.y=Sr.lerp(this.avatar.rotation.y,0,.1))):n()}),setTimeout(n,100)}setupMouseTracking(){const n=this.canvasRef.nativeElement;window.addEventListener("mousemove",r=>{const s=n.getBoundingClientRect();if(this.mouse.x=(r.clientX-(s.left+s.width/2))/window.innerWidth*2,this.mouse.y=-r.clientY/window.innerHeight*2+1,this.avatar){const a=this.avatar.getObjectByName("Neck"),l=this.avatar.getObjectByName("LeftEye"),c=this.avatar.getObjectByName("RightEye"),u={x:.5,y:0};if(a){const f=u.x-.15*this.mouse.y;a.rotation.y=Sr.lerp(a.rotation.y,u.y+.3*this.mouse.x,.03),a.rotation.x=Sr.lerp(a.rotation.x,f,.03)}[l,c].forEach(d=>{d&&(d.rotation.y=Sr.lerp(d.rotation.y,.35*this.mouse.x,.15),d.rotation.x=Sr.lerp(d.rotation.x,.1-.15*this.mouse.y,.15))})}})}};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ls({type:e,selectors:[["app-three-scene"]],viewQuery:function(r,s){if(1&r&&y_(Ule,5),2&r){let o;Kf(o=Zf())&&(s.canvasRef=o.first)}},decls:2,vars:0,consts:[[1,"model-canvas"],["canvas",""]],template:function(r,s){1&r&&ct(0,"canvas",0,1)},styles:[".model-canvas[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100vh;z-index:-1;pointer-events:none;transition:left .6s ease-out}@media (max-width: 992px){.model-canvas[_ngcontent-%COMP%]{opacity:.3}}@media (max-width: 768px){.model-canvas[_ngcontent-%COMP%]{opacity:.2}}"]}),i})();function Ka(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function NB(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}var wT,Yi,Ln,Hn,ia,DT,OT,VB,GB,Nh,Dg,l,c,u,d,f,h,i,e,t,n,r,s,o,a,p,bs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ah={duration:.5,overwrite:!1,delay:0},Zs=1e8,bn=1/Zs,ST=2*Math.PI,Vle=ST/4,zle=0,LB=Math.sqrt,Hle=Math.cos,Gle=Math.sin,Bi=function(e){return"string"==typeof e},qn=function(e){return"function"==typeof e},Za=function(e){return"number"==typeof e},ET=function(e){return typeof e>"u"},na=function(e){return"object"==typeof e},Zr=function(e){return!1!==e},TT=function(){return typeof window<"u"},p0=function(e){return qn(e)||Bi(e)},kB="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ur=Array.isArray,AT=/(?:-?\.?\d|\.)+/gi,FB=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ph=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,PT=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,UB=/[+-]=-?[.\d]+/,BB=/[^,'"\[\]\s]+/gi,Wle=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,xs={},g0={},zB=function(e){return(g0=Oh(e,xs))&&es},IT=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},xg=function(e,t){return!t&&console.warn(e)},HB=function(e,t){return e&&(xs[e]=t)&&g0&&(g0[e]=t)||xs},Cg=function(){return 0},jle={suppressEvents:!0,isStart:!0,kill:!1},m0={suppressEvents:!0,kill:!1},$le={suppressEvents:!0},RT={},Hl=[],NT={},Cs={},LT={},WB=30,_0=[],kT="",FT=function(e){var n,r,t=e[0];if(na(t)||qn(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=_0.length;r--&&!_0[r].targetTest(t););n=_0[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new vV(e[r],n)))||e.splice(r,1);return e},ou=function(e){return e._gsap||FT(Qs(e))[0]._gsap},jB=function(e,t,n){return(n=e[t])&&qn(n)?e[t]():ET(n)&&e.getAttribute&&e.getAttribute(t)||n},Jr=function(e,t){return(e=e.split(",")).forEach(t)||e},ii=function(e){return Math.round(1e5*e)/1e5||0},pi=function(e){return Math.round(1e7*e)/1e7||0},Dh=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},Xle=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},y0=function(){var n,r,e=Hl.length,t=Hl.slice(0);for(NT={},Hl.length=0,n=0;n<e;n++)(r=t[n])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},$B=function(e,t,n,r){Hl.length&&!Yi&&y0(),e.render(t,n,r||Yi&&t<0&&(e._initted||e._startAt)),Hl.length&&!Yi&&y0()},XB=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(BB).length<2?t:Bi(e)?e.trim():e},qB=function(e){return e},ws=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Oh=function(e,t){for(var n in t)e[n]=t[n];return e},YB=function i(e,t){for(var n in t)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=na(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},v0=function(e,t){var r,n={};for(r in e)r in t||(n[r]=e[r]);return n},wg=function(e){var t=e.parent||Hn,n=e.keyframes?function(e){return function(t,n){for(var r in n)r in t||"duration"===r&&e||"ease"===r||(t[r]=n[r])}}(ur(e.keyframes)):ws;if(Zr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},KB=function(e,t,n,r,s){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},M0=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Gl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},au=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Kle=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},UT=function(e,t,n,r){return e._startAt&&(Yi?e._startAt.revert(m0):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Zle=function i(e){return!e||e._ts&&i(e.parent)},ZB=function(e){return e._repeat?Ih(e._tTime,e=e.duration()+e._rDelay)*e:0},Ih=function(e,t){var n=Math.floor(e=pi(e/t));return e&&n===e?n-1:n},b0=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},x0=function(e){return e._end=pi(e._start+(e._tDur/Math.abs(e._ts||e._rts||bn)||0))},C0=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=pi(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),x0(e),n._dirty||au(n,e)),e},JB=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=b0(e.rawTime(),t),(!t._dur||Eg(0,t.totalDuration(),n)-t._tTime>bn)&&t.render(n,!0)),au(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-bn}},ra=function(e,t,n,r){return t.parent&&Gl(t),t._start=pi((Za(n)?n:n||e!==Hn?Js(e,n,t):e._time)+t._delay),t._end=pi(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),KB(e,t,"_first","_last",e._sort?"_start":0),BT(t)||(e._recent=t),r||JB(e,t),e._ts<0&&C0(e,e._tTime),e},QB=function(e,t){return(xs.ScrollTrigger||IT("scrollTrigger",t))&&xs.ScrollTrigger.create(t,e)},eV=function(e,t,n,r,s){return qT(e,t,s),e._initted?!n&&e._pt&&!Yi&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&GB!==Es.frame?(Hl.push(e),e._lazy=[s,r],1):void 0:1},Jle=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},BT=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Rh=function(e,t,n,r){var s=e._repeat,o=pi(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:pi(o*(s+1)+e._rDelay*s):o,a>0&&!r&&C0(e,e._tTime=e._tDur*a),e.parent&&x0(e),n||au(e.parent,e),e},tV=function(e){return e instanceof Dr?au(e):Rh(e,e._dur)},tce={_start:0,endTime:Cg,totalDuration:Cg},Js=function i(e,t,n){var a,l,c,r=e.labels,s=e._recent||tce,o=e.duration()>=Zs?s.endTime(!1):e._dur;return Bi(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c="%"===t.substr(-1),a=t.indexOf("="),"<"===l||">"===l?(a>=0&&(t=t.replace(/=/,"")),("<"===l?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(l=l/100*(ur(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):null==t?o:+t},Sg=function(e,t,n){var a,l,r=Za(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Zr(l.vars.inherit)&&l.parent;o.immediateRender=Zr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new gi(t[0],o,t[s+1])},Wl=function(e,t){return e||0===e?t(e):t},Eg=function(e,t,n){return n<e?e:n>t?t:n},dr=function(e,t){return Bi(e)&&(t=Wle.exec(e))?t[1]:""},VT=[].slice,nV=function(e,t){return e&&na(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&na(e[0]))&&!e.nodeType&&e!==ia},Qs=function(e,t,n){return Ln&&!t&&Ln.selector?Ln.selector(e):!Bi(e)||n||!DT&&Lh()?ur(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach(function(r){var s;return Bi(r)&&!t||nV(r,1)?(s=n).push.apply(s,Qs(r)):n.push(r)})||n}(e,n):nV(e)?VT.call(e,0):e?[e]:[]:VT.call((t||OT).querySelectorAll(e),0)},zT=function(e){return e=Qs(e)[0]||xg("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Qs(t,n.querySelectorAll?n:n===e?xg("Invalid scope")||OT.createElement("div"):e)}},iV=function(e){return e.sort(function(){return.5-Math.random()})},rV=function(e){if(qn(e))return e;var t=na(e)?e:{each:e},n=lu(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,d=r;return Bi(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],d=r[1]),function(f,h,p){var _,M,y,v,C,w,S,E,x,g=(p||t).length,m=o[g];if(!m){if(!(x="auto"===t.grid?0:(t.grid||[1,Zs])[1])){for(S=-Zs;S<(S=p[x++].getBoundingClientRect().left)&&x<g;);x<g&&x--}for(m=o[g]=[],_=l?Math.min(x,g)*u-.5:r%x,M=x===Zs?0:l?g*d/x-.5:r/x|0,S=0,E=Zs,w=0;w<g;w++)y=w%x-_,v=M-(w/x|0),m[w]=C=c?Math.abs("y"===c?v:y):LB(y*y+v*v),C>S&&(S=C),C<E&&(E=C);"random"===r&&iV(m),m.max=S-E,m.min=E,m.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(x>g?g-1:c?"y"===c?g/x:x:Math.max(x,g/x))||0)*("edges"===r?-1:1),m.b=g<0?s-g:s,m.u=dr(t.amount||t.each)||0,n=n&&g<0?mV(n):n}return g=(m[f]-m.min)/m.max||0,pi(m.b+(n?n(g):g)*m.v)+m.u}},HT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=pi(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(Za(n)?0:dr(n))}},sV=function(e,t){var r,s,n=ur(e);return!n&&na(e)&&(r=n=e.radius||Zs,e.values?(e=Qs(e.values),(s=!Za(e[0]))&&(r*=r)):e=HT(e.increment)),Wl(t,n?qn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var f,h,a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Zs,u=0,d=e.length;d--;)(f=s?(f=e[d].x-a)*f+(h=e[d].y-l)*h:Math.abs(e[d]-a))<c&&(c=f,u=d);return u=!r||c<=r?e[u]:o,s||u===o||Za(o)?u:u+dr(o)}:HT(e))},oV=function(e,t,n,r){return Wl(ur(e)?!t:!0===n?!!(n=0):!r,function(){return ur(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r})},aV=function(e,t,n){return Wl(n,function(r){return e[~~t(r)]})},Tg=function(e){for(var r,s,o,a,t=0,n="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?BB:AT),n+=e.substr(t,r-t)+oV(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},lV=function(e,t,n,r,s){var o=t-e,a=r-n;return Wl(s,function(l){return n+((l-e)/o*a||0)})},cV=function(e,t,n){var o,a,l,r=e.labels,s=Zs;for(o in r)(a=r[o]-t)<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Ss=function(e,t,n){var l,c,u,r=e.vars,s=r[t],o=Ln,a=e._ctx;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&Hl.length&&y0(),a&&(Ln=a),u=l?s.apply(c,l):s.call(c),Ln=o,u},Ag=function(e){return Gl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Yi),e.progress()<1&&Ss(e,"onInterrupt"),e},uV=[],dV=function(e){if(e)if(e=!e.name&&e.default||e,TT()||e.headless){var t=e.name,n=qn(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Cg,render:ZT,add:$T,kill:Sce,modifier:wce,rawVars:0},o={targetTest:0,get:0,getSetter:KT,aliases:{},register:0};if(Lh(),e!==r){if(Cs[t])return;ws(r,ws(v0(e,s),o)),Oh(r.prototype,Oh(s,v0(e,o))),Cs[r.prop=t]=r,e.targetTest&&(_0.push(r),RT[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}HB(t,r),e.register&&e.register(es,r,Qr)}else uV.push(e)},xn=255,Pg={aqua:[0,xn,xn],lime:[0,xn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xn],navy:[0,0,128],white:[xn,xn,xn],olive:[128,128,0],yellow:[xn,xn,0],orange:[xn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xn,0,0],pink:[xn,192,203],cyan:[0,xn,xn],transparent:[xn,xn,xn,0]},GT=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*xn+.5|0},hV=function(e,t,n){var s,o,a,l,c,u,d,f,h,p,r=e?Za(e)?[e>>16,e>>8&xn,e&xn]:0:Pg.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Pg[e])r=Pg[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&xn,r&xn,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&xn,e&xn]}else if("hsl"===e.substr(0,3))if(r=p=e.match(AT),t){if(~e.indexOf("="))return r=e.match(FB),n&&r.length<4&&(r[3]=1),r}else l=+r[0]%360/360,c=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(c+1):u+c-u*c),r.length>3&&(r[3]*=1),r[0]=GT(l+1/3,s,o),r[1]=GT(l,s,o),r[2]=GT(l-1/3,s,o);else r=e.match(AT)||Pg.transparent;r=r.map(Number)}return t&&!p&&(s=r[0]/xn,o=r[1]/xn,a=r[2]/xn,u=((d=Math.max(s,o,a))+(f=Math.min(s,o,a)))/2,d===f?l=c=0:(h=d-f,c=u>.5?h/(2-d-f):h/(d+f),l=d===s?(o-a)/h+(o<a?6:0):d===o?(a-s)/h+2:(s-o)/h+4,l*=60),r[0]=~~(l+.5),r[1]=~~(100*c+.5),r[2]=~~(100*u+.5)),n&&r.length<4&&(r[3]=1),r},fV=function(e){var t=[],n=[],r=-1;return e.split(jl).forEach(function(s){var o=s.match(Ph)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},pV=function(e,t,n){var l,c,u,d,r="",s=(e+r).match(jl),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(f){return(f=hV(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(u=fV(e),(l=n.c).join(r)!==u.c.join(r)))for(d=(c=e.replace(jl,"1").split(Ph)).length-1;a<d;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(d=(c=e.split(jl)).length-1;a<d;a++)r+=c[a]+s[a];return r+c[d]},jl=function(){var e,i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Pg)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),uce=/hsl[a]?\(/,gV=function(e){var n,t=e.join(" ");if(jl.lastIndex=0,jl.test(t))return n=uce.test(t),e[1]=pV(e[1],n),e[0]=pV(e[0],n,fV(e[1])),!0},Es=(i=Date.now,e=500,t=33,n=i(),r=n,o=s=1e3/240,p=function g(m){var y,v,C,w,_=i()-r,M=!0===m;if((_>e||_<0)&&(n+=_-t),((y=(C=(r+=_)-n)-o)>0||M)&&(w=++d.frame,f=C-1e3*d.time,d.time=C/=1e3,o+=y+(y>=s?4:s-y),v=1),M||(l=c(g)),v)for(h=0;h<a.length;h++)a[h](C,f,w,m)},d={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(m){return f/(1e3/(m||60))},wake:function(){VB&&(!DT&&TT()&&(ia=DT=window,OT=ia.document||{},xs.gsap=es,(ia.gsapVersions||(ia.gsapVersions=[])).push(es.version),zB(g0||ia.GreenSockGlobals||!ia.gsap&&ia||{}),uV.forEach(dV)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=u||function(m){return setTimeout(m,o-1e3*d.time+1|0)},Dg=1,p(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Dg=0,c=Cg},lagSmoothing:function(m,_){e=m||1/0,t=Math.min(_||33,e)},fps:function(m){o=1e3*d.time+(s=1e3/(m||240))},add:function(m,_,M){var y=_?function(v,C,w,S){m(v,C,w,S),d.remove(y)}:m;return d.remove(m),a[M?"unshift":"push"](y),Lh(),y},remove:function(m,_){~(_=a.indexOf(m))&&a.splice(_,1)&&h>=_&&h--},_listeners:a=[]}),Lh=function(){return!Dg&&Es.wake()},nn={},dce=/^[\d.\-M][\d.\-,\s]/,hce=/["']/g,fce=function(e){for(var a,l,c,t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(hce,"").trim():+c,r=l.substr(a+1).trim();return t},mV=function(e){return function(t){return 1-e(1-t)}},_V=function i(e,t){for(var r,n=e._first;n;)n instanceof Dr?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},lu=function(e,t){return e&&(qn(e)?e:nn[e]||function(e){var t=(e+"").split("("),n=nn[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[fce(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(XB)):nn._CE&&dce.test(e)?nn._CE("",e):n}(e))||t},cu=function(e,t,n,r){void 0===n&&(n=function(l){return 1-t(1-l)}),void 0===r&&(r=function(l){return l<.5?t(2*l)/2:1-t(2*(1-l))/2});var o,s={easeIn:t,easeOut:n,easeInOut:r};return Jr(e,function(a){for(var l in nn[a]=xs[a]=s,nn[o=a.toLowerCase()]=n,s)nn[o+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=nn[a+"."+l]=s[l]}),s},yV=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},WT=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/ST*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*Gle((u-o)*s)+1},l="out"===e?a:"in"===e?function(c){return 1-a(1-c)}:yV(a);return s=ST/s,l.config=function(c,u){return i(e,c,u)},l},jT=function i(e,t){void 0===t&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?n:"in"===e?function(s){return 1-n(1-s)}:yV(n);return r.config=function(s){return i(e,s)},r};Jr("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;cu(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(2*n,t)/2:1-Math.pow(2*(1-n),t)/2})}),nn.Linear.easeNone=nn.none=nn.Linear.easeIn,cu("Elastic",WT("in"),WT("out"),WT()),function(i,e){var s=function(a){return a<.36363636363636365?i*a*a:a<.7272727272727273?i*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};cu("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),cu("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)}),cu("Circ",function(i){return-(LB(1-i*i)-1)}),cu("Sine",function(i){return 1===i?1:1-Hle(i*Vle)}),cu("Back",jT("in"),jT("out"),jT()),nn.SteppedEase=nn.steps=xs.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,o=1-bn;return function(a){return((r*Eg(0,o,a)|0)+s)*n}}},Ah.ease=nn["quad.out"],Jr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return kT+=i+","+i+"Params,"});var vV=function(e,t){this.id=zle++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:jB,this.set=t?t.getSetter:KT},Og=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Rh(this,+t.duration,1,1),this.data=t.data,Ln&&(this._ctx=Ln,Ln.data.push(this)),Dg||Es.wake()}var e=i.prototype;return e.delay=function(n){return n||0===n?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Rh(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(Lh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(C0(this,n),!s._dp||s.parent||JB(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&ra(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===bn||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),$B(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+ZB(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?n:1-n)+ZB(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Ih(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-bn?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?b0(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-bn?0:this._rts,this.totalTime(Eg(-Math.abs(this._delay),this._tDur,s),!1!==r),x0(this),Kle(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Lh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==bn&&(this._tTime-=bn)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&ra(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Zr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?b0(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){void 0===n&&(n=$le);var r=Yi;return Yi=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),"nested"!==this.data&&!1!==n.kill&&this.kill(),Yi=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,tV(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,tV(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(Js(this,n),Zr(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Zr(r)),this._dur||(this._zTime=-bn),this},e.play=function(n,r){return null!=n&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return null!=n&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return null!=n&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-bn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-bn,this},e.isActive=function(){var s,n=this.parent||this._dp,r=this._start;return!(n&&!(this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-bn))},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),"onUpdate"===n&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=qn(n)?n:qB,a=function(){var c=r.then;r.then=null,qn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Ag(this)},i}();ws(Og.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-bn,_prom:0,_ps:!1,_rts:1});var Dr=function(i){function e(n,r){var s;return void 0===n&&(n={}),(s=i.call(this,n)||this).labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Zr(n.sortChildren),Hn&&ra(n.parent||Hn,Ka(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&QB(Ka(s),n.scrollTrigger),s}NB(e,i);var t=e.prototype;return t.to=function(r,s,o){return Sg(0,arguments,this),this},t.from=function(r,s,o){return Sg(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Sg(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,wg(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new gi(r,s,Js(this,o),1),this},t.call=function(r,s,o){return ra(this,gi.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new gi(r,o,Js(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,wg(o).immediateRender=Zr(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,d){return a.startAt=o,wg(a).immediateRender=Zr(a.immediateRender),this.staggerTo(r,s,a,l,c,u,d)},t.render=function(r,s,o){var f,h,p,g,m,_,M,y,v,C,w,S,a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:pi(r),d=this._zTime<0!=r<0&&(this._initted||!c);if(this!==Hn&&u>l&&r>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),f=u,v=this._start,_=!(y=this._ts),d&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(w=this._yoyo,m=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*m+r,s,o);if(f=pi(u%m),u===l?(g=this._repeat,f=c):((g=~~(C=pi(u/m)))&&g===C&&(f=c,g--),f>c&&(f=c)),C=Ih(this._tTime,m),!a&&this._tTime&&C!==g&&this._tTime-C*m-this._dur<=0&&(C=g),w&&1&g&&(f=c-f,S=1),g!==C&&!this._lock){var E=w&&1&C,x=E===(w&&1&g);if(g<C&&(E=!E),a=E?0:u%c?c:u,this._lock=1,this.render(a||(S?0:pi(g*m)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Ss(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,x&&(this._lock=2,this.render(a=E?c:-1e-4,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;_V(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,pi(a),pi(f)),M&&(u-=f-(f=M._start))),this._tTime=u,this._time=f,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&f&&!s&&!g&&(Ss(this,"onStart"),this._tTime!==u))return this;if(f>=a&&r>=0)for(h=this._first;h;){if(p=h._next,(h._act||f>=h._start)&&h._ts&&M!==h){if(h.parent!==this)return this.render(r,s,o);if(h.render(h._ts>0?(f-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(f-h._start)*h._ts,s,o),f!==this._time||!this._ts&&!_){M=0,p&&(u+=this._zTime=-bn);break}}h=p}else{h=this._last;for(var b=r<0?r:f;h;){if(p=h._prev,(h._act||b<=h._end)&&h._ts&&M!==h){if(h.parent!==this)return this.render(r,s,o);if(h.render(h._ts>0?(b-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(b-h._start)*h._ts,s,o||Yi&&(h._initted||h._startAt)),f!==this._time||!this._ts&&!_){M=0,p&&(u+=this._zTime=b?-bn:bn);break}}h=p}}if(M&&!s&&(this.pause(),M.render(f>=a?0:-bn)._zTime=f>=a?1:-1,this._ts))return this._start=v,x0(this),this.render(r,s,o);this._onUpdate&&!s&&Ss(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(v===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Gl(this,1),!s&&(!(r<0)||a)&&(u||a||!l)&&(Ss(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(Za(s)||(s=Js(this,s,r)),!(r instanceof Og)){if(ur(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Bi(r))return this.addLabel(r,s);if(!qn(r))return this;r=gi.delayedCall(0,r)}return this!==r?ra(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Zs);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof gi?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Bi(r)?this.removeLabel(r):qn(r)?this.killTweensOf(r):(r.parent===this&&M0(this,r),r===this._recent&&(this._recent=this._last),au(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=pi(Es.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Js(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=gi.delayedCall(0,s||Cg,o);return a.data="isPause",this._hasPause=1,ra(this,a,Js(this,r))},t.removePause=function(r){var s=this._first;for(r=Js(this,r);s;)s._start===r&&"isPause"===s.data&&Gl(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)$l!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=Qs(r),l=this._first,c=Za(s);l;)l instanceof gi?Xle(l._targets,a)&&(c?(!$l||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var h,o=this,a=Js(o,r),c=s.startAt,u=s.onStart,d=s.onStartParams,f=s.immediateRender,p=gi.to(o,ws({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||bn,onStart:function(){if(o.pause(),!h){var m=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());p._dur!==m&&Rh(p,m,0,1).render(p._time,!0,!0),h=1}u&&u.apply(p,d||[])}},s));return f?p.render(0):p},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,ws({startAt:{time:Js(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),cV(this,Js(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),cV(this,Js(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+bn)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var c,a=this._first,l=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return au(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),au(this)},t.totalDuration=function(r){var c,u,d,s=0,o=this,a=o._last,l=Zs;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,ra(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Rh(o,o===Hn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Hn._ts&&($B(Hn,b0(r,Hn)),GB=Es.frame),Es.frame>=WB){WB+=bs.autoSleep||120;var s=Hn._first;if((!s||!s._ts)&&bs.autoSleep&&Es._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Es.sleep()}}},e}(Og);ws(Dr.prototype,{_lock:0,_hasPause:0,_forcing:0});var $l,XT,mce=function(e,t,n,r,s,o,a){var d,f,h,p,g,m,_,M,l=new Qr(this._pt,e,t,0,1,SV,null,s),c=0,u=0;for(l.b=n,l.e=r,n+="",(_=~(r+="").indexOf("random("))&&(r=Tg(r)),o&&(o(M=[n,r],e,t),n=M[0],r=M[1]),f=n.match(PT)||[];d=PT.exec(r);)p=d[0],g=r.substring(c,d.index),h?h=(h+1)%5:"rgba("===g.substr(-5)&&(h=1),p!==f[u++]&&(m=parseFloat(f[u-1])||0,l._pt={_next:l._pt,p:g||1===u?g:",",s:m,c:"="===p.charAt(1)?Dh(m,p)-m:parseFloat(p)-m,m:h&&h<4?Math.round:0},c=PT.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(UB.test(r)||_)&&(l.e=0),this._pt=l,l},$T=function(e,t,n,r,s,o,a,l,c,u){qn(r)&&(r=r(s||0,e,o));var p,d=e[t],f="get"!==n?n:qn(d)?c?e[t.indexOf("set")||!qn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,h=qn(d)?c?bce:CV:YT;if(Bi(r)&&(~r.indexOf("random(")&&(r=Tg(r)),"="===r.charAt(1)&&((p=Dh(f,r)+(dr(f)||0))||0===p)&&(r=p)),!u||f!==r||XT)return isNaN(f*r)||""===r?(!d&&!(t in e)&&IT(t,r),mce.call(this,e,t,f,r,h,l||bs.stringFilter,c)):(p=new Qr(this._pt,e,t,+f||0,r-(f||0),"boolean"==typeof d?Cce:wV,0,h),c&&(p.fp=c),a&&p.modifier(a,this,e),this._pt=p)},MV=function(e,t,n,r,s,o){var a,l,c,u;if(Cs[e]&&!1!==(a=new Cs[e]).init(s,a.rawVars?t[e]:function(e,t,n,r,s){if(qn(e)&&(e=Ig(e,s,t,n,r)),!na(e)||e.style&&e.nodeType||ur(e)||kB(e))return Bi(e)?Ig(e,s,t,n,r):e;var a,o={};for(a in e)o[a]=Ig(e[a],s,t,n,r);return o}(t[e],r,s,o,n),n,r,o)&&(n._pt=l=new Qr(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==Nh))for(c=n._ptLookup[n._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},qT=function i(e,t,n){var C,w,S,E,x,b,P,k,L,W,q,N,V,r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,d=r.yoyoEase,f=r.keyframes,h=r.autoRevert,p=e._dur,g=e._startAt,m=e._targets,_=e.parent,M=_&&"nested"===_.data?_.vars.targets:m,y="auto"===e._overwrite&&!wT,v=e.timeline;if(v&&(!f||!s)&&(s="none"),e._ease=lu(s,Ah.ease),e._yEase=d?mV(lu(!0===d?s:d,Ah.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!v&&!!r.runBackwards,!v||f&&!r.stagger){if(N=(k=m[0]?ou(m[0]).harness:0)&&r[k.prop],C=v0(r,RT),g&&(g._zTime<0&&g.progress(1),t<0&&u&&a&&!h?g.render(-1,!0):g.revert(u&&p?m0:jle),g._lazy=0),o){if(Gl(e._startAt=gi.set(m,ws({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!g&&Zr(l),startAt:null,delay:0,onUpdate:c&&function(){return Ss(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Yi||!a&&!h)&&e._startAt.revert(m0),a&&p&&t<=0&&n<=0)return void(t&&(e._zTime=t))}else if(u&&p&&!g)if(t&&(a=!1),S=ws({overwrite:!1,data:"isFromStart",lazy:a&&!g&&Zr(l),immediateRender:a,stagger:0,parent:_},C),N&&(S[k.prop]=N),Gl(e._startAt=gi.set(m,S)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Yi?e._startAt.revert(m0):e._startAt.render(-1,!0)),e._zTime=t,a){if(!t)return}else i(e._startAt,bn,bn);for(e._pt=e._ptCache=0,l=p&&Zr(l)||l&&!p,w=0;w<m.length;w++){if(P=(x=m[w])._gsap||FT(m)[w]._gsap,e._ptLookup[w]=W={},NT[P.id]&&Hl.length&&y0(),q=M===m?w:M.indexOf(x),k&&!1!==(L=new k).init(x,N||C,e,q,M)&&(e._pt=E=new Qr(e._pt,x,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(B){W[B]=E}),L.priority&&(b=1)),!k||N)for(S in C)Cs[S]&&(L=MV(S,C,e,q,x,M))?L.priority&&(b=1):W[S]=E=$T.call(e,x,S,"get",C[S],q,M,0,r.stringFilter);e._op&&e._op[w]&&e.kill(x,e._op[w]),y&&e._pt&&($l=e,Hn.killTweensOf(x,W,e.globalTime(t)),V=!e.parent,$l=0),e._pt&&l&&(NT[P.id]=1)}b&&EV(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!V,f&&t<=0&&v.render(Zs,!0,!0)},Mce=function(e,t,n,r){var o,a,s=t.ease||r||"power1.inOut";if(ur(t))a=n[e]||(n[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},Ig=function(e,t,n,r,s){return qn(e)?e.call(t,n,r,s):Bi(e)&&~e.indexOf("random(")?Tg(e):e},bV=kT+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",xV={};Jr(bV+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return xV[i]=1});var gi=function(i){function e(n,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var v,C,w,S,E,x,b,P,l=(a=i.call(this,o?r:wg(r))||this).vars,c=l.duration,u=l.delay,d=l.immediateRender,f=l.stagger,h=l.overwrite,p=l.keyframes,g=l.defaults,m=l.scrollTrigger,_=l.yoyoEase,M=r.parent||Hn,y=(ur(n)||kB(n)?Za(n[0]):"length"in r)?[n]:Qs(n);if(a._targets=y.length?FT(y):xg("GSAP target "+n+" not found. https://gsap.com",!bs.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=h,p||f||p0(c)||p0(u)){if(r=a.vars,(v=a.timeline=new Dr({data:"nested",defaults:g||{},targets:M&&"nested"===M.data?M.vars.targets:y})).kill(),v.parent=v._dp=Ka(a),v._start=0,f||p0(c)||p0(u)){if(S=y.length,b=f&&rV(f),na(f))for(E in f)~bV.indexOf(E)&&(P||(P={}),P[E]=f[E]);for(C=0;C<S;C++)(w=v0(r,xV)).stagger=0,_&&(w.yoyoEase=_),P&&Oh(w,P),x=y[C],w.duration=+Ig(c,Ka(a),C,x,y),w.delay=(+Ig(u,Ka(a),C,x,y)||0)-a._delay,!f&&1===S&&w.delay&&(a._delay=u=w.delay,a._start+=u,w.delay=0),v.to(x,w,b?b(C,x,y):0),v._ease=nn.none;v.duration()?c=u=0:a.timeline=0}else if(p){wg(ws(v.vars.defaults,{ease:"none"})),v._ease=lu(p.ease||r.ease||"none");var L,W,q,k=0;if(ur(p))p.forEach(function(N){return v.to(y,N,">")}),v.duration();else{for(E in w={},p)"ease"===E||"easeEach"===E||Mce(E,p[E],w,p.easeEach);for(E in w)for(L=w[E].sort(function(N,V){return N.t-V.t}),k=0,C=0;C<L.length;C++)(q={ease:(W=L[C]).e,duration:(W.t-(C?L[C-1].t:0))/100*c})[E]=W.v,v.to(y,q,k),k+=q.duration;v.duration()<c&&v.to({},{duration:c-v.duration()})}}c||a.duration(c=v.duration())}else a.timeline=0;return!0===h&&!wT&&($l=Ka(a),Hn.killTweensOf(y),$l=0),ra(M,Ka(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!p&&a._start===pi(M._time)&&Zr(d)&&Zle(Ka(a))&&"nested"!==M.data)&&(a._tTime=-bn,a.render(Math.max(0,-u)||0)),m&&QB(Ka(a),m),a}NB(e,i);var t=e.prototype;return t.render=function(r,s,o){var f,h,p,g,m,_,M,y,v,a=this._time,l=this._tDur,c=this._dur,u=r<0,d=r>l-bn&&!u?l:r<bn?0:r;if(c){if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(f=d,y=this.timeline,this._repeat){if(g=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*g+r,s,o);if(f=pi(d%g),d===l?(p=this._repeat,f=c):(p=~~(m=pi(d/g)))&&p===m?(f=c,p--):f>c&&(f=c),(_=this._yoyo&&1&p)&&(v=this._yEase,f=c-f),m=Ih(this._tTime,g),f===a&&!o&&this._initted&&p===m)return this._tTime=d,this;p!==m&&(y&&this._yEase&&_V(y,_),this.vars.repeatRefresh&&!_&&!this._lock&&f!==g&&this._initted&&(this._lock=o=1,this.render(pi(g*p),!0).invalidate()._lock=0))}if(!this._initted){if(eV(this,u?r:f,o,s,d))return this._tTime=0,this;if(!(a===this._time||o&&this.vars.repeatRefresh&&p!==m))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(v||this._ease)(f/c),this._from&&(this.ratio=M=1-M),f&&!a&&!s&&!p&&(Ss(this,"onStart"),this._tTime!==d))return this;for(h=this._pt;h;)h.r(M,h.d),h=h._next;y&&y.render(r<0?r:y._dur*y._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&UT(this,r,0,o),Ss(this,"onUpdate")),this._repeat&&p!==m&&this.vars.onRepeat&&!s&&this.parent&&Ss(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&UT(this,r,0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Gl(this,1),!s&&(!u||a)&&(d||a||_)&&(Ss(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var c,u,d,s=e.ratio,o=t<0||!t&&(!e._start&&Jle(e)&&(e._initted||!BT(e))||(e._ts<0||e._dp._ts<0)&&!BT(e))?0:1,a=e._rDelay,l=0;if(a&&e._repeat&&(l=Eg(0,e._tDur,t),u=Ih(l,a),e._yoyo&&1&u&&(o=1-o),u!==Ih(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Yi||r||e._zTime===bn||!t&&e._zTime){if(!e._initted&&eV(e,t,r,n,l))return;for(d=e._zTime,e._zTime=t||(n?bn:0),n||(n=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&UT(e,t,0,!0),e._onUpdate&&!n&&Ss(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Ss(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Gl(e,1),!n&&!Yi&&(Ss(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){Dg||Es.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||qT(this,c),function(e,t,n,r,s,o,a,l){var u,d,f,h,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,h=e._targets.length;h--;){if((u=f[h][t])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return XT=1,e.vars[t]="+=0",qT(e,a),XT=0,l?xg(t+" not eligible for reset"):1;c.push(u)}for(h=c.length;h--;)(u=(d=c[h])._pt||d).s=!r&&0!==r||s?u.s+(r||0)+o*u.c:r,u.c=n-u.s,d.e&&(d.e=ii(n)+dr(d.e)),d.b&&(d.b=u.s+dr(d.b))}(this,r,s,o,a,this._ease(c/this._dur),c,l)?this.resetTo(r,s,o,a,1):(C0(this,0),this.parent||KB(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?Ag(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Yi),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,$l&&!0!==$l.vars.overwrite)._first||Ag(this),this.parent&&o!==this.timeline.totalDuration()&&Rh(this,this._dur*this.timeline._tDur/o,0,1),this}var d,f,h,p,g,m,_,a=this._targets,l=r?Qs(r):a,c=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(a,l))return"all"===s&&(this._pt=0),Ag(this);for(d=this._op=this._op||[],"all"!==s&&(Bi(s)&&(g={},Jr(s,function(M){return g[M]=1}),s=g),s=function(e,t){var s,o,a,l,n=e[0]?ou(e[0]).harness:0,r=n&&n.aliases;if(!r)return t;for(o in s=Oh({},t),r)if(o in s)for(a=(l=r[o].split(",")).length;a--;)s[l[a]]=s[o];return s}(a,s)),_=a.length;_--;)if(~l.indexOf(a[_]))for(g in f=c[_],"all"===s?(d[_]=s,p=f,h={}):(h=d[_]=d[_]||{},p=s),p)(m=f&&f[g])&&((!("kill"in m.d)||!0===m.d.kill(g))&&M0(this,m,"_pt"),delete f[g]),"all"!==h&&(h[g]=1);return this._initted&&!this._pt&&u&&Ag(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Sg(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Sg(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Hn.killTweensOf(r,s,o)},e}(Og);ws(gi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Jr("staggerTo,staggerFrom,staggerFromTo",function(i){gi[i]=function(){var e=new Dr,t=VT.call(arguments,0);return t.splice("staggerFromTo"===i?5:4,0,0),e[i].apply(e,t)}});var YT=function(e,t,n){return e[t]=n},CV=function(e,t,n){return e[t](n)},bce=function(e,t,n,r){return e[t](r.fp,n)},xce=function(e,t,n){return e.setAttribute(t,n)},KT=function(e,t){return qn(e[t])?CV:ET(e[t])&&e.setAttribute?xce:YT},wV=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Cce=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},SV=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},ZT=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},wce=function(e,t,n,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},Sce=function(e){for(var n,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?M0(this,t,"_pt"):t.dep||(n=1),t=r;return!n},Ece=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},EV=function(e){for(var n,r,s,o,t=e._pt;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},Qr=function(){function i(t,n,r,s,o,a,l,c,u){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||wV,this.d=l||this,this.set=c||YT,this.pr=u||0,this._next=t,t&&(t._prev=this)}return i.prototype.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=Ece,this.m=n,this.mt=s,this.tween=r},i}();Jr(kT+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return RT[i]=1}),xs.TweenMax=xs.TweenLite=gi,xs.TimelineLite=xs.TimelineMax=Dr,Hn=new Dr({sortChildren:!1,defaults:Ah,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),bs.stringFilter=gV;var uu=[],w0={},Tce=[],TV=0,Ace=0,JT=function(e){return(w0[e]||Tce).map(function(t){return t()})},QT=function(){var e=Date.now(),t=[];e-TV>2&&(JT("matchMediaInit"),uu.forEach(function(n){var o,a,l,c,r=n.queries,s=n.conditions;for(a in r)(o=ia.matchMedia(r[a]).matches)&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(n.revert(),l&&t.push(n))}),JT("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),TV=e,JT("matchMedia"))},AV=function(){function i(t,n){this.selector=n&&zT(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Ace++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){qn(n)&&(s=r,r=n,n=qn);var o=this,a=function(){var d,c=Ln,u=o.selector;return c&&c!==o&&c.data.push(o),s&&(o.selector=zT(s)),Ln=o,d=r.apply(o,arguments),qn(d)&&o._r.push(d),Ln=c,o.selector=u,o.isReverted=!1,d};return o.last=a,n===qn?a(o,function(l){return o.add(null,l)}):n?o[n]=a:a},e.ignore=function(n){var r=Ln;Ln=null,n(this),Ln=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof gi&&!(r.parent&&"nested"===r.parent.data)&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?function(){for(var c,a=s.getTweens(),l=s.data.length;l--;)"isFlip"===(c=s.data[l]).data&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(n)}),l=s.data.length;l--;)(c=s.data[l])instanceof Dr?"nested"!==c.data&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof gi)&&c.revert&&c.revert(n);s._r.forEach(function(u){return u(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=uu.length;o--;)uu[o].id===this.id&&uu.splice(o,1)},e.revert=function(n){this.kill(n||{})},i}(),Pce=function(){function i(t){this.contexts=[],this.scope=t,Ln&&Ln.data.push(this)}var e=i.prototype;return e.add=function(n,r,s){na(n)||(n={matches:n});var l,c,u,o=new AV(0,s||this.scope),a=o.conditions={};for(c in Ln&&!o.selector&&(o.selector=Ln.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n,n)"all"===c?u=1:(l=ia.matchMedia(n[c]))&&(uu.indexOf(o)<0&&uu.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(QT):l.addEventListener("change",QT));return u&&r(o,function(d){return o.add(null,d)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),S0={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return dV(r)})},timeline:function(e){return new Dr(e)},getTweensOf:function(e,t){return Hn.getTweensOf(e,t)},getProperty:function(e,t,n,r){Bi(e)&&(e=Qs(e)[0]);var s=ou(e||{}).get,o=n?qB:XB;return"native"===n&&(n=""),e&&(t?o((Cs[t]&&Cs[t].get||s)(e,t,n,r)):function(a,l,c){return o((Cs[a]&&Cs[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,n){if((e=Qs(e)).length>1){var r=e.map(function(u){return es.quickSetter(u,t,n)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}var o=Cs[t],a=ou(e=e[0]||{}),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;Nh._pt=0,d.init(e,n?u+n:u,Nh,0,[e]),d.render(1,d),Nh._pt&&ZT(1,Nh)}:a.set(e,l);return o?c:function(u){return c(e,l,n?u+n:u,a,1)}},quickTo:function(e,t,n){var r,s=es.to(e,ws(((r={})[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Hn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=lu(e.ease,Ah.ease)),YB(Ah,e||{})},config:function(e){return YB(bs,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!Cs[a]&&!xs[a]&&xg(t+" effect requires "+a+" plugin.")}),LT[t]=function(a,l,c){return n(Qs(a),ws(l||{},s),c)},o&&(Dr.prototype[t]=function(a,l,c){return this.add(LT[t](a,na(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){nn[e]=lu(t)},parseEase:function(e,t){return arguments.length?lu(e,t):nn},getById:function(e){return Hn.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,n=new Dr(e);for(n.smoothChildTiming=Zr(e.smoothChildTiming),Hn.remove(n),n._dp=0,n._time=n._tTime=Hn._time,r=Hn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof gi&&r.vars.onComplete===r._targets[0]))&&ra(n,r,r._start-r._delay),r=s;return ra(Hn,n,0),n},context:function(e,t){return e?new AV(e,t):Ln},matchMedia:function(e){return new Pce(e)},matchMediaRefresh:function(){return uu.forEach(function(e){var n,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||QT()},addEventListener:function(e,t){var n=w0[e]||(w0[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=w0[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function i(e,t,n){var r=t-e;return ur(e)?aV(e,i(0,e.length),t):Wl(n,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function i(e,t,n){var r=t-e,s=2*r;return ur(e)?aV(e,i(0,e.length-1),t):Wl(n,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:rV,random:oV,snap:sV,normalize:function(e,t,n){return lV(e,t,0,1,n)},getUnit:dr,clamp:function(e,t,n){return Wl(n,function(r){return Eg(e,t,r)})},splitColor:hV,toArray:Qs,selector:zT,mapRange:lV,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||dr(n))}},interpolate:function i(e,t,n,r){var s=isNaN(e+t)?0:function(h){return(1-h)*e+h*t};if(!s){var l,c,u,d,f,o=Bi(e),a={};if(!0===n&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(ur(e)&&!ur(t)){for(u=[],f=(d=e.length)-2,c=1;c<d;c++)u.push(i(e[c-1],e[c]));d--,s=function(p){p*=d;var g=Math.min(f,~~p);return u[g](p-g)},n=t}else r||(e=Oh(ur(e)?[]:{},e));if(!u){for(l in t)$T.call(a,e,l,"get",t[l]);s=function(p){return ZT(p,a)||(o?e.p:e)}}}return Wl(n,s)},shuffle:iV},install:zB,effects:LT,ticker:Es,updateRoot:Dr.updateRoot,plugins:Cs,globalTimeline:Hn,core:{PropTween:Qr,globals:HB,Tween:gi,Timeline:Dr,Animation:Og,getCache:ou,_removeLinkedListItem:M0,reverting:function(){return Yi},context:function(e){return e&&Ln&&(Ln.data.push(e),e._ctx=Ln),Ln},suppressOverwrites:function(e){return wT=e}}};Jr("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return S0[i]=gi[i]}),Es.add(Dr.updateRoot),Nh=S0.to({},{duration:0});var Dce=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},eA=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Bi(s)&&(l={},Jr(s,function(u){return l[u]=1}),s=l),t){for(c in l={},s)l[c]=t(s[c]);s=l}!function(e,t){var r,s,o,n=e._targets;for(r in t)for(s=n.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=Dce(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))}(a,s)}}}},es=S0.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;for(o in this.tween=n,t)l=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o)).op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Yi?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},eA("roundProps",HT),eA("modifiers"),eA("snap",sV))||S0;gi.version=Dr.version=es.version="3.12.7",VB=1,TT()&&Lh();var PV,Xl,kh,tA,du,DV,nA,kV,Ja={},hu=180/Math.PI,Fh=Math.PI/180,Uh=Math.atan2,OV=1e8,iA=/([A-Z])/g,Nce=/(left|right|width|margin|padding|x)/i,Lce=/[\s,\(]\S/,sa={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},rA=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},kce=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Fce=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Uce=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},IV=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},RV=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Bce=function(e,t,n){return e.style[t]=n},Vce=function(e,t,n){return e.style.setProperty(t,n)},zce=function(e,t,n){return e._gsap[t]=n},Hce=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Gce=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Wce=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},Gn="transform",ts=Gn+"Origin",jce=function i(e,t){var n=this,r=this.target,s=r.style,o=r._gsap;if(e in Ja&&s){if(this.tfm=this.tfm||{},"transform"===e)return sa.transform.split(",").forEach(function(a){return i.call(n,a,t)});if(~(e=sa[e]||e).indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=Qa(r,a)}):this.tfm[e]=o.x?o[e]:Qa(r,e),e===ts&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(Gn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(ts,t,"")),e=Gn}(s||t)&&this.props.push(e,t,s[e])},NV=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},$ce=function(){var s,o,e=this.props,t=this.target,n=t.style,r=t._gsap;for(s=0;s<e.length;s+=3)e[s+1]?2===e[s+1]?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty("--"===e[s].substr(0,2)?e[s]:e[s].replace(iA,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(!(s=nA())||!s.isStart)&&!n[Gn]&&(NV(n),r.zOrigin&&n[ts]&&(n[ts]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},LV=function(e,t){var n={target:e,props:[],revert:$ce,save:jce};return e._gsap||es.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return n.save(r)}),n},sA=function(e,t){var n=Xl.createElementNS?Xl.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Xl.createElement(e);return n&&n.style?n:Xl.createElement(e)},oa=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(iA,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,Bh(t)||t,1)||""},FV="O,Moz,ms,Ms,Webkit".split(","),Bh=function(e,t,n){var s=(t||du).style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(FV[o]+e in s););return o<0?null:(3===o?"ms":o>=0?FV[o]:"")+e},oA=function(){typeof window<"u"&&window.document&&(PV=window,kh=(Xl=PV.document).documentElement,du=sA("div")||{style:{}},sA("div"),Gn=Bh(Gn),ts=Gn+"Origin",du.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",kV=!!Bh("perspective"),nA=es.core.reverting,tA=1)},UV=function(e){var s,t=e.ownerSVGElement,n=sA("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0);r.style.display="block",n.appendChild(r),kh.appendChild(n);try{s=r.getBBox()}catch{}return n.removeChild(r),kh.removeChild(n),s},BV=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},VV=function(e){var t,n;try{t=e.getBBox()}catch{t=UV(e),n=1}return t&&(t.width||t.height)||n||(t=UV(e)),!t||t.width||t.x||t.y?t:{x:+BV(e,["x","cx","x1"])||0,y:+BV(e,["y","cy","y1"])||0,width:0,height:0}},zV=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!VV(e))},fu=function(e,t){if(t){var r,n=e.style;t in Ja&&t!==ts&&(t=Gn),n.removeProperty?(("ms"===(r=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),n.removeProperty("--"===r?t:t.replace(iA,"-$1").toLowerCase())):n.removeAttribute(t)}},ql=function(e,t,n,r,s,o){var a=new Qr(e._pt,t,n,0,1,o?RV:IV);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},HV={deg:1,rad:1,turn:1},Xce={grid:1,flex:1},Yl=function i(e,t,n,r){var p,g,m,_,s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=du.style,l=Nce.test(t),c="svg"===e.tagName.toLowerCase(),u=(c?"client":"offset")+(l?"Width":"Height"),d=100,f="px"===r,h="%"===r;if(r===o||!s||HV[r]||HV[o])return s;if("px"!==o&&!f&&(s=i(e,t,n,"px")),_=e.getCTM&&zV(e),(h||"%"===o)&&(Ja[t]||~t.indexOf("adius")))return p=_?e.getBBox()[l?"width":"height"]:e[u],ii(h?s/p*d:s/100*p);if(a[l?"width":"height"]=d+(f?o:r),g="rem"!==r&&~t.indexOf("adius")||"em"===r&&e.appendChild&&!c?e:e.parentNode,_&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===Xl||!g.appendChild)&&(g=Xl.body),(m=g._gsap)&&h&&m.width&&l&&m.time===Es.time&&!m.uncache)return ii(s/m.width*d);if(!h||"height"!==t&&"width"!==t)(h||"%"===o)&&!Xce[oa(g,"display")]&&(a.position=oa(e,"position")),g===e&&(a.position="static"),g.appendChild(du),p=du[u],g.removeChild(du),a.position="absolute";else{var M=e.style[t];e.style[t]=d+r,p=e[u],M?e.style[t]=M:fu(e,t)}return l&&h&&((m=ou(g)).time=Es.time,m.width=g[u]),ii(f?p*s/d:p&&s?d/p*s:0)},Qa=function(e,t,n,r){var s;return tA||oA(),t in sa&&"transform"!==t&&~(t=sa[t]).indexOf(",")&&(t=t.split(",")[0]),Ja[t]&&"transform"!==t?(s=Ng(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:T0(oa(e,ts))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=E0[t]&&E0[t](e,t,n)||oa(e,t)||jB(e,t)||("opacity"===t?1:0)),n&&!~(s+"").trim().indexOf(" ")?Yl(e,t,s,n)+n:s},qce=function(e,t,n,r){if(!n||"none"===n){var s=Bh(t,e,1),o=s&&oa(e,s,1);o&&o!==n?(t=s,n=o):"borderColor"===t&&(n=oa(e,"borderTopColor"))}var u,d,f,h,p,g,m,_,M,y,v,a=new Qr(this._pt,e.style,t,0,1,SV),l=0,c=0;if(a.b=n,a.e=r,n+="","auto"==(r+="")&&(g=e.style[t],e.style[t]=r,r=oa(e,t)||r,g?e.style[t]=g:fu(e,t)),gV(u=[n,r]),r=u[1],f=(n=u[0]).match(Ph)||[],(r.match(Ph)||[]).length){for(;d=Ph.exec(r);)m=d[0],M=r.substring(l,d.index),p?p=(p+1)%5:("rgba("===M.substr(-5)||"hsla("===M.substr(-5))&&(p=1),m!==(g=f[c++]||"")&&(h=parseFloat(g)||0,v=g.substr((h+"").length),"="===m.charAt(1)&&(m=Dh(h,m)+v),_=parseFloat(m),y=m.substr((_+"").length),l=Ph.lastIndex-y.length,y||(y=y||bs.units[t]||v,l===r.length&&(r+=y,a.e+=y)),v!==y&&(h=Yl(e,t,g,y)||0),a._pt={_next:a._pt,p:M||1===c?M:",",s:h,c:_-h,m:p&&p<4||"zIndex"===t?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r="display"===t&&"none"===r?RV:IV;return UB.test(r)&&(a.e=0),this._pt=a,a},GV={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Yce=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return("top"===n||"bottom"===n||"left"===r||"right"===r)&&(e=n,n=r,r=e),t[0]=GV[n]||n,t[1]=GV[r]||r,t.join(" ")},Kce=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,l,c,n=t.t,r=n.style,s=t.u,o=n._gsap;if("all"===s||!0===s)r.cssText="",l=1;else for(c=(s=s.split(",")).length;--c>-1;)Ja[a=s[c]]&&(l=1,a="transformOrigin"===a?ts:Gn),fu(n,a);l&&(fu(n,Gn),o&&(o.svg&&n.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Ng(n,1),o.uncache=1,NV(r)))}},E0={clearProps:function(e,t,n,r,s){if("isFromStart"!==s.data){var o=e._pt=new Qr(e._pt,t,n,0,0,Kce);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},Rg=[1,0,0,1,0,0],WV={},jV=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},$V=function(e){var t=oa(e,Gn);return jV(t)?Rg:t.substr(7).match(FB).map(ii)},aA=function(e,t){var o,a,l,c,n=e._gsap||ou(e),r=e.style,s=$V(e);return n.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(l=e.transform.baseVal.consolidate().matrix).a,l.b,l.c,l.d,l.e,l.f]).join(",")?Rg:s:(s===Rg&&!e.offsetParent&&e!==kh&&!n.svg&&(l=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,kh.appendChild(e)),s=$V(e),l?r.display=l:fu(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):kh.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},lA=function(e,t,n,r,s,o){var w,S,x,a=e._gsap,l=s||aA(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,f=a.yOffset||0,h=l[0],p=l[1],g=l[2],m=l[3],_=l[4],M=l[5],y=t.split(" "),v=parseFloat(y[0])||0,C=parseFloat(y[1])||0;n?l!==Rg&&(S=h*m-p*g)&&(x=v*(-p/S)+C*(h/S)-(h*M-p*_)/S,v=v*(m/S)+C*(-g/S)+(g*M-m*_)/S,C=x):(v=(w=VV(e)).x+(~y[0].indexOf("%")?v/100*w.width:v),C=w.y+(~(y[1]||y[0]).indexOf("%")?C/100*w.height:C)),r||!1!==r&&a.smooth?(a.xOffset=d+((_=v-c)*h+(M=C-u)*g)-_,a.yOffset=f+(_*p+M*m)-M):a.xOffset=a.yOffset=0,a.xOrigin=v,a.yOrigin=C,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[ts]="0px 0px",o&&(ql(o,a,"xOrigin",c,v),ql(o,a,"yOrigin",u,C),ql(o,a,"xOffset",d,a.xOffset),ql(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",v+" "+C)},Ng=function(e,t){var n=e._gsap||new vV(e);if("x"in n&&!t&&!n.uncache)return n;var u,d,f,h,p,g,m,_,M,y,v,C,w,S,E,x,b,P,k,L,W,q,N,V,B,ee,R,ae,Ee,He,$,ge,r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=oa(e,ts)||"0";return u=d=f=g=m=_=M=y=v=0,h=p=1,n.svg=!(!e.getCTM||!zV(e)),l.translate&&(("none"!==l.translate||"none"!==l.scale||"none"!==l.rotate)&&(r[Gn]=("none"!==l.translate?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==l.rotate?"rotate("+l.rotate+") ":"")+("none"!==l.scale?"scale("+l.scale.split(" ").join(",")+") ":"")+("none"!==l[Gn]?l[Gn]:"")),r.scale=r.rotate=r.translate="none"),S=aA(e,n.svg),n.svg&&(n.uncache?(B=e.getBBox(),c=n.xOrigin-B.x+"px "+(n.yOrigin-B.y)+"px",V=""):V=!t&&e.getAttribute("data-svg-origin"),lA(e,V||c,!!V||n.originIsAbsolute,!1!==n.smooth,S)),C=n.xOrigin||0,w=n.yOrigin||0,S!==Rg&&(P=S[0],k=S[1],L=S[2],W=S[3],u=q=S[4],d=N=S[5],6===S.length?(h=Math.sqrt(P*P+k*k),p=Math.sqrt(W*W+L*L),g=P||k?Uh(k,P)*hu:0,(M=L||W?Uh(L,W)*hu+g:0)&&(p*=Math.abs(Math.cos(M*Fh))),n.svg&&(u-=C-(C*P+w*L),d-=w-(C*k+w*W))):(He=S[7],R=S[8],ae=S[9],$=S[11],u=S[12],d=S[13],f=S[14],m=(E=Uh(ge=S[6],Ee=S[10]))*hu,E&&(V=q*(x=Math.cos(-E))+R*(b=Math.sin(-E)),B=N*x+ae*b,ee=ge*x+Ee*b,R=q*-b+R*x,ae=N*-b+ae*x,Ee=ge*-b+Ee*x,$=He*-b+$*x,q=V,N=B,ge=ee),_=(E=Uh(-L,Ee))*hu,E&&(x=Math.cos(-E),$=W*(b=Math.sin(-E))+$*x,P=V=P*x-R*b,k=B=k*x-ae*b,L=ee=L*x-Ee*b),g=(E=Uh(k,P))*hu,E&&(V=P*(x=Math.cos(E))+k*(b=Math.sin(E)),B=q*x+N*b,k=k*x-P*b,N=N*x-q*b,P=V,q=B),m&&Math.abs(m)+Math.abs(g)>359.9&&(m=g=0,_=180-_),h=ii(Math.sqrt(P*P+k*k+L*L)),p=ii(Math.sqrt(N*N+ge*ge)),E=Uh(q,N),M=Math.abs(E)>2e-4?E*hu:0,v=$?1/($<0?-$:$):0),n.svg&&(V=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!jV(oa(e,Gn)),V&&e.setAttribute("transform",V))),Math.abs(M)>90&&Math.abs(M)<270&&(s?(h*=-1,M+=g<=0?180:-180,g+=g<=0?180:-180):(p*=-1,M+=M<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=f+o,n.scaleX=ii(h),n.scaleY=ii(p),n.rotation=ii(g)+a,n.rotationX=ii(m)+a,n.rotationY=ii(_)+a,n.skewX=M+a,n.skewY=y+a,n.transformPerspective=v+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(r[ts]=T0(c)),n.xOffset=n.yOffset=0,n.force3D=bs.force3D,n.renderTransform=n.svg?Jce:kV?XV:Zce,n.uncache=0,n},T0=function(e){return(e=e.split(" "))[0]+" "+e[1]},cA=function(e,t,n){var r=dr(t);return ii(parseFloat(t)+parseFloat(Yl(e,"x",n+"px",r)))+r},Zce=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,XV(e,t)},pu="0deg",Lg="0px",gu=") ",XV=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,u=n.rotationY,d=n.rotationX,f=n.skewX,h=n.skewY,p=n.scaleX,g=n.scaleY,m=n.transformPerspective,_=n.force3D,M=n.target,y=n.zOrigin,v="",C="auto"===_&&e&&1!==e||!0===_;if(y&&(d!==pu||u!==pu)){var x,w=parseFloat(u)*Fh,S=Math.sin(w),E=Math.cos(w);w=parseFloat(d)*Fh,x=Math.cos(w),o=cA(M,o,S*x*-y),a=cA(M,a,-Math.sin(w)*-y),l=cA(M,l,E*x*-y+y)}m!==Lg&&(v+="perspective("+m+gu),(r||s)&&(v+="translate("+r+"%, "+s+"%) "),(C||o!==Lg||a!==Lg||l!==Lg)&&(v+=l!==Lg||C?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+gu),c!==pu&&(v+="rotate("+c+gu),u!==pu&&(v+="rotateY("+u+gu),d!==pu&&(v+="rotateX("+d+gu),(f!==pu||h!==pu)&&(v+="skew("+f+", "+h+gu),(1!==p||1!==g)&&(v+="scale("+p+", "+g+gu),M.style[Gn]=v||"translate(0, 0)"},Jce=function(e,t){var C,w,S,E,x,n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,u=n.skewY,d=n.scaleX,f=n.scaleY,h=n.target,p=n.xOrigin,g=n.yOrigin,m=n.xOffset,_=n.yOffset,M=n.forceCSS,y=parseFloat(o),v=parseFloat(a);l=parseFloat(l),c=parseFloat(c),(u=parseFloat(u))&&(c+=u=parseFloat(u),l+=u),l||c?(l*=Fh,c*=Fh,C=Math.cos(l)*d,w=Math.sin(l)*d,S=Math.sin(l-c)*-f,E=Math.cos(l-c)*f,c&&(u*=Fh,x=Math.tan(c-u),S*=x=Math.sqrt(1+x*x),E*=x,u&&(x=Math.tan(u),C*=x=Math.sqrt(1+x*x),w*=x)),C=ii(C),w=ii(w),S=ii(S),E=ii(E)):(C=d,E=f,w=S=0),(y&&!~(o+"").indexOf("px")||v&&!~(a+"").indexOf("px"))&&(y=Yl(h,"x",o,"px"),v=Yl(h,"y",a,"px")),(p||g||m||_)&&(y=ii(y+p-(p*C+g*S)+m),v=ii(v+g-(p*w+g*E)+_)),(r||s)&&(x=h.getBBox(),y=ii(y+r/100*x.width),v=ii(v+s/100*x.height)),h.setAttribute("transform",x="matrix("+C+","+w+","+S+","+E+","+y+","+v+")"),M&&(h.style[Gn]=x)},Qce=function(e,t,n,r,s){var d,f,o=360,a=Bi(s),c=parseFloat(s)*(a&&~s.indexOf("rad")?hu:1)-r,u=r+c+"deg";return a&&("short"===(d=s.split("_")[1])&&(c%=o)!=c%180&&(c+=c<0?o:-o),"cw"===d&&c<0?c=(c+o*OV)%o-~~(c/o)*o:"ccw"===d&&c>0&&(c=(c-o*OV)%o-~~(c/o)*o)),e._pt=f=new Qr(e._pt,t,n,r,c,kce),f.e=u,f.u="deg",e._props.push(n),f},qV=function(e,t){for(var n in t)e[n]=t[n];return e},eue=function(e,t,n){var a,l,c,u,d,f,p,r=qV({},n._gsap),o=n.style;for(l in r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Gn]=t,a=Ng(n,1),fu(n,Gn),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Gn],o[Gn]=t,a=Ng(n,1),o[Gn]=c),Ja)(c=r[l])!==(u=a[l])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(l)<0&&(d=dr(c)!==(p=dr(u))?Yl(n,l,c,p):parseFloat(c),f=parseFloat(u),e._pt=new Qr(e._pt,a,l,d,f-d,rA),e._pt.u=p||0,e._props.push(l));qV(a,r)};Jr("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});E0[e>1?"border"+i:i]=function(a,l,c,u,d){var f,h;if(arguments.length<4)return f=o.map(function(p){return Qa(a,p,c)}),5===(h=f.join(" ")).split(f[0]).length?f[0]:h;f=(u+"").split(" "),h={},o.forEach(function(p,g){return h[p]=f[g]=f[g]||f[(g-1)/2|0]}),a.init(l,h,d)}});var YV={name:"css",register:oA,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var c,u,d,f,h,p,g,m,_,M,y,v,C,w,S,E,o=this._props,a=e.style,l=n.vars.startAt;for(g in tA||oA(),this.styles=this.styles||LV(e),E=this.styles.props,this.tween=n,t)if("autoRound"!==g&&(u=t[g],!Cs[g]||!MV(g,t,n,r,e,s)))if(p=E0[g],"function"==(h=typeof u)&&(h=typeof(u=u.call(n,r,e,s))),"string"===h&&~u.indexOf("random(")&&(u=Tg(u)),p)p(this,e,g,u,n)&&(S=1);else if("--"===g.substr(0,2))c=(getComputedStyle(e).getPropertyValue(g)+"").trim(),u+="",jl.lastIndex=0,jl.test(c)||(m=dr(c),_=dr(u)),_?m!==_&&(c=Yl(e,g,c,_)+_):m&&(u+=m),this.add(a,"setProperty",c,u,r,s,0,0,g),o.push(g),E.push(g,0,a[g]);else if("undefined"!==h){if(l&&g in l?(c="function"==typeof l[g]?l[g].call(n,r,e,s):l[g],Bi(c)&&~c.indexOf("random(")&&(c=Tg(c)),dr(c+"")||"auto"===c||(c+=bs.units[g]||dr(Qa(e,g))||""),"="===(c+"").charAt(1)&&(c=Qa(e,g))):c=Qa(e,g),f=parseFloat(c),(M="string"===h&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),g in sa&&("autoAlpha"===g&&(1===f&&"hidden"===Qa(e,"visibility")&&d&&(f=0),E.push("visibility",0,a.visibility),ql(this,a,"visibility",f?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==g&&"transform"!==g&&~(g=sa[g]).indexOf(",")&&(g=g.split(",")[0])),y=g in Ja)if(this.styles.save(g),v||((C=e._gsap).renderTransform&&!t.parseTransform||Ng(e,t.parseTransform),w=!1!==t.smoothOrigin&&C.smooth,(v=this._pt=new Qr(this._pt,a,Gn,0,1,C.renderTransform,C,0,-1)).dep=1),"scale"===g)this._pt=new Qr(this._pt,C,"scaleY",C.scaleY,(M?Dh(C.scaleY,M+d):d)-C.scaleY||0,rA),this._pt.u=0,o.push("scaleY",g),g+="X";else{if("transformOrigin"===g){E.push(ts,0,a[ts]),u=Yce(u),C.svg?lA(e,u,0,w,0,this):((_=parseFloat(u.split(" ")[2])||0)!==C.zOrigin&&ql(this,C,"zOrigin",C.zOrigin,_),ql(this,a,g,T0(c),T0(u)));continue}if("svgOrigin"===g){lA(e,u,1,w,0,this);continue}if(g in WV){Qce(this,C,g,f,M?Dh(f,M+u):u);continue}if("smoothOrigin"===g){ql(this,C,"smooth",C.smooth,u);continue}if("force3D"===g){C[g]=u;continue}if("transform"===g){eue(this,u,e);continue}}else g in a||(g=Bh(g)||g);if(y||(d||0===d)&&(f||0===f)&&!Lce.test(u)&&g in a)d||(d=0),(m=(c+"").substr((f+"").length))!==(_=dr(u)||(g in bs.units?bs.units[g]:m))&&(f=Yl(e,g,c,_)),this._pt=new Qr(this._pt,y?C:a,g,f,(M?Dh(f,M+d):d)-f,y||"px"!==_&&"zIndex"!==g||!1===t.autoRound?rA:Uce),this._pt.u=_||0,m!==_&&"%"!==_&&(this._pt.b=c,this._pt.r=Fce);else if(g in a)qce.call(this,e,g,c,M?M+u:u);else if(g in e)this.add(e,g,c||e[g],M?M+u:u,r,s);else if("parseTransform"!==g){IT(g,u);continue}y||(g in a?E.push(g,0,a[g]):"function"==typeof e[g]?E.push(g,2,e[g]()):E.push(g,1,c||e[g])),o.push(g)}S&&EV(this)},render:function(e,t){if(t.tween._time||!nA())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Qa,aliases:sa,getSetter:function(e,t,n){var r=sa[t];return r&&r.indexOf(",")<0&&(t=r),t in Ja&&t!==ts&&(e._gsap.x||Qa(e,"x"))?n&&DV===n?"scale"===t?Hce:zce:(DV=n||{})&&("scale"===t?Gce:Wce):e.style&&!ET(e.style[t])?Bce:~t.indexOf("-")?Vce:KT(e,t)},core:{_removeProperty:fu,_getMatrix:aA}};es.utils.checkPrefix=Bh,es.core.getStyleSaver=LV,function(i,e,t,n){var r=Jr(i+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){Ja[s]=1});Jr(e,function(s){bs.units[s]="deg",WV[s]=1}),sa[r[13]]=i+","+e,Jr("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");sa[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Jr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){bs.units[i]="px"}),es.registerPlugin(YV);var Ut=es.registerPlugin(YV)||es;function KV(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}var Ki,A0,Ts,Kl,Zl,Vh,ZV,mu,kg,JV,el,Ao,QV,ez=function(){return Ki||typeof window<"u"&&(Ki=window.gsap)&&Ki.registerPlugin&&Ki},tz=1,zh=[],Yt=[],aa=[],Fg=Date.now,uA=function(e,t){return t},Jl=function(e,t){return~aa.indexOf(e)&&aa[aa.indexOf(e)+1][t]},Ug=function(e){return!!~JV.indexOf(e)},Or=function(e,t,n,r,s){return e.addEventListener(t,n,{passive:!1!==r,capture:!!s})},Ir=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},P0="scrollLeft",D0="scrollTop",dA=function(){return el&&el.isPressed||Yt.cache++},O0=function(e,t){var n=function r(s){if(s||0===s){tz&&(Ts.history.scrollRestoration="manual");var o=el&&el.isPressed;s=r.v=Math.round(s)||(el&&el.iOS?1:0),e(s),r.cacheID=Yt.cache,o&&uA("ss",s)}else(t||Yt.cache!==r.cacheID||uA("ref"))&&(r.cacheID=Yt.cache,r.v=e());return r.v+r.offset};return n.offset=0,e&&n},Rr={s:P0,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:O0(function(i){return arguments.length?Ts.scrollTo(i,Ai.sc()):Ts.pageXOffset||Kl[P0]||Zl[P0]||Vh[P0]||0})},Ai={s:D0,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Rr,sc:O0(function(i){return arguments.length?Ts.scrollTo(Rr.sc(),i):Ts.pageYOffset||Kl[D0]||Zl[D0]||Vh[D0]||0})},ns=function(e,t){return(t&&t._ctx&&t._ctx.selector||Ki.utils.toArray)(e)[0]||("string"==typeof e&&!1!==Ki.config().nullTargetWarn?console.warn("Element not found:",e):null)},Ql=function(e,t){var n=t.s,r=t.sc;Ug(e)&&(e=Kl.scrollingElement||Zl);var s=Yt.indexOf(e),o=r===Ai.sc?1:2;!~s&&(s=Yt.push(e)-1),Yt[s+o]||Or(e,"scroll",dA);var a=Yt[s+o],l=a||(Yt[s+o]=O0(Jl(e,n),!0)||(Ug(e)?r:O0(function(c){return arguments.length?e[n]=c:e[n]})));return l.target=e,a||(l.smooth="smooth"===Ki.getProperty(e,"scrollBehavior")),l},hA=function(e,t,n){var r=e,s=e,o=Fg(),a=o,l=t||50,c=Math.max(500,3*l),u=function(p,g){var m=Fg();g||m-o>l?(s=r,r=p,a=o,o=m):n?r+=p:r=s+(p-s)/(m-a)*(o-a)};return{update:u,reset:function(){s=r=n?0:r,a=o=0},getVelocity:function(p){var g=a,m=s,_=Fg();return(p||0===p)&&p!==r&&u(p),o===a||_-a>c?0:(r+(n?m:-m))/((n?_:o)-g)*1e3}}},Bg=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},nz=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},iz=function(){(kg=Ki.core.globals().ScrollTrigger)&&kg.core&&function(){var e=kg.core,t=e.bridge||{},n=e._scrollers,r=e._proxies;n.push.apply(n,Yt),r.push.apply(r,aa),Yt=n,aa=r,uA=function(o,a){return t[o](a)}}()},rz=function(e){return Ki=e||ez(),!A0&&Ki&&typeof document<"u"&&document.body&&(Ts=window,Kl=document,JV=[Ts,Kl,Zl=Kl.documentElement,Vh=Kl.body],QV=Ki.core.context||function(){},mu="onpointerenter"in Vh?"pointer":"mouse",ZV=ri.isTouch=Ts.matchMedia&&Ts.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ts||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Ao=ri.eventTypes=("ontouchstart"in Zl?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Zl?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return tz=0},500),iz(),A0=1),A0};Rr.op=Ai,Yt.cache=0;var ri=function(){function i(t){this.init(t)}return i.prototype.init=function(n){A0||rz(Ki)||console.warn("Please gsap.registerPlugin(Observer)"),kg||iz();var r=n.tolerance,s=n.dragMinimum,o=n.type,a=n.target,l=n.lineHeight,c=n.debounce,u=n.preventDefault,d=n.onStop,f=n.onStopDelay,h=n.ignore,p=n.wheelSpeed,g=n.event,m=n.onDragStart,_=n.onDragEnd,M=n.onDrag,y=n.onPress,v=n.onRelease,C=n.onRight,w=n.onLeft,S=n.onUp,E=n.onDown,x=n.onChangeX,b=n.onChangeY,P=n.onChange,k=n.onToggleX,L=n.onToggleY,W=n.onHover,q=n.onHoverEnd,N=n.onMove,V=n.ignoreCheck,B=n.isNormalizer,ee=n.onGestureStart,R=n.onGestureEnd,ae=n.onWheel,Ee=n.onEnable,He=n.onDisable,$=n.onClick,ge=n.scrollSpeed,xe=n.capture,se=n.allowClicks,Se=n.lockAxis,Ue=n.onLockAxis;this.target=a=ns(a)||Zl,this.vars=n,h&&(h=Ki.utils.toArray(h)),r=r||1e-9,s=s||0,p=p||1,ge=ge||1,o=o||"wheel,touch,pointer",c=!1!==c,l||(l=parseFloat(Ts.getComputedStyle(Vh).lineHeight)||22);var Ge,Je,oe,le,O,we,ve,z=this,Me=0,nt=0,Be=n.passive||!u&&!1!==n.passive,D=Ql(a,Rr),T=Ql(a,Ai),X=D(),re=T(),ue=~o.indexOf("touch")&&!~o.indexOf("pointer")&&"pointerdown"===Ao[0],ie=Ug(a),Pe=a.ownerDocument||Kl,De=[0,0,0],Ve=[0,0,0],bt=0,Ae=function(){return bt=Fg()},Oe=function(K,_e){return(z.event=K)&&h&&~h.indexOf(K.target)||_e&&ue&&"touch"!==K.pointerType||V&&V(K,_e)},lt=function(){var K=z.deltaX=nz(De),_e=z.deltaY=nz(Ve),ne=Math.abs(K)>=r,Re=Math.abs(_e)>=r;P&&(ne||Re)&&P(z,K,_e,De,Ve),ne&&(C&&z.deltaX>0&&C(z),w&&z.deltaX<0&&w(z),x&&x(z),k&&z.deltaX<0!=Me<0&&k(z),Me=z.deltaX,De[0]=De[1]=De[2]=0),Re&&(E&&z.deltaY>0&&E(z),S&&z.deltaY<0&&S(z),b&&b(z),L&&z.deltaY<0!=nt<0&&L(z),nt=z.deltaY,Ve[0]=Ve[1]=Ve[2]=0),(le||oe)&&(N&&N(z),oe&&(m&&1===oe&&m(z),M&&M(z),oe=0),le=!1),we&&!(we=!1)&&Ue&&Ue(z),O&&(ae(z),O=!1),Ge=0},$e=function(K,_e,ne){De[ne]+=K,Ve[ne]+=_e,z._vx.update(K),z._vy.update(_e),c?Ge||(Ge=requestAnimationFrame(lt)):lt()},St=function(K,_e){Se&&!ve&&(z.axis=ve=Math.abs(K)>Math.abs(_e)?"x":"y",we=!0),"y"!==ve&&(De[2]+=K,z._vx.update(K,!0)),"x"!==ve&&(Ve[2]+=_e,z._vy.update(_e,!0)),c?Ge||(Ge=requestAnimationFrame(lt)):lt()},mt=function(K){if(!Oe(K,1)){var _e=(K=Bg(K,u)).clientX,ne=K.clientY,Re=_e-z.x,me=ne-z.y,We=z.isDragging;z.x=_e,z.y=ne,(We||(Re||me)&&(Math.abs(z.startX-_e)>=s||Math.abs(z.startY-ne)>=s))&&(oe=We?2:1,We||(z.isDragging=!0),St(Re,me))}},Ht=z.onPress=function(H){Oe(H,1)||H&&H.button||(z.axis=ve=null,Je.pause(),z.isPressed=!0,H=Bg(H),Me=nt=0,z.startX=z.x=H.clientX,z.startY=z.y=H.clientY,z._vx.reset(),z._vy.reset(),Or(B?a:Pe,Ao[1],mt,Be,!0),z.deltaX=z.deltaY=0,y&&y(z))},F=z.onRelease=function(H){if(!Oe(H,1)){Ir(B?a:Pe,Ao[1],mt,!0);var K=!isNaN(z.y-z.startY),_e=z.isDragging,ne=_e&&(Math.abs(z.x-z.startX)>3||Math.abs(z.y-z.startY)>3),Re=Bg(H);!ne&&K&&(z._vx.reset(),z._vy.reset(),u&&se&&Ki.delayedCall(.08,function(){if(Fg()-bt>300&&!H.defaultPrevented)if(H.target.click)H.target.click();else if(Pe.createEvent){var me=Pe.createEvent("MouseEvents");me.initMouseEvent("click",!0,!0,Ts,1,Re.screenX,Re.screenY,Re.clientX,Re.clientY,!1,!1,!1,!1,0,null),H.target.dispatchEvent(me)}})),z.isDragging=z.isGesturing=z.isPressed=!1,d&&_e&&!B&&Je.restart(!0),oe&&lt(),_&&_e&&_(z),v&&v(z,ne)}},Ie=function(K){return K.touches&&K.touches.length>1&&(z.isGesturing=!0)&&ee(K,z.isDragging)},J=function(){return(z.isGesturing=!1)||R(z)},de=function(K){if(!Oe(K)){var _e=D(),ne=T();$e((_e-X)*ge,(ne-re)*ge,1),X=_e,re=ne,d&&Je.restart(!0)}},ke=function(K){if(!Oe(K)){K=Bg(K,u),ae&&(O=!0);var _e=(1===K.deltaMode?l:2===K.deltaMode?Ts.innerHeight:1)*p;$e(K.deltaX*_e,K.deltaY*_e,0),d&&!B&&Je.restart(!0)}},ze=function(K){if(!Oe(K)){var _e=K.clientX,ne=K.clientY,Re=_e-z.x,me=ne-z.y;z.x=_e,z.y=ne,le=!0,d&&Je.restart(!0),(Re||me)&&St(Re,me)}},Ce=function(K){z.event=K,W(z)},U=function(K){z.event=K,q(z)},fe=function(K){return Oe(K)||Bg(K,u)&&$(z)};Je=z._dc=Ki.delayedCall(f||.25,function(){z._vx.reset(),z._vy.reset(),Je.pause(),d&&d(z)}).pause(),z.deltaX=z.deltaY=0,z._vx=hA(0,50,!0),z._vy=hA(0,50,!0),z.scrollX=D,z.scrollY=T,z.isDragging=z.isGesturing=z.isPressed=!1,QV(this),z.enable=function(H){return z.isEnabled||(Or(ie?Pe:a,"scroll",dA),o.indexOf("scroll")>=0&&Or(ie?Pe:a,"scroll",de,Be,xe),o.indexOf("wheel")>=0&&Or(a,"wheel",ke,Be,xe),(o.indexOf("touch")>=0&&ZV||o.indexOf("pointer")>=0)&&(Or(a,Ao[0],Ht,Be,xe),Or(Pe,Ao[2],F),Or(Pe,Ao[3],F),se&&Or(a,"click",Ae,!0,!0),$&&Or(a,"click",fe),ee&&Or(Pe,"gesturestart",Ie),R&&Or(Pe,"gestureend",J),W&&Or(a,mu+"enter",Ce),q&&Or(a,mu+"leave",U),N&&Or(a,mu+"move",ze)),z.isEnabled=!0,z.isDragging=z.isGesturing=z.isPressed=le=oe=!1,z._vx.reset(),z._vy.reset(),X=D(),re=T(),H&&H.type&&Ht(H),Ee&&Ee(z)),z},z.disable=function(){z.isEnabled&&(zh.filter(function(H){return H!==z&&Ug(H.target)}).length||Ir(ie?Pe:a,"scroll",dA),z.isPressed&&(z._vx.reset(),z._vy.reset(),Ir(B?a:Pe,Ao[1],mt,!0)),Ir(ie?Pe:a,"scroll",de,xe),Ir(a,"wheel",ke,xe),Ir(a,Ao[0],Ht,xe),Ir(Pe,Ao[2],F),Ir(Pe,Ao[3],F),Ir(a,"click",Ae,!0),Ir(a,"click",fe),Ir(Pe,"gesturestart",Ie),Ir(Pe,"gestureend",J),Ir(a,mu+"enter",Ce),Ir(a,mu+"leave",U),Ir(a,mu+"move",ze),z.isEnabled=z.isPressed=z.isDragging=!1,He&&He(z))},z.kill=z.revert=function(){z.disable();var H=zh.indexOf(z);H>=0&&zh.splice(H,1),el===z&&(el=0)},zh.push(z),B&&Ug(a)&&(el=z),z.enable(g)},function tue(i,e,t){e&&KV(i.prototype,e),t&&KV(i,t)}(i,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),i}();ri.version="3.12.7",ri.create=function(i){return new ri(i)},ri.register=rz,ri.getAll=function(){return zh.slice()},ri.getById=function(i){return zh.filter(function(e){return e.vars.id===i})[0]},ez()&&Ki.registerPlugin(ri);var et,Hh,Kt,Dn,As,pn,fA,I0,Vg,zg,Hg,R0,hr,N0,pA,Nr,sz,oz,Gh,az,gA,lz,Lr,mA,cz,uz,ec,_A,yA,Wh,vA,L0,MA,bA,Zg,kr,Az,Qg,k0=1,fr=Date.now,xA=fr(),eo=0,Gg=0,dz=function(e,t,n){var r=Ps(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},hz=function(e,t){return!t||Ps(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},rue=function i(){return Gg&&requestAnimationFrame(i)},fz=function(){return N0=1},pz=function(){return N0=0},la=function(e){return e},Wg=function(e){return Math.round(1e5*e)/1e5||0},gz=function(){return typeof window<"u"},mz=function(){return et||gz()&&(et=window.gsap)&&et.registerPlugin&&et},_u=function(e){return!!~fA.indexOf(e)},_z=function(e){return("Height"===e?vA:Kt["inner"+e])||As["client"+e]||pn["client"+e]},yz=function(e){return Jl(e,"getBoundingClientRect")||(_u(e)?function(){return Y0.width=Kt.innerWidth,Y0.height=vA,Y0}:function(){return tl(e)})},ca=function(e,t){var n,r=t.d2,s=t.d,o=t.a;return Math.max(0,(n="scroll"+r)&&(o=Jl(e,n))?o()-yz(e)()[s]:_u(e)?(As[n]||pn[n])-_z(r):e[n]-e["offset"+r])},F0=function(e,t){for(var n=0;n<Gh.length;n+=3)(!t||~t.indexOf(Gh[n+1]))&&e(Gh[n],Gh[n+1],Gh[n+2])},Ps=function(e){return"string"==typeof e},pr=function(e){return"function"==typeof e},jg=function(e){return"number"==typeof e},yu=function(e){return"object"==typeof e},$g=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},CA=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add(function(){return t(e)}):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},jh=Math.abs,wA="right",SA="bottom",vu="width",Mu="height",Xg="Right",qg="Left",Yg="Top",Kg="Bottom",mi="padding",to="margin",$h="Width",EA="Height",Pi="px",no=function(e){return Kt.getComputedStyle(e)},bz=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},tl=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==no(e)[pA]&&et.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},U0=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},xz=function(e){var s,t=[],n=e.labels,r=e.duration();for(s in n)t.push(n[s]/r);return t},TA=function(e){var t=et.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return n?function(r,s,o){var a;if(void 0===o&&(o=.001),!s)return t(r);if(s>0){for(r-=o,a=0;a<n.length;a++)if(n[a]>=r)return n[a];return n[a-1]}for(a=n.length,r+=o;a--;)if(n[a]<=r)return n[a];return n[0]}:function(r,s,o){void 0===o&&(o=.001);var a=t(r);return!s||Math.abs(a-r)<o||a-r<0==s<0?a:t(s<0?r-e:r+e)}},B0=function(e,t,n,r){return n.split(",").forEach(function(s){return e(t,s,r)})},Vi=function(e,t,n,r,s){return e.addEventListener(t,n,{passive:!r,capture:!!s})},zi=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},V0=function(e,t,n){(n=n&&n.wheelHandler)&&(e(t,"wheel",n),e(t,"touchmove",n))},Cz={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},z0={toggleActions:"play",anticipatePin:0},H0={top:0,left:0,center:.5,bottom:1,right:1},G0=function(e,t){if(Ps(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in H0?H0[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},W0=function(e,t,n,r,s,o,a,l){var c=s.startColor,u=s.endColor,d=s.fontSize,f=s.indent,h=s.fontWeight,p=Dn.createElement("div"),g=_u(n)||"fixed"===Jl(n,"pinType"),m=-1!==e.indexOf("scroller"),_=g?pn:n,M=-1!==e.indexOf("start"),y=M?c:u,v="border-color:"+y+";font-size:"+d+";color:"+y+";font-weight:"+h+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return v+="position:"+((m||l)&&g?"fixed;":"absolute;"),(m||l||!g)&&(v+=(r===Ai?wA:SA)+":"+(o+parseFloat(f))+"px;"),a&&(v+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),p._isStart=M,p.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),p.style.cssText=v,p.innerText=t||0===t?e+"-"+t:e,_.children[0]?_.insertBefore(p,_.children[0]):_.appendChild(p),p._offset=p["offset"+r.op.d2],j0(p,0,r,M),p},j0=function(e,t,n,r){var s={display:"block"},o=n[r?"os2":"p2"],a=n[r?"p2":"os2"];e._isFlipped=r,s[n.a+"Percent"]=r?-100:0,s[n.a]=r?"1px":0,s["border"+o+$h]=1,s["border"+a+$h]=0,s[n.p]=t+"px",et.set(e,s)},$t=[],AA={},wz=function(){return fr()-eo>34&&(Zg||(Zg=requestAnimationFrame(nl)))},Xh=function(){(!Lr||!Lr.isPressed||Lr.startX>pn.clientWidth)&&(Yt.cache++,Lr?Zg||(Zg=requestAnimationFrame(nl)):nl(),eo||xu("scrollStart"),eo=fr())},PA=function(){uz=Kt.innerWidth,cz=Kt.innerHeight},Jg=function(e){Yt.cache++,(!0===e||!hr&&!lz&&!Dn.fullscreenElement&&!Dn.webkitFullscreenElement&&(!mA||uz!==Kt.innerWidth||Math.abs(Kt.innerHeight-cz)>.25*Kt.innerHeight))&&I0.restart(!0)},bu={},uue=[],Sz=function i(){return zi(Xt,"scrollEnd",i)||wu(!0)},xu=function(e){return bu[e]&&bu[e].map(function(t){return t()})||uue},Ds=[],Ez=function(e){for(var t=0;t<Ds.length;t+=5)(!e||Ds[t+4]&&Ds[t+4].query===e)&&(Ds[t].style.cssText=Ds[t+1],Ds[t].getBBox&&Ds[t].setAttribute("transform",Ds[t+2]||""),Ds[t+3].uncache=1)},DA=function(e,t){var n;for(Nr=0;Nr<$t.length;Nr++)(n=$t[Nr])&&(!t||n._ctx===t)&&(e?n.kill(1):n.revert(!0,!0));L0=!0,t&&Ez(t),t||xu("revert")},Tz=function(e,t){Yt.cache++,(t||!kr)&&Yt.forEach(function(n){return pr(n)&&n.cacheID++&&(n.rec=0)}),Ps(e)&&(Kt.history.scrollRestoration=yA=e)},Cu=0,Pz=function(){pn.appendChild(Wh),vA=!Lr&&Wh.offsetHeight||Kt.innerHeight,pn.removeChild(Wh)},Dz=function(e){return Vg(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},wu=function(e,t){if(fA=[Kt,Dn,As=Dn.documentElement,pn=Dn.body],!eo||e||L0){Pz(),kr=Xt.isRefreshing=!0,Yt.forEach(function(r){return pr(r)&&++r.cacheID&&(r.rec=r())});var n=xu("refreshInit");az&&Xt.sort(),t||DA(),Yt.forEach(function(r){pr(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),$t.slice(0).forEach(function(r){return r.refresh()}),L0=!1,$t.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",o=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-o),r.refresh()}}),MA=1,Dz(!0),$t.forEach(function(r){var s=ca(r.scroller,r._dir),o="max"===r.vars.end||r._endClamp&&r.end>s,a=r._startClamp&&r.start>=s;(o||a)&&r.setPositions(a?s-1:r.start,o?Math.max(a?s:r.start+1,s):r.end,!0)}),Dz(!1),MA=0,n.forEach(function(r){return r&&r.render&&r.render(-1)}),Yt.forEach(function(r){pr(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),Tz(yA,1),I0.pause(),Cu++,kr=2,nl(2),$t.forEach(function(r){return pr(r.vars.onRefresh)&&r.vars.onRefresh(r)}),kr=Xt.isRefreshing=!1,xu("refresh")}else Vi(Xt,"scrollEnd",Sz)},OA=0,$0=1,nl=function(e){if(2===e||!kr&&!L0){Xt.isUpdating=!0,Qg&&Qg.update(0);var t=$t.length,n=fr(),r=n-xA>=50,s=t&&$t[0].scroll();if($0=OA>s?-1:1,kr||(OA=s),r&&(eo&&!N0&&n-eo>200&&(eo=0,xu("scrollEnd")),Hg=xA,xA=n),$0<0){for(Nr=t;Nr-- >0;)$t[Nr]&&$t[Nr].update(0,r);$0=1}else for(Nr=0;Nr<t;Nr++)$t[Nr]&&$t[Nr].update(0,r);Xt.isUpdating=!1}Zg=0},IA=["left","top",SA,wA,to+Kg,to+Xg,to+Yg,to+qg,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],X0=IA.concat([vu,Mu,"boxSizing","max"+$h,"max"+EA,"position",to,mi,mi+Yg,mi+Xg,mi+Kg,mi+qg]),RA=function(e,t,n,r){if(!e._gsap.swappedIn){for(var l,s=IA.length,o=t.style,a=e.style;s--;)o[l=IA[s]]=n[l];o.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(o.display="inline-block"),a[SA]=a[wA]="auto",o.flexBasis=n.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[vu]=U0(e,Rr)+Pi,o[Mu]=U0(e,Ai)+Pi,o[mi]=a[to]=a.top=a.left="0",qh(r),a[vu]=a["max"+$h]=n[vu],a[Mu]=a["max"+EA]=n[Mu],a[mi]=n[mi],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},fue=/([A-Z])/g,qh=function(e){if(e){var s,o,t=e.t.style,n=e.length,r=0;for((e.t._gsap||et.core.getCache(e.t)).uncache=1;r<n;r+=2)s=e[r],(o=e[r+1])?t[s]=o:t[s]&&t.removeProperty(s.replace(fue,"-$1").toLowerCase())}},q0=function(e){for(var t=X0.length,n=e.style,r=[],s=0;s<t;s++)r.push(X0[s],n[X0[s]]);return r.t=e,r},Y0={left:0,top:0},Oz=function(e,t,n,r,s,o,a,l,c,u,d,f,h,p){pr(e)&&(e=e(l)),Ps(e)&&"max"===e.substr(0,3)&&(e=f+("="===e.charAt(4)?G0("0"+e.substr(3),n):0));var m,_,M,g=h?h.time():0;if(h&&h.seek(0),isNaN(e)||(e=+e),jg(e))h&&(e=et.utils.mapRange(h.scrollTrigger.start,h.scrollTrigger.end,0,f,e)),a&&j0(a,n,r,!0);else{pr(t)&&(t=t(l));var v,C,w,S,y=(e||"0").split(" ");M=ns(t,l)||pn,(!(v=tl(M)||{})||!v.left&&!v.top)&&"none"===no(M).display&&(S=M.style.display,M.style.display="block",v=tl(M),S?M.style.display=S:M.style.removeProperty("display")),C=G0(y[0],v[r.d]),w=G0(y[1]||"0",n),e=v[r.p]-c[r.p]-u+C+s-w,a&&j0(a,w,r,n-w<20||a._isStart&&w>20),n-=n-w}if(p&&(l[p]=e||-.001,e<0&&(e=0)),o){var E=e+n,x=o._isStart;m="scroll"+r.d2,j0(o,E,r,x&&E>20||!x&&(d?Math.max(pn[m],As[m]):o.parentNode[m])<=E+1),d&&(c=tl(a),d&&(o.style[r.op.p]=c[r.op.p]-r.op.m-o._offset+Pi))}return h&&M&&(m=tl(M),h.seek(f),_=tl(M),h._caScrollDist=m[r.p]-_[r.p],e=e/h._caScrollDist*f),h&&h.seek(g),h?e:Math.round(e)},gue=/(webkit|moz|length|cssText|inset)/i,Iz=function(e,t,n,r){if(e.parentNode!==t){var o,a,s=e.style;if(t===pn){for(o in e._stOrig=s.cssText,a=no(e))!+o&&!gue.test(o)&&a[o]&&"string"==typeof s[o]&&"0"!==o&&(s[o]=a[o]);s.top=n,s.left=r}else s.cssText=e._stOrig;et.core.getCache(e).uncache=1,t.appendChild(e)}},Rz=function(e,t,n){var r=t,s=r;return function(o){var a=Math.round(e());return a!==r&&a!==s&&Math.abs(a-r)>3&&Math.abs(a-s)>3&&(o=a,n&&n()),s=r,r=Math.round(o)}},K0=function(e,t,n){var r={};r[t.p]="+="+n,et.set(e,r)},Nz=function(e,t){var n=Ql(e,t),r="_scroll"+t.p2,s=function o(a,l,c,u,d){var f=o.tween,h=l.onComplete,p={};c=c||n();var g=Rz(n,c,function(){f.kill(),o.tween=0});return d=u&&d||0,u=u||a-c,f&&f.kill(),l[r]=a,l.inherit=!1,l.modifiers=p,p[r]=function(){return g(c+u*f.ratio+d*f.ratio*f.ratio)},l.onUpdate=function(){Yt.cache++,o.tween&&nl()},l.onComplete=function(){o.tween=0,h&&h.call(f)},f=o.tween=et.to(e,l)};return e[r]=n,n.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},Vi(e,"wheel",n.wheelHandler),Xt.isTouch&&Vi(e,"touchmove",n.wheelHandler),s},Xt=function(){function i(t,n){Hh||i.register(et)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),_A(this),this.init(t,n)}return i.prototype.init=function(n,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),Gg){var Se,Ue,Ge,Je,oe,le,O,we,ve,z,Me,nt,Be,D,T,X,re,ue,ie,Pe,De,Ve,bt,Ae,Oe,at,lt,$e,St,mt,Ht,F,Ie,J,de,ke,ze,Ce,U,o=(n=bz(Ps(n)||jg(n)||n.nodeType?{trigger:n}:n,z0)).onUpdate,a=n.toggleClass,l=n.id,c=n.onToggle,u=n.onRefresh,d=n.scrub,f=n.trigger,h=n.pin,p=n.pinSpacing,g=n.invalidateOnRefresh,m=n.anticipatePin,_=n.onScrubComplete,M=n.onSnapComplete,y=n.once,v=n.snap,C=n.pinReparent,w=n.pinSpacer,S=n.containerAnimation,E=n.fastScrollEnd,x=n.preventOverlaps,b=n.horizontal||n.containerAnimation&&!1!==n.horizontal?Rr:Ai,P=!d&&0!==d,k=ns(n.scroller||Kt),L=et.core.getCache(k),W=_u(k),q="fixed"===("pinType"in n?n.pinType:Jl(k,"pinType")||W&&"fixed"),N=[n.onEnter,n.onLeave,n.onEnterBack,n.onLeaveBack],V=P&&n.toggleActions.split(" "),B="markers"in n?n.markers:z0.markers,ee=W?0:parseFloat(no(k)["border"+b.p2+$h])||0,R=this,ae=n.onRefreshInit&&function(){return n.onRefreshInit(R)},Ee=function(e,t,n){var r=n.d,s=n.d2,o=n.a;return(o=Jl(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?_z(s):e["client"+s])||0}}(k,W,b),He=function(e,t){return!t||~aa.indexOf(e)?yz(e):function(){return Y0}}(k,W),$=0,ge=0,xe=0,se=Ql(k,b);if(R._startClamp=R._endClamp=!1,R._dir=b,m*=45,R.scroller=k,R.scroll=S?S.time.bind(S):se,Je=se(),R.vars=n,r=r||n.animation,"refreshPriority"in n&&(az=1,-9999===n.refreshPriority&&(Qg=R)),L.tweenScroll=L.tweenScroll||{top:Nz(k,Ai),left:Nz(k,Rr)},R.tweenTo=Se=L.tweenScroll[b.p],R.scrubDuration=function(ne){(Ie=jg(ne)&&ne)?F?F.duration(ne):F=et.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Ie,paused:!0,onComplete:function(){return _&&_(R)}}):(F&&F.progress(1).kill(),F=0)},r&&(r.vars.lazy=!1,r._initted&&!R.isReverted||!1!==r.vars.immediateRender&&!1!==n.immediateRender&&r.duration()&&r.render(0,!0,!0),R.animation=r.pause(),r.scrollTrigger=R,R.scrubDuration(d),mt=0,l||(l=r.vars.id)),v&&((!yu(v)||v.push)&&(v={snapTo:v}),"scrollBehavior"in pn.style&&et.set(W?[pn,As]:k,{scrollBehavior:"auto"}),Yt.forEach(function(ne){return pr(ne)&&ne.target===(W?Dn.scrollingElement||As:k)&&(ne.smooth=!1)}),Ge=pr(v.snapTo)?v.snapTo:"labels"===v.snapTo?function(e){return function(t){return et.utils.snap(xz(e),t)}}(r):"labelsDirectional"===v.snapTo?function(e){return function(t,n){return TA(xz(e))(t,n.direction)}}(r):!1!==v.directional?function(ne,Re){return TA(v.snapTo)(ne,fr()-ge<500?0:Re.direction)}:et.utils.snap(v.snapTo),J=yu(J=v.duration||{min:.1,max:2})?zg(J.min,J.max):zg(J,J),de=et.delayedCall(v.delay||Ie/2||.1,function(){var ne=se(),Re=fr()-ge<500,me=Se.tween;if(!(Re||Math.abs(R.getVelocity())<10)||me||N0||$===ne)R.isActive&&$!==ne&&de.restart(!0);else{var Qt,Gt,We=(ne-le)/D,dt=r&&!P?r.totalProgress():We,Ze=Re?0:(dt-Ht)/(fr()-Hg)*1e3||0,wt=et.utils.clamp(-We,1-We,jh(Ze/2)*Ze/.185),en=We+(!1===v.inertia?0:wt),un=v.onStart,Et=v.onInterrupt,Oi=v.onComplete;if(Qt=Ge(en,R),jg(Qt)||(Qt=en),Gt=Math.max(0,Math.round(le+Qt*D)),ne<=O&&ne>=le&&Gt!==ne){if(me&&!me._initted&&me.data<=jh(Gt-ne))return;!1===v.inertia&&(wt=Qt-We),Se(Gt,{duration:J(jh(.185*Math.max(jh(en-dt),jh(Qt-dt))/Ze/.05||0)),ease:v.ease||"power3",data:jh(Gt-ne),onInterrupt:function(){return de.restart(!0)&&Et&&Et(R)},onComplete:function(){R.update(),$=se(),r&&!P&&(F?F.resetTo("totalProgress",Qt,r._tTime/r._tDur):r.progress(Qt)),mt=Ht=r&&!P?r.totalProgress():R.progress,M&&M(R),Oi&&Oi(R)}},ne,wt*D,Gt-ne-wt*D),un&&un(R,Se.tween)}}}).pause()),l&&(AA[l]=R),(U=(f=R.trigger=ns(f||!0!==h&&h))&&f._gsap&&f._gsap.stRevert)&&(U=U(R)),h=!0===h?f:ns(h),Ps(a)&&(a={targets:f,className:a}),h&&(!1===p||p===to||(p=!(!p&&h.parentNode&&h.parentNode.style&&"flex"===no(h.parentNode).display)&&mi),R.pin=h,(Ue=et.core.getCache(h)).spacer?T=Ue.pinState:(w&&((w=ns(w))&&!w.nodeType&&(w=w.current||w.nativeElement),Ue.spacerIsNative=!!w,w&&(Ue.spacerState=q0(w))),Ue.spacer=ue=w||Dn.createElement("div"),ue.classList.add("pin-spacer"),l&&ue.classList.add("pin-spacer-"+l),Ue.pinState=T=q0(h)),!1!==n.force3D&&et.set(h,{force3D:!0}),R.spacer=ue=Ue.spacer,St=no(h),Ae=St[p+b.os2],Pe=et.getProperty(h),De=et.quickSetter(h,b.a,Pi),RA(h,ue,St),re=q0(h)),B){nt=yu(B)?bz(B,Cz):Cz,z=W0("scroller-start",l,k,b,nt,0),Me=W0("scroller-end",l,k,b,nt,0,z),ie=z["offset"+b.op.d2];var fe=ns(Jl(k,"content")||k);we=this.markerStart=W0("start",l,fe,b,nt,ie,0,S),ve=this.markerEnd=W0("end",l,fe,b,nt,ie,0,S),S&&(Ce=et.quickSetter([we,ve],b.a,Pi)),!q&&(!aa.length||!0!==Jl(k,"fixedMarkers"))&&(function(e){var t=no(e).position;e.style.position="absolute"===t||"fixed"===t?t:"relative"}(W?pn:k),et.set([z,Me],{force3D:!0}),at=et.quickSetter(z,b.a,Pi),$e=et.quickSetter(Me,b.a,Pi))}if(S){var H=S.vars.onUpdate,K=S.vars.onUpdateParams;S.eventCallback("onUpdate",function(){R.update(0,0,1),H&&H.apply(S,K||[])})}if(R.previous=function(){return $t[$t.indexOf(R)-1]},R.next=function(){return $t[$t.indexOf(R)+1]},R.revert=function(ne,Re){if(!Re)return R.kill(!0);var me=!1!==ne||!R.enabled,We=hr;me!==R.isReverted&&(me&&(ke=Math.max(se(),R.scroll.rec||0),xe=R.progress,ze=r&&r.progress()),we&&[we,ve,z,Me].forEach(function(dt){return dt.style.display=me?"none":"block"}),me&&(hr=R,R.update(me)),h&&(!C||!R.isActive)&&(me?function(e,t,n){qh(n);var r=e._gsap;if(r.spacerIsNative)qh(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1}(h,ue,T):RA(h,ue,no(h),Oe)),me||R.update(me),hr=We,R.isReverted=me)},R.refresh=function(ne,Re,me,We){if(!hr&&R.enabled||Re){if(h&&ne&&eo)return void Vi(i,"scrollEnd",Sz);!kr&&ae&&ae(R),hr=R,Se.tween&&!me&&(Se.tween.kill(),Se.tween=0),F&&F.pause(),g&&r&&r.revert({kill:!1}).invalidate(),R.isReverted||R.revert(!0,!0),R._subPinOffset=!1;var A,G,Z,Q,j,ye,Ne,Ke,Qe,_t,ht,ut,Wt,dt=Ee(),Ze=He(),wt=S?S.duration():ca(k,b),en=D<=.01,Qt=0,Gt=We||0,qt=yu(me)?me.end:n.end,un=n.endTrigger||f,Et=yu(me)?me.start:n.start||(0!==n.start&&f?h?"0 0":"0 100%":0),Oi=R.pinnedContainer=n.pinnedContainer&&ns(n.pinnedContainer,R),kn=f&&Math.max(0,$t.indexOf(R))||0,Ii=kn;for(B&&yu(me)&&(ut=et.getProperty(z,b.p),Wt=et.getProperty(Me,b.p));Ii-- >0;)(ye=$t[Ii]).end||ye.refresh(0,1)||(hr=R),(Ne=ye.pin)&&(Ne===f||Ne===h||Ne===Oi)&&!ye.isReverted&&(_t||(_t=[]),_t.unshift(ye),ye.revert(!0,!0)),ye!==$t[Ii]&&(kn--,Ii--);for(pr(Et)&&(Et=Et(R)),Et=dz(Et,"start",R),le=Oz(Et,f,dt,b,se(),we,z,R,Ze,ee,q,wt,S,R._startClamp&&"_startClamp")||(h?-.001:0),pr(qt)&&(qt=qt(R)),Ps(qt)&&!qt.indexOf("+=")&&(~qt.indexOf(" ")?qt=(Ps(Et)?Et.split(" ")[0]:"")+qt:(Qt=G0(qt.substr(2),dt),qt=Ps(Et)?Et:(S?et.utils.mapRange(0,S.duration(),S.scrollTrigger.start,S.scrollTrigger.end,le):le)+Qt,un=f)),qt=dz(qt,"end",R),O=Math.max(le,Oz(qt||(un?"100% 0":wt),un,dt,b,se()+Qt,ve,Me,R,Ze,ee,q,wt,S,R._endClamp&&"_endClamp"))||-.001,Qt=0,Ii=kn;Ii--;)(Ne=(ye=$t[Ii]).pin)&&ye.start-ye._pinPush<=le&&!S&&ye.end>0&&(A=ye.end-(R._startClamp?Math.max(0,ye.start):ye.start),(Ne===f&&ye.start-ye._pinPush<le||Ne===Oi)&&isNaN(Et)&&(Qt+=A*(1-ye.progress)),Ne===h&&(Gt+=A));if(le+=Qt,O+=Qt,R._startClamp&&(R._startClamp+=Qt),R._endClamp&&!kr&&(R._endClamp=O||-.001,O=Math.min(O,ca(k,b))),D=O-le||(le-=.01)&&.001,en&&(xe=et.utils.clamp(0,1,et.utils.normalize(le,O,ke))),R._pinPush=Gt,we&&Qt&&((A={})[b.a]="+="+Qt,Oi&&(A[b.p]="-="+se()),et.set([we,ve],A)),!h||MA&&R.end>=ca(k,b)){if(f&&se()&&!S)for(G=f.parentNode;G&&G!==pn;)G._pinOffset&&(le-=G._pinOffset,O-=G._pinOffset),G=G.parentNode}else A=no(h),Q=b===Ai,Z=se(),Ve=parseFloat(Pe(b.a))+Gt,!wt&&O>1&&(ht={style:ht=(W?Dn.scrollingElement||As:k).style,value:ht["overflow"+b.a.toUpperCase()]},W&&"scroll"!==no(pn)["overflow"+b.a.toUpperCase()]&&(ht.style["overflow"+b.a.toUpperCase()]="scroll")),RA(h,ue,A),re=q0(h),G=tl(h,!0),Ke=q&&Ql(k,Q?Rr:Ai)(),p?((Oe=[p+b.os2,D+Gt+Pi]).t=ue,(Ii=p===mi?U0(h,b)+D+Gt:0)&&(Oe.push(b.d,Ii+Pi),"auto"!==ue.style.flexBasis&&(ue.style.flexBasis=Ii+Pi)),qh(Oe),Oi&&$t.forEach(function(sn){sn.pin===Oi&&!1!==sn.vars.pinSpacing&&(sn._subPinOffset=!0)}),q&&se(ke)):(Ii=U0(h,b))&&"auto"!==ue.style.flexBasis&&(ue.style.flexBasis=Ii+Pi),q&&((j={top:G.top+(Q?Z-le:Ke)+Pi,left:G.left+(Q?Ke:Z-le)+Pi,boxSizing:"border-box",position:"fixed"})[vu]=j["max"+$h]=Math.ceil(G.width)+Pi,j[Mu]=j["max"+EA]=Math.ceil(G.height)+Pi,j[to]=j[to+Yg]=j[to+Xg]=j[to+Kg]=j[to+qg]="0",j[mi]=A[mi],j[mi+Yg]=A[mi+Yg],j[mi+Xg]=A[mi+Xg],j[mi+Kg]=A[mi+Kg],j[mi+qg]=A[mi+qg],X=function(e,t,n){for(var a,r=[],s=e.length,o=n?8:0;o<s;o+=2)r.push(a=e[o],a in t?t[a]:e[o+1]);return r.t=e.t,r}(T,j,C),kr&&se(0)),r?(Qe=r._initted,gA(1),r.render(r.duration(),!0,!0),bt=Pe(b.a)-Ve+D+Gt,lt=Math.abs(D-bt)>1,q&&lt&&X.splice(X.length-2,2),r.render(0,!0,!0),Qe||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),gA(0)):bt=D,ht&&(ht.value?ht.style["overflow"+b.a.toUpperCase()]=ht.value:ht.style.removeProperty("overflow-"+b.a));_t&&_t.forEach(function(sn){return sn.revert(!1,!0)}),R.start=le,R.end=O,Je=oe=kr?ke:se(),!S&&!kr&&(Je<ke&&se(ke),R.scroll.rec=0),R.revert(!1,!0),ge=fr(),de&&($=-1,de.restart(!0)),hr=0,r&&P&&(r._initted||ze)&&r.progress()!==ze&&r.progress(ze||0,!0).render(r.time(),!0,!0),(en||xe!==R.progress||S||g||r&&!r._initted)&&(r&&!P&&r.totalProgress(S&&le<-.001&&!xe?et.utils.normalize(le,O,0):xe,!0),R.progress=en||(Je-le)/D===xe?0:xe),h&&p&&(ue._pinOffset=Math.round(R.progress*bt)),F&&F.invalidate(),isNaN(ut)||(ut-=et.getProperty(z,b.p),Wt-=et.getProperty(Me,b.p),K0(z,b,ut),K0(we,b,ut-(We||0)),K0(Me,b,Wt),K0(ve,b,Wt-(We||0))),en&&!kr&&R.update(),u&&!kr&&!Be&&(Be=!0,u(R),Be=!1)}},R.getVelocity=function(){return(se()-oe)/(fr()-Hg)*1e3||0},R.endAnimation=function(){$g(R.callbackAnimation),r&&(F?F.progress(1):r.paused()?P||$g(r,R.direction<0,1):$g(r,r.reversed()))},R.labelToScroll=function(ne){return r&&r.labels&&(le||R.refresh()||le)+r.labels[ne]/r.duration()*D||0},R.getTrailing=function(ne){var Re=$t.indexOf(R),me=R.direction>0?$t.slice(0,Re).reverse():$t.slice(Re+1);return(Ps(ne)?me.filter(function(We){return We.vars.preventOverlaps===ne}):me).filter(function(We){return R.direction>0?We.end<=le:We.start>=O})},R.update=function(ne,Re,me){if(!S||me||ne){var en,Gt,qt,un,Et,Oi,kn,We=!0===kr?ke:R.scroll(),dt=ne?0:(We-le)/D,Ze=dt<0?0:dt>1?1:dt||0,wt=R.progress;if(Re&&(oe=Je,Je=S?se():We,v&&(Ht=mt,mt=r&&!P?r.totalProgress():Ze)),m&&h&&!hr&&!k0&&eo&&(!Ze&&le<We+(We-oe)/(fr()-Hg)*m?Ze=1e-4:1===Ze&&O>We+(We-oe)/(fr()-Hg)*m&&(Ze=.9999)),Ze!==wt&&R.enabled){if(un=(Et=(en=R.isActive=!!Ze&&Ze<1)!=(!!wt&&wt<1))||!!Ze!=!!wt,R.direction=Ze>wt?1:-1,R.progress=Ze,un&&!hr&&(Gt=Ze&&!wt?0:1===Ze?1:1===wt?2:3,P&&(qt=!Et&&"none"!==V[Gt+1]&&V[Gt+1]||V[Gt],kn=r&&("complete"===qt||"reset"===qt||qt in r))),x&&(Et||kn)&&(kn||d||!r)&&(pr(x)?x(R):R.getTrailing(x).forEach(function(Z){return Z.endAnimation()})),P||(!F||hr||k0?r&&r.totalProgress(Ze,!(!hr||!ge&&!ne)):(F._dp._time-F._start!==F._time&&F.render(F._dp._time-F._start),F.resetTo?F.resetTo("totalProgress",Ze,r._tTime/r._tDur):(F.vars.totalProgress=Ze,F.invalidate().restart()))),h)if(ne&&p&&(ue.style[p+b.os2]=Ae),q){if(un){if(Oi=!ne&&Ze>wt&&O+1>We&&We+1>=ca(k,b),C)if(ne||!en&&!Oi)Iz(h,ue);else{var Ii=tl(h,!0),A=We-le;Iz(h,pn,Ii.top+(b===Ai?A:0)+Pi,Ii.left+(b===Ai?0:A)+Pi)}qh(en||Oi?X:re),lt&&Ze<1&&en||De(Ve+(1!==Ze||Oi?0:bt))}}else De(Wg(Ve+bt*Ze));v&&!Se.tween&&!hr&&!k0&&de.restart(!0),a&&(Et||y&&Ze&&(Ze<1||!bA))&&Vg(a.targets).forEach(function(Z){return Z.classList[en||y?"add":"remove"](a.className)}),o&&!P&&!ne&&o(R),un&&!hr?(P&&(kn&&("complete"===qt?r.pause().totalProgress(1):"reset"===qt?r.restart(!0).pause():"restart"===qt?r.restart(!0):r[qt]()),o&&o(R)),(Et||!bA)&&(c&&Et&&CA(R,c),N[Gt]&&CA(R,N[Gt]),y&&(1===Ze?R.kill(!1,1):N[Gt]=0),Et||N[Gt=1===Ze?1:3]&&CA(R,N[Gt])),E&&!en&&Math.abs(R.getVelocity())>(jg(E)?E:2500)&&($g(R.callbackAnimation),F?F.progress(1):$g(r,"reverse"===qt?1:!Ze,1))):P&&o&&!hr&&o(R)}if($e){var G=S?We/S.duration()*(S._caScrollDist||0):We;at(G+(z._isFlipped?1:0)),$e(G)}Ce&&Ce(-We/S.duration()*(S._caScrollDist||0))}},R.enable=function(ne,Re){R.enabled||(R.enabled=!0,Vi(k,"resize",Jg),W||Vi(k,"scroll",Xh),ae&&Vi(i,"refreshInit",ae),!1!==ne&&(R.progress=xe=0,Je=oe=$=se()),!1!==Re&&R.refresh())},R.getTween=function(ne){return ne&&Se?Se.tween:F},R.setPositions=function(ne,Re,me,We){if(S){var dt=S.scrollTrigger,Ze=S.duration(),wt=dt.end-dt.start;ne=dt.start+wt*ne/Ze,Re=dt.start+wt*Re/Ze}R.refresh(!1,!1,{start:hz(ne,me&&!!R._startClamp),end:hz(Re,me&&!!R._endClamp)},We),R.update()},R.adjustPinSpacing=function(ne){if(Oe&&ne){var Re=Oe.indexOf(b.d)+1;Oe[Re]=parseFloat(Oe[Re])+ne+Pi,Oe[1]=parseFloat(Oe[1])+ne+Pi,qh(Oe)}},R.disable=function(ne,Re){if(R.enabled&&(!1!==ne&&R.revert(!0,!0),R.enabled=R.isActive=!1,Re||F&&F.pause(),ke=0,Ue&&(Ue.uncache=1),ae&&zi(i,"refreshInit",ae),de&&(de.pause(),Se.tween&&Se.tween.kill()&&(Se.tween=0)),!W)){for(var me=$t.length;me--;)if($t[me].scroller===k&&$t[me]!==R)return;zi(k,"resize",Jg),W||zi(k,"scroll",Xh)}},R.kill=function(ne,Re){R.disable(ne,Re),F&&!Re&&F.kill(),l&&delete AA[l];var me=$t.indexOf(R);me>=0&&$t.splice(me,1),me===Nr&&$0>0&&Nr--,me=0,$t.forEach(function(We){return We.scroller===R.scroller&&(me=1)}),me||kr||(R.scroll.rec=0),r&&(r.scrollTrigger=null,ne&&r.revert({kill:!1}),Re||r.kill()),we&&[we,ve,z,Me].forEach(function(We){return We.parentNode&&We.parentNode.removeChild(We)}),Qg===R&&(Qg=0),h&&(Ue&&(Ue.uncache=1),me=0,$t.forEach(function(We){return We.pin===h&&me++}),me||(Ue.spacer=0)),n.onKill&&n.onKill(R)},$t.push(R),R.enable(!1,!1),U&&U(R),r&&r.add&&!D){var _e=R.update;R.update=function(){R.update=_e,Yt.cache++,le||O||R.refresh()},et.delayedCall(.01,R.update),D=.01,le=O=0}else R.refresh();h&&function(){if(Az!==Cu){var e=Az=Cu;requestAnimationFrame(function(){return e===Cu&&wu(!0)})}}()}else this.update=this.refresh=this.kill=la},i.register=function(n){return Hh||(et=n||mz(),gz()&&window.document&&i.enable(),Hh=Gg),Hh},i.defaults=function(n){if(n)for(var r in n)z0[r]=n[r];return z0},i.disable=function(n,r){Gg=0,$t.forEach(function(o){return o[r?"kill":"disable"](n)}),zi(Kt,"wheel",Xh),zi(Dn,"scroll",Xh),clearInterval(R0),zi(Dn,"touchcancel",la),zi(pn,"touchstart",la),B0(zi,Dn,"pointerdown,touchstart,mousedown",fz),B0(zi,Dn,"pointerup,touchend,mouseup",pz),I0.kill(),F0(zi);for(var s=0;s<Yt.length;s+=3)V0(zi,Yt[s],Yt[s+1]),V0(zi,Yt[s],Yt[s+2])},i.enable=function(){if(Kt=window,Dn=document,As=Dn.documentElement,pn=Dn.body,et&&(Vg=et.utils.toArray,zg=et.utils.clamp,_A=et.core.context||la,gA=et.core.suppressOverwrites||la,yA=Kt.history.scrollRestoration||"auto",OA=Kt.pageYOffset||0,et.core.globals("ScrollTrigger",i),pn)){Gg=1,(Wh=document.createElement("div")).style.height="100vh",Wh.style.position="absolute",Pz(),rue(),ri.register(et),i.isTouch=ri.isTouch,ec=ri.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),mA=1===ri.isTouch,Vi(Kt,"wheel",Xh),fA=[Kt,Dn,As,pn],et.matchMedia?(i.matchMedia=function(c){var d,u=et.matchMedia();for(d in c)u.add(d,c[d]);return u},et.addEventListener("matchMediaInit",function(){return DA()}),et.addEventListener("matchMediaRevert",function(){return Ez()}),et.addEventListener("matchMedia",function(){wu(0,1),xu("matchMedia")}),et.matchMedia().add("(orientation: portrait)",function(){return PA(),PA})):console.warn("Requires GSAP 3.11.0 or later"),PA(),Vi(Dn,"scroll",Xh);var a,l,n=pn.hasAttribute("style"),r=pn.style,s=r.borderTopStyle,o=et.core.Animation.prototype;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",a=tl(pn),Ai.m=Math.round(a.top+Ai.sc())||0,Rr.m=Math.round(a.left+Rr.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),n||(pn.setAttribute("style",""),pn.removeAttribute("style")),R0=setInterval(wz,250),et.delayedCall(.5,function(){return k0=0}),Vi(Dn,"touchcancel",la),Vi(pn,"touchstart",la),B0(Vi,Dn,"pointerdown,touchstart,mousedown",fz),B0(Vi,Dn,"pointerup,touchend,mouseup",pz),pA=et.utils.checkPrefix("transform"),X0.push(pA),Hh=fr(),I0=et.delayedCall(.2,wu).pause(),Gh=[Dn,"visibilitychange",function(){var c=Kt.innerWidth,u=Kt.innerHeight;Dn.hidden?(sz=c,oz=u):(sz!==c||oz!==u)&&Jg()},Dn,"DOMContentLoaded",wu,Kt,"load",wu,Kt,"resize",Jg],F0(Vi),$t.forEach(function(c){return c.enable(0,1)}),l=0;l<Yt.length;l+=3)V0(zi,Yt[l],Yt[l+1]),V0(zi,Yt[l],Yt[l+2])}},i.config=function(n){"limitCallbacks"in n&&(bA=!!n.limitCallbacks);var r=n.syncInterval;r&&clearInterval(R0)||(R0=r)&&setInterval(wz,r),"ignoreMobileResize"in n&&(mA=1===i.isTouch&&n.ignoreMobileResize),"autoRefreshEvents"in n&&(F0(zi)||F0(Vi,n.autoRefreshEvents||"none"),lz=-1===(n.autoRefreshEvents+"").indexOf("resize"))},i.scrollerProxy=function(n,r){var s=ns(n),o=Yt.indexOf(s),a=_u(s);~o&&Yt.splice(o,a?6:2),r&&(a?aa.unshift(Kt,r,pn,r,As,r):aa.unshift(s,r))},i.clearMatchMedia=function(n){$t.forEach(function(r){return r._ctx&&r._ctx.query===n&&r._ctx.kill(!0,!0)})},i.isInViewport=function(n,r,s){var o=(Ps(n)?ns(n):n).getBoundingClientRect(),a=o[s?vu:Mu]*r||0;return s?o.right-a>0&&o.left+a<Kt.innerWidth:o.bottom-a>0&&o.top+a<Kt.innerHeight},i.positionInViewport=function(n,r,s){Ps(n)&&(n=ns(n));var o=n.getBoundingClientRect(),a=o[s?vu:Mu],l=null==r?a/2:r in H0?H0[r]*a:~r.indexOf("%")?parseFloat(r)*a/100:parseFloat(r)||0;return s?(o.left+l)/Kt.innerWidth:(o.top+l)/Kt.innerHeight},i.killAll=function(n){if($t.slice(0).forEach(function(s){return"ScrollSmoother"!==s.vars.id&&s.kill()}),!0!==n){var r=bu.killAll||[];bu={},r.forEach(function(s){return s()})}},i}();Xt.version="3.12.7",Xt.saveStyles=function(i){return i?Vg(i).forEach(function(e){if(e&&e.style){var t=Ds.indexOf(e);t>=0&&Ds.splice(t,5),Ds.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),et.core.getCache(e),_A())}}):Ds},Xt.revert=function(i,e){return DA(!i,e)},Xt.create=function(i,e){return new Xt(i,e)},Xt.refresh=function(i){return i?Jg(!0):(Hh||Xt.register())&&wu(!0)},Xt.update=function(i){return++Yt.cache&&nl(!0===i?2:0)},Xt.clearScrollMemory=Tz,Xt.maxScroll=function(i,e){return ca(i,e?Rr:Ai)},Xt.getScrollFunc=function(i,e){return Ql(ns(i),e?Rr:Ai)},Xt.getById=function(i){return AA[i]},Xt.getAll=function(){return $t.filter(function(i){return"ScrollSmoother"!==i.vars.id})},Xt.isScrolling=function(){return!!eo},Xt.snapDirectional=TA,Xt.addEventListener=function(i,e){var t=bu[i]||(bu[i]=[]);~t.indexOf(e)||t.push(e)},Xt.removeEventListener=function(i,e){var t=bu[i],n=t&&t.indexOf(e);n>=0&&t.splice(n,1)},Xt.batch=function(i,e){var a,t=[],n={},r=e.interval||.016,s=e.batchMax||1e9,o=function(c,u){var d=[],f=[],h=et.delayedCall(r,function(){u(d,f),d=[],f=[]}).pause();return function(p){d.length||h.restart(!0),d.push(p.trigger),f.push(p),s<=d.length&&h.progress(1)}};for(a in e)n[a]="on"===a.substr(0,2)&&pr(e[a])&&"onRefreshInit"!==a?o(0,e[a]):e[a];return pr(s)&&(s=s(),Vi(Xt,"refresh",function(){return s=e.batchMax()})),Vg(i).forEach(function(l){var c={};for(a in n)c[a]=n[a];c.trigger=l,t.push(Xt.create(c))}),t};var Fz,Lz=function(e,t,n,r){return t>r?e(r):t<0&&e(0),n>r?(r-t)/(n-t):n<0?t/(t-n):1},NA=function i(e,t){!0===t?e.style.removeProperty("touch-action"):e.style.touchAction=!0===t?"auto":t?"pan-"+t+(ri.isTouch?" pinch-zoom":""):"none",e===As&&i(pn,t)},Z0={auto:1,scroll:1},mue=function(e){var l,t=e.event,n=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||et.core.getCache(s),a=fr();if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==pn&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!Z0[(l=no(s)).overflowY]&&!Z0[l.overflowX]);)s=s.parentNode;o._isScroll=s&&s!==n&&!_u(s)&&(Z0[(l=no(s)).overflowY]||Z0[l.overflowX]),o._isScrollT=a}(o._isScroll||"x"===r)&&(t.stopPropagation(),t._gsapAllow=!0)},kz=function(e,t,n,r){return ri.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&mue,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&Vi(Dn,ri.eventTypes[0],Uz,!1,!0)},onDisable:function(){return zi(Dn,ri.eventTypes[0],Uz,!0)}})},_ue=/(input|label|select|textarea)/i,Uz=function(e){var t=_ue.test(e.target.tagName);(t||Fz)&&(e._gsapAllow=!0,Fz=t)};function vue(i,e){if(1&i&&(Y(0,"div",11),ct(1,"img",12),te()),2&i){const t=Mi().$implicit;Le(1),tt("src",t.logo,va)("alt",t.company)}}function Mue(i,e){if(1&i&&(Y(0,"span"),Te(1),te()),2&i){const t=e.$implicit;Le(1),Li(t)}}function bue(i,e){if(1&i&&(Y(0,"div",2),ct(1,"div",3),Y(2,"div",4),Bn(3,vue,2,2,"div",5),Y(4,"div",6)(5,"h3"),Te(6),te(),Y(7,"h4"),Te(8),te(),Y(9,"p",7),Te(10),te(),Y(11,"p",8),Te(12),te(),Y(13,"div",9),Bn(14,Mue,2,1,"span",10),te()()()()),2&i){const t=e.$implicit;Gr("data-aos-delay",200+100*e.index),Le(3),tt("ngIf",t.logo),Le(3),Li(t.role),Le(2),Li(t.company),Le(2),Li(t.period),Le(2),Li(t.description),Le(2),tt("ngForOf",t.technologies)}}Xt.sort=function(i){if(pr(i))return $t.sort(i);var e=Kt.pageYOffset||0;return Xt.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Kt.innerHeight}),$t.sort(i||function(t,n){return-1e6*(t.vars.refreshPriority||0)+(t.vars.containerAnimation?1e6:t._sortY)-((n.vars.containerAnimation?1e6:n._sortY)+-1e6*(n.vars.refreshPriority||0))})},Xt.observe=function(i){return new ri(i)},Xt.normalizeScroll=function(i){if(typeof i>"u")return Lr;if(!0===i&&Lr)return Lr.enable();if(!1===i)return Lr&&Lr.kill(),void(Lr=i);var e=i instanceof ri?i:function(e){yu(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var a,l,y,v,k,L,W,q,n=e.normalizeScrollX,r=e.momentum,s=e.allowNestedScroll,o=e.onRelease,c=ns(e.target)||As,u=et.core.globals().ScrollSmoother,d=u&&u.get(),f=ec&&(e.content&&ns(e.content)||d&&!1!==e.content&&!d.smooth()&&d.content()),h=Ql(c,Ai),p=Ql(c,Rr),g=1,m=(ri.isTouch&&Kt.visualViewport?Kt.visualViewport.scale*Kt.visualViewport.width:Kt.outerWidth)/Kt.innerWidth,_=0,M=pr(r)?function(){return r(a)}:function(){return r||2.8},C=kz(c,e.type,!0,s),w=function(){return v=!1},S=la,E=la,x=function(){l=ca(c,Ai),E=zg(ec?1:0,l),n&&(S=zg(0,ca(c,Rr))),y=Cu},b=function(){f._gsap.y=Wg(parseFloat(f._gsap.y)+h.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",h.offset=h.cacheID=0},N=function(){x(),k.isActive()&&k.vars.scrollY>l&&(h()>l?k.progress(1)&&h(l):k.resetTo("scrollY",l))};return f&&et.set(f,{y:"+=0"}),e.ignoreCheck=function(V){return ec&&"touchmove"===V.type&&function(){if(v){requestAnimationFrame(w);var B=Wg(a.deltaY/2),ee=E(h.v-B);if(f&&ee!==h.v+h.offset){h.offset=ee-h.v;var R=Wg((parseFloat(f&&f._gsap.y)||0)-h.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+R+", 0, 1)",f._gsap.y=R+"px",h.cacheID=Yt.cache,nl()}return!0}h.offset&&b(),v=!0}()||g>1.05&&"touchstart"!==V.type||a.isGesturing||V.touches&&V.touches.length>1},e.onPress=function(){v=!1;var V=g;g=Wg((Kt.visualViewport&&Kt.visualViewport.scale||1)/m),k.pause(),V!==g&&NA(c,g>1.01||!n&&"x"),L=p(),W=h(),x(),y=Cu},e.onRelease=e.onGestureStart=function(V,B){if(h.offset&&b(),B){Yt.cache++;var R,ae,ee=M();n&&(R=p(),ee*=Lz(p,R,ae=R+.05*ee*-V.velocityX/.227,ca(c,Rr)),k.vars.scrollX=S(ae)),R=h(),ee*=Lz(h,R,ae=R+.05*ee*-V.velocityY/.227,ca(c,Ai)),k.vars.scrollY=E(ae),k.invalidate().duration(ee).play(.01),(ec&&k.vars.scrollY>=l||R>=l-1)&&et.to({},{onUpdate:N,duration:ee})}else q.restart(!0);o&&o(V)},e.onWheel=function(){k._ts&&k.pause(),fr()-_>1e3&&(y=0,_=fr())},e.onChange=function(V,B,ee,R,ae){if(Cu!==y&&x(),B&&n&&p(S(R[2]===B?L+(V.startX-V.x):p()+B-R[1])),ee){h.offset&&b();var Ee=ae[2]===ee,He=Ee?W+V.startY-V.y:h()+ee-ae[1],$=E(He);Ee&&He!==$&&(W+=$-He),h($)}(ee||B)&&nl()},e.onEnable=function(){NA(c,!n&&"x"),Xt.addEventListener("refresh",N),Vi(Kt,"resize",N),h.smooth&&(h.target.style.scrollBehavior="auto",h.smooth=p.smooth=!1),C.enable()},e.onDisable=function(){NA(c,!0),zi(Kt,"resize",N),Xt.removeEventListener("refresh",N),C.kill()},e.lockAxis=!1!==e.lockAxis,(a=new ri(e)).iOS=ec,ec&&!h()&&h(1),ec&&et.ticker.add(la),q=a._dc,k=et.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:n?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Rz(h,h(),function(){return k.pause()})},onUpdate:nl,onComplete:q.vars.onComplete}),a}(i);return Lr&&Lr.target===e.target&&Lr.kill(),_u(e.target)&&(Lr=e),e},Xt.core={_getVelocityProp:hA,_inputObserver:kz,_scrollers:Yt,_proxies:aa,bridge:{ss:function(){eo||xu("scrollStart"),eo=fr()},ref:function(){return hr}}},mz()&&et.registerPlugin(Xt);let xue=(()=>{const e=class{constructor(){this.experiences=[]}ngOnInit(){console.log("Experience component initialized")}};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ls({type:e,selectors:[["app-experience"]],inputs:{experiences:"experiences"},decls:2,vars:1,consts:[[1,"timeline"],["class","timeline-item","data-aos","fade-up",4,"ngFor","ngForOf"],["data-aos","fade-up",1,"timeline-item"],[1,"timeline-dot"],[1,"timeline-content"],["class","company-logo",4,"ngIf"],[1,"experience-details"],[1,"period"],[1,"description"],[1,"technologies"],[4,"ngFor","ngForOf"],[1,"company-logo"],[3,"src","alt"]],template:function(r,s){1&r&&(Y(0,"div",0),Bn(1,bue,15,7,"div",1),te()),2&r&&(Le(1),tt("ngForOf",s.experiences))},dependencies:[rp,sp],styles:['[_nghost-%COMP%]{display:block;width:100%}.timeline[_ngcontent-%COMP%]{position:relative;margin:0 auto;max-width:800px}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:2px;height:100%;background:var(--primary-color)}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]:before{left:20px}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{position:relative;margin-bottom:3rem}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-dot[_ngcontent-%COMP%]{position:absolute;top:15px;left:50%;transform:translate(-50%);width:20px;height:20px;background:var(--primary-color);border-radius:50%;z-index:1}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-dot[_ngcontent-%COMP%]{left:20px}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{display:flex;background:rgba(255,255,255,.03);border-radius:15px;padding:1.5rem;width:calc(50% - 40px);margin-left:auto;transition:transform .3s,box-shadow .3s}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #00000026}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{width:calc(100% - 60px);margin-left:60px}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{flex:0 0 80px;margin-right:1.5rem}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px}@media (max-width: 576px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{display:none}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .experience-details[_ngcontent-%COMP%]{flex:1}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .experience-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.3rem;font-size:1.3rem;color:var(--primary-color)}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .experience-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.6rem;font-size:1.1rem;color:var(--text-color)}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .experience-details[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-color, var(--primary-color));margin-bottom:.8rem;font-style:italic}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .experience-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.6}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .experience-details[_ngcontent-%COMP%]   .technologies[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .experience-details[_ngcontent-%COMP%]   .technologies[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb, 108, 99, 255),.1);color:var(--primary-color);padding:.3rem .8rem;border-radius:20px;font-size:.8rem}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:nth-child(odd)   .timeline-content[_ngcontent-%COMP%]{margin-left:0;margin-right:auto}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:nth-child(odd)   .timeline-content[_ngcontent-%COMP%]{margin-left:60px;margin-right:0}}']}),i})();function Cue(i,e){if(1&i&&(Y(0,"div",9),ct(1,"img",10),te()),2&i){const t=Mi().$implicit;Le(1),tt("src",t.logo,va)("alt",t.institution)}}function wue(i,e){if(1&i&&(Y(0,"div",2),ct(1,"div",3),Y(2,"div",4),Bn(3,Cue,2,2,"div",5),Y(4,"div",6)(5,"h3"),Te(6),te(),Y(7,"h4"),Te(8),te(),Y(9,"p",7),Te(10),te(),Y(11,"p",8),Te(12),te()()()()),2&i){const t=e.$implicit;Gr("data-aos-delay",200+100*e.index),Le(3),tt("ngIf",t.logo),Le(3),Li(t.degree),Le(2),Li(t.institution),Le(2),Li(t.period),Le(2),Li(t.description)}}let Sue=(()=>{const e=class{constructor(){this.education=[]}ngOnInit(){console.log("Education component initialized")}};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ls({type:e,selectors:[["app-education"]],inputs:{education:"education"},decls:2,vars:1,consts:[[1,"timeline"],["class","timeline-item","data-aos","fade-up",4,"ngFor","ngForOf"],["data-aos","fade-up",1,"timeline-item"],[1,"timeline-dot"],[1,"timeline-content"],["class","institution-logo",4,"ngIf"],[1,"education-details"],[1,"period"],[1,"description"],[1,"institution-logo"],[3,"src","alt"]],template:function(r,s){1&r&&(Y(0,"div",0),Bn(1,wue,13,6,"div",1),te()),2&r&&(Le(1),tt("ngForOf",s.education))},dependencies:[rp,sp],styles:['[_nghost-%COMP%]{display:block;width:100%}.timeline[_ngcontent-%COMP%]{position:relative;margin:0 auto;max-width:800px}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:2px;height:100%;background:var(--secondary-color, var(--primary-color))}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]:before{left:20px}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{position:relative;margin-bottom:3rem}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-dot[_ngcontent-%COMP%]{position:absolute;top:15px;left:50%;transform:translate(-50%);width:20px;height:20px;background:var(--secondary-color, var(--primary-color));border-radius:50%;z-index:1}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-dot[_ngcontent-%COMP%]{left:20px}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{display:flex;background:rgba(255,255,255,.03);border-radius:15px;padding:1.5rem;width:calc(50% - 40px);margin-left:auto;transition:transform .3s,box-shadow .3s}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #00000026}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{width:calc(100% - 60px);margin-left:60px}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .institution-logo[_ngcontent-%COMP%]{flex:0 0 80px;margin-right:1.5rem}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .institution-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px}@media (max-width: 576px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .institution-logo[_ngcontent-%COMP%]{display:none}}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .education-details[_ngcontent-%COMP%]{flex:1}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .education-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.3rem;font-size:1.3rem;color:var(--secondary-color, var(--primary-color))}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .education-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.6rem;font-size:1.1rem;color:var(--text-color)}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .education-details[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-color, var(--secondary-color));margin-bottom:.8rem;font-style:italic}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .education-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.6}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:nth-child(odd)   .timeline-content[_ngcontent-%COMP%]{margin-left:0;margin-right:auto}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:nth-child(odd)   .timeline-content[_ngcontent-%COMP%]{margin-left:60px;margin-right:0}}']}),i})(),Eue=(()=>{const e=class{constructor(n,r){this.portfolioService=n,this.elementRef=r,this.experiences=[],this.education=[],Ut.registerPlugin(Xt)}ngOnInit(){console.log("About component initialized"),this.experiences=this.portfolioService.experiences,this.education=this.portfolioService.education}ngAfterViewInit(){typeof window<"u"&&window.AOS&&window.AOS.refresh(),this.initGSAPAnimations(),this.setupScrollAnimation()}setupScrollAnimation(){Xt.create({trigger:"#about",start:"top 80%",end:"bottom 20%",toggleActions:"play reset restart reset",onEnter:()=>{console.log("About section entered view - main trigger")},onLeave:()=>console.log("About section left view - main trigger"),onEnterBack:()=>console.log("About section re-entered view - main trigger"),onLeaveBack:()=>console.log("About section left view going up - main trigger")})}initGSAPAnimations(){const n=this.elementRef.nativeElement.querySelector(".headline"),r=this.elementRef.nativeElement.querySelector(".qualities");let s=this.elementRef.nativeElement.querySelector(".resume-button");const o=this.elementRef.nativeElement.querySelectorAll(".tech-icon"),a=this.elementRef.nativeElement.querySelector(".button-highlight");if(console.log("Resume button found:",s),console.log("Button highlight found:",a),!n||!r)return void console.error("Required elements not found");s||(console.warn("Resume button not found with initial selector, trying alternative"),this.elementRef.nativeElement.querySelectorAll("a").forEach(g=>{g.textContent&&g.textContent.includes("Resume")&&(console.log("Found resume button via text content"),s=g)}));const l=this.elementRef.nativeElement.querySelector(".bio");l&&(l.removeAttribute("data-aos"),l.removeAttribute("data-aos-delay"),l.classList.add("animate-on-scroll"));const c=this.elementRef.nativeElement.querySelector(".section-title");c&&Ut.set(c,{opacity:0,y:20});const u=Ut.timeline({scrollTrigger:{trigger:".bio",start:"top 80%",end:"bottom top",toggleActions:"play reverse restart reverse",scrub:!1,markers:!1,onEnter:()=>console.log("About section entered view"),onLeave:()=>console.log("About section left view"),onEnterBack:()=>console.log("About section entered view again"),onLeaveBack:()=>console.log("About section left view going up")}}),d=Ut.timeline(),f=Ut.timeline();this.splitTextAndAnimate(n,f,"headline-word");const h=Ut.timeline();this.splitTextAndAnimate(r,h,"qualities-word"),Ut.set([n.querySelectorAll(".headline-word"),r.querySelectorAll(".qualities-word")],{clearProps:"all",opacity:0,y:20}),c&&d.add(Ut.to(c,{opacity:1,y:0,duration:.6,ease:"power2.out"}),0),d.add(f).add(()=>{Ut.to(n,{opacity:.7,fontWeight:400,duration:.4,ease:"power2.out"}),Ut.to(r,{opacity:1,fontWeight:600,color:"var(--text-color)",duration:.4,ease:"power2.out"}),this.createHighlightIndicator(n,"headline-indicator"),this.createHighlightIndicator(r,"qualities-indicator"),Ut.to(r.querySelector(".qualities-indicator"),{width:"100px",opacity:1,duration:.5,ease:"power2.out"})},"-=0.5").add(h,"-=0.5"),u.add(d),o.length>0&&u.from(o,{scale:0,opacity:0,y:20,stagger:.1,duration:.6,ease:"back.out(1.7)",clearProps:"all"},"-=0.2"),u.add(()=>{this.setupAlternatingFocus(n,r)},"+=0.3"),setTimeout(()=>{const p=this.elementRef.nativeElement.querySelector("#resume-btn");if(p){console.log("Resume button found for animation"),Ut.set(p,{autoAlpha:1,clearProps:"transform",display:"inline-block"});const g=Ut.timeline();g.from(p,{y:20,autoAlpha:0,scale:.8,duration:.7,ease:"back.out(1.7)",onStart:()=>console.log("Resume button animation started"),onComplete:()=>console.log("Resume button animation completed")}),g.to(p,{boxShadow:"0 0 15px var(--primary-color)",duration:.4,ease:"power2.inOut",yoyo:!0,repeat:1},"+=0.1"),p.addEventListener("mouseenter",()=>{Ut.to(p,{backgroundColor:"var(--primary-color)",color:"white",boxShadow:"0 5px 15px rgba(var(--primary-color-rgb), 0.4)",y:-3,duration:.3})}),p.addEventListener("mouseleave",()=>{Ut.to(p,{backgroundColor:"transparent",color:"var(--primary-color)",boxShadow:"none",y:0,duration:.3})}),u.add(g,"-=0.2")}else console.error("Resume button not found for animation")},100),a&&(u.from(a,{opacity:0,scale:.5,duration:.8,ease:"power2.out"},"-=0.4"),Ut.to(a,{scale:1.2,opacity:.2,duration:1.5,repeat:-1,yoyo:!0,ease:"sine.inOut"})),this.setupResumeButtonHover(s),this.addButtonParticleEffect(s),this.animateTechIcons(o)}splitTextAndAnimate(n,r,s="word"){const a=n.innerText.split(" ");n.innerHTML="";const l=[];a.forEach((c,u)=>{const d=document.createElement("span");d.className=s,d.style.display="inline-block",d.style.overflow="hidden",d.style.marginRight="0.3rem";const f=document.createElement("span");f.className=`${s}-inner`,f.innerText=c,f.style.display="inline-block",d.appendChild(f),n.appendChild(d),l.push(f),u<a.length-1&&n.appendChild(document.createTextNode(" "))}),r.from(l,{y:50,opacity:0,rotationX:-20,duration:.8,stagger:.08,ease:"back.out(1.7)"}),l.forEach((c,u)=>{const d=Ut.timeline();d.to(c,{color:"var(--primary-color)",fontWeight:600,duration:.3,delay:.08*u+.4,ease:"power2.inOut"}).to(c,{color:"",fontWeight:"",duration:.5,delay:.1,ease:"power2.out"}),r.add(d,0)})}createHighlightIndicator(n,r){if(n.querySelector(`.${r}`))return;const s=document.createElement("div");s.className=r,s.style.position="absolute",s.style.bottom="-0.5rem",s.style.left="0",s.style.width="0",s.style.height="3px",s.style.backgroundColor="var(--primary-color)",s.style.opacity="0",s.style.transition="width 0.5s ease, opacity 0.5s ease","relative"!==getComputedStyle(n).position&&(n.style.position="relative"),n.appendChild(s)}toggleFocus(n,r,s){const o=n.querySelector(".headline-indicator"),a=r.querySelector(".qualities-indicator");!o||!a||(s?(Ut.to(n,{opacity:1,fontWeight:600,duration:.5,ease:"power2.out"}),Ut.to(o,{width:"100px",opacity:1,duration:.5,ease:"power2.out"}),Ut.to(r,{opacity:.7,fontWeight:400,duration:.5,ease:"power2.out"}),Ut.to(a,{width:"0",opacity:0,duration:.5,ease:"power2.out"})):(Ut.to(n,{opacity:.7,fontWeight:400,duration:.5,ease:"power2.out"}),Ut.to(o,{width:"0",opacity:0,duration:.5,ease:"power2.out"}),Ut.to(r,{opacity:1,fontWeight:600,duration:.5,ease:"power2.out"}),Ut.to(a,{width:"100px",opacity:1,duration:.5,ease:"power2.out"})))}animateTechIcons(n){!n||0===n.length||n.forEach((r,s)=>{const o=.2*s;Ut.to(r,{y:-10,duration:1.5+.5*Math.random(),delay:o,repeat:-1,yoyo:!0,ease:"sine.inOut"}),r.addEventListener("mouseenter",()=>{Ut.to(r,{scale:1.2,duration:.3,ease:"back.out(1.7)"})}),r.addEventListener("mouseleave",()=>{Ut.to(r,{scale:1,duration:.3,ease:"back.out(1.7)"})})})}addButtonParticleEffect(n){const r=document.createElement("div");r.className="particle-container",r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.top="0",r.style.left="0",r.style.pointerEvents="none",r.style.zIndex="-1",n.style.position="relative",n.insertBefore(r,n.firstChild);for(let s=0;s<15;s++){const o=document.createElement("div");o.className="particle",o.style.position="absolute";const a=3+4*Math.random();o.style.width=`${a}px`,o.style.height=`${a}px`,o.style.borderRadius="50%",o.style.backgroundColor=`var(${s%2==0?"--primary-color":"--secondary-color"})`,o.style.opacity="0",r.appendChild(o);const c=100*Math.random(),u=100*Math.random();o.style.left=`${c}%`,o.style.top=`${u}%`}n.addEventListener("mouseenter",()=>{r.querySelectorAll(".particle").forEach(o=>{const a=o,l=.5+.5*Math.random(),c=.2*Math.random();Ut.to(a,{x:70*(Math.random()-.5),y:70*(Math.random()-.5),opacity:.7,scale:2+3*Math.random(),duration:l,delay:c,ease:"power1.out",onComplete:()=>{Ut.to(a,{opacity:0,duration:.3,ease:"power1.in"})}})})})}setupAlternatingFocus(n,r){Xt.create({trigger:".bio",start:"top 40%",end:"bottom 40%",toggleActions:"play reset restart reset",onUpdate:s=>{this.toggleFocus(n,r,s.progress>.6)},onEnter:()=>{this.elementRef.nativeElement.querySelector(".bio")&&Ut.set([n,r],{clearProps:"all"})}})}setupResumeButtonHover(n){const r=Ut.timeline({paused:!0});r.to(n,{scale:1.05,boxShadow:"0 0 15px var(--primary-color)",duration:.3,ease:"power1.out"});const s=n.querySelector("i");s&&r.to(s,{rotate:15,duration:.3,ease:"power1.out"},0),n.addEventListener("mouseenter",()=>r.play()),n.addEventListener("mouseleave",()=>r.reverse()),n.addEventListener("focus",()=>r.play()),n.addEventListener("blur",()=>r.reverse())}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(Yw),pe(Ni))},e.\u0275cmp=Ls({type:e,selectors:[["app-about"]],decls:23,vars:2,consts:[["id","about",1,"about-section"],[1,"container"],["data-aos","fade-up",1,"section-title"],[1,"about-content"],[1,"bio"],[1,"headline-container"],[1,"headline"],[1,"qualities"],[1,"resume-wrapper"],["id","resume-btn","href","assets/resume.pdf","target","_blank",1,"resume-button"],[1,"fas","fa-download"],["id","experience"],[3,"experiences"],["id","education"],["data-aos","fade-up",1,"section-title","education-title"],[3,"education"]],template:function(r,s){1&r&&(Y(0,"section",0)(1,"div",1)(2,"h2",2),Te(3,"About Me"),te(),Y(4,"div",3)(5,"div",4)(6,"div",5)(7,"p",6),Te(8,"Innovative full-stack developer specializing in building scalable, high-performance web applications with modern technologies."),te(),Y(9,"p",7),Te(10,"Committed to clean code principles, creative problem-solving, and collaborative development practices that deliver exceptional user experiences."),te()(),Y(11,"div",8)(12,"a",9),ct(13,"i",10),Te(14," Download Resume "),te()()()(),Y(15,"div",11)(16,"h2",2),Te(17,"Work Experience"),te(),ct(18,"app-experience",12),te(),Y(19,"div",13)(20,"h2",14),Te(21,"Education"),te(),ct(22,"app-education",15),te()()()),2&r&&(Le(18),tt("experiences",s.experiences),Le(4),tt("education",s.education))},dependencies:[xue,Sue],styles:['section[_ngcontent-%COMP%]{padding:5rem 0;position:relative;overflow:hidden}@media (min-width: 992px){section[_ngcontent-%COMP%]:not(.hero-section)   .container[_ngcontent-%COMP%]{margin-left:auto;margin-right:0;width:70%;padding-right:2rem}}.container[_ngcontent-%COMP%]{width:90%;max-width:1200px;margin:0 auto;position:relative;z-index:1}.section-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;text-align:center;margin-bottom:3rem;position:relative;color:var(--text-color)}.section-title[_ngcontent-%COMP%]:after{content:"";display:block;width:60px;height:4px;background:var(--primary-color);margin:1rem auto 0}.about-section[_ngcontent-%COMP%]{background-color:var(--bg-color);position:relative}.about-section[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at top right,rgba(108,99,255,.1),transparent 50%)}@media (min-width: 992px){.about-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-left:0}}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]{position:relative;z-index:5}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem;line-height:1.6}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .headline-container[_ngcontent-%COMP%]{margin-bottom:2rem;position:relative}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:500;margin-bottom:1.5rem;line-height:1.5;color:var(--text-color);overflow:hidden;transition:opacity .5s ease,font-weight .5s ease,text-shadow .5s ease;position:relative}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .headline-word[_ngcontent-%COMP%], .about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .word[_ngcontent-%COMP%]{overflow:hidden;display:inline-block;margin-right:.3rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]   .headline-indicator[_ngcontent-%COMP%]{position:absolute;bottom:-.5rem;left:0;height:3px;background:var(--primary-color);opacity:0;transition:width .5s cubic-bezier(.25,.1,.25,1),opacity .5s ease}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .tech-icons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1.5rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .tech-icons[_ngcontent-%COMP%]   .tech-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:var(--card-bg);border:1px solid var(--border-color);transition:all .3s ease;cursor:pointer}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .tech-icons[_ngcontent-%COMP%]   .tech-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--primary-color);transition:all .3s ease}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .tech-icons[_ngcontent-%COMP%]   .tech-icon[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(var(--primary-color-rgb),.3);background:var(--primary-color)}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .tech-icons[_ngcontent-%COMP%]   .tech-icon[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff;transform:scale(1.2)}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .qualities[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;margin-bottom:2.5rem;color:var(--text-muted);position:relative;transition:opacity .5s ease,font-weight .5s ease,color .5s ease,text-shadow .5s ease;overflow:hidden}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .qualities[_ngcontent-%COMP%]   .qualities-word[_ngcontent-%COMP%], .about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .qualities[_ngcontent-%COMP%]   .word[_ngcontent-%COMP%]{overflow:hidden;display:inline-block;margin-right:.3rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .qualities[_ngcontent-%COMP%]   .qualities-indicator[_ngcontent-%COMP%]{position:absolute;bottom:-.5rem;left:0;height:3px;background:var(--primary-color);opacity:0;transition:width .5s cubic-bezier(.25,.1,.25,1),opacity .5s ease}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-wrapper[_ngcontent-%COMP%]{display:block;margin-top:2rem;margin-bottom:2rem;position:relative;z-index:10;text-align:center}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]{display:inline-block!important;background:transparent;border:2px solid var(--primary-color);color:var(--primary-color);padding:.8rem 1.5rem;border-radius:2rem;font-size:1rem;text-decoration:none;transition:all .3s;position:relative;overflow:hidden;will-change:transform,box-shadow;z-index:10;opacity:1!important}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;z-index:-1}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff;transform:translateY(-3px);box-shadow:0 10px 20px rgba(var(--primary-color-rgb),.2)}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;display:inline-block;will-change:transform;transition:transform .3s ease}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(var(--primary-color-rgb),.3) 0%,transparent 70%);opacity:0;transform:scale(.5);transition:opacity .4s,transform .3s;pointer-events:none}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]:hover:after{opacity:1;transform:scale(1)}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{position:absolute;width:5px;height:5px;border-radius:50%;background-color:var(--primary-color);opacity:0;pointer-events:none}.education-title[_ngcontent-%COMP%]{margin-top:3rem}']}),i})(),Tue=(()=>{const e=class{constructor(n,r){this.elementRef=n,this.renderer=r,this.animationClass="animate",this.offset=100,this.delay=0,this.duration="0.6s",this.once=!1,this.isAnimated=!1}ngOnInit(){this.renderer.setStyle(this.elementRef.nativeElement,"transition",`opacity ${this.duration} ease, transform ${this.duration} ease`),this.renderer.setStyle(this.elementRef.nativeElement,"opacity","0"),this.renderer.setStyle(this.elementRef.nativeElement,"transform","translateY(30px)"),this.delay>0&&this.renderer.setStyle(this.elementRef.nativeElement,"transition-delay",`${this.delay}ms`),setTimeout(()=>{this.checkScroll()},100),this.scrollHandler=this.checkScroll.bind(this),this.resizeHandler=this.checkScroll.bind(this),window.addEventListener("scroll",this.scrollHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler,{passive:!0})}ngOnDestroy(){window.removeEventListener("scroll",this.scrollHandler),window.removeEventListener("resize",this.resizeHandler)}checkScroll(){this.elementRef.nativeElement.getBoundingClientRect().top<window.innerHeight-this.offset?(!this.isAnimated||!this.once)&&(this.renderer.setStyle(this.elementRef.nativeElement,"opacity","1"),this.renderer.setStyle(this.elementRef.nativeElement,"transform","translateY(0)"),this.renderer.addClass(this.elementRef.nativeElement,this.animationClass),this.isAnimated=!0):!this.once&&this.isAnimated&&(this.renderer.setStyle(this.elementRef.nativeElement,"opacity","0"),this.renderer.setStyle(this.elementRef.nativeElement,"transform","translateY(30px)"),this.renderer.removeClass(this.elementRef.nativeElement,this.animationClass),this.isAnimated=!1)}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(Ni),pe(cs))},e.\u0275dir=pt({type:e,selectors:[["","appScrollAnimation",""]],inputs:{animationClass:"animationClass",offset:"offset",delay:"delay",duration:"duration",once:"once"}}),i})();var il,Su,LA,J0,em,Q0,eM,tm,Bz,Po="transform",kA=Po+"Origin",Vz=function(e){var t=e.ownerDocument||e;for((!(Po in e.style)&&"msTransform"in e.style&&(kA=(Po="msTransform")+"Origin"));t.parentNode&&(t=t.parentNode););if(Su=window,eM=new Eu,t){LA=t.documentElement,J0=t.body,(tm=(il=t).createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var n=t.createElement("div"),r=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(n),n.appendChild(r),n.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Bz=r.offsetParent!==n,s.removeChild(n))}return t},Aue=function(e){for(var t,n;e&&e!==J0;)(n=e._gsap)&&n.uncache&&n.get(e,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),t?t.push(n):t=[n]),e=e.parentNode;return t},zz=[],Hz=[],Pue=function(){return Su.pageYOffset||il.scrollTop||LA.scrollTop||J0.scrollTop||0},Due=function(){return Su.pageXOffset||il.scrollLeft||LA.scrollLeft||J0.scrollLeft||0},FA=function(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)},Oue=function i(e){return"fixed"===Su.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?i(e):void 0)},UA=function i(e,t){if(e.parentNode&&(il||Vz(e))){var n=FA(e),r=n?n.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=n?t?"rect":"g":"div",o=2!==t?0:100,a=3===t?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=il.createElementNS?il.createElementNS(r.replace(/^https/,"http"),s):il.createElement(s);return t&&(n?(Q0||(Q0=i(e)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+o+","+a+")"),Q0.appendChild(c)):(em||((em=i(e)).style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",em.appendChild(c))),c}throw"Need document and parent."},Nue=function(e,t){var a,l,c,u,d,f,n=FA(e),r=e===n,s=n?zz:Hz,o=e.parentNode;if(e===Su)return e;if(s.length||s.push(UA(e,1),UA(e,2),UA(e,3)),a=n?Q0:em,n)r?(c=function(e){var n,t=e.getCTM();return t||(n=e.style[Po],e.style[Po]="none",e.appendChild(tm),t=tm.getCTM(),e.removeChild(tm),n?e.style[Po]=n:e.style.removeProperty(Po.replace(/([A-Z])/g,"-$1").toLowerCase())),t||eM.clone()}(e),u=-c.e/c.a,d=-c.f/c.d,l=eM):e.getBBox?(c=e.getBBox(),l=(l=e.transform?e.transform.baseVal:{}).numberOfItems?l.numberOfItems>1?function(e){for(var t=new Eu,n=0;n<e.numberOfItems;n++)t.multiply(e.getItem(n).matrix);return t}(l):l.getItem(0).matrix:eM,u=l.a*c.x+l.c*c.y,d=l.b*c.x+l.d*c.y):(l=new Eu,u=d=0),t&&"g"===e.tagName.toLowerCase()&&(u=d=0),(r?n:o).appendChild(a),a.setAttribute("transform","matrix("+l.a+","+l.b+","+l.c+","+l.d+","+(l.e+u)+","+(l.f+d)+")");else{if(u=d=0,Bz)for(l=e.offsetParent,c=e;c&&(c=c.parentNode)&&c!==l&&c.parentNode;)(Su.getComputedStyle(c)[Po]+"").length>4&&(u=c.offsetLeft,d=c.offsetTop,c=0);if("absolute"!==(f=Su.getComputedStyle(e)).position&&"fixed"!==f.position)for(l=e.offsetParent;o&&o!==l;)u+=o.scrollLeft||0,d+=o.scrollTop||0,o=o.parentNode;(c=a.style).top=e.offsetTop-d+"px",c.left=e.offsetLeft-u+"px",c[Po]=f[Po],c[kA]=f[kA],c.position="fixed"===f.position?"fixed":"absolute",e.parentNode.appendChild(a)}return a},BA=function(e,t,n,r,s,o,a){return e.a=t,e.b=n,e.c=r,e.d=s,e.e=o,e.f=a,e},Eu=function(){function i(t,n,r,s,o,a){void 0===t&&(t=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=1),void 0===o&&(o=0),void 0===a&&(a=0),BA(this,t,n,r,s,o,a)}var e=i.prototype;return e.inverse=function(){var n=this.a,r=this.b,s=this.c,o=this.d,a=this.e,l=this.f,c=n*o-r*s||1e-10;return BA(this,o/c,-r/c,-s/c,n/c,(s*l-o*a)/c,-(n*l-r*a)/c)},e.multiply=function(n){var r=this.a,s=this.b,o=this.c,a=this.d,u=n.a,d=n.c,f=n.b,h=n.d,p=n.e,g=n.f;return BA(this,u*r+f*o,u*s+f*a,d*r+h*o,d*s+h*a,this.e+p*r+g*o,this.f+p*s+g*a)},e.clone=function(){return new i(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(n){return this.a===n.a&&this.b===n.b&&this.c===n.c&&this.d===n.d&&this.e===n.e&&this.f===n.f},e.apply=function(n,r){void 0===r&&(r={});var s=n.x,o=n.y,l=this.b,u=this.d,f=this.f;return r.x=s*this.a+o*this.c+this.e||0,r.y=s*l+o*u+f||0,r},i}();function Tu(i,e,t,n){if(!i||!i.parentNode||(il||Vz(i)).documentElement===i)return new Eu;var r=Aue(i),o=FA(i)?zz:Hz,a=Nue(i,t),l=o[0].getBoundingClientRect(),c=o[1].getBoundingClientRect(),u=o[2].getBoundingClientRect(),d=a.parentNode,f=!n&&Oue(i),h=new Eu((c.left-l.left)/100,(c.top-l.top)/100,(u.left-l.left)/100,(u.top-l.top)/100,l.left+(f?0:Due()),l.top+(f?0:Pue()));if(d.removeChild(a),r)for(l=r.length;l--;)(c=r[l]).scaleX=c.scaleY=0,c.renderTransform(1,c);return e?h.inverse():h}function Gz(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var rn,Cn,Os,Do,rl,VA,sl,zA,nm,tc,Wz,HA,im,GA,rm,Oo,sm,tM,jz,WA,oH,YA,nM=0,$z=function(){return typeof window<"u"},Xz=function(){return rn||$z()&&(rn=window.gsap)&&rn.registerPlugin&&rn},nc=function(e){return"function"==typeof e},om=function(e){return"object"==typeof e},Io=function(e){return typeof e>"u"},iM=function(){return!1},am="transform",jA="transformOrigin",ic=function(e){return Math.round(1e4*e)/1e4},lm=Array.isArray,rM=function(e,t){var n=Os.createElementNS?Os.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Os.createElement(e);return n.style?n:Os.createElement(e)},qz=180/Math.PI,Au=1e20,kue=new Eu,rc=Date.now||function(){return(new Date).getTime()},Pu=[],Yh={},Fue=0,Uue=/^(?:a|input|textarea|button|select)$/i,Yz=0,Kh={},ol={},Kz=function(e,t){var r,n={};for(r in e)n[r]=t?e[r]*t:e[r];return n},Bue=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Zz=function i(e,t){for(var r,n=e.length;n--;)t?e[n].style.touchAction=t:e[n].style.removeProperty("touch-action"),(r=e[n].children)&&r.length&&i(r,t)},Jz=function(){return Pu.forEach(function(e){return e()})},Vue=function(e){Pu.push(e),1===Pu.length&&rn.ticker.add(Jz)},Qz=function(){return!Pu.length&&rn.ticker.remove(Jz)},eH=function(e){for(var t=Pu.length;t--;)Pu[t]===e&&Pu.splice(t,1);rn.to(Qz,{overwrite:!0,delay:15,duration:0,onComplete:Qz,data:"_draggable"})},Di=function(e,t,n,r){if(e.addEventListener){var s=im[t];e.addEventListener(s||t,n,r=r||(Wz?{passive:!1}:null)),s&&t!==s&&e.addEventListener(t,n,r)}},_i=function(e,t,n,r){if(e.removeEventListener){var s=im[t];e.removeEventListener(s||t,n,r),s&&t!==s&&e.removeEventListener(t,n,r)}},io=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},Hue=function(e,t){for(var n=e.length;n--;)if(e[n].identifier===t)return!0},Gue=function i(e){GA=e.touches&&nM<e.touches.length,_i(e.target,"touchend",i)},tH=function(e){GA=e.touches&&nM<e.touches.length,Di(e.target,"touchend",Gue)},Zh=function(e){return Cn.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},Jh=function(e){return Cn.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},nH=function i(e,t){Di(e,"scroll",t),Qh(e.parentNode)||i(e.parentNode,t)},iH=function i(e,t){_i(e,"scroll",t),Qh(e.parentNode)||i(e.parentNode,t)},Qh=function(e){return!e||e===Do||9===e.nodeType||e===Os.body||e===Cn||!e.nodeType||!e.parentNode},rH=function(e,t){var n="x"===t?"Width":"Height",r="scroll"+n,s="client"+n;return Math.max(0,Qh(e)?Math.max(Do[r],rl[r])-(Cn["inner"+n]||Do[s]||rl[s]):e[r]-e[s])},$A=function i(e,t){var n=rH(e,"x"),r=rH(e,"y");Qh(e)?e=ol:i(e.parentNode,t),e._gsMaxScrollX=n,e._gsMaxScrollY=r,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},XA=function(e,t,n){var r=e.style;r&&(Io(r[t])&&(t=nm(t,e)||t),null==n?r.removeProperty&&r.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):r[t]=n)},cm=function(e){return Cn.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},Du={},ef=function(e){if(e===Cn)return Du.left=Du.top=0,Du.width=Du.right=Do.clientWidth||e.innerWidth||rl.clientWidth||0,Du.height=Du.bottom=(e.innerHeight||0)-20<Do.clientHeight?Do.clientHeight:e.innerHeight||rl.clientHeight||0,Du;var t=e.ownerDocument||Os,n=Io(e.pageX)?e.nodeType||Io(e.left)||Io(e.top)?tc(e)[0].getBoundingClientRect():e:{left:e.pageX-Jh(t),top:e.pageY-Zh(t),right:e.pageX-Jh(t)+1,bottom:e.pageY-Zh(t)+1};return Io(n.right)&&!Io(n.width)?(n.right=n.left+n.width,n.bottom=n.top+n.height):Io(n.width)&&(n={width:n.right-n.left,height:n.bottom-n.top,right:n.right,left:n.left,bottom:n.bottom,top:n.top}),n},si=function(e,t,n){var a,r=e.vars,s=r[n],o=e._listeners[t];return nc(s)&&(a=s.apply(r.callbackScope||e,r[n+"Params"]||[e.pointerEvent])),o&&!1===e.dispatchEvent(t)&&(a=!1),a},sH=function(e,t){var r,s,o,n=tc(e)[0];return n.nodeType||n===Cn?Wue(n,t):Io(e.left)?{left:s=e.min||e.minX||e.minRotation||0,top:r=e.min||e.minY||0,width:(e.max||e.maxX||e.maxRotation||0)-s,height:(e.max||e.maxY||0)-r}:{left:e.left-(o={x:0,y:0}).x,top:e.top-o.y,width:e.width,height:e.height}},ro={},Wue=function(e,t){t=tc(t)[0];var s,o,a,l,c,u,d,f,h,p,g,m,_,n=e.getBBox&&e.ownerSVGElement,r=e.ownerDocument||Os;if(e===Cn)a=Zh(r),o=(s=Jh(r))+(r.documentElement.clientWidth||e.innerWidth||r.body.clientWidth||0),l=a+((e.innerHeight||0)-20<r.documentElement.clientHeight?r.documentElement.clientHeight:e.innerHeight||r.body.clientHeight||0);else{if(t===Cn||Io(t))return e.getBoundingClientRect();s=a=0,n?(g=(p=e.getBBox()).width,m=p.height):(e.viewBox&&(p=e.viewBox.baseVal)&&(s=p.x||0,a=p.y||0,g=p.width,m=p.height),g||(p="border-box"===(_=cm(e)).boxSizing,g=(parseFloat(_.width)||e.clientWidth||0)+(p?0:parseFloat(_.borderLeftWidth)+parseFloat(_.borderRightWidth)),m=(parseFloat(_.height)||e.clientHeight||0)+(p?0:parseFloat(_.borderTopWidth)+parseFloat(_.borderBottomWidth)))),o=g,l=m}return e===t?{left:s,top:a,width:o-s,height:l-a}:(u=(c=Tu(t,!0).multiply(Tu(e))).apply({x:s,y:a}),d=c.apply({x:o,y:a}),f=c.apply({x:o,y:l}),h=c.apply({x:s,y:l}),{left:s=Math.min(u.x,d.x,f.x,h.x),top:a=Math.min(u.y,d.y,f.y,h.y),width:Math.max(u.x,d.x,f.x,h.x)-s,height:Math.max(u.y,d.y,f.y,h.y)-a})},qA=function(e,t,n,r,s,o){var l,c,u,a={};if(t)if(1!==s&&t instanceof Array){if(a.end=l=[],u=t.length,om(t[0]))for(c=0;c<u;c++)l[c]=Kz(t[c],s);else for(c=0;c<u;c++)l[c]=t[c]*s;n+=1.1,r-=1.1}else a.end=nc(t)?function(d){var h,p,f=t.call(e,d);if(1!==s)if(om(f)){for(p in h={},f)h[p]=f[p]*s;f=h}else f*=s;return f}:t;return(n||0===n)&&(a.max=n),(r||0===r)&&(a.min=r),o&&(a.velocity=0),a},jue=function i(e){var t;return!(!e||!e.getAttribute||e===rl)&&(!("true"!==(t=e.getAttribute("data-clickable"))&&("false"===t||!Uue.test(e.nodeName+"")&&"true"!==e.getAttribute("contentEditable")))||i(e.parentNode))},sM=function(e,t){for(var r,n=e.length;n--;)(r=e[n]).ondragstart=r.onselectstart=t?null:iM,rn.set(r,{lazy:!0,userSelect:t?"text":"none"})},$ue=function i(e){return"fixed"===cm(e).position||((e=e.parentNode)&&1===e.nodeType?i(e):void 0)},Xue=function(e,t){e=rn.utils.toArray(e)[0],t=t||{};var g,m,_,M,y,v,n=document.createElement("div"),r=n.style,s=e.firstChild,o=0,a=0,l=e.scrollTop,c=e.scrollLeft,u=e.scrollWidth,d=e.scrollHeight,f=0,h=0,p=0;oH&&!1!==t.force3D?(y="translate3d(",v="px,0px)"):am&&(y="translate(",v="px)"),this.scrollTop=function(C,w){if(!arguments.length)return-this.top();this.top(-C,w)},this.scrollLeft=function(C,w){if(!arguments.length)return-this.left();this.left(-C,w)},this.left=function(C,w){if(!arguments.length)return-(e.scrollLeft+a);var S=e.scrollLeft-c,E=a;if((S>2||S<-2)&&!w)return c=e.scrollLeft,rn.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-c),void(t.onKill&&t.onKill());(C=-C)<0?(a=C-.5|0,C=0):C>h?(a=C-h|0,C=h):a=0,(a||E)&&(this._skip||(r[am]=y+-a+"px,"+-o+v),a+f>=0&&(r.paddingRight=a+f+"px")),e.scrollLeft=0|C,c=e.scrollLeft},this.top=function(C,w){if(!arguments.length)return-(e.scrollTop+o);var S=e.scrollTop-l,E=o;if((S>2||S<-2)&&!w)return l=e.scrollTop,rn.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),void(t.onKill&&t.onKill());(C=-C)<0?(o=C-.5|0,C=0):C>p?(o=C-p|0,C=p):o=0,(o||E)&&(this._skip||(r[am]=y+-a+"px,"+-o+v)),e.scrollTop=0|C,l=e.scrollTop},this.maxScrollTop=function(){return p},this.maxScrollLeft=function(){return h},this.disable=function(){for(s=n.firstChild;s;)M=s.nextSibling,e.appendChild(s),s=M;e===n.parentNode&&e.removeChild(n)},this.enable=function(){if((s=e.firstChild)!==n){for(;s;)M=s.nextSibling,n.appendChild(s),s=M;e.appendChild(n),this.calibrate()}},this.calibrate=function(C){var S,E,x,w=e.clientWidth===g;l=e.scrollTop,c=e.scrollLeft,(!w||e.clientHeight!==m||n.offsetHeight!==_||u!==e.scrollWidth||d!==e.scrollHeight||C)&&((o||a)&&(E=this.left(),x=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),S=cm(e),(!w||C)&&(r.display="block",r.width="auto",r.paddingRight="0px",(f=Math.max(0,e.scrollWidth-e.clientWidth))&&(f+=parseFloat(S.paddingLeft)+(YA?parseFloat(S.paddingRight):0))),r.display="inline-block",r.position="relative",r.overflow="visible",r.verticalAlign="top",r.boxSizing="content-box",r.width="100%",r.paddingRight=f+"px",YA&&(r.paddingBottom=S.paddingBottom),u=e.scrollWidth,d=e.scrollHeight,h=e.scrollWidth-(g=e.clientWidth),p=e.scrollHeight-(m=e.clientHeight),_=n.offsetHeight,r.display="block",(E||x)&&(this.left(E),this.top(x)))},this.content=n,this.element=e,this._skip=!1,this.enable()},KA=function(e){if($z()&&document.body){var t=window&&window.navigator;Cn=window,Os=document,Do=Os.documentElement,rl=Os.body,VA=rM("div"),tM=!!window.PointerEvent,(sl=rM("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",sm="grab"===sl.style.cursor?"grab":"move",rm=t&&-1!==t.userAgent.toLowerCase().indexOf("android"),HA="ontouchstart"in Do&&"orientation"in Cn||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),YA=function(){var a,n=rM("div"),r=rM("div"),s=r.style,o=rl;return s.display="inline-block",s.position="relative",n.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",n.appendChild(r),o.appendChild(n),a=r.offsetHeight+18>n.scrollHeight,o.removeChild(n),a}(),im=function(n){for(var r=n.split(","),s=(("onpointerdown"in VA?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in VA?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":n).split(",")),o={},a=4;--a>-1;)o[r[a]]=s[a],o[s[a]]=r[a];try{Do.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Wz=1}}))}catch{}return o}("touchstart,touchmove,touchend,touchcancel"),Di(Os,"touchcancel",iM),Di(Cn,"touchmove",iM),rl&&rl.addEventListener("touchstart",iM),Di(Os,"contextmenu",function(){for(var n in Yh)Yh[n].isPressed&&Yh[n].endDrag()}),rn=zA=Xz()}rn?(Oo=rn.plugins.inertia,jz=rn.core.context||function(){},am=(nm=rn.utils.checkPrefix)(am),jA=nm(jA),tc=rn.utils.toArray,WA=rn.core.getStyleSaver,oH=!!nm("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},que=function(){function i(t){this._listeners={},this.target=t||this}var e=i.prototype;return e.addEventListener=function(n,r){var s=this._listeners[n]||(this._listeners[n]=[]);~s.indexOf(r)||s.push(r)},e.removeEventListener=function(n,r){var s=this._listeners[n],o=s&&s.indexOf(r);o>=0&&s.splice(o,1)},e.dispatchEvent=function(n){var s,r=this;return(this._listeners[n]||[]).forEach(function(o){return!1===o.call(r,{type:n,target:r.target})&&(s=!1)}),s},i}(),tf=function(i){function e(t,n){var r;r=i.call(this)||this,zA||KA(1),t=tc(t)[0],r.styles=WA&&WA(t,"transform,left,top"),Oo||(Oo=rn.plugins.inertia),r.vars=n=Kz(n||{}),r.target=t,r.x=r.y=r.rotation=0,r.dragResistance=parseFloat(n.dragResistance)||0,r.edgeResistance=isNaN(n.edgeResistance)?1:parseFloat(n.edgeResistance)||0,r.lockAxis=n.lockAxis,r.autoScroll=n.autoScroll||0,r.lockedAxis=null,r.allowEventDefault=!!n.allowEventDefault,rn.getProperty(t,"x");var k,L,W,q,N,V,B,ee,R,ae,Ee,He,$,ge,xe,se,Se,Ue,Ge,Je,oe,le,O,we,ve,z,Me,nt,Be,D,T,X,re,s=(n.type||"x,y").toLowerCase(),o=~s.indexOf("x")||~s.indexOf("y"),a=-1!==s.indexOf("rotation"),l=a?"rotation":o?"x":"left",c=o?"y":"top",u=!(!~s.indexOf("x")&&!~s.indexOf("left")&&"scroll"!==s),d=!(!~s.indexOf("y")&&!~s.indexOf("top")&&"scroll"!==s),f=n.minimumMovement||2,h=Gz(r),p=tc(n.trigger||n.handle||t),g={},m=0,_=!1,M=n.autoScrollMarginTop||40,y=n.autoScrollMarginRight||40,v=n.autoScrollMarginBottom||40,C=n.autoScrollMarginLeft||40,w=n.clickableTest||jue,S=0,E=t._gsap||rn.core.getCache(t),x=$ue(t),b=function(U,fe){return parseFloat(E.get(t,U,fe))},P=t.ownerDocument||Os,ue=function(U){return io(U),U.stopImmediatePropagation&&U.stopImmediatePropagation(),!1},ie=function Ce(U){if(h.autoScroll&&h.isDragging&&(_||Se)){var K,_e,ne,Re,me,We,dt,Ze,fe=t,H=15*h.autoScroll;for(_=!1,ol.scrollTop=null!=Cn.pageYOffset?Cn.pageYOffset:null!=P.documentElement.scrollTop?P.documentElement.scrollTop:P.body.scrollTop,ol.scrollLeft=null!=Cn.pageXOffset?Cn.pageXOffset:null!=P.documentElement.scrollLeft?P.documentElement.scrollLeft:P.body.scrollLeft,Re=h.pointerX-ol.scrollLeft,me=h.pointerY-ol.scrollTop;fe&&!_e;)K=(_e=Qh(fe.parentNode))?ol:fe.parentNode,ne=_e?{bottom:Math.max(Do.clientHeight,Cn.innerHeight||0),right:Math.max(Do.clientWidth,Cn.innerWidth||0),left:0,top:0}:K.getBoundingClientRect(),We=dt=0,d&&((Ze=K._gsMaxScrollY-K.scrollTop)<0?dt=Ze:me>ne.bottom-v&&Ze?(_=!0,dt=Math.min(Ze,H*(1-Math.max(0,ne.bottom-me)/v)|0)):me<ne.top+M&&K.scrollTop&&(_=!0,dt=-Math.min(K.scrollTop,H*(1-Math.max(0,me-ne.top)/M)|0)),dt&&(K.scrollTop+=dt)),u&&((Ze=K._gsMaxScrollX-K.scrollLeft)<0?We=Ze:Re>ne.right-y&&Ze?(_=!0,We=Math.min(Ze,H*(1-Math.max(0,ne.right-Re)/y)|0)):Re<ne.left+C&&K.scrollLeft&&(_=!0,We=-Math.min(K.scrollLeft,H*(1-Math.max(0,Re-ne.left)/C)|0)),We&&(K.scrollLeft+=We)),_e&&(We||dt)&&(Cn.scrollTo(K.scrollLeft,K.scrollTop),Ie(h.pointerX+We,h.pointerY+dt)),fe=K}if(Se){var wt=h.x,en=h.y;a?(h.deltaX=wt-parseFloat(E.rotation),h.rotation=wt,E.rotation=wt+"deg",E.renderTransform(1,E)):L?(d&&(h.deltaY=en-L.top(),L.top(en)),u&&(h.deltaX=wt-L.left(),L.left(wt))):o?(d&&(h.deltaY=en-parseFloat(E.y),E.y=en+"px"),u&&(h.deltaX=wt-parseFloat(E.x),E.x=wt+"px"),E.renderTransform(1,E)):(d&&(h.deltaY=en-parseFloat(t.style.top||0),t.style.top=en+"px"),u&&(h.deltaX=wt-parseFloat(t.style.left||0),t.style.left=wt+"px")),ee&&!U&&!nt&&(nt=!0,!1===si(h,"drag","onDrag")&&(u&&(h.x-=h.deltaX),d&&(h.y-=h.deltaY),Ce(!0)),nt=!1)}Se=!1},Pe=function(U,fe){var _e,ne,H=h.x,K=h.y;t._gsap||(E=rn.core.getCache(t)),E.uncache&&rn.getProperty(t,"x"),o?(h.x=parseFloat(E.x),h.y=parseFloat(E.y)):a?h.x=h.rotation=parseFloat(E.rotation):L?(h.y=L.top(),h.x=L.left()):(h.y=parseFloat(t.style.top||(ne=cm(t))&&ne.top)||0,h.x=parseFloat(t.style.left||(ne||{}).left)||0),(Ge||Je||oe)&&!fe&&(h.isDragging||h.isThrowing)&&(oe&&(Kh.x=h.x,Kh.y=h.y,(_e=oe(Kh)).x!==h.x&&(h.x=_e.x,Se=!0),_e.y!==h.y&&(h.y=_e.y,Se=!0)),Ge&&(_e=Ge(h.x))!==h.x&&(h.x=_e,a&&(h.rotation=_e),Se=!0),Je&&((_e=Je(h.y))!==h.y&&(h.y=_e),Se=!0)),Se&&ie(!0),U||(h.deltaX=h.x-H,h.deltaY=h.y-K,si(h,"throwupdate","onThrowUpdate"))},De=function(U,fe,H,K){return null==fe&&(fe=-Au),null==H&&(H=Au),nc(U)?function(_e){var ne=h.isPressed?1-h.edgeResistance:1;return U.call(h,(_e>H?H+(_e-H)*ne:_e<fe?fe+(_e-fe)*ne:_e)*K)*K}:lm(U)?function(_e){for(var We,dt,ne=U.length,Re=0,me=Au;--ne>-1;)(dt=(We=U[ne])-_e)<0&&(dt=-dt),dt<me&&We>=fe&&We<=H&&(Re=ne,me=dt);return U[Re]}:isNaN(U)?function(_e){return _e}:function(){return U*K}},bt=function(){var U,fe,H,K;B=!1,L?(L.calibrate(),h.minX=Ee=-L.maxScrollLeft(),h.minY=$=-L.maxScrollTop(),h.maxX=ae=h.maxY=He=0,B=!0):n.bounds&&(U=sH(n.bounds,t.parentNode),a?(h.minX=Ee=U.left,h.maxX=ae=U.left+U.width,h.minY=$=h.maxY=He=0):Io(n.bounds.maxX)&&Io(n.bounds.maxY)?(fe=sH(t,t.parentNode),h.minX=Ee=Math.round(b(l,"px")+U.left-fe.left),h.minY=$=Math.round(b(c,"px")+U.top-fe.top),h.maxX=ae=Math.round(Ee+(U.width-fe.width)),h.maxY=He=Math.round($+(U.height-fe.height))):(h.minX=Ee=(U=n.bounds).minX,h.minY=$=U.minY,h.maxX=ae=U.maxX,h.maxY=He=U.maxY),Ee>ae&&(h.minX=ae,h.maxX=ae=Ee,Ee=h.minX),$>He&&(h.minY=He,h.maxY=He=$,$=h.minY),a&&(h.minRotation=Ee,h.maxRotation=ae),B=!0),n.liveSnap&&(K=lm(H=!0===n.liveSnap?n.snap||{}:n.liveSnap)||nc(H),a?(Ge=De(K?H:H.rotation,Ee,ae,1),Je=null):H.points?oe=function(U,fe,H,K,_e,ne,Re){return ne=ne&&ne<Au?ne*ne:Au,nc(U)?function(me){var wt,en,Qt,We=h.isPressed?1-h.edgeResistance:1,dt=me.x,Ze=me.y;return me.x=dt=dt>H?H+(dt-H)*We:dt<fe?fe+(dt-fe)*We:dt,me.y=Ze=Ze>_e?_e+(Ze-_e)*We:Ze<K?K+(Ze-K)*We:Ze,(wt=U.call(h,me))!==me&&(me.x=wt.x,me.y=wt.y),1!==Re&&(me.x*=Re,me.y*=Re),ne<Au&&(en=me.x-dt)*en+(Qt=me.y-Ze)*Qt>ne&&(me.x=dt,me.y=Ze),me}:lm(U)?function(me){for(var wt,en,Qt,Gt,We=U.length,dt=0,Ze=Au;--We>-1;)(Gt=(wt=(Qt=U[We]).x-me.x)*wt+(en=Qt.y-me.y)*en)<Ze&&(dt=We,Ze=Gt);return Ze<=ne?U[dt]:me}:function(me){return me}}(K?H:H.points,Ee,ae,$,He,H.radius,L?-1:1):(u&&(Ge=De(K?H:H.x||H.left||H.scrollLeft,Ee,ae,L?-1:1)),d&&(Je=De(K?H:H.y||H.top||H.scrollTop,$,He,L?-1:1))))},Ae=function(){h.isThrowing=!1,si(h,"throwcomplete","onThrowComplete")},Oe=function(){h.isThrowing=!1},at=function(U,fe){var H,K,_e,ne;U&&Oo?(!0===U&&(K=lm(H=n.snap||n.liveSnap||{})||nc(H),U={resistance:(n.throwResistance||n.resistance||1e3)/(a?10:1)},a?U.rotation=qA(h,K?H:H.rotation,ae,Ee,1,fe):(u&&(U[l]=qA(h,K?H:H.points||H.x||H.left,ae,Ee,L?-1:1,fe||"x"===h.lockedAxis)),d&&(U[c]=qA(h,K?H:H.points||H.y||H.top,He,$,L?-1:1,fe||"y"===h.lockedAxis)),(H.points||lm(H)&&om(H[0]))&&(U.linkedProps=l+","+c,U.radius=H.radius))),h.isThrowing=!0,ne=isNaN(n.overshootTolerance)?1===n.edgeResistance?0:1-h.edgeResistance+.2:n.overshootTolerance,U.duration||(U.duration={max:Math.max(n.minDuration||0,"maxDuration"in n?n.maxDuration:2),min:isNaN(n.minDuration)?0===ne||om(U)&&U.resistance>1e3?0:.5:n.minDuration,overshoot:ne}),h.tween=_e=rn.to(L||t,{inertia:U,data:"_draggable",inherit:!1,onComplete:Ae,onInterrupt:Oe,onUpdate:n.fastMode?si:Pe,onUpdateParams:n.fastMode?[h,"onthrowupdate","onThrowUpdate"]:H&&H.radius?[!1,!0]:[]}),n.fastMode||(L&&(L._skip=!0),_e.render(1e9,!0,!0),Pe(!0,!0),h.endX=h.x,h.endY=h.y,a&&(h.endRotation=h.x),_e.play(0),Pe(!0,!0),L&&(L._skip=!1))):B&&h.applyBounds()},lt=function(U){var H,fe=we;we=Tu(t.parentNode,!0),U&&h.isPressed&&!we.equals(fe||new Eu)&&(H=fe.inverse().apply({x:W,y:q}),we.apply(H,H),W=H.x,q=H.y),we.equals(kue)&&(we=null)},$e=function(){var K,U=1-h.edgeResistance,fe=x?Jh(P):0,H=x?Zh(P):0;o&&(E.x=b(l,"px")+"px",E.y=b(c,"px")+"px",E.renderTransform()),lt(!1),ro.x=h.pointerX-fe,ro.y=h.pointerY-H,we&&we.apply(ro,ro),W=ro.x,q=ro.y,Se&&(Ie(h.pointerX,h.pointerY),ie(!0)),X=Tu(t),L?(bt(),V=L.top(),N=L.left()):(St()?(Pe(!0,!0),bt()):h.applyBounds(),a?(K=t.ownerSVGElement?[E.xOrigin-t.getBBox().x,E.yOrigin-t.getBBox().y]:(cm(t)[jA]||"0 0").split(" "),se=h.rotationOrigin=Tu(t).apply({x:parseFloat(K[0])||0,y:parseFloat(K[1])||0}),Pe(!0,!0),N=h.x,V=h.y=Math.atan2(se.y-h.pointerY+H,h.pointerX-se.x-fe)*qz):(V=b(c,"px"),N=b(l,"px"))),B&&U&&(N>ae?N=ae+(N-ae)/U:N<Ee&&(N=Ee-(Ee-N)/U),a||(V>He?V=He+(V-He)/U:V<$&&(V=$-($-V)/U))),h.startX=N=ic(N),h.startY=V=ic(V)},St=function(){return h.tween&&h.tween.isActive()},mt=function(){sl.parentNode&&!St()&&!h.isDragging&&sl.parentNode.removeChild(sl)},Ht=function(U,fe){var H;if(!k||h.isPressed||!U||!("mousedown"!==U.type&&"pointerdown"!==U.type||fe)&&rc()-S<30&&im[h.pointerEvent.type])T&&U&&k&&io(U);else{if(ve=St(),re=!1,h.pointerEvent=U,im[U.type]?(O=~U.type.indexOf("touch")?U.currentTarget||U.target:P,Di(O,"touchend",J),Di(O,"touchmove",F),Di(O,"touchcancel",J),Di(P,"touchstart",tH)):(O=null,Di(P,"mousemove",F)),Me=null,(!tM||!O)&&(Di(P,"mouseup",J),U&&U.target&&Di(U.target,"mouseup",J)),le=w.call(h,U.target)&&!1===n.dragClickables&&!fe)return Di(U.target,"change",J),si(h,"pressInit","onPressInit"),si(h,"press","onPress"),sM(p,!0),void(T=!1);if((T=!(z=!(!O||u===d||!1===h.vars.allowNativeTouchScrolling||h.vars.allowContextMenu&&U&&(U.ctrlKey||U.which>2))&&(u?"y":"x"))&&!h.allowEventDefault)&&(io(U),Di(Cn,"touchforcechange",io)),U.changedTouches?(U=ge=U.changedTouches[0],xe=U.identifier):U.pointerId?xe=U.pointerId:ge=xe=null,nM++,Vue(ie),q=h.pointerY=U.pageY,W=h.pointerX=U.pageX,si(h,"pressInit","onPressInit"),(z||h.autoScroll)&&$A(t.parentNode),t.parentNode&&h.autoScroll&&!L&&!a&&t.parentNode._gsMaxScrollX&&!sl.parentNode&&!t.getBBox&&(sl.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(sl)),$e(),h.tween&&h.tween.kill(),h.isThrowing=!1,rn.killTweensOf(L||t,g,!0),L&&rn.killTweensOf(t,{scrollTo:1},!0),h.tween=h.lockedAxis=null,(n.zIndexBoost||!a&&!L&&!1!==n.zIndexBoost)&&(t.style.zIndex=e.zIndex++),h.isPressed=!0,ee=!(!n.onDrag&&!h._listeners.drag),R=!(!n.onMove&&!h._listeners.move),!1!==n.cursor||n.activeCursor)for(H=p.length;--H>-1;)rn.set(p[H],{cursor:n.activeCursor||n.cursor||("grab"===sm?"grabbing":sm)});si(h,"press","onPress")}},F=function(U){var H,_e,ne,Re,me,fe=U;if(k&&!GA&&h.isPressed&&U){if(h.pointerEvent=U,H=U.changedTouches){if((U=H[0])!==ge&&U.identifier!==xe){for(ne=H.length;--ne>-1&&(U=H[ne]).identifier!==xe&&U.target!==t;);if(ne<0)return}}else if(U.pointerId&&xe&&U.pointerId!==xe)return;O&&z&&!Me&&(ro.x=U.pageX-(x?Jh(P):0),ro.y=U.pageY-(x?Zh(P):0),we&&we.apply(ro,ro),_e=ro.y,((Re=Math.abs(ro.x-W))!==(me=Math.abs(_e-q))&&(Re>f||me>f)||rm&&z===Me)&&(Me=Re>me&&u?"x":"y",z&&Me!==z&&Di(Cn,"touchforcechange",io),!1!==h.vars.lockAxisOnTouchScroll&&u&&d&&(h.lockedAxis="x"===Me?"y":"x",nc(h.vars.onLockAxis)&&h.vars.onLockAxis.call(h,fe)),rm&&z===Me))?J(fe):(h.allowEventDefault||z&&(!Me||z===Me)||!1===fe.cancelable?T&&(T=!1):(io(fe),T=!0),h.autoScroll&&(_=!0),Ie(U.pageX,U.pageY,R))}else T&&U&&k&&io(U)},Ie=function(U,fe,H){var Gt,qt,un,Et,Oi,kn,K=1-h.dragResistance,_e=1-h.edgeResistance,ne=h.pointerX,Re=h.pointerY,me=V,We=h.x,dt=h.y,Ze=h.endX,wt=h.endY,en=h.endRotation,Qt=Se;h.pointerX=U,h.pointerY=fe,x&&(U-=Jh(P),fe-=Zh(P)),a?(Et=Math.atan2(se.y-fe,U-se.x)*qz,(Oi=h.y-Et)>180?(V-=360,h.y=Et):Oi<-180&&(V+=360,h.y=Et),h.x!==N||Math.max(Math.abs(W-U),Math.abs(q-fe))>f?(h.y=Et,un=N+(V-Et)*K):un=N):(we&&(kn=U*we.a+fe*we.c+we.e,fe=U*we.b+fe*we.d+we.f,U=kn),(qt=fe-q)<f&&qt>-f&&(qt=0),(Gt=U-W)<f&&Gt>-f&&(Gt=0),(h.lockAxis||h.lockedAxis)&&(Gt||qt)&&((kn=h.lockedAxis)||(h.lockedAxis=kn=u&&Math.abs(Gt)>Math.abs(qt)?"y":d?"x":null,kn&&nc(h.vars.onLockAxis)&&h.vars.onLockAxis.call(h,h.pointerEvent)),"y"===kn?qt=0:"x"===kn&&(Gt=0)),un=ic(N+Gt*K),Et=ic(V+qt*K)),(Ge||Je||oe)&&(h.x!==un||h.y!==Et&&!a)&&(oe&&(Kh.x=un,Kh.y=Et,kn=oe(Kh),un=ic(kn.x),Et=ic(kn.y)),Ge&&(un=ic(Ge(un))),Je&&(Et=ic(Je(Et)))),B&&(un>ae?un=ae+Math.round((un-ae)*_e):un<Ee&&(un=Ee+Math.round((un-Ee)*_e)),a||(Et>He?Et=Math.round(He+(Et-He)*_e):Et<$&&(Et=Math.round($+(Et-$)*_e)))),(h.x!==un||h.y!==Et&&!a)&&(a?(h.endRotation=h.x=h.endX=un,Se=!0):(d&&(h.y=h.endY=Et,Se=!0),u&&(h.x=h.endX=un,Se=!0)),H&&!1===si(h,"move","onMove")?(h.pointerX=ne,h.pointerY=Re,V=me,h.x=We,h.y=dt,h.endX=Ze,h.endY=wt,h.endRotation=en,Se=Qt):!h.isDragging&&h.isPressed&&(h.isDragging=re=!0,si(h,"dragstart","onDragStart")))},J=function Ce(U,fe){if(k&&h.isPressed&&(!U||null==xe||fe||!(U.pointerId&&U.pointerId!==xe&&U.target!==t||U.changedTouches&&!Hue(U.changedTouches,xe)))){h.isPressed=!1;var Re,me,We,dt,H=U,K=h.isDragging,_e=h.vars.allowContextMenu&&U&&(U.ctrlKey||U.which>2),ne=rn.delayedCall(.001,mt);if(O?(_i(O,"touchend",Ce),_i(O,"touchmove",F),_i(O,"touchcancel",Ce),_i(P,"touchstart",tH)):_i(P,"mousemove",F),_i(Cn,"touchforcechange",io),(!tM||!O)&&(_i(P,"mouseup",Ce),U&&U.target&&_i(U.target,"mouseup",Ce)),Se=!1,K&&(m=Yz=rc(),h.isDragging=!1),eH(ie),le&&!_e)return U&&(_i(U.target,"change",Ce),h.pointerEvent=H),sM(p,!1),si(h,"release","onRelease"),si(h,"click","onClick"),void(le=!1);for(me=p.length;--me>-1;)XA(p[me],"cursor",n.cursor||(!1!==n.cursor?sm:null));if(nM--,U){if((Re=U.changedTouches)&&(U=Re[0])!==ge&&U.identifier!==xe){for(me=Re.length;--me>-1&&(U=Re[me]).identifier!==xe&&U.target!==t;);if(me<0&&!fe)return}h.pointerEvent=H,h.pointerX=U.pageX,h.pointerY=U.pageY}return _e&&H?(io(H),T=!0,si(h,"release","onRelease")):H&&!K?(T=!1,ve&&(n.snap||n.bounds)&&at(n.inertia||n.throwProps),si(h,"release","onRelease"),(!rm||"touchmove"!==H.type)&&-1===H.type.indexOf("cancel")&&(si(h,"click","onClick"),rc()-S<300&&si(h,"doubleclick","onDoubleClick"),dt=H.target||t,S=rc(),!rm&&!H.defaultPrevented&&rn.delayedCall(.05,function(){S!==Be&&h.enabled()&&!h.isPressed&&!H.defaultPrevented&&(dt.click?dt.click():P.createEvent&&((We=P.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,Cn,1,h.pointerEvent.screenX,h.pointerEvent.screenY,h.pointerX,h.pointerY,!1,!1,!1,!1,0,null),dt.dispatchEvent(We)))}))):(at(n.inertia||n.throwProps),h.allowEventDefault||!H||!1===n.dragClickables&&w.call(h,H.target)||!K||z&&(!Me||z!==Me)||!1===H.cancelable?T=!1:(T=!0,io(H)),si(h,"release","onRelease")),St()&&ne.duration(h.tween.duration()),K&&si(h,"dragend","onDragEnd"),!0}T&&U&&k&&io(U)},de=function(U){if(U&&h.isDragging&&!L){var fe=U.target||t.parentNode,H=fe.scrollLeft-fe._gsScrollX,K=fe.scrollTop-fe._gsScrollY;(H||K)&&(we?(W-=H*we.a+K*we.c,q-=K*we.d+H*we.b):(W-=H,q-=K),fe._gsScrollX+=H,fe._gsScrollY+=K,Ie(h.pointerX,h.pointerY))}},ke=function(U){var fe=rc(),H=fe-S<100,K=fe-m<50,_e=H&&Be===S,ne=h.pointerEvent&&h.pointerEvent.defaultPrevented,Re=H&&D===S,me=U.isTrusted||null==U.isTrusted&&H&&_e;if((_e||K&&!1!==h.vars.suppressClickOnDrag)&&U.stopImmediatePropagation&&U.stopImmediatePropagation(),H&&(!h.pointerEvent||!h.pointerEvent.defaultPrevented)&&(!_e||me&&!Re))return me&&_e&&(D=S),void(Be=S);(h.isPressed||K||H)&&(!me||!U.detail||!H||ne)&&io(U),!H&&!K&&!re&&(U&&U.target&&(h.pointerEvent=U),si(h,"click","onClick"))},ze=function(U){return we?{x:U.x*we.a+U.y*we.c+we.e,y:U.x*we.b+U.y*we.d+we.f}:{x:U.x,y:U.y}};return(Ue=e.get(t))&&Ue.kill(),r.startDrag=function(Ce,U){var fe,H,K,_e;Ht(Ce||h.pointerEvent,!0),U&&!h.hitTest(Ce||h.pointerEvent)&&(fe=ef(Ce||h.pointerEvent),H=ef(t),K=ze({x:fe.left+fe.width/2,y:fe.top+fe.height/2}),_e=ze({x:H.left+H.width/2,y:H.top+H.height/2}),W-=K.x-_e.x,q-=K.y-_e.y),h.isDragging||(h.isDragging=re=!0,si(h,"dragstart","onDragStart"))},r.drag=F,r.endDrag=function(Ce){return J(Ce||h.pointerEvent,!0)},r.timeSinceDrag=function(){return h.isDragging?0:(rc()-m)/1e3},r.timeSinceClick=function(){return(rc()-S)/1e3},r.hitTest=function(Ce,U){return e.hitTest(h.target,Ce,U)},r.getDirection=function(Ce,U){var H,K,_e,ne,Re,me,fe="velocity"===Ce&&Oo?Ce:om(Ce)&&!a?"element":"start";return"element"===fe&&(Re=ef(h.target),me=ef(Ce)),H="start"===fe?h.x-N:"velocity"===fe?Oo.getVelocity(t,l):Re.left+Re.width/2-(me.left+me.width/2),a?H<0?"counter-clockwise":"clockwise":(U=U||2,K="start"===fe?h.y-V:"velocity"===fe?Oo.getVelocity(t,c):Re.top+Re.height/2-(me.top+me.height/2),ne=(_e=Math.abs(H/K))<1/U?"":H<0?"left":"right",_e<U&&(""!==ne&&(ne+="-"),ne+=K<0?"up":"down"),ne)},r.applyBounds=function(Ce,U){var fe,H,K,_e,ne,Re;if(Ce&&n.bounds!==Ce)return n.bounds=Ce,h.update(!0,U);if(Pe(!0),bt(),B&&!St()){if((fe=h.x)>ae?fe=ae:fe<Ee&&(fe=Ee),(H=h.y)>He?H=He:H<$&&(H=$),(h.x!==fe||h.y!==H)&&(K=!0,h.x=h.endX=fe,a?h.endRotation=fe:h.y=h.endY=H,Se=!0,ie(!0),h.autoScroll&&!h.isDragging))for($A(t.parentNode),_e=t,ol.scrollTop=null!=Cn.pageYOffset?Cn.pageYOffset:null!=P.documentElement.scrollTop?P.documentElement.scrollTop:P.body.scrollTop,ol.scrollLeft=null!=Cn.pageXOffset?Cn.pageXOffset:null!=P.documentElement.scrollLeft?P.documentElement.scrollLeft:P.body.scrollLeft;_e&&!Re;)ne=(Re=Qh(_e.parentNode))?ol:_e.parentNode,d&&ne.scrollTop>ne._gsMaxScrollY&&(ne.scrollTop=ne._gsMaxScrollY),u&&ne.scrollLeft>ne._gsMaxScrollX&&(ne.scrollLeft=ne._gsMaxScrollX),_e=ne;h.isThrowing&&(K||h.endX>ae||h.endX<Ee||h.endY>He||h.endY<$)&&at(n.inertia||n.throwProps,K)}return h},r.update=function(Ce,U,fe){if(U&&h.isPressed){var H=Tu(t),K=X.apply({x:h.x-N,y:h.y-V}),_e=Tu(t.parentNode,!0);_e.apply({x:H.e-K.x,y:H.f-K.y},K),h.x-=K.x-_e.e,h.y-=K.y-_e.f,ie(!0),$e()}var ne=h.x,Re=h.y;return lt(!U),Ce?h.applyBounds():(Se&&fe&&ie(!0),Pe(!0)),U&&(Ie(h.pointerX,h.pointerY),Se&&ie(!0)),h.isPressed&&!U&&(u&&Math.abs(ne-h.x)>.01||d&&Math.abs(Re-h.y)>.01&&!a)&&$e(),h.autoScroll&&($A(t.parentNode,h.isDragging),_=h.isDragging,ie(!0),iH(t,de),nH(t,de)),h},r.enable=function(Ce){var fe,H,K,U={lazy:!0};if(!1!==n.cursor&&(U.cursor=n.cursor||sm),rn.utils.checkPrefix("touchCallout")&&(U.touchCallout="none"),"soft"!==Ce){for(Zz(p,u===d?"none":n.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||n.allowEventDefault?"manipulation":u?"pan-y":"pan-x"),H=p.length;--H>-1;)K=p[H],tM||Di(K,"mousedown",Ht),Di(K,"touchstart",Ht),Di(K,"click",ke,!0),rn.set(K,U),K.getBBox&&K.ownerSVGElement&&u!==d&&rn.set(K.ownerSVGElement,{touchAction:n.allowNativeTouchScrolling||n.allowEventDefault?"manipulation":u?"pan-y":"pan-x"}),n.allowContextMenu||Di(K,"contextmenu",ue);sM(p,!1)}return nH(t,de),k=!0,Oo&&"soft"!==Ce&&Oo.track(L||t,o?"x,y":a?"rotation":"top,left"),t._gsDragID=fe=t._gsDragID||"d"+Fue++,Yh[fe]=h,L&&(L.enable(),L.element._gsDragID=fe),(n.bounds||a)&&$e(),n.bounds&&h.applyBounds(),h},r.disable=function(Ce){for(var H,U=h.isDragging,fe=p.length;--fe>-1;)XA(p[fe],"cursor",null);if("soft"!==Ce){for(Zz(p,null),fe=p.length;--fe>-1;)XA(H=p[fe],"touchCallout",null),_i(H,"mousedown",Ht),_i(H,"touchstart",Ht),_i(H,"click",ke,!0),_i(H,"contextmenu",ue);sM(p,!0),O&&(_i(O,"touchcancel",J),_i(O,"touchend",J),_i(O,"touchmove",F)),_i(P,"mouseup",J),_i(P,"mousemove",F)}return iH(t,de),k=!1,Oo&&"soft"!==Ce&&(Oo.untrack(L||t,o?"x,y":a?"rotation":"top,left"),h.tween&&h.tween.kill()),L&&L.disable(),eH(ie),h.isDragging=h.isPressed=le=!1,U&&si(h,"dragend","onDragEnd"),h},r.enabled=function(Ce,U){return arguments.length?Ce?h.enable(U):h.disable(U):k},r.kill=function(){return h.isThrowing=!1,h.tween&&h.tween.kill(),h.disable(),rn.set(p,{clearProps:"userSelect"}),delete Yh[t._gsDragID],h},r.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(L=r.scrollProxy=new Xue(t,Bue({onKill:function(){h.isPressed&&J(null)}},n)),t.style.overflowY=d&&!HA?"auto":"hidden",t.style.overflowX=u&&!HA?"auto":"hidden",t=L.content),a?g.rotation=1:(u&&(g[l]=1),d&&(g[c]=1)),E.force3D=!("force3D"in n)||n.force3D,jz(Gz(r)),r.enable(),r}return function Lue(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}(e,i),e.register=function(n){rn=n,KA()},e.create=function(n,r){return zA||KA(!0),tc(n).map(function(s){return new e(s,r)})},e.get=function(n){return Yh[(tc(n)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(rc()-Yz)/1e3},e.hitTest=function(n,r,s){if(n===r)return!1;var g,m,_,o=ef(n),a=ef(r),l=o.top,c=o.left,u=o.right,d=o.bottom,f=o.width,h=o.height,p=a.left>u||a.right<c||a.top>d||a.bottom<l;return p||!s?!p:(_=-1!==(s+"").indexOf("%"),s=parseFloat(s)||0,(g={left:Math.max(c,a.left),top:Math.max(l,a.top)}).width=Math.min(u,a.right)-g.left,g.height=Math.min(d,a.bottom)-g.top,!(g.width<0||g.height<0)&&(_?(m=g.width*g.height)>=f*h*(s*=.01)||m>=a.width*a.height*s:g.width>s&&g.height>s))},e}(que);(function(e,t){for(var n in t)n in e||(e[n]=t[n])})(tf.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),tf.zIndex=1e3,tf.version="3.12.7",Xz()&&rn.registerPlugin(tf);let Yue=(()=>{const e=class{constructor(n,r){this.el=n,this.ngZone=r,this.itemSelector=".project-card",this.snapAlign="center",this.gap=20,this.touchThreshold=50,this.indexChange=new Rn,this.observer=null,this.itemWidth=0,this.containerWidth=0,this.numItems=0,this.itemsPerView=0,this.animation=null,this.touchStartX=0,this.touchMoveX=0,this.isSwiping=!1,this.handleKeyDown=this.onKeyDown.bind(this),this.handleTouchStart=this.onTouchStart.bind(this),this.handleTouchMove=this.onTouchMove.bind(this),this.handleTouchEnd=this.onTouchEnd.bind(this),Ut.registerPlugin?Ut.registerPlugin(tf):console.error("GSAP registerPlugin not available")}ngOnInit(){this.observer=new ResizeObserver(()=>{this.updateCarouselMetrics(),this.updateDraggableBounds()}),this.observer.observe(this.el.nativeElement),this.el.nativeElement.addEventListener("navigate-to-index",n=>{const r=n.detail.index;"number"==typeof r&&setTimeout(()=>{this.snapToItem(r)},this.draggable?0:600)})}ngAfterViewInit(){setTimeout(()=>{this.initCarousel()},500)}ngOnDestroy(){this.draggable&&this.draggable.kill(),this.observer&&this.observer.disconnect(),this.animation&&this.animation.kill(),document.removeEventListener("keydown",this.handleKeyDown);const n=this.el.nativeElement.querySelector(".projects-grid");n&&(n.removeEventListener("touchstart",this.handleTouchStart),n.removeEventListener("touchmove",this.handleTouchMove),n.removeEventListener("touchend",this.handleTouchEnd))}initCarousel(){this.ngZone.runOutsideAngular(()=>{const n=this.el.nativeElement,r=n.querySelectorAll(this.itemSelector);if(this.numItems=r.length,0===this.numItems)return;Ut.set(n,{overflowX:"hidden",userSelect:"none",touchAction:"pan-y"});const s=n.querySelector(".projects-grid");s&&(Ut.set(s,{display:"flex",flexWrap:"nowrap",willChange:"transform",position:"relative",width:"auto"}),Ut.set(r,{position:"relative",float:"left",marginRight:`${this.gap}px`}),this.updateCarouselMetrics(),this.draggable=tf.create(s,{type:"x",inertia:!0,dragClickables:!0,edgeResistance:.75,bounds:this.getCarouselBounds(),minimumMovement:2,overshootTolerance:.5,throwResistance:.75,onDragStart:()=>{this.animation&&this.animation.kill(),document.body.style.cursor="grabbing"},onDragEnd:()=>{document.body.style.cursor=""},onRelease:()=>{this.snapToClosest()},onClick:function(){}})[0],this.addKeyboardNavigation(),this.enhanceTouchSupport(s))})}updateCarouselMetrics(){const n=this.el.nativeElement,r=n.querySelector(".projects-grid"),s=n.querySelectorAll(this.itemSelector);if(!r||0===s.length)return;const o=s[0],l=(window.getComputedStyle(o),window.getComputedStyle(r)),c=parseFloat(l.gap)||this.gap;this.itemWidth=o.offsetWidth+c,this.containerWidth=n.offsetWidth,this.itemsPerView=Math.max(1,Math.floor(this.containerWidth/this.itemWidth)),this.numItems=s.length}getCarouselBounds(){const r=this.el.nativeElement.querySelector(".projects-grid");if(!r)return{minX:0,maxX:0};const s=r.scrollWidth;return s<=this.containerWidth?{minX:0,maxX:0}:{minX:-1*(s-this.containerWidth+.1*this.containerWidth),maxX:0}}updateDraggableBounds(){if(!this.draggable)return;const n=this.getCarouselBounds();this.draggable.applyBounds(n);const r=this.draggable.x;r<n.minX?Ut.to(this.draggable.target,{x:n.minX,duration:.3,ease:"power2.out"}):r>n.maxX&&Ut.to(this.draggable.target,{x:n.maxX,duration:.3,ease:"power2.out"})}snapToClosest(){if(!this.draggable)return;const n=this.draggable.getVelocity();if(Math.abs(n)>10){const o=n<0?-1:1,a=this.getCurrentItemIndex();let l=o<0?Math.ceil(a):Math.floor(a);return l=Math.max(0,Math.min(this.numItems-this.itemsPerView,l)),void this.snapToItem(l)}const r=this.getCurrentItemIndex(),s=Math.round(r);this.snapToItem(s)}emitCurrentIndex(){if(!this.draggable)return;const n=this.getCurrentItemIndex(),r=Math.round(n);this.ngZone.run(()=>{this.indexChange.emit(r)})}addKeyboardNavigation(){document.addEventListener("keydown",this.handleKeyDown)}onKeyDown(n){if(!this.isElementInViewport()||!this.draggable)return;const r=Math.round(this.getCurrentItemIndex());"ArrowLeft"===n.key||"ArrowUp"===n.key?r>0&&this.snapToItem(r-1):("ArrowRight"===n.key||"ArrowDown"===n.key)&&r<this.numItems-1&&this.snapToItem(r+1)}isElementInViewport(){const r=this.el.nativeElement.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)}enhanceTouchSupport(n){n&&(n.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),n.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),n.addEventListener("touchend",this.handleTouchEnd))}onTouchStart(n){n.touches[0]&&(this.touchStartX=n.touches[0].clientX,this.isSwiping=!1,this.animation&&this.animation.kill())}onTouchMove(n){n.touches[0]&&(this.touchMoveX=n.touches[0].clientX,Math.abs(this.touchStartX-this.touchMoveX)>this.touchThreshold&&(this.isSwiping=!0),this.isSwiping&&n.preventDefault())}onTouchEnd(n){if(this.isSwiping){const r=this.touchStartX-this.touchMoveX,s=Math.round(this.getCurrentItemIndex());this.snapToItem(r>this.touchThreshold?s<this.numItems-1?s+1:s:r<-this.touchThreshold?s>0?s-1:0:s)}this.isSwiping=!1}getCurrentItemIndex(){return this.draggable?-this.draggable.x/this.itemWidth:0}snapToItem(n){if(!this.draggable)return;const r=Math.max(0,this.numItems-this.itemsPerView),o=-Math.max(0,Math.min(r,n))*this.itemWidth;this.animation=Ut.to(this.draggable.target,{x:o,duration:.5,ease:"power2.out",onComplete:()=>{this.draggable.update(),this.emitCurrentIndex()}})}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(Ni),pe(Mn))},e.\u0275dir=pt({type:e,selectors:[["","appCarousel",""]],inputs:{itemSelector:"itemSelector",snapAlign:"snapAlign",gap:"gap",touchThreshold:"touchThreshold"},outputs:{indexChange:"indexChange"}}),i})(),Kue=(()=>{const e=class{constructor(){this.currentYear=0}ngOnInit(){this.currentYear=(new Date).getFullYear()}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ls({type:e,selectors:[["app-footer"]],decls:86,vars:1,consts:[[1,"footer"],[1,"container"],[1,"collab-invitation"],[1,"marquee"],[1,"marquee-content"],[1,"footer-content"],[1,"footer-left"],[1,"footer-logo"],["href","#"],[1,"quick-links"],[1,"link-grid"],["href","#home"],["href","#about"],["href","#skills"],["href","#projects"],["href","#contact"],[1,"footer-right"],[1,"social-links"],["href","https://github.com/yourusername","target","_blank","aria-label","GitHub"],[1,"fab","fa-github"],["href","https://linkedin.com/in/yourusername","target","_blank","aria-label","LinkedIn"],[1,"fab","fa-linkedin"],["href","https://twitter.com/yourusername","target","_blank","aria-label","Twitter"],[1,"fab","fa-twitter"],["href","https://medium.com/@yourusername","target","_blank","aria-label","Medium"],[1,"fab","fa-medium"],["href","https://dribbble.com/yourusername","target","_blank","aria-label","Dribbble"],[1,"fab","fa-dribbble"],[1,"cta-buttons"],["href","assets/resume.pdf","download","",1,"btn","btn-resume"],["href","#contact",1,"btn","btn-talk"],[1,"footer-bottom"],[1,"fas","fa-heart"],[1,"scroll-to-top",3,"click"],[1,"fas","fa-chevron-up"]],template:function(r,s){1&r&&(Y(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h2"),Te(4,"Interested in Collaboration?"),te(),Y(5,"div",3)(6,"div",4)(7,"span"),Te(8,"Frontend Development"),te(),Y(9,"span"),Te(10,"Angular"),te(),Y(11,"span"),Te(12,"React"),te(),Y(13,"span"),Te(14,"TypeScript"),te(),Y(15,"span"),Te(16,"UI/UX Design"),te(),Y(17,"span"),Te(18,"JavaScript"),te(),Y(19,"span"),Te(20,"Responsive Design"),te(),Y(21,"span"),Te(22,"CSS/SCSS"),te(),Y(23,"span"),Te(24,"HTML5"),te(),Y(25,"span"),Te(26,"Frontend Development"),te(),Y(27,"span"),Te(28,"Angular"),te(),Y(29,"span"),Te(30,"React"),te(),Y(31,"span"),Te(32,"TypeScript"),te(),Y(33,"span"),Te(34,"UI/UX Design"),te(),Y(35,"span"),Te(36,"JavaScript"),te()()()(),Y(37,"div",5)(38,"div",6)(39,"div",7)(40,"a",8),Te(41,"PM"),te(),Y(42,"p"),Te(43,"Building the web, one line at a time."),te()(),Y(44,"div",9)(45,"h3"),Te(46,"Quick Links"),te(),Y(47,"div",10)(48,"a",11),Te(49,"Home"),te(),Y(50,"a",12),Te(51,"About"),te(),Y(52,"a",13),Te(53,"Skills"),te(),Y(54,"a",14),Te(55,"Projects"),te(),Y(56,"a",15),Te(57,"Contact"),te()()()(),Y(58,"div",16)(59,"h3"),Te(60,"Connect with me"),te(),Y(61,"div",17)(62,"a",18),ct(63,"i",19),te(),Y(64,"a",20),ct(65,"i",21),te(),Y(66,"a",22),ct(67,"i",23),te(),Y(68,"a",24),ct(69,"i",25),te(),Y(70,"a",26),ct(71,"i",27),te()(),Y(72,"div",28)(73,"a",29),Te(74,"Resume"),te(),Y(75,"a",30),Te(76,"Let's Talk"),te()()()(),Y(77,"div",31)(78,"p"),Te(79),te(),Y(80,"p"),Te(81,"Built with "),ct(82,"i",32),Te(83," and Angular"),te(),Y(84,"button",33),Ot("click",function(){return s.scrollToTop()}),ct(85,"i",34),te()()()()),2&r&&(Le(79),vc("\xa9 ",s.currentYear," Prathamesh Manjare. All rights reserved."))},styles:['@charset "UTF-8";.footer[_ngcontent-%COMP%]{background-color:var(--bg-secondary);color:var(--text-color);padding:5rem 0 2rem;position:relative;overflow:hidden}.footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1.5rem}@media (min-width: 992px){.footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{margin-left:auto;margin-right:0;width:70%;padding-right:2rem}}.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]{margin-bottom:4rem}.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:1.5rem;font-family:var(--heading-font);background:linear-gradient(90deg,var(--primary-color) 0%,var(--primary-light) 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;color:transparent}@media (max-width: 768px){.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}}.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   .marquee[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;position:relative}.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   .marquee[_ngcontent-%COMP%]   .marquee-content[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_marquee 30s linear infinite}.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   .marquee[_ngcontent-%COMP%]   .marquee-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:1rem;padding:.5rem 1rem;position:relative;color:var(--text-color)}.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   .marquee[_ngcontent-%COMP%]   .marquee-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"\\2022";margin:0 .5rem;color:var(--primary-color)}.footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   .marquee[_ngcontent-%COMP%]   .marquee-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:after{display:none}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;gap:3rem;margin-bottom:3rem}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%], .footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{flex:1;min-width:280px}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]{margin-bottom:2rem}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--primary-color);text-decoration:none;transition:color .3s ease}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-light)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .footer-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.5rem;color:var(--text-muted)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .quick-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;color:var(--primary-color);font-family:var(--heading-font)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .quick-links[_ngcontent-%COMP%]   .link-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .quick-links[_ngcontent-%COMP%]   .link-grid[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-color);text-decoration:none;transition:all .3s ease;position:relative}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .quick-links[_ngcontent-%COMP%]   .link-grid[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color);transform:translate(5px)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;color:var(--primary-color);font-family:var(--heading-font)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:2rem}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:45px;height:45px;border-radius:50%;background-color:#ffffff0d;color:var(--text-color);font-size:1.25rem;transition:all .3s ease}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:var(--bg-color);transform:translateY(-3px);box-shadow:var(--highlight-shadow)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .cta-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .cta-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:2rem;font-weight:600;text-decoration:none;transition:all .3s ease}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .cta-buttons[_ngcontent-%COMP%]   .btn.btn-resume[_ngcontent-%COMP%]{background-color:transparent;border:2px solid var(--primary-color);color:var(--primary-color)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .cta-buttons[_ngcontent-%COMP%]   .btn.btn-resume[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:var(--bg-color);transform:translateY(-3px);box-shadow:var(--highlight-shadow)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .cta-buttons[_ngcontent-%COMP%]   .btn.btn-talk[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--bg-color)}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .cta-buttons[_ngcontent-%COMP%]   .btn.btn-talk[_ngcontent-%COMP%]:hover{background-color:var(--primary-light);transform:translateY(-3px);box-shadow:var(--highlight-shadow)}.footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]{padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.05);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;position:relative}.footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.875rem}.footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:#ff4757}.footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   .scroll-to-top[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:40px;height:40px;border-radius:50%;background-color:var(--primary-color);color:var(--bg-color);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   .scroll-to-top[_ngcontent-%COMP%]:hover{background-color:var(--primary-light);transform:translateY(-3px);box-shadow:var(--highlight-shadow)}@keyframes _ngcontent-%COMP%_marquee{0%{transform:translateZ(0)}to{transform:translate3d(-50%,0,0)}}.light-theme[_nghost-%COMP%]   .footer[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{background-color:var(--bg-secondary)}.light-theme[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .collab-invitation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--primary-color) 0%,var(--primary-dark) 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;color:transparent}.light-theme[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]{border-top-color:#0000000d}.light-theme[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#0000000d}.light-theme[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .light-theme   [_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}@media (max-width: 768px){.footer[_ngcontent-%COMP%]{padding:3rem 0 2rem}.footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{gap:2.5rem}.footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   .scroll-to-top[_ngcontent-%COMP%]{position:relative;margin-top:1.5rem}}']}),i})(),Zue=(()=>{const e=class{transform(n,r=100,s=!1,o="..."){return n?n.length<=r?n:(s&&(r=n.substring(0,r).lastIndexOf(" ")),`${n.substring(0,r)}${o}`):""}};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=mr({name:"truncate",type:e,pure:!0}),i})();function Jue(i,e){1&i&&ct(0,"div",80)}function Que(i,e){1&i&&(Y(0,"div",81),ct(1,"div",82),Y(2,"p"),Te(3,"Loading skills..."),te()())}function ede(i,e){if(1&i){const t=hd();Y(0,"div",84)(1,"app-skills-grid",85),Ot("categoryChange",function(r){return uc(t),dc(Mi(2).updateActiveSkillCategory(r))}),te()()}if(2&i){const t=Mi(2);Le(1),tt("skills",t.skills)}}function tde(i,e){if(1&i){const t=hd();Y(0,"div",84)(1,"app-skills-sphere",85),Ot("categoryChange",function(r){return uc(t),dc(Mi(2).updateActiveSkillCategory(r))}),te()()}if(2&i){const t=Mi(2);Le(1),tt("skills",t.skills)}}function nde(i,e){if(1&i&&(Y(0,"div"),Bn(1,ede,2,1,"div",83),Bn(2,tde,2,1,"div",83),te()),2&i){const t=Mi();Le(1),tt("ngIf","grid"===t.activeVizMode),Le(1),tt("ngIf","3d"===t.activeVizMode)}}function ide(i,e){1&i&&(Y(0,"a",94),ct(1,"i",59),te()),2&i&&tt("href",Mi().$implicit.githubUrl,va)}function rde(i,e){1&i&&(Y(0,"a",94),ct(1,"i",95),te()),2&i&&tt("href",Mi().$implicit.liveUrl,va)}function sde(i,e){if(1&i&&(Y(0,"span"),Te(1),te()),2&i){const t=e.$implicit;Le(1),Li(t)}}function ode(i,e){if(1&i&&(Y(0,"div",86)(1,"div",87),ct(2,"img",88),Y(3,"div",89),Bn(4,ide,2,1,"a",90),Bn(5,rde,2,1,"a",90),te()(),Y(6,"div",91)(7,"h3"),Te(8),te(),Y(9,"p"),Te(10),function oR(i,e){const t=on();let n;const r=i+In;t.firstCreatePass?(n=function i$(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks??(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=cc(n.type)),o=Ns(pe);try{const a=Lm(!1),l=s();return Lm(a),function j8(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,be(),r,l),l}finally{Ns(o)}}(11,"truncate"),te(),Y(12,"div",92),Bn(13,sde,2,1,"span",93),te()()()),2&i){const t=e.$implicit;Gr("data-aos-delay",200+100*e.index),Le(2),tt("src",t.imageUrl,va)("alt",t.title),Le(2),tt("ngIf",t.githubUrl),Le(1),tt("ngIf",t.liveUrl),Le(3),Li(t.title),Le(2),Li(aR(11,8,t.description,120,!0)),Le(3),tt("ngForOf",t.technologies)}}const ade=function(i){return{active:i}};function lde(i,e){if(1&i){const t=hd();Y(0,"div",96),Ot("click",function(){const s=uc(t).$implicit;return dc(Mi().navigateToProject(s))}),te()}if(2&i){const t=e.$implicit,n=Mi();tt("ngClass",xi(1,ade,n.activeProjectIndex===t))}}function cde(i,e){1&i&&(Y(0,"div",97),ct(1,"i",98),Te(2," Name is required "),te())}function ude(i,e){1&i&&(Y(0,"div",97),ct(1,"i",98),Te(2," Valid email is required "),te())}function dde(i,e){1&i&&(Y(0,"div",97),ct(1,"i",98),Te(2," Message is required "),te())}const hde=function(i,e){return{success:i,error:e}};function fde(i,e){if(1&i&&(Y(0,"div",99)(1,"p",100),ct(2,"i",78),Te(3),te()()),2&i){const t=Mi();Le(1),tt("ngClass",eR(3,hde,"success"===t.formStatus,"error"===t.formStatus)),Le(1),tt("ngClass","success"===t.formStatus?"fa-check-circle":"fa-exclamation-circle"),Le(1),vc(" ",t.formStatusMessage," ")}}const pde=function(){return[0,1,2,3]},ZA=function(i){return{"error-input":i}};let nf=(()=>{const e=class{constructor(n,r,s){this.portfolioService=n,this.formBuilder=r,this.route=s,this.currentYear=(new Date).getFullYear(),this.skillCategories=[],this.activeSkillCategory="All",this.activeVizMode="3d",this.skills=[],this.skillsLoaded=!1,this.filteredProjects=[],this.navigableDotIndexes=[],this.activeFilter="*",this.activeProjectIndex=0,this.submitting=!1,this.formStatus=null,this.formStatusMessage="",this.subscription=new Ur,this.isToggleTransitioning=!1,this.contactForm=this.formBuilder.group({name:["",ay.required],email:["",[ay.required,ay.email]],subject:[""],message:["",ay.required]})}ngOnInit(){this.loadSkillsData(),this.subscription.add(this.portfolioService.getSkillCategories().subscribe(n=>{n.includes("All")||n.unshift("All"),this.skillCategories=n})),this.filteredProjects=this.portfolioService.getAllProjects(),this.updateNavigableDotIndexes(),this.route.fragment.subscribe(n=>{n&&setTimeout(()=>{this.scrollTo(n)},100)}),this.subscription.add(this.route.data.subscribe(n=>{n&&n.section&&this.portfolioService.updateActiveSection(n.section)}))}ngOnDestroy(){this.subscription.unsubscribe()}getSkillsByCategory(n){return"All"===n?this.skills:this.skills.filter(r=>r.category===n)}updateActiveSkillCategory(n){this.activeSkillCategory=n}loadSkillsData(){console.log("Pre-loading skills data for initial render"),this.subscription.add(this.portfolioService.getSkills().subscribe(n=>{console.log(`Loaded ${n.length} skills successfully`),this.skills=n,this.skillsLoaded=!0},n=>{console.error("Error loading skills:",n),setTimeout(()=>this.loadSkillsData(),1e3)}))}toggleVizMode(n){this.activeVizMode===n||this.isToggleTransitioning||(this.isToggleTransitioning=!0,setTimeout(()=>{this.activeVizMode=n,setTimeout(()=>{this.isToggleTransitioning=!1},500)},50))}setVizMode(n){this.toggleVizMode(n)}updateActiveProjectIndex(n){n>=0&&n<this.filteredProjects.length&&(this.activeProjectIndex=n)}navigateToProject(n){if(n>=0&&n<this.filteredProjects.length){this.activeProjectIndex=n;const r=document.querySelector(".carousel-container");if(r){const s=new CustomEvent("navigate-to-index",{detail:{index:n}});r.dispatchEvent(s)}}}updateNavigableDotIndexes(){this.navigableDotIndexes=Array.from({length:this.filteredProjects.length-1},(n,r)=>r)}scrollTo(n){const r=document.getElementById(n);r&&(r.scrollIntoView({behavior:"smooth"}),this.portfolioService.updateActiveSection(n))}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"}),this.portfolioService.updateActiveSection("home")}onSubmit(){if(this.contactForm.valid){this.submitting=!0,this.formStatus=null;const{name:n,email:r,subject:s,message:o}=this.contactForm.value;eee_send(qw_emailjs_serviceId,qw_emailjs_templateId,{from_name:n,from_email:r,subject:s||"(No Subject)",message:o},qw_emailjs_publicKey).then(()=>{this.submitting=!1,this.formStatus="success",this.formStatusMessage="Your message has been sent successfully!",this.contactForm.reset(),setTimeout(()=>this.formStatus=null,5e3)}).catch(l=>{console.error("EmailJS Error:",l),this.submitting=!1,this.formStatus="error",this.formStatusMessage="There was an error sending your message. Please try again later."})}}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(Yw),pe(JK),pe(Oc))},e.\u0275cmp=Ls({type:e,selectors:[["app-home"]],decls:133,vars:42,consts:[["id","home",1,"hero-section"],[1,"container"],["data-aos","fade-right",1,"content"],[1,"role"],[1,"tagline"],[1,"highlight"],[1,"contact-button",3,"click"],[1,"avatar-container"],["id","skills","appScrollAnimation","","animationClass","animate",1,"skills-section"],["data-aos","fade-up",1,"section-title"],["data-aos","fade-up",1,"viz-toggle-container"],[1,"viz-toggle-wrapper"],[1,"viz-toggle"],[1,"toggle-option","grid-option",3,"click"],[1,"toggle-icon-container"],[1,"toggle-icon","grid-icon"],["class","grid-square",4,"ngFor","ngForOf"],[1,"toggle-option","sphere-option",3,"click"],[1,"toggle-icon","sphere-icon"],[1,"sphere-circle"],[1,"sphere-ellipse-1"],[1,"sphere-ellipse-2"],[1,"toggle-slider"],[1,"particle-container"],[1,"particle","p1"],[1,"particle","p2"],[1,"particle","p3"],[1,"particle","p4"],[1,"particle","p5"],[1,"view-mode-indicator",3,"title"],[1,"mode-icon",3,"ngClass"],[1,"mode-text"],["class","skills-loading-container","data-aos","fade-up",4,"ngIf"],[4,"ngIf"],["id","projects","appScrollAnimation","","animationClass","animate",1,"projects-section"],["appCarousel","",1,"carousel-container",3,"indexChange"],[1,"projects-grid"],["class","project-card","data-aos","fade-up",4,"ngFor","ngForOf"],[1,"carousel-controls"],[1,"nav-btn","prev-btn",3,"disabled","click"],[1,"fas","fa-chevron-left"],[1,"carousel-indicator"],["class","indicator-dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nav-btn","next-btn",3,"disabled","click"],[1,"fas","fa-chevron-right"],["data-aos","fade-up",1,"view-more"],["href","https://github.com/yourusername","target","_blank",1,"btn-outline"],[1,"fas","fa-arrow-right"],["id","contact","appScrollAnimation","","animationClass","animate",1,"contact-section"],[1,"contact-content"],["data-aos","fade-right","data-aos-delay","200",1,"contact-info"],[1,"info-item"],[1,"fas","fa-envelope"],["href","mailto:prathamesh@example.com","aria-label","Email"],[1,"fas","fa-phone"],["href","tel:+1234567890","aria-label","Phone"],[1,"fas","fa-map-marker-alt"],[1,"social-links","contact-social"],["href","https://github.com/yourusername","target","_blank","aria-label","GitHub"],[1,"fab","fa-github"],["href","https://linkedin.com/in/yourusername","target","_blank","aria-label","LinkedIn"],[1,"fab","fa-linkedin"],["href","https://twitter.com/yourusername","target","_blank","aria-label","Twitter"],[1,"fab","fa-twitter"],["data-aos","fade-left","data-aos-delay","300",1,"contact-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],[1,"required"],["type","text","id","name","formControlName","name","placeholder","Your Name","aria-required","true",3,"ngClass"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Your Email","aria-required","true",3,"ngClass"],["for","subject"],["type","text","id","subject","formControlName","subject","placeholder","Subject"],["for","message"],["id","message","formControlName","message","rows","5","placeholder","Your Message","aria-required","true",3,"ngClass"],["type","submit",3,"disabled"],[1,"fas",3,"ngClass"],["class","form-status",4,"ngIf"],[1,"grid-square"],["data-aos","fade-up",1,"skills-loading-container"],[1,"skills-loading-spinner"],["data-aos","fade-up","data-aos-delay","200",4,"ngIf"],["data-aos","fade-up","data-aos-delay","200"],[3,"skills","categoryChange"],["data-aos","fade-up",1,"project-card"],[1,"project-image"],[3,"src","alt"],[1,"project-links"],["target","_blank",3,"href",4,"ngIf"],[1,"project-info"],[1,"tech-stack"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[1,"fas","fa-external-link-alt"],[1,"indicator-dot",3,"ngClass","click"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"form-status"],[3,"ngClass"]],template:function(r,s){if(1&r&&(ct(0,"app-navbar"),Y(1,"section",0)(2,"div",1)(3,"div",2)(4,"h1"),Te(5,"Prathamesh Manjare"),te(),Y(6,"p",3),Te(7,"Software Developer"),te(),Y(8,"p",4),Te(9,"I build "),Y(10,"span",5),Te(11,"innovative"),te(),Te(12," digital experiences"),te(),Y(13,"button",6),Ot("click",function(){return s.scrollTo("contact")}),Te(14,"Get in touch"),te()(),Y(15,"div",7),ct(16,"app-three-scene"),te()()(),ct(17,"app-about"),Y(18,"section",8)(19,"div",1)(20,"h2",9),Te(21,"My Skills"),te(),Y(22,"div",10)(23,"div",11)(24,"div",12)(25,"div",13),Ot("click",function(){return s.toggleVizMode("grid")}),Y(26,"div",14)(27,"div",15),Bn(28,Jue,1,0,"div",16),te()(),Y(29,"span"),Te(30,"Grid View"),te()(),Y(31,"div",17),Ot("click",function(){return s.toggleVizMode("3d")}),Y(32,"div",14)(33,"div",18),ct(34,"div",19)(35,"div",20)(36,"div",21),te()(),Y(37,"span"),Te(38,"3D View"),te()(),Y(39,"div",22)(40,"div",23),ct(41,"div",24)(42,"div",25)(43,"div",26)(44,"div",27)(45,"div",28),te()()()(),Y(46,"div",29),ct(47,"i",30),Y(48,"span",31),Te(49),te()()(),Bn(50,Que,4,0,"div",32),Bn(51,nde,3,2,"div",33),te()(),Y(52,"section",34)(53,"div",1)(54,"h2",9),Te(55,"Featured Projects"),te(),Y(56,"div",35),Ot("indexChange",function(a){return s.updateActiveProjectIndex(a)}),Y(57,"div",36),Bn(58,ode,14,12,"div",37),te(),Y(59,"div",38)(60,"button",39),Ot("click",function(){return s.navigateToProject(s.activeProjectIndex-1)}),ct(61,"i",40),te(),Y(62,"div",41),Bn(63,lde,1,3,"div",42),te(),Y(64,"button",43),Ot("click",function(){return s.navigateToProject(s.activeProjectIndex+1)}),ct(65,"i",44),te()()(),Y(66,"div",45)(67,"a",46),Te(68," View More on GitHub "),ct(69,"i",47),te()()()(),Y(70,"section",48)(71,"div",1)(72,"h2",9),Te(73,"Get In Touch"),te(),Y(74,"div",49)(75,"div",50)(76,"h3"),Te(77,"Contact Information"),te(),Y(78,"p"),Te(79,"Feel free to reach out to me for collaborations, opportunities, or just to say hi!"),te(),Y(80,"div",51),ct(81,"i",52),Y(82,"a",53),Te(83,"prathamesh@example.com"),te()(),Y(84,"div",51),ct(85,"i",54),Y(86,"a",55),Te(87,"+123 456 7890"),te()(),Y(88,"div",51),ct(89,"i",56),Y(90,"span"),Te(91,"Mumbai, India"),te()(),Y(92,"div",57)(93,"a",58),ct(94,"i",59),te(),Y(95,"a",60),ct(96,"i",61),te(),Y(97,"a",62),ct(98,"i",63),te()()(),Y(99,"div",64)(100,"h3"),Te(101,"Send a Message"),te(),Y(102,"form",65),Ot("ngSubmit",function(){return s.onSubmit()}),Y(103,"div",66)(104,"label",67),Te(105,"Name "),Y(106,"span",68),Te(107,"*"),te()(),ct(108,"input",69),Bn(109,cde,3,0,"div",70),te(),Y(110,"div",66)(111,"label",71),Te(112,"Email "),Y(113,"span",68),Te(114,"*"),te()(),ct(115,"input",72),Bn(116,ude,3,0,"div",70),te(),Y(117,"div",66)(118,"label",73),Te(119,"Subject"),te(),ct(120,"input",74),te(),Y(121,"div",66)(122,"label",75),Te(123,"Message "),Y(124,"span",68),Te(125,"*"),te()(),ct(126,"textarea",76),Bn(127,dde,3,0,"div",70),te(),Y(128,"button",77),ct(129,"i",78),Te(130),te(),Bn(131,fde,4,6,"div",79),te()()()()(),ct(132,"app-footer")),2&r){let o,a,l,c,u,d;Le(24),ds("is-3d","3d"===s.activeVizMode)("transitioning",s.isToggleTransitioning),Le(1),ds("active","grid"===s.activeVizMode),Le(3),tt("ngForOf",function QI(i,e,t){const n=yr()+i,r=be();return r[n]===Pt?Ho(r,n,t?e.call(t):e()):function Vf(i,e){return i[e]}(r,n)}(35,pde)),Le(3),ds("active","3d"===s.activeVizMode),Le(9),ds("grid-particles","grid"===s.activeVizMode)("sphere-particles","3d"===s.activeVizMode),Le(6),ds("is-3d","3d"===s.activeVizMode),c_("title","Currently viewing skills in ","grid"===s.activeVizMode?"Grid":"3D Sphere"," mode"),Le(1),tt("ngClass","grid"===s.activeVizMode?"fa-th":"fa-cube"),Le(2),Li("grid"===s.activeVizMode?"Grid":"3D"),Le(1),tt("ngIf",!s.skillsLoaded),Le(1),tt("ngIf",s.skillsLoaded),Le(7),tt("ngForOf",s.filteredProjects),Le(2),tt("disabled",0===s.activeProjectIndex),Le(3),tt("ngForOf",s.navigableDotIndexes),Le(1),tt("disabled",s.activeProjectIndex===s.filteredProjects.length-1),Le(38),tt("formGroup",s.contactForm),Le(6),tt("ngClass",xi(36,ZA,(null==(o=s.contactForm.get("name"))?null:o.invalid)&&(null==(o=s.contactForm.get("name"))?null:o.touched))),Le(1),tt("ngIf",(null==(a=s.contactForm.get("name"))?null:a.invalid)&&(null==(a=s.contactForm.get("name"))?null:a.touched)),Le(6),tt("ngClass",xi(38,ZA,(null==(l=s.contactForm.get("email"))?null:l.invalid)&&(null==(l=s.contactForm.get("email"))?null:l.touched))),Le(1),tt("ngIf",(null==(c=s.contactForm.get("email"))?null:c.invalid)&&(null==(c=s.contactForm.get("email"))?null:c.touched)),Le(10),tt("ngClass",xi(40,ZA,(null==(u=s.contactForm.get("message"))?null:u.invalid)&&(null==(u=s.contactForm.get("message"))?null:u.touched))),Le(1),tt("ngIf",(null==(d=s.contactForm.get("message"))?null:d.invalid)&&(null==(d=s.contactForm.get("message"))?null:d.touched)),Le(1),tt("disabled",s.contactForm.invalid||s.submitting),Le(1),tt("ngClass",s.submitting?"fa-spinner fa-spin":"fa-paper-plane"),Le(1),vc(" ",s.submitting?"Sending...":"Send Message"," "),Le(1),tt("ngIf",s.formStatus)}},dependencies:[iC,rp,sp,Uk,oy,Ck,wk,yy,ow,Kae,Qae,nle,Ble,Eue,Tue,Yue,Kue,Zue],styles:['section[_ngcontent-%COMP%]{padding:5rem 0;position:relative;overflow:hidden}@media (min-width: 992px){section[_ngcontent-%COMP%]:not(.hero-section)   .container[_ngcontent-%COMP%]{margin-left:auto;margin-right:0;width:70%;padding-right:2rem}}.skills-loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;color:var(--text-color)}.skills-loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;font-size:1rem;opacity:.8}.skills-loading-container[_ngcontent-%COMP%]   .skills-loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(255,255,255,.1);border-radius:50%;border-top-color:var(--primary-color);animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.container[_ngcontent-%COMP%]{width:90%;max-width:1200px;margin:0 auto;position:relative;z-index:1}.section-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;text-align:center;margin-bottom:3rem;position:relative;color:var(--text-color)}.section-title[_ngcontent-%COMP%]:after{content:"";display:block;width:60px;height:4px;background:var(--primary-color);margin:1rem auto 0}.hero-section[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;padding-top:0;padding-bottom:0;position:relative;background-color:var(--bg-color)}.hero-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem}@media (max-width: 768px){.hero-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:center}}.hero-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100vh;z-index:0}@media (max-width: 768px){.hero-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}}.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;justify-content:center}.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;margin-bottom:1rem;background:linear-gradient(45deg,var(--primary-color),var(--secondary-color));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;color:transparent}@media (max-width: 768px){.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}}.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.8;margin-bottom:1rem}.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .tagline[_ngcontent-%COMP%]{font-size:2rem;line-height:1.4;margin-bottom:2rem}.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .tagline[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:var(--primary-color)}@media (max-width: 768px){.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .tagline[_ngcontent-%COMP%]{font-size:1.5rem}}.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .contact-button[_ngcontent-%COMP%]{background:linear-gradient(45deg,var(--primary-color),var(--secondary-color));border:none;padding:1rem 2rem;border-radius:2rem;color:#fff;font-size:1rem;cursor:pointer;transition:transform .3s,box-shadow .3s;width:-moz-fit-content;width:fit-content}.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .contact-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px #0000001a}@media (max-width: 768px){.hero-section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .contact-button[_ngcontent-%COMP%]{margin:0 auto}}.about-section[_ngcontent-%COMP%]{background-color:var(--bg-color);position:relative}.about-section[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at top right,rgba(108,99,255,.1),transparent 50%)}@media (min-width: 992px){.about-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-left:0}}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 2fr;gap:3rem;align-items:center;position:relative;z-index:5}@media (max-width: 768px){.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1.5rem;color:var(--primary-color)}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem;line-height:1.6}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .key-points[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;margin:2rem 0}@media (max-width: 768px){.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .key-points[_ngcontent-%COMP%]{grid-template-columns:1fr}}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .key-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);padding:1.5rem;border-radius:10px;text-align:center;transition:transform .3s}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .key-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .key-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:var(--primary-color);margin-bottom:1rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .key-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.5rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .key-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:0}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]{display:inline-block;background:transparent;border:2px solid var(--primary-color);color:var(--primary-color);padding:.8rem 1.5rem;border-radius:2rem;font-size:1rem;text-decoration:none;transition:all .3s}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]   .resume-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]{position:relative}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:20px;box-shadow:0 10px 30px #0003}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(255,255,255,.05);border-radius:50%;margin:0 .5rem;color:var(--text-color);font-size:1.2rem;transition:all .3s}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff;transform:translateY(-3px)}.skills-section[_ngcontent-%COMP%]{background-color:var(--bg-color)}.skills-section[_ngcontent-%COMP%]   .viz-toggle-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem}.skills-section[_ngcontent-%COMP%]   .viz-toggle-wrapper[_ngcontent-%COMP%]{perspective:1000px;transform-style:preserve-3d;margin-bottom:12px}.skills-section[_ngcontent-%COMP%]   .view-mode-indicator[_ngcontent-%COMP%]{font-size:13px;color:#ffffffb3;margin-top:10px;transition:all .5s cubic-bezier(.68,-.55,.27,1.55);display:inline-flex;align-items:center;padding:5px 10px;border-radius:30px;background:rgba(255,255,255,.05);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transform:translateY(0);position:absolute;top:-5px;right:10px;gap:5px;box-shadow:0 2px 8px #0000001a}.skills-section[_ngcontent-%COMP%]   .view-mode-indicator[_ngcontent-%COMP%]   .mode-icon[_ngcontent-%COMP%]{font-size:11px;margin-right:2px}.skills-section[_ngcontent-%COMP%]   .view-mode-indicator[_ngcontent-%COMP%]   .mode-text[_ngcontent-%COMP%]{font-weight:500}.skills-section[_ngcontent-%COMP%]   .view-mode-indicator.is-3d[_ngcontent-%COMP%]{color:rgba(var(--primary-color-rgb),.9);background:rgba(var(--primary-color-rgb),.1);transform:translateY(0)}.skills-section[_ngcontent-%COMP%]   .view-mode-indicator[_ngcontent-%COMP%]:hover{background:rgba(var(--primary-color-rgb),.15);transform:translateY(-2px)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]{position:relative;background:rgba(255,255,255,.05);border-radius:50px;padding:5px;display:flex;width:320px;height:60px;transition:all .5s cubic-bezier(.68,-.55,.27,1.55);box-shadow:0 5px 15px #0003,inset 0 1px 2px #ffffff1a;overflow:hidden}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]{background:rgba(0,0,0,.05);box-shadow:0 5px 15px #0000001a,inset 0 1px 2px #0000000d}.skills-section[_ngcontent-%COMP%]   .viz-toggle.transitioning[_ngcontent-%COMP%]   .grid-option[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%], .skills-section[_ngcontent-%COMP%]   .viz-toggle.transitioning[_ngcontent-%COMP%]   .sphere-option[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_wobble .6s cubic-bezier(.36,.07,.19,.97)}.skills-section[_ngcontent-%COMP%]   .viz-toggle.transitioning[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]{opacity:1}.skills-section[_ngcontent-%COMP%]   .viz-toggle.transitioning[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{opacity:1;transform:translate(0) scale(1)}.skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]{background:rgba(255,255,255,.05)}.skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{transform:translate(160px);background:#333333;box-shadow:0 5px 15px #0000004d}.skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .grid-option[_ngcontent-%COMP%]{color:#fff9}.skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .sphere-option[_ngcontent-%COMP%]{color:#fff}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]{background:rgba(0,0,0,.05)}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb),.7);box-shadow:0 5px 15px #00000026}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .grid-option[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .grid-option[_ngcontent-%COMP%]{color:#00000080}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .sphere-option[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]   .sphere-option[_ngcontent-%COMP%]{color:#fff}.skills-section[_ngcontent-%COMP%]   .viz-toggle.is-3d[_ngcontent-%COMP%]:hover   .sphere-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate3D 3s infinite linear}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center;width:50%;height:100%;padding:10px;cursor:pointer;transition:all .3s ease;color:#fff9}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-option.active[_ngcontent-%COMP%]{color:#fff}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]{color:#00000080}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-option.active[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-option.active[_ngcontent-%COMP%]{color:var(--primary-dark);font-weight:600}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-top:4px;transition:all .3s ease}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-icon-container[_ngcontent-%COMP%]{height:24px;width:24px;display:flex;align-items:center;justify-content:center}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;display:flex;align-items:center;justify-content:center}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .grid-icon[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:2px;width:20px;height:20px;transition:all .5s cubic-bezier(.68,-.55,.27,1.55)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .grid-icon[_ngcontent-%COMP%]   .grid-square[_ngcontent-%COMP%]{width:100%;height:100%;background:currentColor;border-radius:2px;transition:all .5s ease;transform-origin:center}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .sphere-icon[_ngcontent-%COMP%]{width:20px;height:20px;position:relative;transition:all .5s cubic-bezier(.68,-.55,.27,1.55)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .sphere-icon[_ngcontent-%COMP%]   .sphere-circle[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background:currentColor;transition:all .5s ease}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .sphere-icon[_ngcontent-%COMP%]   .sphere-ellipse-1[_ngcontent-%COMP%], .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .sphere-icon[_ngcontent-%COMP%]   .sphere-ellipse-2[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;height:40%;border:1px solid currentColor;border-radius:50%;transform:translate(-50%,-50%) rotateX(70deg);transition:all .5s ease;opacity:.6}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .sphere-icon[_ngcontent-%COMP%]   .sphere-ellipse-2[_ngcontent-%COMP%]{transform:translate(-50%,-50%) rotateY(70deg)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{position:absolute;z-index:1;top:5px;left:5px;width:calc(50% - 5px);height:calc(100% - 10px);background:#333333;border-radius:30px;transition:all .5s cubic-bezier(.68,-.55,.27,1.55);box-shadow:0 5px 15px #0000004d;overflow:hidden}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb),.7);box-shadow:0 5px 15px #00000026}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity .3s ease}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container.grid-particles[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb),.8)}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container.grid-particles[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container.grid-particles[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb),.9)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container.sphere-particles[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb),.8)}.light-theme[_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container.sphere-particles[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container.sphere-particles[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb),.9)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{position:absolute;width:5px;height:5px;border-radius:50%;opacity:0;transform:translate(20px,20px) scale(0);transition:all .8s cubic-bezier(.175,.885,.32,1.275)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p1[_ngcontent-%COMP%]{top:20%;left:30%;width:6px;height:6px;transition-delay:.1s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p2[_ngcontent-%COMP%]{top:65%;left:15%;width:4px;height:4px;transition-delay:.2s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p3[_ngcontent-%COMP%]{top:40%;left:70%;width:7px;height:7px;transition-delay:.15s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p4[_ngcontent-%COMP%]{top:75%;left:60%;width:3px;height:3px;transition-delay:.25s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p5[_ngcontent-%COMP%]{top:25%;left:85%;width:5px;height:5px;transition-delay:.3s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000004d,inset 0 1px 3px #fff3}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]{box-shadow:0 8px 25px rgba(var(--primary-color-rgb),.2)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]{opacity:1}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle[_ngcontent-%COMP%]{opacity:.8;animation:_ngcontent-%COMP%_floatParticle 3s infinite alternate}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p2[_ngcontent-%COMP%]{animation-delay:.5s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p3[_ngcontent-%COMP%]{animation-delay:1s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p4[_ngcontent-%COMP%]{animation-delay:1.5s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]   .particle-container[_ngcontent-%COMP%]   .particle.p5[_ngcontent-%COMP%]{animation-delay:2s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover.is-3d   .sphere-circle[_ngcontent-%COMP%]{box-shadow:0 0 15px rgba(var(--primary-color-rgb),.5)}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover.is-3d   .sphere-ellipse-1[_ngcontent-%COMP%], .skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover.is-3d   .sphere-ellipse-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotateEllipse 2s infinite linear}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover.is-3d   .sphere-ellipse-2[_ngcontent-%COMP%]{animation-direction:reverse}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover:not(.is-3d)   .grid-square[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite alternate}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover:not(.is-3d)   .grid-square[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover:not(.is-3d)   .grid-square[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}.skills-section[_ngcontent-%COMP%]   .viz-toggle[_ngcontent-%COMP%]:hover:not(.is-3d)   .grid-square[_ngcontent-%COMP%]:nth-child(4){animation-delay:.6s}@keyframes _ngcontent-%COMP%_rotateEllipse{0%{transform:translate(-50%,-50%) rotateX(70deg) rotate(0)}to{transform:translate(-50%,-50%) rotateX(70deg) rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}to{transform:scale(.8)}}@keyframes _ngcontent-%COMP%_wobble{0%,to{transform:translate(0)}25%{transform:translate(-5px) rotate(-5deg)}75%{transform:translate(5px) rotate(5deg)}}@keyframes _ngcontent-%COMP%_rotate3D{0%{transform:rotate3d(1,1,1,0)}to{transform:rotate3d(1,1,1,360deg)}}@keyframes _ngcontent-%COMP%_floatParticle{0%{transform:translate(0)}to{transform:translate(5px,-5px)}}.skills-section[_ngcontent-%COMP%]   .category-descriptions[_ngcontent-%COMP%]{margin-top:2rem;padding:1.5rem;background:rgba(255,255,255,.03);border-radius:15px;box-shadow:0 10px 20px #0000001a;transition:all .3s ease}.skills-section[_ngcontent-%COMP%]   .category-descriptions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;color:var(--primary-color);position:relative;padding-bottom:.5rem}.skills-section[_ngcontent-%COMP%]   .category-descriptions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:3px;background:var(--primary-color)}.skills-section[_ngcontent-%COMP%]   .category-descriptions[_ngcontent-%COMP%]   .category-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;opacity:.9}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{background:rgba(255,255,255,.03);padding:2rem;border-radius:15px;transition:transform .3s,box-shadow .3s}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #00000026}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1.5rem;color:var(--primary-color);position:relative;padding-bottom:.5rem}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:3px;background:var(--primary-color)}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--primary-color);margin-right:.5rem}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{height:8px;background:rgba(255,255,255,.1);border-radius:4px;overflow:hidden}.skills-section[_ngcontent-%COMP%]   .skills-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .skills-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(45deg,var(--primary-color),var(--secondary-color));border-radius:4px;transition:width 1s ease-in-out}.projects-section[_ngcontent-%COMP%]{background-color:var(--bg-color)}.projects-section[_ngcontent-%COMP%]   .projects-filter[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2rem;flex-wrap:wrap}.projects-section[_ngcontent-%COMP%]   .projects-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-color);padding:.5rem 1rem;margin:0 .5rem 1rem;cursor:pointer;position:relative;font-size:1rem;transition:color .3s}.projects-section[_ngcontent-%COMP%]   .projects-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:50%;transform:translate(-50%);width:0;height:2px;background:var(--primary-color);transition:width .3s}.projects-section[_ngcontent-%COMP%]   .projects-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .projects-section[_ngcontent-%COMP%]   .projects-filter[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--primary-color)}.projects-section[_ngcontent-%COMP%]   .projects-filter[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]:after, .projects-section[_ngcontent-%COMP%]   .projects-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{width:80%}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;padding-bottom:3rem;touch-action:pan-y}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:2rem;padding:1rem 0;cursor:grab;scrollbar-width:none}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]:active{cursor:grabbing}@media (max-width: 768px){.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]{gap:1rem}}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.03);border-radius:15px;overflow:hidden;transition:transform .3s,box-shadow .3s;flex:0 0 auto;width:calc(33.333% - 1.333rem)}@media (max-width: 1024px){.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]{width:calc(50% - 1rem)}}@media (max-width: 768px){.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]{width:85%}}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 15px 30px #0003}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]{position:relative;height:200px;overflow:hidden}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]   .project-links[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .3s}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]   .project-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--primary-color);border-radius:50%;margin:0 .5rem;color:#fff;font-size:1.2rem;transition:transform .3s}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]   .project-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-image[_ngcontent-%COMP%]:hover   .project-links[_ngcontent-%COMP%]{opacity:1}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{padding:1.5rem}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:.5rem;color:var(--text-color)}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8;margin-bottom:1rem}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .tech-stack[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.projects-section[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]   .project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .tech-stack[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);padding:.3rem .8rem;border-radius:20px;font-size:.8rem;margin-right:.5rem;margin-bottom:.5rem}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]{position:relative;margin-top:1.5rem;width:100%;display:flex;justify-content:center;align-items:center;z-index:2;pointer-events:none}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]:before, .projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50px;bottom:-20px;width:15%;z-index:0;pointer-events:none;opacity:0;transition:opacity .3s ease}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]:before{left:0;background:linear-gradient(to right,rgba(var(--primary-color-rgb),.1),transparent)}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]:after{right:0;background:linear-gradient(to left,rgba(var(--primary-color-rgb),.1),transparent)}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]:hover:before, .projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]:hover:after{opacity:1}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:none;background:rgba(255,255,255,.08);color:var(--text-color);font-size:.8rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;pointer-events:auto;margin:0 1rem;position:relative;z-index:2;box-shadow:0 2px 10px #0000001a}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-10px;border-radius:50%;z-index:-1}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:var(--primary-color);color:#fff;transform:scale(1.15);box-shadow:0 5px 15px rgba(var(--primary-color-rgb),.3)}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}@media (max-width: 768px){.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{width:36px;height:36px;margin:0 .5rem}}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;position:relative;z-index:2}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-indicator[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.2);transition:all .3s ease;pointer-events:auto;cursor:pointer;position:relative}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-indicator[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-8px;border-radius:50%}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-indicator[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]:hover{background:rgba(var(--primary-color-rgb),.6)}.projects-section[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-indicator[_ngcontent-%COMP%]   .indicator-dot.active[_ngcontent-%COMP%]{background:var(--primary-color);transform:scale(1.3);box-shadow:0 0 8px rgba(var(--primary-color-rgb),.5)}.projects-section[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.projects-section[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.75rem 1.5rem;border:2px solid var(--primary-color);border-radius:30px;color:var(--primary-color);font-weight:500;transition:all .3s}.projects-section[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem;transition:transform .3s}.projects-section[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff}.projects-section[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(3px)}.contact-section[_ngcontent-%COMP%]{background-color:var(--bg-color);position:relative}.contact-section[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at bottom left,rgba(var(--primary-color-rgb),.08),transparent 60%);z-index:0}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:3rem;position:relative;z-index:1}@media (max-width: 768px){.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:1.5rem;color:var(--primary-color);font-weight:600;position:relative}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";display:block;width:40px;height:3px;background:var(--primary-color);margin-top:.5rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;margin-bottom:2rem;color:var(--text-color);opacity:.9}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1.5rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--primary-color);margin-right:1rem;width:30px;text-align:center}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.1rem;text-decoration:none;transition:color .3s;opacity:.9}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color);opacity:1}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .contact-social[_ngcontent-%COMP%]{display:flex;margin-top:2rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .contact-social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(255,255,255,.1);border-radius:50%;margin-right:1rem;color:var(--text-color);font-size:1.2rem;transition:all .3s}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .contact-social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff;transform:translateY(-3px)}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]{background:rgba(255,255,255,.07);padding:2rem;border-radius:15px;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(255,255,255,.1)}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:1.5rem;color:var(--primary-color);font-weight:600;position:relative}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";display:block;width:40px;height:3px;background:var(--primary-color);margin-top:.5rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:1rem;color:var(--text-color);font-weight:500;opacity:.95}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ff6b6b;margin-left:4px}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.15);border-radius:8px;color:var(--text-color);font-size:1rem;transition:all .3s}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);background:rgba(255,255,255,.15);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.2)}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.error-input[_ngcontent-%COMP%], .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.error-input[_ngcontent-%COMP%]{border-color:#ff6b6b;background:rgba(255,107,107,.08)}.light-theme[_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.2);background:rgba(255,255,255,.8)}.light-theme[_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .light-theme   [_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .light-theme[_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .light-theme   [_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#0006}.light-theme[_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .light-theme   [_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .light-theme[_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .light-theme   [_nghost-%COMP%]   .contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);background:rgba(255,255,255,.9);box-shadow:0 0 0 2px rgba(var(--primary-color-rgb),.15)}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.85rem;margin-top:.5rem;font-weight:500;display:flex;align-items:center}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(45deg,var(--primary-color),var(--secondary-color));border:none;padding:1rem;border-radius:8px;color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:transform .3s,box-shadow .3s;display:flex;align-items:center;justify-content:center}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 20px #00000026}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-status[_ngcontent-%COMP%]{margin-top:1rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;font-size:.95rem;font-weight:500;display:flex;align-items:center;justify-content:center}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;font-size:1.1rem}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-status[_ngcontent-%COMP%]   p.success[_ngcontent-%COMP%]{background:rgba(39,174,96,.25);color:#2ecc71;border:1px solid rgba(46,204,113,.3);box-shadow:0 4px 12px #2ecc7126}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-status[_ngcontent-%COMP%]   p.error[_ngcontent-%COMP%]{background:rgba(231,76,60,.25);color:#ff6b6b;border:1px solid rgba(255,107,107,.3);box-shadow:0 4px 12px #ff6b6b26}.animate[_ngcontent-%COMP%]{opacity:0;transform:translateY(30px);transition:opacity .6s ease,transform .6s ease}.animate.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}']}),i})();const gde=[{path:"",component:nf},{path:"about",component:nf,data:{section:"about"}},{path:"skills",component:nf,data:{section:"skills"}},{path:"projects",component:nf,data:{section:"projects"}},{path:"experience",component:nf,data:{section:"experience"}},{path:"contact",component:nf,data:{section:"contact"}}];let mde=(()=>{const e=class{};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=gr({type:e}),e.\u0275inj=Ji({imports:[Xw.forRoot(gde,{scrollPositionRestoration:"enabled",anchorScrolling:"enabled"}),Xw]}),i})(),_de=(()=>{const e=class{constructor(n,r,s){this.el=n,this.renderer=r,this.ngZone=s,this.cursorX=0,this.cursorY=0,this.cursorRadius=15,this.particles=[],this.maxParticles=20,this.animationFrameId=0,this.isMouseDown=!1,this.isHoveringLink=!1,this.hoverElement=null,this.hoverElementRect=null,this.magnetStrength=.3,this.magnetX=0,this.magnetY=0,this.pulseValue=0,this.pulseDirection=.05,this.styles={cursorColor:"rgba(255, 255, 255, 0.8)",cursorBorderColor:"rgba(255, 255, 255, 0.6)",cursorHoverColor:"rgba(255, 255, 255, 0.9)",cursorHoverBorderColor:"rgba(100, 255, 218, 0.8)",particleColors:["#ff7675","#74b9ff","#55efc4","#a29bfe"],hoverParticleColors:["#00b894","#00cec9","#0984e3","#6c5ce7"]},this.clickableSelectors=["a","button",'[role="button"]','input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="checkbox"]','input[type="radio"]',"select",'[tabindex]:not([tabindex="-1"])',".clickable","[ng-click]"]}ngOnInit(){this.setupCanvas(),this.ngZone.runOutsideAngular(()=>this.animate()),this.disableDefaultCursor()}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.restoreDefaultCursor(),this.removeCanvas()}setupCanvas(){this.canvas=this.renderer.createElement("canvas"),this.renderer.setStyle(this.canvas,"position","fixed"),this.renderer.setStyle(this.canvas,"top","0"),this.renderer.setStyle(this.canvas,"left","0"),this.renderer.setStyle(this.canvas,"width","100vw"),this.renderer.setStyle(this.canvas,"height","100vh"),this.renderer.setStyle(this.canvas,"pointer-events","none"),this.renderer.setStyle(this.canvas,"z-index","99999"),this.renderer.appendChild(document.body,this.canvas),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas.bind(this))}resizeCanvas(){const n=window.devicePixelRatio||1,r=this.canvas.getBoundingClientRect();this.canvas.width=r.width*n,this.canvas.height=r.height*n,this.ctx.scale(n,n)}removeCanvas(){this.canvas&&this.canvas.parentNode&&this.renderer.removeChild(document.body,this.canvas)}disableDefaultCursor(){this.renderer.setStyle(document.body,"cursor","none")}restoreDefaultCursor(){this.renderer.removeStyle(document.body,"cursor")}onMouseMove(n){if(this.cursorX=n.clientX,this.cursorY=n.clientY,this.checkHoverState(n),Math.random()>.7&&this.createParticle(),this.isHoveringLink&&this.hoverElementRect){const a=this.hoverElementRect.top+this.hoverElementRect.height/2-this.cursorY;this.magnetX=this.cursorX+(this.hoverElementRect.left+this.hoverElementRect.width/2-this.cursorX)*this.magnetStrength,this.magnetY=this.cursorY+a*this.magnetStrength}else this.magnetX=this.cursorX,this.magnetY=this.cursorY}onMouseDown(n){this.isMouseDown=!0;for(let r=0;r<10;r++)this.isHoveringLink?this.createHoverParticle(!0):this.createParticle(!0)}onMouseUp(n){this.isMouseDown=!1}createParticle(n=!1){if(this.particles.length>=this.maxParticles&&!n)return;const r=this.styles.particleColors[Math.floor(Math.random()*this.styles.particleColors.length)],s={x:this.cursorX,y:this.cursorY,size:n?8*Math.random()+2:5*Math.random()+1,speedX:n?5*(Math.random()-.5):2*(Math.random()-.5),speedY:n?5*(Math.random()-.5):2*(Math.random()-.5),life:0,maxLife:60*Math.random()+20,color:r,alpha:1,scale:1};this.particles.push(s)}createHoverParticle(n=!1){if(this.particles.length>=this.maxParticles&&!n)return;const r=this.styles.hoverParticleColors[Math.floor(Math.random()*this.styles.hoverParticleColors.length)],s=Math.random()*Math.PI*2,o=n?4*Math.random()+2:2*Math.random()+.5;let a=this.cursorX,l=this.cursorY;if(this.hoverElementRect&&!n){const u=this.hoverElementRect,d=5;switch(Math.floor(4*Math.random())){case 0:a=u.left+Math.random()*u.width,l=u.top-d;break;case 1:a=u.right+d,l=u.top+Math.random()*u.height;break;case 2:a=u.left+Math.random()*u.width,l=u.bottom+d;break;case 3:a=u.left-d,l=u.top+Math.random()*u.height}}const c={x:a,y:l,size:n?10*Math.random()+3:6*Math.random()+2,speedX:Math.cos(s)*o,speedY:Math.sin(s)*o,life:0,maxLife:40*Math.random()+30,color:r,alpha:1,scale:1};this.particles.push(c)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.updatePulseAnimation(),this.updateParticles(),this.drawCursor()}updatePulseAnimation(){this.pulseValue+=this.pulseDirection,this.pulseValue>=1?(this.pulseValue=1,this.pulseDirection=-this.pulseDirection):this.pulseValue<=0&&(this.pulseValue=0,this.pulseDirection=-this.pulseDirection)}checkHoverState(n){const r=document.elementFromPoint(n.clientX,n.clientY);if(!r)return;const s=this.findClickableParent(r),o=this.isHoveringLink;if(this.isHoveringLink=!!s,this.hoverElement=s,this.hoverElementRect=s?s.getBoundingClientRect():null,!o&&this.isHoveringLink)for(let a=0;a<5;a++)this.createHoverParticle()}findClickableParent(n){let s=0,o=n;for(;o&&s<5;){if(this.clickableSelectors.some(a=>o?.matches(a)))return o;o=o.parentElement,s++}return null}updateParticles(){for(let n=this.particles.length-1;n>=0;n--){const r=this.particles[n];r.x+=r.speedX,r.y+=r.speedY,r.speedY+=.02,r.speedX*=.99,r.speedY*=.99,r.life++;const s=r.life/r.maxLife,o=void 0!==r.alpha?r.alpha*(1-s):1-s,a=void 0!==r.scale?r.scale*(1-.5*s):1;let l;if(this.ctx.beginPath(),this.ctx.arc(r.x,r.y,r.size*a,0,2*Math.PI),r.color.startsWith("#")){const u=(d=>{const f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return f?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16)}:null})(r.color);l=u?`rgba(${u.r}, ${u.g}, ${u.b}, ${o})`:r.color}else l=r.color.startsWith("rgb(")?r.color.replace("rgb","rgba").replace(")",`, ${o})`):r.color.startsWith("rgba(")?r.color.replace(/[\d\.]+\)$/g,`${o})`):r.color;this.ctx.fillStyle=l,this.ctx.fill(),this.isHoveringLink&&r.color.includes("00b894")&&(this.ctx.shadowColor=r.color,this.ctx.shadowBlur=10,this.ctx.fill(),this.ctx.shadowBlur=0),r.life>=r.maxLife&&this.particles.splice(n,1)}}drawCursor(){const n=this.magnetX,r=this.magnetY;if(this.isHoveringLink){const s=this.cursorRadius*(1.2+.2*this.pulseValue);this.ctx.beginPath(),this.ctx.arc(n,r,1.3*s,0,2*Math.PI),this.ctx.strokeStyle=this.styles.cursorHoverBorderColor.replace(")",`, ${.3+.2*this.pulseValue})`).replace("rgba","rgba"),this.ctx.lineWidth=1.5,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(n,r,s,0,2*Math.PI),this.ctx.strokeStyle=this.styles.cursorHoverBorderColor,this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(n,r,this.cursorRadius/2.5,0,2*Math.PI),this.ctx.fillStyle=this.styles.cursorHoverColor,this.ctx.fill()}else this.ctx.beginPath(),this.ctx.arc(n,r,this.cursorRadius,0,2*Math.PI),this.ctx.strokeStyle=this.styles.cursorBorderColor,this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(n,r,this.cursorRadius/3,0,2*Math.PI),this.ctx.fillStyle=this.styles.cursorColor,this.ctx.fill();if(this.isMouseDown){const s=this.isHoveringLink?this.styles.cursorHoverBorderColor.replace(")",", 0.3)").replace("rgba","rgba"):"rgba(255, 255, 255, 0.3)";this.ctx.beginPath(),this.ctx.arc(n,r,1.5*this.cursorRadius,0,2*Math.PI),this.ctx.strokeStyle=s,this.ctx.lineWidth=1,this.ctx.stroke()}}};let i=e;return e.\u0275fac=function(r){return new(r||e)(pe(Ni),pe(cs),pe(Mn))},e.\u0275dir=pt({type:e,selectors:[["","cursorEffects",""]],hostBindings:function(r,s){1&r&&Ot("mousemove",function(a){return s.onMouseMove(a)},0,Jm)("mousedown",function(a){return s.onMouseDown(a)},!1,Jm)("mouseup",function(a){return s.onMouseUp(a)},!1,Jm)}}),i})(),yde=(()=>{const e=class{constructor(){this.title="pm-portfolio"}};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ls({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[["cursorEffects",""]],template:function(r,s){1&r&&(Y(0,"div",0),ct(1,"router-outlet"),te())},dependencies:[Rw,_de]}),i})(),vde=(()=>{const e=class{};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=gr({type:e}),e.\u0275inj=Ji({imports:[lC]}),i})(),Mde=(()=>{const e=class{};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=gr({type:e}),e.\u0275inj=Ji({imports:[lC]}),i})(),bde=(()=>{const e=class{};let i=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=gr({type:e,bootstrap:[yde]}),e.\u0275inj=Ji({imports:[nL,qY,QK,eZ,CZ,Xw,mde,vde,Mde]}),i})();zq().bootstrapModule(bde).catch(i=>console.error(i))}},wn=>{wn(wn.s=280)}]);